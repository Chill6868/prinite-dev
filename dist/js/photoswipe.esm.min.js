"use strict";function ownKeys(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(i),!0).forEach(function(t){_defineProperty(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function _defineProperty(t,e,i){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _callSuper(t,e,i){return e=_getPrototypeOf(e),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(e,i||[],_getPrototypeOf(t).constructor):e.apply(t,i))}function _possibleConstructorReturn(t,e){if(e&&("object"==_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function(){return!!t})()}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===e?String:Number)(t);i=i.call(t,e||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}function createElement(t,e,i){e=document.createElement(e);return t&&(e.className=t),i&&i.appendChild(e),e}function equalizePoints(t,e){return t.x=e.x,t.y=e.y,void 0!==e.id&&(t.id=e.id),t}function roundPoint(t){t.x=Math.round(t.x),t.y=Math.round(t.y)}function getDistanceBetween(t,e){var i=Math.abs(t.x-e.x),t=Math.abs(t.y-e.y);return Math.sqrt(i*i+t*t)}function pointsEqual(t,e){return t.x===e.x&&t.y===e.y}function clamp(t,e,i){return Math.min(Math.max(t,e),i)}function toTransformString(t,e,i){t="translate3d(".concat(t,"px,").concat(e||0,"px,0)");return void 0!==i&&(t+=" scale3d(".concat(i,",").concat(i,",1)")),t}function setTransform(t,e,i,n){t.style.transform=toTransformString(e,i,n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var defaultCSSEasing="cubic-bezier(.4,0,.22,1)";function setTransitionStyle(t,e,i,n){t.style.transition=e?"".concat(e," ").concat(i,"ms ").concat(n||defaultCSSEasing):"none"}function setWidthHeight(t,e,i){t.style.width="number"==typeof e?"".concat(e,"px"):e,t.style.height="number"==typeof i?"".concat(i,"px"):i}function removeTransitionStyle(t){setTransitionStyle(t)}function decodeImage(i){return"decode"in i?i.decode().catch(function(){}):i.complete?Promise.resolve(i):new Promise(function(t,e){i.onload=function(){return t(i)},i.onerror=e})}var LOAD_STATE={IDLE:"idle",LOADING:"loading",LOADED:"loaded",ERROR:"error"};function specialKeyUsed(t){return"button"in t&&1===t.button||t.ctrlKey||t.metaKey||t.altKey||t.shiftKey}function getElementsFromOption(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document,n=[];return t instanceof Element?n=[t]:t instanceof NodeList||Array.isArray(t)?n=Array.from(t):(t="string"==typeof t?t:e)&&(n=Array.from(i.querySelectorAll(t))),n}function isSafari(){return!(!navigator.vendor||!navigator.vendor.match(/apple/i))}var supportsPassive=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){supportsPassive=!0}}))}catch(t){}var DOMEvents=function(){return _createClass(function t(){_classCallCheck(this,t),this._pool=[]},[{key:"add",value:function(t,e,i,n){this._toggleListener(t,e,i,n)}},{key:"remove",value:function(t,e,i,n){this._toggleListener(t,e,i,n,!0)}},{key:"removeAll",value:function(){var e=this;this._pool.forEach(function(t){e._toggleListener(t.target,t.type,t.listener,t.passive,!0,!0)}),this._pool=[]}},{key:"_toggleListener",value:function(i,t,n,s,o,a){var r,l=this;i&&(r=o?"removeEventListener":"addEventListener",t.split(" ").forEach(function(e){var t;e&&(a||(o?l._pool=l._pool.filter(function(t){return t.type!==e||t.listener!==n||t.target!==i}):l._pool.push({target:i,type:e,listener:n,passive:s})),t=!!supportsPassive&&{passive:s||!1},i[r](e,n,t))}))}}])}();function getViewportSize(t,e){if(t.getViewportSizeFn){t=t.getViewportSizeFn(t,e);if(t)return t}return{x:document.documentElement.clientWidth,y:window.innerHeight}}function parsePaddingOption(t,e,i,n,s){var o=0;return e.paddingFn?o=e.paddingFn(i,n,s)[t]:e.padding?o=e.padding[t]:e[i="padding"+t[0].toUpperCase()+t.slice(1)]&&(o=e[i]),Number(o)||0}function getPanAreaSize(t,e,i,n){return{x:e.x-parsePaddingOption("left",t,e,i,n)-parsePaddingOption("right",t,e,i,n),y:e.y-parsePaddingOption("top",t,e,i,n)-parsePaddingOption("bottom",t,e,i,n)}}var PanBounds=function(){return _createClass(function t(e){_classCallCheck(this,t),this.slide=e,this.currZoomLevel=1,this.center={x:0,y:0},this.max={x:0,y:0},this.min={x:0,y:0}},[{key:"update",value:function(t){this.currZoomLevel=t,this.slide.width?(this._updateAxis("x"),this._updateAxis("y"),this.slide.pswp.dispatch("calcBounds",{slide:this.slide})):this.reset()}},{key:"_updateAxis",value:function(t){var e=this.slide.pswp,i=this.slide["x"===t?"width":"height"]*this.currZoomLevel,e=parsePaddingOption("x"===t?"left":"top",e.options,e.viewportSize,this.slide.data,this.slide.index),n=this.slide.panAreaSize[t];this.center[t]=Math.round((n-i)/2)+e,this.max[t]=n<i?Math.round(n-i)+e:this.center[t],this.min[t]=n<i?e:this.center[t]}},{key:"reset",value:function(){this.center.x=0,this.center.y=0,this.max.x=0,this.max.y=0,this.min.x=0,this.min.y=0}},{key:"correctPan",value:function(t,e){return clamp(e,this.max[t],this.min[t])}}])}(),MAX_IMAGE_WIDTH=4e3,ZoomLevel=function(){return _createClass(function t(e,i,n,s){_classCallCheck(this,t),this.pswp=s,this.options=e,this.itemData=i,this.index=n,this.panAreaSize=null,this.elementSize=null,this.fit=1,this.fill=1,this.vFill=1,this.initial=1,this.secondary=1,this.max=1,this.min=1},[{key:"update",value:function(t,e,i){t={x:t,y:e},this.elementSize=t,e=(this.panAreaSize=i).x/t.x,i=i.y/t.y;this.fit=Math.min(1,e<i?e:i),this.fill=Math.min(1,i<e?e:i),this.vFill=Math.min(1,i),this.initial=this._getInitial(),this.secondary=this._getSecondary(),this.max=Math.max(this.initial,this.secondary,this._getMax()),this.min=Math.min(this.fit,this.initial,this.secondary),this.pswp&&this.pswp.dispatch("zoomLevelsUpdate",{zoomLevels:this,slideData:this.itemData})}},{key:"_parseZoomLevelOption",value:function(t){t=this.options[t+"ZoomLevel"];if(t)return"function"==typeof t?t(this):"fill"===t?this.fill:"fit"===t?this.fit:Number(t)}},{key:"_getSecondary",value:function(){var t=this._parseZoomLevelOption("secondary");return t||(t=Math.min(1,3*this.fit),this.elementSize&&t*this.elementSize.x>MAX_IMAGE_WIDTH&&(t=MAX_IMAGE_WIDTH/this.elementSize.x)),t}},{key:"_getInitial",value:function(){return this._parseZoomLevelOption("initial")||this.fit}},{key:"_getMax",value:function(){return this._parseZoomLevelOption("max")||Math.max(1,4*this.fit)}}])}(),Slide=function(){return _createClass(function t(e,i,n){_classCallCheck(this,t),this.data=e,this.index=i,this.pswp=n,this.isActive=i===n.currIndex,this.currentResolution=0,this.panAreaSize={x:0,y:0},this.pan={x:0,y:0},this.isFirstSlide=this.isActive&&!n.opener.isOpen,this.zoomLevels=new ZoomLevel(n.options,e,i,n),this.pswp.dispatch("gettingData",{slide:this,data:this.data,index:i}),this.content=this.pswp.contentLoader.getContentBySlide(this),this.container=createElement("pswp__zoom-wrap","div"),this.holderElement=null,this.currZoomLevel=1,this.width=this.content.width,this.height=this.content.height,this.heavyAppended=!1,this.bounds=new PanBounds(this),this.prevDisplayedWidth=-1,this.prevDisplayedHeight=-1,this.pswp.dispatch("slideInit",{slide:this})},[{key:"setIsActive",value:function(t){t&&!this.isActive?this.activate():!t&&this.isActive&&this.deactivate()}},{key:"append",value:function(t){this.holderElement=t,this.container.style.transformOrigin="0 0",this.data&&(this.calculateSize(),this.load(),this.updateContentSize(),this.appendHeavy(),this.holderElement.appendChild(this.container),this.zoomAndPanToInitial(),this.pswp.dispatch("firstZoomPan",{slide:this}),this.applyCurrentZoomPan(),this.pswp.dispatch("afterSetContent",{slide:this}),this.isActive)&&this.activate()}},{key:"load",value:function(){this.content.load(!1),this.pswp.dispatch("slideLoad",{slide:this})}},{key:"appendHeavy",value:function(){var t=this.pswp;this.heavyAppended||!t.opener.isOpen||t.mainScroll.isShifted()||(this.isActive,0)||(this.pswp.dispatch("appendHeavy",{slide:this}).defaultPrevented||(this.heavyAppended=!0,this.content.append(),this.pswp.dispatch("appendHeavyContent",{slide:this})))}},{key:"activate",value:function(){this.isActive=!0,this.appendHeavy(),this.content.activate(),this.pswp.dispatch("slideActivate",{slide:this})}},{key:"deactivate",value:function(){this.isActive=!1,this.content.deactivate(),this.currZoomLevel!==this.zoomLevels.initial&&this.calculateSize(),this.currentResolution=0,this.zoomAndPanToInitial(),this.applyCurrentZoomPan(),this.updateContentSize(),this.pswp.dispatch("slideDeactivate",{slide:this})}},{key:"destroy",value:function(){this.content.hasSlide=!1,this.content.remove(),this.container.remove(),this.pswp.dispatch("slideDestroy",{slide:this})}},{key:"resize",value:function(){this.currZoomLevel!==this.zoomLevels.initial&&this.isActive?(this.calculateSize(),this.bounds.update(this.currZoomLevel),this.panTo(this.pan.x,this.pan.y)):(this.calculateSize(),this.currentResolution=0,this.zoomAndPanToInitial(),this.applyCurrentZoomPan(),this.updateContentSize())}},{key:"updateContentSize",value:function(t){var e,i=this.currentResolution||this.zoomLevels.initial;i&&(e=Math.round(this.width*i)||this.pswp.viewportSize.x,i=Math.round(this.height*i)||this.pswp.viewportSize.y,this.sizeChanged(e,i)||t)&&this.content.setDisplayedSize(e,i)}},{key:"sizeChanged",value:function(t,e){return(t!==this.prevDisplayedWidth||e!==this.prevDisplayedHeight)&&(this.prevDisplayedWidth=t,this.prevDisplayedHeight=e,!0)}},{key:"getPlaceholderElement",value:function(){var t;return null==(t=this.content.placeholder)?void 0:t.element}},{key:"zoomTo",value:function(t,e,i,n){var s,o=this,a=this.pswp;this.isZoomable()&&!a.mainScroll.isShifted()&&(a.dispatch("beforeZoomTo",{destZoomLevel:t,centerPoint:e,transitionDuration:i}),a.animations.stopAllPan(),s=this.currZoomLevel,n||(t=clamp(t,this.zoomLevels.min,this.zoomLevels.max)),this.setZoomLevel(t),this.pan.x=this.calculateZoomToPanOffset("x",e,s),this.pan.y=this.calculateZoomToPanOffset("y",e,s),roundPoint(this.pan),n=function(){o._setResolution(t),o.applyCurrentZoomPan()},i?a.animations.startTransition({isPan:!0,name:"zoomTo",target:this.container,transform:this.getCurrentTransform(),onComplete:n,duration:i,easing:a.options.easing}):n())}},{key:"toggleZoom",value:function(t){this.zoomTo(this.currZoomLevel===this.zoomLevels.initial?this.zoomLevels.secondary:this.zoomLevels.initial,t,this.pswp.options.zoomAnimationDuration)}},{key:"setZoomLevel",value:function(t){this.currZoomLevel=t,this.bounds.update(this.currZoomLevel)}},{key:"calculateZoomToPanOffset",value:function(t,e,i){if(0==this.bounds.max[t]-this.bounds.min[t])return this.bounds.center[t];e=e||this.pswp.getViewportCenterPoint(),i=i||this.zoomLevels.initial;i=this.currZoomLevel/i;return this.bounds.correctPan(t,(this.pan[t]-e[t])*i+e[t])}},{key:"panTo",value:function(t,e){this.pan.x=this.bounds.correctPan("x",t),this.pan.y=this.bounds.correctPan("y",e),this.applyCurrentZoomPan()}},{key:"isPannable",value:function(){return Boolean(this.width)&&this.currZoomLevel>this.zoomLevels.fit}},{key:"isZoomable",value:function(){return Boolean(this.width)&&this.content.isZoomable()}},{key:"applyCurrentZoomPan",value:function(){this._applyZoomTransform(this.pan.x,this.pan.y,this.currZoomLevel),this===this.pswp.currSlide&&this.pswp.dispatch("zoomPanUpdate",{slide:this})}},{key:"zoomAndPanToInitial",value:function(){this.currZoomLevel=this.zoomLevels.initial,this.bounds.update(this.currZoomLevel),equalizePoints(this.pan,this.bounds.center),this.pswp.dispatch("initialZoomPan",{slide:this})}},{key:"_applyZoomTransform",value:function(t,e,i){i/=this.currentResolution||this.zoomLevels.initial,setTransform(this.container,t,e,i)}},{key:"calculateSize",value:function(){var t=this.pswp;equalizePoints(this.panAreaSize,getPanAreaSize(t.options,t.viewportSize,this.data,this.index)),this.zoomLevels.update(this.width,this.height,this.panAreaSize),t.dispatch("calcSlideSize",{slide:this})}},{key:"getCurrentTransform",value:function(){var t=this.currZoomLevel/(this.currentResolution||this.zoomLevels.initial);return toTransformString(this.pan.x,this.pan.y,t)}},{key:"_setResolution",value:function(t){t!==this.currentResolution&&(this.currentResolution=t,this.updateContentSize(),this.pswp.dispatch("resolutionChanged"))}}])}(),PAN_END_FRICTION=.35,VERTICAL_DRAG_FRICTION=.6,MIN_RATIO_TO_CLOSE=.4,MIN_NEXT_SLIDE_SPEED=.5;function project(t,e){return t*e/(1-e)}var DragHandler=function(){return _createClass(function t(e){_classCallCheck(this,t),this.gestures=e,this.pswp=e.pswp,this.startPan={x:0,y:0}},[{key:"start",value:function(){this.pswp.currSlide&&equalizePoints(this.startPan,this.pswp.currSlide.pan),this.pswp.animations.stopAll()}},{key:"change",value:function(){var t=this.gestures,e=t.p1,i=t.prevP1,t=t.dragAxis,n=this.pswp.currSlide;"y"===t&&this.pswp.options.closeOnVerticalDrag&&n&&n.currZoomLevel<=n.zoomLevels.fit&&!this.gestures.isMultitouch?(t=n.pan.y+(e.y-i.y),this.pswp.dispatch("verticalDrag",{panY:t}).defaultPrevented||(this._setPanWithFriction("y",t,VERTICAL_DRAG_FRICTION),e=1-Math.abs(this._getVerticalDragRatio(n.pan.y)),this.pswp.applyBgOpacity(e),n.applyCurrentZoomPan())):this._panOrMoveMainScroll("x")||(this._panOrMoveMainScroll("y"),n&&(roundPoint(n.pan),n.applyCurrentZoomPan()))}},{key:"end",value:function(){var t,e=this.gestures.velocity,i=this.pswp,n=i.mainScroll,i=i.currSlide,s=0;this.pswp.animations.stopAll(),n.isShifted()&&(t=(n.x-n.getCurrSlideX())/this.pswp.viewportSize.x,e.x<-MIN_NEXT_SLIDE_SPEED&&t<0||e.x<.1&&t<-.5?(s=1,e.x=Math.min(e.x,0)):(e.x>MIN_NEXT_SLIDE_SPEED&&0<t||-.1<e.x&&.5<t)&&(s=-1,e.x=Math.max(e.x,0)),n.moveIndexBy(s,!0,e.x)),i&&i.currZoomLevel>i.zoomLevels.max||this.gestures.isMultitouch?this.gestures.zoomLevels.correctZoomPan(!0):(this._finishPanGestureForAxis("x"),this._finishPanGestureForAxis("y"))}},{key:"_finishPanGestureForAxis",value:function(e){var i=this,t=this.gestures.velocity,n=this.pswp.currSlide;if(n){var s=n.pan,o=n.bounds,a=s[e],r=this.pswp.bgOpacity<1&&"y"===e,l=a+project(t[e],.995);if(r){var h=this._getVerticalDragRatio(a),c=this._getVerticalDragRatio(l);if(h<0&&c<-MIN_RATIO_TO_CLOSE||0<h&&MIN_RATIO_TO_CLOSE<c)return void this.pswp.close()}var p,u,d=o.correctPan(e,l);a!==d&&(p=this.pswp.bgOpacity,u=d-a,this.pswp.animations.startSpring({name:"panGesture"+e,isPan:!0,start:a,end:d,velocity:t[e],dampingRatio:d===l?1:.82,onUpdate:function(t){r&&i.pswp.bgOpacity<1&&i.pswp.applyBgOpacity(clamp(p+(1-p)*(1-(d-t)/u),0,1)),s[e]=Math.floor(t),n.applyCurrentZoomPan()}}))}}},{key:"_panOrMoveMainScroll",value:function(t){var e=this.gestures,i=e.p1,n=e.dragAxis,s=e.prevP1,e=e.isMultitouch,o=this.pswp,a=o.currSlide,o=o.mainScroll,i=i[t]-s[t],s=o.x+i;if(i&&a){if("x"===t&&!a.isPannable()&&!e)return o.moveTo(s,!0),!0;var r=a.bounds,a=a.pan[t]+i;if(this.pswp.options.allowPanToNext&&"x"===n&&"x"===t&&!e){var n=o.getCurrSlideX(),e=o.x-n,i=0<i,l=!i;if(a>r.min[t]&&i){if(r.min[t]<=this.startPan[t])return o.moveTo(s,!0),!0;this._setPanWithFriction(t,a)}else if(a<r.max[t]&&l){if(this.startPan[t]<=r.max[t])return o.moveTo(s,!0),!0;this._setPanWithFriction(t,a)}else if(0!=e){if(0<e)return o.moveTo(Math.max(s,n),!0),!0;if(e<0)return o.moveTo(Math.min(s,n),!0),!0}else this._setPanWithFriction(t,a)}else"y"===t&&(o.isShifted()||r.min.y===r.max.y)||this._setPanWithFriction(t,a)}return!1}},{key:"_getVerticalDragRatio",value:function(t){return(t-(null!=(t=null==(t=this.pswp.currSlide)?void 0:t.bounds.center.y)?t:0))/(this.pswp.viewportSize.y/3)}},{key:"_setPanWithFriction",value:function(t,e,i){var n,s=this.pswp.currSlide;s&&(n=s.pan,s.bounds.correctPan(t,e)!==e||i?(s=Math.round(e-n[t]),n[t]+=s*(i||PAN_END_FRICTION)):n[t]=e)}}])}(),UPPER_ZOOM_FRICTION=.05,LOWER_ZOOM_FRICTION=.15;function getZoomPointsCenter(t,e,i){return t.x=(e.x+i.x)/2,t.y=(e.y+i.y)/2,t}var ZoomHandler=function(){return _createClass(function t(e){_classCallCheck(this,t),this.gestures=e,this._startPan={x:0,y:0},this._startZoomPoint={x:0,y:0},this._zoomPoint={x:0,y:0},this._wasOverFitZoomLevel=!1,this._startZoomLevel=1},[{key:"start",value:function(){var t=this.gestures.pswp.currSlide;t&&(this._startZoomLevel=t.currZoomLevel,equalizePoints(this._startPan,t.pan)),this.gestures.pswp.animations.stopAllPan(),this._wasOverFitZoomLevel=!1}},{key:"change",value:function(){var t,e,i=this.gestures,n=i.p1,s=i.startP1,o=i.p2,a=i.startP2,i=i.pswp,r=i.currSlide;r&&(t=r.zoomLevels.min,e=r.zoomLevels.max,r.isZoomable())&&!i.mainScroll.isShifted()&&(getZoomPointsCenter(this._startZoomPoint,s,a),getZoomPointsCenter(this._zoomPoint,n,o),(s=1/getDistanceBetween(s,a)*getDistanceBetween(n,o)*this._startZoomLevel)>r.zoomLevels.initial+r.zoomLevels.initial/15&&(this._wasOverFitZoomLevel=!0),s<t?i.options.pinchToClose&&!this._wasOverFitZoomLevel&&this._startZoomLevel<=r.zoomLevels.initial?i.dispatch("pinchClose",{bgOpacity:a=1-(t-s)/(t/1.2)}).defaultPrevented||i.applyBgOpacity(a):s=t-(t-s)*LOWER_ZOOM_FRICTION:e<s&&(s=e+(s-e)*UPPER_ZOOM_FRICTION),r.pan.x=this._calculatePanForZoomLevel("x",s),r.pan.y=this._calculatePanForZoomLevel("y",s),r.setZoomLevel(s),r.applyCurrentZoomPan())}},{key:"end",value:function(){var t=this.gestures.pswp,e=t.currSlide;(!e||e.currZoomLevel<e.zoomLevels.initial)&&!this._wasOverFitZoomLevel&&t.options.pinchToClose?t.close():this.correctZoomPan()}},{key:"_calculatePanForZoomLevel",value:function(t,e){e/=this._startZoomLevel;return this._zoomPoint[t]-(this._startZoomPoint[t]-this._startPan[t])*e}},{key:"correctZoomPan",value:function(t){var i,n,s,o,a,r,l,h,c=this.gestures.pswp,p=c.currSlide;null!=p&&p.isZoomable()&&(0===this._zoomPoint.x&&(t=!0),i=p.currZoomLevel,n=!0,s=i<p.zoomLevels.initial?p.zoomLevels.initial:i>p.zoomLevels.max?p.zoomLevels.max:(n=!1,i),o=c.bgOpacity,a=c.bgOpacity<1,r=equalizePoints({x:0,y:0},p.pan),l=equalizePoints({x:0,y:0},r),t&&(this._zoomPoint.x=0,this._zoomPoint.y=0,this._startZoomPoint.x=0,this._startZoomPoint.y=0,this._startZoomLevel=i,equalizePoints(this._startPan,r)),n&&(l={x:this._calculatePanForZoomLevel("x",s),y:this._calculatePanForZoomLevel("y",s)}),p.setZoomLevel(s),l={x:p.bounds.correctPan("x",l.x),y:p.bounds.correctPan("y",l.y)},p.setZoomLevel(i),(h=!pointsEqual(l,r))||n||a?(c.animations.stopAllPan(),c.animations.startSpring({isPan:!0,start:0,end:1e3,velocity:0,dampingRatio:1,naturalFrequency:40,onUpdate:function(t){var e;t/=1e3,(h||n)&&(h&&(p.pan.x=r.x+(l.x-r.x)*t,p.pan.y=r.y+(l.y-r.y)*t),n&&(e=i+(s-i)*t,p.setZoomLevel(e)),p.applyCurrentZoomPan()),a&&c.bgOpacity<1&&c.applyBgOpacity(clamp(o+(1-o)*t,0,1))},onComplete:function(){p._setResolution(s),p.applyCurrentZoomPan()}})):(p._setResolution(s),p.applyCurrentZoomPan()))}}])}();function didTapOnMainContent(t){return!!t.target.closest(".pswp__container")}var TapHandler=function(){return _createClass(function t(e){_classCallCheck(this,t),this.gestures=e},[{key:"click",value:function(t,e){var i=e.target.classList,n=i.contains("pswp__img"),i=i.contains("pswp__item")||i.contains("pswp__zoom-wrap");n?this._doClickOrTapAction("imageClick",t,e):i&&this._doClickOrTapAction("bgClick",t,e)}},{key:"tap",value:function(t,e){didTapOnMainContent(e)&&this._doClickOrTapAction("tap",t,e)}},{key:"doubleTap",value:function(t,e){didTapOnMainContent(e)&&this._doClickOrTapAction("doubleTap",t,e)}},{key:"_doClickOrTapAction",value:function(t,e,i){var n,s=this.gestures.pswp,o=s.currSlide,t=t+"Action",a=s.options[t];if(!s.dispatch(t,{point:e,originalEvent:i}).defaultPrevented)if("function"==typeof a)a.call(s,e,i);else switch(a){case"close":case"next":s[a]();break;case"zoom":null!=o&&o.toggleZoom(e);break;case"zoom-or-close":null!=o&&o.isZoomable()&&o.zoomLevels.secondary!==o.zoomLevels.initial?o.toggleZoom(e):s.options.clickToCloseNonZoomable&&s.close();break;case"toggle-controls":null!=(n=this.gestures.pswp.element)&&n.classList.toggle("pswp--ui-visible")}}}])}(),AXIS_SWIPE_HYSTERISIS=10,DOUBLE_TAP_DELAY=300,MIN_TAP_DISTANCE=25,Gestures=function(){return _createClass(function t(e){var i=this;_classCallCheck(this,t),this.pswp=e,this.dragAxis=null,this.p1={x:0,y:0},this.p2={x:0,y:0},this.prevP1={x:0,y:0},this.prevP2={x:0,y:0},this.startP1={x:0,y:0},this.startP2={x:0,y:0},this.velocity={x:0,y:0},this._lastStartP1={x:0,y:0},this._intervalP1={x:0,y:0},this._numActivePoints=0,this._ongoingPointers=[],this._touchEventEnabled="ontouchstart"in window,this._pointerEventEnabled=!!window.PointerEvent,this.supportsTouch=this._touchEventEnabled||this._pointerEventEnabled&&1<navigator.maxTouchPoints,this._numActivePoints=0,this._intervalTime=0,this._velocityCalculated=!1,this.isMultitouch=!1,this.isDragging=!1,this.isZooming=!1,this.raf=null,this._tapTimer=null,this.supportsTouch||(e.options.allowPanToNext=!1),this.drag=new DragHandler(this),this.zoomLevels=new ZoomHandler(this),this.tapHandler=new TapHandler(this),e.on("bindEvents",function(){e.events.add(e.scrollWrap,"click",i._onClick.bind(i)),i._pointerEventEnabled?i._bindEvents("pointer","down","up","cancel"):i._touchEventEnabled?(i._bindEvents("touch","start","end","cancel"),e.scrollWrap&&(e.scrollWrap.ontouchmove=function(){},e.scrollWrap.ontouchend=function(){})):i._bindEvents("mouse","down","up")})},[{key:"_bindEvents",value:function(t,e,i,n){var s=this.pswp,o=s.events,n=n?t+n:"";o.add(s.scrollWrap,t+e,this.onPointerDown.bind(this)),o.add(window,t+"move",this.onPointerMove.bind(this)),o.add(window,t+i,this.onPointerUp.bind(this)),n&&o.add(s.scrollWrap,n,this.onPointerUp.bind(this))}},{key:"onPointerDown",value:function(t){var e,i="mousedown"===t.type||"mouse"===t.pointerType;i&&0<t.button||((e=this.pswp).opener.isOpen?e.dispatch("pointerDown",{originalEvent:t}).defaultPrevented||(i&&(e.mouseDetected(),this._preventPointerEventBehaviour(t,"down")),e.animations.stopAll(),this._updatePoints(t,"down"),1===this._numActivePoints&&(this.dragAxis=null,equalizePoints(this.startP1,this.p1)),1<this._numActivePoints?(this._clearTapTimer(),this.isMultitouch=!0):this.isMultitouch=!1):t.preventDefault())}},{key:"onPointerMove",value:function(t){this._preventPointerEventBehaviour(t,"move"),this._numActivePoints&&(this._updatePoints(t,"move"),this.pswp.dispatch("pointerMove",{originalEvent:t}).defaultPrevented||(1!==this._numActivePoints||this.isDragging?1<this._numActivePoints&&!this.isZooming&&(this._finishDrag(),this.isZooming=!0,this._updateStartPoints(),this.zoomLevels.start(),this._rafStopLoop(),this._rafRenderLoop()):(this.dragAxis||this._calculateDragDirection(),this.dragAxis&&!this.isDragging&&(this.isZooming&&(this.isZooming=!1,this.zoomLevels.end()),this.isDragging=!0,this._clearTapTimer(),this._updateStartPoints(),this._intervalTime=Date.now(),this._velocityCalculated=!1,equalizePoints(this._intervalP1,this.p1),this.velocity.x=0,this.velocity.y=0,this.drag.start(),this._rafStopLoop(),this._rafRenderLoop()))))}},{key:"_finishDrag",value:function(){this.isDragging&&(this.isDragging=!1,this._velocityCalculated||this._updateVelocity(!0),this.drag.end(),this.dragAxis=null)}},{key:"onPointerUp",value:function(t){this._numActivePoints&&(this._updatePoints(t,"up"),this.pswp.dispatch("pointerUp",{originalEvent:t}).defaultPrevented||(0===this._numActivePoints&&(this._rafStopLoop(),this.isDragging?this._finishDrag():this.isZooming||this.isMultitouch||this._finishTap(t)),this._numActivePoints<2&&this.isZooming&&(this.isZooming=!1,this.zoomLevels.end(),1===this._numActivePoints)&&(this.dragAxis=null,this._updateStartPoints())))}},{key:"_rafRenderLoop",value:function(){(this.isDragging||this.isZooming)&&(this._updateVelocity(),this.isDragging?pointsEqual(this.p1,this.prevP1)||this.drag.change():pointsEqual(this.p1,this.prevP1)&&pointsEqual(this.p2,this.prevP2)||this.zoomLevels.change(),this._updatePrevPoints(),this.raf=requestAnimationFrame(this._rafRenderLoop.bind(this)))}},{key:"_updateVelocity",value:function(t){var e=Date.now(),i=e-this._intervalTime;i<50&&!t||(this.velocity.x=this._getVelocity("x",i),this.velocity.y=this._getVelocity("y",i),this._intervalTime=e,equalizePoints(this._intervalP1,this.p1),this._velocityCalculated=!0)}},{key:"_finishTap",value:function(t){var e=this,i=this.pswp.mainScroll;i.isShifted()?i.moveIndexBy(0,!0):0<t.type.indexOf("cancel")||("mouseup"===t.type||"mouse"===t.pointerType?this.tapHandler.click(this.startP1,t):(i=this.pswp.options.doubleTapAction?DOUBLE_TAP_DELAY:0,this._tapTimer?(this._clearTapTimer(),getDistanceBetween(this._lastStartP1,this.startP1)<MIN_TAP_DISTANCE&&this.tapHandler.doubleTap(this.startP1,t)):(equalizePoints(this._lastStartP1,this.startP1),this._tapTimer=setTimeout(function(){e.tapHandler.tap(e.startP1,t),e._clearTapTimer()},i))))}},{key:"_clearTapTimer",value:function(){this._tapTimer&&(clearTimeout(this._tapTimer),this._tapTimer=null)}},{key:"_getVelocity",value:function(t,e){t=this.p1[t]-this._intervalP1[t];return 1<Math.abs(t)&&5<e?t/e:0}},{key:"_rafStopLoop",value:function(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null)}},{key:"_preventPointerEventBehaviour",value:function(t,e){this.pswp.applyFilters("preventPointerEvent",!0,t,e)&&t.preventDefault()}},{key:"_updatePoints",value:function(t,e){var i,n;this._pointerEventEnabled?(i=t,n=this._ongoingPointers.findIndex(function(t){return t.id===i.pointerId}),"up"===e&&-1<n?this._ongoingPointers.splice(n,1):"down"===e&&-1===n?this._ongoingPointers.push(this._convertEventPosToPoint(i,{x:0,y:0})):-1<n&&this._convertEventPosToPoint(i,this._ongoingPointers[n]),this._numActivePoints=this._ongoingPointers.length,0<this._numActivePoints&&equalizePoints(this.p1,this._ongoingPointers[0]),1<this._numActivePoints&&equalizePoints(this.p2,this._ongoingPointers[1])):(n=t,this._numActivePoints=0,-1<n.type.indexOf("touch")?n.touches&&0<n.touches.length&&(this._convertEventPosToPoint(n.touches[0],this.p1),this._numActivePoints++,1<n.touches.length)&&(this._convertEventPosToPoint(n.touches[1],this.p2),this._numActivePoints++):(this._convertEventPosToPoint(t,this.p1),"up"===e?this._numActivePoints=0:this._numActivePoints++))}},{key:"_updatePrevPoints",value:function(){equalizePoints(this.prevP1,this.p1),equalizePoints(this.prevP2,this.p2)}},{key:"_updateStartPoints",value:function(){equalizePoints(this.startP1,this.p1),equalizePoints(this.startP2,this.p2),this._updatePrevPoints()}},{key:"_calculateDragDirection",value:function(){var t;this.pswp.mainScroll.isShifted()?this.dragAxis="x":0!=(t=Math.abs(this.p1.x-this.startP1.x)-Math.abs(this.p1.y-this.startP1.y))&&(t=0<t?"x":"y",Math.abs(this.p1[t]-this.startP1[t])>=AXIS_SWIPE_HYSTERISIS)&&(this.dragAxis=t)}},{key:"_convertEventPosToPoint",value:function(t,e){return e.x=t.pageX-this.pswp.offset.x,e.y=t.pageY-this.pswp.offset.y,"pointerId"in t?e.id=t.pointerId:void 0!==t.identifier&&(e.id=t.identifier),e}},{key:"_onClick",value:function(t){this.pswp.mainScroll.isShifted()&&(t.preventDefault(),t.stopPropagation())}}])}(),MAIN_SCROLL_END_FRICTION=.35,MainScroll=function(){return _createClass(function t(e){_classCallCheck(this,t),this.pswp=e,this.x=0,this.slideWidth=0,this._currPositionIndex=0,this._prevPositionIndex=0,this._containerShiftIndex=-1,this.itemHolders=[]},[{key:"resize",value:function(i){var n=this,t=this.pswp,t=Math.round(t.viewportSize.x+t.viewportSize.x*t.options.spacing),s=t!==this.slideWidth;s&&(this.slideWidth=t,this.moveTo(this.getCurrSlideX())),this.itemHolders.forEach(function(t,e){s&&setTransform(t.el,(e+n._containerShiftIndex)*n.slideWidth),i&&t.slide&&t.slide.resize()})}},{key:"resetPosition",value:function(){this._currPositionIndex=0,this._prevPositionIndex=0,this.slideWidth=0,this._containerShiftIndex=-1}},{key:"appendHolders",value:function(){this.itemHolders=[];for(var t=0;t<3;t++){var e=createElement("pswp__item","div",this.pswp.container);e.setAttribute("role","group"),e.setAttribute("aria-roledescription","slide"),e.setAttribute("aria-hidden","true"),e.style.display=1===t?"block":"none",this.itemHolders.push({el:e})}}},{key:"canBeSwiped",value:function(){return 1<this.pswp.getNumItems()}},{key:"moveIndexBy",value:function(t,e,i){var n=this,s=this.pswp,o=s.potentialIndex+t,a=s.getNumItems(),r=(t=s.canLoop()?(o=s.getLoopedIndex(o),(r=(t+a)%a)<=a/2?r:r-a):(o<0?o=0:a<=o&&(o=a-1),o-s.potentialIndex),s.potentialIndex=o,this._currPositionIndex-=t,s.animations.stopMainScroll(),this.getCurrSlideX());return e?(s.animations.startSpring({isMainScroll:!0,start:this.x,end:r,velocity:i||0,naturalFrequency:30,dampingRatio:1,onUpdate:function(t){n.moveTo(t)},onComplete:function(){n.updateCurrItem(),s.appendHeavy()}}),o=s.potentialIndex-s.currIndex,s.canLoop()&&(o=(e=(o+a)%a)<=a/2?e:e-a),1<Math.abs(o)&&this.updateCurrItem()):(this.moveTo(r),this.updateCurrItem()),Boolean(t)}},{key:"getCurrSlideX",value:function(){return this.slideWidth*this._currPositionIndex}},{key:"isShifted",value:function(){return this.x!==this.getCurrSlideX()}},{key:"updateCurrItem",value:function(){var t,e=this.pswp,i=this._prevPositionIndex-this._currPositionIndex;if(i){this._prevPositionIndex=this._currPositionIndex,e.currIndex=e.potentialIndex;var n,s=Math.abs(i);3<=s&&(this._containerShiftIndex+=i+(0<i?-3:3),s=3,this.itemHolders.forEach(function(t){var e;null!=(e=t.slide)&&e.destroy(),t.slide=void 0}));for(var o=0;o<s;o++)0<i?(n=this.itemHolders.shift())&&(this.itemHolders[2]=n,this._containerShiftIndex++,setTransform(n.el,(this._containerShiftIndex+2)*this.slideWidth),e.setContent(n,e.currIndex-s+o+2)):(n=this.itemHolders.pop())&&(this.itemHolders.unshift(n),this._containerShiftIndex--,setTransform(n.el,this._containerShiftIndex*this.slideWidth),e.setContent(n,e.currIndex+s-o-2));50<Math.abs(this._containerShiftIndex)&&!this.isShifted()&&(this.resetPosition(),this.resize()),e.animations.stopAllPan(),this.itemHolders.forEach(function(t,e){t.slide&&t.slide.setIsActive(1===e)}),e.currSlide=null==(t=this.itemHolders[1])?void 0:t.slide,e.contentLoader.updateLazy(i),e.currSlide&&e.currSlide.applyCurrentZoomPan(),e.dispatch("change")}}},{key:"moveTo",value:function(t,e){var i,n;!this.pswp.canLoop()&&e&&(i=(this.slideWidth*this._currPositionIndex-t)/this.slideWidth,i+=this.pswp.currIndex,n=Math.round(t-this.x),i<0&&0<n||i>=this.pswp.getNumItems()-1&&n<0)&&(t=this.x+n*MAIN_SCROLL_END_FRICTION),this.x=t,this.pswp.container&&setTransform(this.pswp.container,t),this.pswp.dispatch("moveMainScroll",{x:t,dragging:null!=e&&e})}}])}(),KeyboardKeyCodesMap={Escape:27,z:90,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Tab:9},getKeyboardEventKey=function(t,e){return e?t:KeyboardKeyCodesMap[t]},Keyboard=function(){return _createClass(function t(e){var i=this,n=(_classCallCheck(this,t),this.pswp=e,this._wasFocused=!1,e.on("bindEvents",function(){e.options.trapFocus&&(e.options.initialPointerPos||i._focusRoot(),e.events.add(document,"focusin",i._onFocusIn.bind(i))),e.events.add(document,"keydown",i._onKeyDown.bind(i))}),document.activeElement);e.on("destroy",function(){e.options.returnFocus&&n&&i._wasFocused&&n.focus()})},[{key:"_focusRoot",value:function(){!this._wasFocused&&this.pswp.element&&(this.pswp.element.focus(),this._wasFocused=!0)}},{key:"_onKeyDown",value:function(t){var e=this.pswp;if(!e.dispatch("keydown",{originalEvent:t}).defaultPrevented&&!specialKeyUsed(t)){var i,n,s=!1,o="key"in t;switch(o?t.key:t.keyCode){case getKeyboardEventKey("Escape",o):e.options.escKey&&(i="close");break;case getKeyboardEventKey("z",o):i="toggleZoom";break;case getKeyboardEventKey("ArrowLeft",o):n="x";break;case getKeyboardEventKey("ArrowUp",o):n="y";break;case getKeyboardEventKey("ArrowRight",o):n="x",s=!0;break;case getKeyboardEventKey("ArrowDown",o):s=!0,n="y";break;case getKeyboardEventKey("Tab",o):this._focusRoot()}n&&(t.preventDefault(),o=e.currSlide,e.options.arrowKeys&&"x"===n&&1<e.getNumItems()?i=s?"next":"prev":o&&o.currZoomLevel>o.zoomLevels.fit&&(o.pan[n]+=s?-80:80,o.panTo(o.pan.x,o.pan.y))),i&&(t.preventDefault(),e[i]())}}},{key:"_onFocusIn",value:function(t){var e=this.pswp.template;e&&document!==t.target&&e!==t.target&&!e.contains(t.target)&&e.focus()}}])}(),DEFAULT_EASING="cubic-bezier(.4,0,.22,1)",CSSAnimation=function(){return _createClass(function t(e){var i=this,n=(_classCallCheck(this,t),(this.props=e).target),s=e.onComplete,o=e.transform,a=e.onFinish,r=e.duration,l=void 0===r?333:r,r=e.easing,h=void 0===r?DEFAULT_EASING:r,c=(this.onFinish=void 0===a?function(){}:a,o?"transform":"opacity"),p=null!=(r=e[c])?r:"";this._target=n,this._onComplete=s,this._finished=!1,this._onTransitionEnd=this._onTransitionEnd.bind(this),this._helperTimeout=setTimeout(function(){setTransitionStyle(n,c,l,h),i._helperTimeout=setTimeout(function(){n.addEventListener("transitionend",i._onTransitionEnd,!1),n.addEventListener("transitioncancel",i._onTransitionEnd,!1),i._helperTimeout=setTimeout(function(){i._finalizeAnimation()},l+500),n.style[c]=p},30)},0)},[{key:"_onTransitionEnd",value:function(t){t.target===this._target&&this._finalizeAnimation()}},{key:"_finalizeAnimation",value:function(){this._finished||(this._finished=!0,this.onFinish(),this._onComplete&&this._onComplete())}},{key:"destroy",value:function(){this._helperTimeout&&clearTimeout(this._helperTimeout),removeTransitionStyle(this._target),this._target.removeEventListener("transitionend",this._onTransitionEnd,!1),this._target.removeEventListener("transitioncancel",this._onTransitionEnd,!1),this._finished||this._finalizeAnimation()}}])}(),DEFAULT_NATURAL_FREQUENCY=12,DEFAULT_DAMPING_RATIO=.75,SpringEaser=function(){return _createClass(function t(e,i,n){_classCallCheck(this,t),this.velocity=1e3*e,this._dampingRatio=i||DEFAULT_DAMPING_RATIO,this._naturalFrequency=n||DEFAULT_NATURAL_FREQUENCY,this._dampedFrequency=this._naturalFrequency,this._dampingRatio<1&&(this._dampedFrequency*=Math.sqrt(1-this._dampingRatio*this._dampingRatio))},[{key:"easeFrame",value:function(t,e){var i,n,s=0,o=(e/=1e3,Math.pow(Math.E,-this._dampingRatio*this._naturalFrequency*e));return 1===this._dampingRatio?(i=this.velocity+this._naturalFrequency*t,this.velocity=(s=(t+i*e)*o)*-this._naturalFrequency+i*o):this._dampingRatio<1&&(i=1/this._dampedFrequency*(this._dampingRatio*this._naturalFrequency*t+this.velocity),n=Math.cos(this._dampedFrequency*e),e=Math.sin(this._dampedFrequency*e),this.velocity=(s=o*(t*n+i*e))*-this._naturalFrequency*this._dampingRatio+o*(-this._dampedFrequency*t*e+this._dampedFrequency*i*n)),s}}])}(),SpringAnimation=function(){return _createClass(function t(e){var i=this,n=(_classCallCheck(this,t),this.props=e,this._raf=0,e.start),s=e.end,o=e.velocity,a=e.onUpdate,r=e.onComplete,l=e.onFinish,h=e.dampingRatio,e=e.naturalFrequency,c=(this.onFinish=void 0===l?function(){}:l,new SpringEaser(o,h,e)),p=Date.now(),u=n-s;this._raf=requestAnimationFrame(function t(){i._raf&&(u=c.easeFrame(u,Date.now()-p),Math.abs(u)<1&&Math.abs(c.velocity)<50?(a(s),r&&r(),i.onFinish()):(p=Date.now(),a(u+s),i._raf=requestAnimationFrame(t)))})},[{key:"destroy",value:function(){0<=this._raf&&cancelAnimationFrame(this._raf),this._raf=0}}])}(),Animations=function(){return _createClass(function t(){_classCallCheck(this,t),this.activeAnimations=[]},[{key:"startSpring",value:function(t){this._start(t,!0)}},{key:"startTransition",value:function(t){this._start(t)}},{key:"_start",value:function(t,e){var i=this,n=new(e?SpringAnimation:CSSAnimation)(t);return this.activeAnimations.push(n),n.onFinish=function(){return i.stop(n)},n}},{key:"stop",value:function(t){t.destroy();t=this.activeAnimations.indexOf(t);-1<t&&this.activeAnimations.splice(t,1)}},{key:"stopAll",value:function(){this.activeAnimations.forEach(function(t){t.destroy()}),this.activeAnimations=[]}},{key:"stopAllPan",value:function(){this.activeAnimations=this.activeAnimations.filter(function(t){return!t.props.isPan||(t.destroy(),!1)})}},{key:"stopMainScroll",value:function(){this.activeAnimations=this.activeAnimations.filter(function(t){return!t.props.isMainScroll||(t.destroy(),!1)})}},{key:"isPanRunning",value:function(){return this.activeAnimations.some(function(t){return t.props.isPan})}}])}(),ScrollWheel=function(){return _createClass(function t(e){_classCallCheck(this,t),(this.pswp=e).events.add(e.element,"wheel",this._onWheel.bind(this))},[{key:"_onWheel",value:function(t){t.preventDefault();var e,i=this.pswp.currSlide,n=t.deltaX,s=t.deltaY;i&&!this.pswp.dispatch("wheel",{originalEvent:t}).defaultPrevented&&(t.ctrlKey||this.pswp.options.wheelToZoom?i.isZoomable()&&(e=-s,1===t.deltaMode?e*=.05:e*=t.deltaMode?1:.002,e=Math.pow(2,e),e=i.currZoomLevel*e,i.zoomTo(e,{x:t.clientX,y:t.clientY})):i.isPannable()&&(1===t.deltaMode&&(n*=18,s*=18),i.panTo(i.pan.x-n,i.pan.y-s)))}}])}();function addElementHTML(t){var e;return"string"==typeof t?t:t&&t.isCustomSVG?(t=t,e=(e='<svg aria-hidden="true" class="pswp__icn" viewBox="0 0 %d %d" width="%d" height="%d">').split("%d").join(t.size||32),t.outlineID&&(e+='<use class="pswp__icn-shadow" xlink:href="#'+t.outlineID+'"/>'),e+t.inner+"</svg>"):""}var UIElement=_createClass(function t(e,i){_classCallCheck(this,t);var n,s,o,a=i.name||i.className,r=i.html;!1!==e.options[a]&&("string"==typeof e.options[a+"SVG"]&&(r=e.options[a+"SVG"]),e.dispatch("uiElementCreate",{data:i}),o="",i.isButton?o=(o+="pswp__button ")+(i.className||"pswp__button--".concat(i.name)):o+=i.className||"pswp__".concat(i.name),s=i.isButton?i.tagName||"button":i.tagName||"div",n=createElement(o,s=s.toLowerCase()),i.isButton&&("button"===s&&(n.type="button"),o=i.title,s=i.ariaLabel,(o="string"==typeof e.options[a+"Title"]?e.options[a+"Title"]:o)&&(n.title=o),a=s||o)&&n.setAttribute("aria-label",a),n.innerHTML=addElementHTML(r),i.onInit&&i.onInit(n,e),i.onClick&&(n.onclick=function(t){"string"==typeof i.onClick?e[i.onClick]():"function"==typeof i.onClick&&i.onClick(t,n,e)}),s=i.appendTo||"bar",o=e.element,"bar"===s?(e.topBar||(e.topBar=createElement("pswp__top-bar pswp__hide-on-close","div",e.scrollWrap)),o=e.topBar):(n.classList.add("pswp__hide-on-close"),"wrapper"===s&&(o=e.scrollWrap)),null!=(a=o))&&a.appendChild(e.applyFilters("uiElement",n,i))});function initArrowButton(t,e,i){t.classList.add("pswp__button--arrow"),t.setAttribute("aria-controls","pswp__items"),e.on("change",function(){e.options.loop||(t.disabled=i?!(e.currIndex<e.getNumItems()-1):!(0<e.currIndex))})}var arrowPrev={name:"arrowPrev",className:"pswp__button--arrow--prev",title:"Previous",order:10,isButton:!0,appendTo:"wrapper",html:{isCustomSVG:!0,size:60,inner:'<path d="M29 43l-3 3-16-16 16-16 3 3-13 13 13 13z" id="pswp__icn-arrow"/>',outlineID:"pswp__icn-arrow"},onClick:"prev",onInit:initArrowButton},arrowNext={name:"arrowNext",className:"pswp__button--arrow--next",title:"Next",order:11,isButton:!0,appendTo:"wrapper",html:{isCustomSVG:!0,size:60,inner:'<use xlink:href="#pswp__icn-arrow"/>',outlineID:"pswp__icn-arrow"},onClick:"next",onInit:function(t,e){initArrowButton(t,e,!0)}},closeButton={name:"close",title:"Close",order:20,isButton:!0,html:{isCustomSVG:!0,inner:'<path d="M24 10l-2-2-6 6-6-6-2 2 6 6-6 6 2 2 6-6 6 6 2-2-6-6z" id="pswp__icn-close"/>',outlineID:"pswp__icn-close"},onClick:"close"},zoomButton={name:"zoom",title:"Zoom",order:10,isButton:!0,html:{isCustomSVG:!0,inner:'<path d="M17.426 19.926a6 6 0 1 1 1.5-1.5L23 22.5 21.5 24l-4.074-4.074z" id="pswp__icn-zoom"/><path fill="currentColor" class="pswp__zoom-icn-bar-h" d="M11 16v-2h6v2z"/><path fill="currentColor" class="pswp__zoom-icn-bar-v" d="M13 12h2v6h-2z"/>',outlineID:"pswp__icn-zoom"},onClick:"toggleZoom"},loadingIndicator={name:"preloader",appendTo:"bar",order:7,html:{isCustomSVG:!0,inner:'<path fill-rule="evenodd" clip-rule="evenodd" d="M21.2 16a5.2 5.2 0 1 1-5.2-5.2V8a8 8 0 1 0 8 8h-2.8Z" id="pswp__icn-loading"/>',outlineID:"pswp__icn-loading"},onInit:function(i,e){function n(t){o!==t&&r("active",o=t)}function s(){var t;null!=(t=e.currSlide)&&t.content.isLoading()?a=a||setTimeout(function(){var t;n(Boolean(null==(t=e.currSlide)?void 0:t.content.isLoading())),a=null},e.options.preloaderDelay):(n(!1),a&&(clearTimeout(a),a=null))}var o,a=null,r=function(t,e){i.classList.toggle("pswp__preloader--"+t,e)};e.on("change",s),e.on("loadComplete",function(t){e.currSlide===t.slide&&s()}),e.ui&&(e.ui.updatePreloaderVisibility=s)}},counterIndicator={name:"counter",order:5,onInit:function(t,e){e.on("change",function(){t.innerText=e.currIndex+1+e.options.indexIndicatorSep+e.getNumItems()})}};function setZoomedIn(t,e){t.classList.toggle("pswp--zoomed-in",e)}var UI=function(){return _createClass(function t(e){_classCallCheck(this,t),this.pswp=e,this.isRegistered=!1,this.uiElementsData=[],this.items=[],this.updatePreloaderVisibility=function(){},this._lastUpdatedZoomLevel=void 0},[{key:"init",value:function(){var e=this,i=this.pswp;this.isRegistered=!1,this.uiElementsData=[closeButton,arrowPrev,arrowNext,zoomButton,loadingIndicator,counterIndicator],i.dispatch("uiRegister"),this.uiElementsData.sort(function(t,e){return(t.order||0)-(e.order||0)}),this.items=[],this.isRegistered=!0,this.uiElementsData.forEach(function(t){e.registerElement(t)}),i.on("change",function(){var t;null!=(t=i.element)&&t.classList.toggle("pswp--one-slide",1===i.getNumItems())}),i.on("zoomPanUpdate",function(){return e._onZoomPanUpdate()})}},{key:"registerElement",value:function(t){this.isRegistered?this.items.push(new UIElement(this.pswp,t)):this.uiElementsData.push(t)}},{key:"_onZoomPanUpdate",value:function(){var t,e,i=this.pswp,n=i.template,s=i.currSlide,i=i.options;!this.pswp.opener.isClosing&&n&&s&&(t=s.currZoomLevel,(t=this.pswp.opener.isOpen?t:s.zoomLevels.initial)!==this._lastUpdatedZoomLevel)&&(this._lastUpdatedZoomLevel=t,e=s.zoomLevels.initial-s.zoomLevels.secondary,Math.abs(e)<.01||!s.isZoomable()?(setZoomedIn(n,!1),n.classList.remove("pswp--zoom-allowed")):(n.classList.add("pswp--zoom-allowed"),setZoomedIn(n,(t===s.zoomLevels.initial?s.zoomLevels.secondary:s.zoomLevels.initial)<=t),"zoom"!==i.imageClickAction&&"zoom-or-close"!==i.imageClickAction||n.classList.add("pswp--click-to-zoom")))}}])}();function getBoundsByElement(t){t=t.getBoundingClientRect();return{x:t.left,y:t.top,w:t.width}}function getCroppedBoundsByElement(t,e,i){var t=t.getBoundingClientRect(),n=t.width/e,s=t.height/i,n=s<n?n:s,s=(t.width-e*n)/2,i=(t.height-i*n)/2,e={x:t.left+s,y:t.top+i,w:e*n};return e.innerRect={w:t.width,h:t.height,x:s,y:i},e}function _getThumbBounds(t,e,i){var n,s,o=i.dispatch("thumbBounds",{index:t,itemData:e,instance:i});return o.thumbBounds||((o=e.element)&&!1!==i.options.thumbSelector&&(s=i.options.thumbSelector||"img",s=o.matches(s)?o:o.querySelector(s)),(s=i.applyFilters("thumbEl",s,e,t))&&(n=e.thumbCropped?getCroppedBoundsByElement(s,e.width||e.w||0,e.height||e.h||0):getBoundsByElement(s)),i.applyFilters("thumbBounds",n,e,t))}var PhotoSwipeEvent=function(){return _createClass(function t(e,i){_classCallCheck(this,t),this.type=e,this.defaultPrevented=!1,i&&Object.assign(this,i)},[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}])}(),Eventable=function(){return _createClass(function t(){_classCallCheck(this,t),this._listeners={},this._filters={},this.pswp=void 0,this.options=void 0},[{key:"addFilter",value:function(t,e){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:100;this._filters[t]||(this._filters[t]=[]),null!=(i=this._filters[t])&&i.push({fn:e,priority:n}),null!=(i=this._filters[t])&&i.sort(function(t,e){return t.priority-e.priority}),null!=(i=this.pswp)&&i.addFilter(t,e,n)}},{key:"removeFilter",value:function(t,e){this._filters[t]&&(this._filters[t]=this._filters[t].filter(function(t){return t.fn!==e})),this.pswp&&this.pswp.removeFilter(t,e)}},{key:"applyFilters",value:function(t){for(var e=this,i=arguments.length,n=new Array(1<i?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return null!=(t=this._filters[t])&&t.forEach(function(t){n[0]=t.fn.apply(e,n)}),n[0]}},{key:"on",value:function(t,e){var i;this._listeners[t]||(this._listeners[t]=[]),null!=(i=this._listeners[t])&&i.push(e),null!=(i=this.pswp)&&i.on(t,e)}},{key:"off",value:function(t,e){var i;this._listeners[t]&&(this._listeners[t]=this._listeners[t].filter(function(t){return e!==t})),null!=(i=this.pswp)&&i.off(t,e)}},{key:"dispatch",value:function(t,e){var i,n=this;return this.pswp?this.pswp.dispatch(t,e):(i=new PhotoSwipeEvent(t,e),null!=(e=this._listeners[t])&&e.forEach(function(t){t.call(n,i)}),i)}}])}(),Placeholder=function(){return _createClass(function t(e,i){_classCallCheck(this,t),this.element=createElement("pswp__img pswp__img--placeholder",e?"img":"div",i),e&&((i=this.element).decoding="async",i.alt="",i.src=e,i.setAttribute("role","presentation")),this.element.setAttribute("aria-hidden","true")},[{key:"setDisplayedSize",value:function(t,e){this.element&&("IMG"===this.element.tagName?(setWidthHeight(this.element,250,"auto"),this.element.style.transformOrigin="0 0",this.element.style.transform=toTransformString(0,0,t/250)):setWidthHeight(this.element,t,e))}},{key:"destroy",value:function(){var t;null!=(t=this.element)&&t.parentNode&&this.element.remove(),this.element=null}}])}(),Content=function(){return _createClass(function t(e,i,n){_classCallCheck(this,t),this.instance=i,this.data=e,this.index=n,this.element=void 0,this.placeholder=void 0,this.slide=void 0,this.displayedImageWidth=0,this.displayedImageHeight=0,this.width=Number(this.data.w)||Number(this.data.width)||0,this.height=Number(this.data.h)||Number(this.data.height)||0,this.isAttached=!1,this.hasSlide=!1,this.isDecoding=!1,this.state=LOAD_STATE.IDLE,this.data.type?this.type=this.data.type:this.data.src?this.type="image":this.type="html",this.instance.dispatch("contentInit",{content:this})},[{key:"removePlaceholder",value:function(){var t=this;this.placeholder&&!this.keepPlaceholder()&&setTimeout(function(){t.placeholder&&(t.placeholder.destroy(),t.placeholder=void 0)},1e3)}},{key:"load",value:function(t,e){var i;this.slide&&this.usePlaceholder()&&(this.placeholder?(i=this.placeholder.element)&&!i.parentElement&&this.slide.container.prepend(i):(i=this.instance.applyFilters("placeholderSrc",!(!this.data.msrc||!this.slide.isFirstSlide)&&this.data.msrc,this),this.placeholder=new Placeholder(i,this.slide.container))),this.element&&!e||this.instance.dispatch("contentLoad",{content:this,isLazy:t}).defaultPrevented||(this.isImageContent()?(this.element=createElement("pswp__img","img"),this.displayedImageWidth&&this.loadImage(t)):(this.element=createElement("pswp__content","div"),this.element.innerHTML=this.data.html||""),e&&this.slide&&this.slide.updateContentSize(!0))}},{key:"loadImage",value:function(t){var e,i=this;this.isImageContent()&&this.element&&!this.instance.dispatch("contentLoadImage",{content:this,isLazy:t}).defaultPrevented&&(t=this.element,this.updateSrcsetSizes(),this.data.srcset&&(t.srcset=this.data.srcset),t.src=null!=(e=this.data.src)?e:"",t.alt=null!=(e=this.data.alt)?e:"",this.state=LOAD_STATE.LOADING,t.complete?this.onLoaded():(t.onload=function(){i.onLoaded()},t.onerror=function(){i.onError()}))}},{key:"setSlide",value:function(t){this.slide=t,this.hasSlide=!0,this.instance=t.pswp}},{key:"onLoaded",value:function(){this.state=LOAD_STATE.LOADED,this.slide&&this.element&&(this.instance.dispatch("loadComplete",{slide:this.slide,content:this}),this.slide.isActive&&this.slide.heavyAppended&&!this.element.parentNode&&(this.append(),this.slide.updateContentSize(!0)),this.state!==LOAD_STATE.LOADED&&this.state!==LOAD_STATE.ERROR||this.removePlaceholder())}},{key:"onError",value:function(){this.state=LOAD_STATE.ERROR,this.slide&&(this.displayError(),this.instance.dispatch("loadComplete",{slide:this.slide,isError:!0,content:this}),this.instance.dispatch("loadError",{slide:this.slide,content:this}))}},{key:"isLoading",value:function(){return this.instance.applyFilters("isContentLoading",this.state===LOAD_STATE.LOADING,this)}},{key:"isError",value:function(){return this.state===LOAD_STATE.ERROR}},{key:"isImageContent",value:function(){return"image"===this.type}},{key:"setDisplayedSize",value:function(t,e){var i;this.element&&(this.placeholder&&this.placeholder.setDisplayedSize(t,e),this.instance.dispatch("contentResize",{content:this,width:t,height:e}).defaultPrevented||(setWidthHeight(this.element,t,e),this.isImageContent()&&!this.isError()&&(i=!this.displayedImageWidth&&t,this.displayedImageWidth=t,this.displayedImageHeight=e,i?this.loadImage(!1):this.updateSrcsetSizes(),this.slide)&&this.instance.dispatch("imageSizeChange",{slide:this.slide,width:t,height:e,content:this})))}},{key:"isZoomable",value:function(){return this.instance.applyFilters("isContentZoomable",this.isImageContent()&&this.state!==LOAD_STATE.ERROR,this)}},{key:"updateSrcsetSizes",value:function(){var t,e;this.isImageContent()&&this.element&&this.data.srcset&&(t=this.element,e=this.instance.applyFilters("srcsetSizesWidth",this.displayedImageWidth,this),!t.dataset.largestUsedSize||e>parseInt(t.dataset.largestUsedSize,10))&&(t.sizes=e+"px",t.dataset.largestUsedSize=String(e))}},{key:"usePlaceholder",value:function(){return this.instance.applyFilters("useContentPlaceholder",this.isImageContent(),this)}},{key:"lazyLoad",value:function(){this.instance.dispatch("contentLazyLoad",{content:this}).defaultPrevented||this.load(!0)}},{key:"keepPlaceholder",value:function(){return this.instance.applyFilters("isKeepingPlaceholder",this.isLoading(),this)}},{key:"destroy",value:function(){this.hasSlide=!1,this.slide=void 0,this.instance.dispatch("contentDestroy",{content:this}).defaultPrevented||(this.remove(),this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0),this.isImageContent()&&this.element&&(this.element.onload=null,this.element.onerror=null,this.element=void 0))}},{key:"displayError",value:function(){var t,e;this.slide&&((e=createElement("pswp__error-msg","div")).innerText=null!=(t=null==(t=this.instance.options)?void 0:t.errorMsg)?t:"",e=this.instance.applyFilters("contentErrorElement",e,this),this.element=createElement("pswp__content pswp__error-msg-container","div"),this.element.appendChild(e),this.slide.container.innerText="",this.slide.container.appendChild(this.element),this.slide.updateContentSize(!0),this.removePlaceholder())}},{key:"append",value:function(){var t,e=this;!this.isAttached&&this.element&&(this.isAttached=!0,this.state===LOAD_STATE.ERROR?this.displayError():this.instance.dispatch("contentAppend",{content:this}).defaultPrevented||(t="decode"in this.element,this.isImageContent()?t&&this.slide&&(!this.slide.isActive||isSafari())?(this.isDecoding=!0,this.element.decode().catch(function(){}).finally(function(){e.isDecoding=!1,e.appendImage()})):this.appendImage():this.slide&&!this.element.parentNode&&this.slide.container.appendChild(this.element)))}},{key:"activate",value:function(){!this.instance.dispatch("contentActivate",{content:this}).defaultPrevented&&this.slide&&(this.isImageContent()&&this.isDecoding&&!isSafari()?this.appendImage():this.isError()&&this.load(!1,!0),this.slide.holderElement)&&this.slide.holderElement.setAttribute("aria-hidden","false")}},{key:"deactivate",value:function(){this.instance.dispatch("contentDeactivate",{content:this}),this.slide&&this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","true")}},{key:"remove",value:function(){this.isAttached=!1,this.instance.dispatch("contentRemove",{content:this}).defaultPrevented||(this.element&&this.element.parentNode&&this.element.remove(),this.placeholder&&this.placeholder.element&&this.placeholder.element.remove())}},{key:"appendImage",value:function(){!this.isAttached||this.instance.dispatch("contentAppendImage",{content:this}).defaultPrevented||(this.slide&&this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element),this.state!==LOAD_STATE.LOADED&&this.state!==LOAD_STATE.ERROR)||this.removePlaceholder()}}])}(),MIN_SLIDES_TO_CACHE=5;function _lazyLoadData(t,e,i){var n,s=e.createContentFromData(t,i),o=e.options;return o&&(n=new ZoomLevel(o,t,-1),o=getPanAreaSize(o,e.pswp?e.pswp.viewportSize:getViewportSize(o,e),t,i),n.update(s.width,s.height,o)),s.lazyLoad(),n&&s.setDisplayedSize(Math.ceil(s.width*n.initial),Math.ceil(s.height*n.initial)),s}function lazyLoadSlide(t,e){var i=e.getItemData(t);if(!e.dispatch("lazyLoadSlide",{index:t,itemData:i}).defaultPrevented)return _lazyLoadData(i,e,t)}var ContentLoader=function(){return _createClass(function t(e){_classCallCheck(this,t),this.pswp=e,this.limit=Math.max(e.options.preload[0]+e.options.preload[1]+1,MIN_SLIDES_TO_CACHE),this._cachedItems=[]},[{key:"updateLazy",value:function(t){var e=this.pswp;if(!e.dispatch("lazyLoad").defaultPrevented){for(var i=e.options.preload,n=void 0===t||0<=t,s=0;s<=i[1];s++)this.loadSlideByIndex(e.currIndex+(n?s:-s));for(s=1;s<=i[0];s++)this.loadSlideByIndex(e.currIndex+(n?-s:s))}}},{key:"loadSlideByIndex",value:function(t){var t=this.pswp.getLoopedIndex(t);this.getContentByIndex(t)||(t=lazyLoadSlide(t,this.pswp))&&this.addToCache(t)}},{key:"getContentBySlide",value:function(t){var e=this.getContentByIndex(t.index);return e||(e=this.pswp.createContentFromData(t.data,t.index),this.addToCache(e)),e.setSlide(t),e}},{key:"addToCache",value:function(t){this.removeByIndex(t.index),this._cachedItems.push(t),this._cachedItems.length>this.limit&&-1!==(t=this._cachedItems.findIndex(function(t){return!t.isAttached&&!t.hasSlide}))&&this._cachedItems.splice(t,1)[0].destroy()}},{key:"removeByIndex",value:function(e){var t=this._cachedItems.findIndex(function(t){return t.index===e});-1!==t&&this._cachedItems.splice(t,1)}},{key:"getContentByIndex",value:function(e){return this._cachedItems.find(function(t){return t.index===e})}},{key:"destroy",value:function(){this._cachedItems.forEach(function(t){return t.destroy()}),this._cachedItems=[]}}])}(),PhotoSwipeBase=function(){function t(){return _classCallCheck(this,t),_callSuper(this,t,arguments)}return _inherits(t,Eventable),_createClass(t,[{key:"getNumItems",value:function(){var t=0,e=null==(e=this.options)?void 0:e.dataSource,t=(e&&"length"in e?t=e.length:e&&"gallery"in e&&(e.items||(e.items=this._getGalleryDOMElements(e.gallery)),e.items)&&(t=e.items.length),this.dispatch("numItems",{dataSource:e,numItems:t}));return this.applyFilters("numItems",t.numItems,e)}},{key:"createContentFromData",value:function(t,e){return new Content(t,this,e)}},{key:"getItemData",value:function(t){var e=null==(e=this.options)?void 0:e.dataSource,i={},e=(Array.isArray(e)?i=e[t]:e&&"gallery"in e&&(e.items||(e.items=this._getGalleryDOMElements(e.gallery)),i=e.items[t]),i),i=(e instanceof Element&&(e=this._domElementToItemData(e)),this.dispatch("itemData",{itemData:e||{},index:t}));return this.applyFilters("itemData",i.itemData,t)}},{key:"_getGalleryDOMElements",value:function(t){var e;return null!=(e=this.options)&&e.children||null!=(e=this.options)&&e.childSelector?getElementsFromOption(this.options.children,this.options.childSelector,t)||[]:[t]}},{key:"_domElementToItemData",value:function(t){var e,i={element:t},n="A"===t.tagName?t:t.querySelector("a");return n&&(i.src=n.dataset.pswpSrc||n.href,n.dataset.pswpSrcset&&(i.srcset=n.dataset.pswpSrcset),i.width=n.dataset.pswpWidth?parseInt(n.dataset.pswpWidth,10):0,i.height=n.dataset.pswpHeight?parseInt(n.dataset.pswpHeight,10):0,i.w=i.width,i.h=i.height,n.dataset.pswpType&&(i.type=n.dataset.pswpType),(e=t.querySelector("img"))&&(i.msrc=e.currentSrc||e.src,i.alt=null!=(e=e.getAttribute("alt"))?e:""),n.dataset.pswpCropped||n.dataset.cropped)&&(i.thumbCropped=!0),this.applyFilters("domItemData",i,t,n)}},{key:"lazyLoadData",value:function(t,e){return _lazyLoadData(t,this,e)}}])}(),MIN_OPACITY=.003,Opener=function(){return _createClass(function t(e){_classCallCheck(this,t),this.pswp=e,this.isClosed=!0,this.isOpen=!1,this.isClosing=!1,this.isOpening=!1,this._duration=void 0,this._useAnimation=!1,this._croppedZoom=!1,this._animateRootOpacity=!1,this._animateBgOpacity=!1,this._placeholder=void 0,this._opacityElement=void 0,this._cropContainer1=void 0,this._cropContainer2=void 0,this._thumbBounds=void 0,this._prepareOpen=this._prepareOpen.bind(this),e.on("firstZoomPan",this._prepareOpen)},[{key:"open",value:function(){this._prepareOpen(),this._start()}},{key:"close",value:function(){var t,e=this;this.isClosed||this.isClosing||this.isOpening||(t=this.pswp.currSlide,this.isOpen=!1,this.isOpening=!1,this.isClosing=!0,this._duration=this.pswp.options.hideAnimationDuration,t&&t.currZoomLevel*t.width>=this.pswp.options.maxWidthToAnimate&&(this._duration=0),this._applyStartProps(),setTimeout(function(){e._start()},this._croppedZoom?30:0))}},{key:"_prepareOpen",value:function(){var t;this.pswp.off("firstZoomPan",this._prepareOpen),this.isOpening||(t=this.pswp.currSlide,this.isOpening=!0,this.isClosing=!1,this._duration=this.pswp.options.showAnimationDuration,t&&t.zoomLevels.initial*t.width>=this.pswp.options.maxWidthToAnimate&&(this._duration=0),this._applyStartProps())}},{key:"_applyStartProps",value:function(){var t=this.pswp,e=this.pswp.currSlide,i=t.options;"fade"===i.showHideAnimationType?(i.showHideOpacity=!0,this._thumbBounds=void 0):"none"===i.showHideAnimationType?(i.showHideOpacity=!1,this._duration=0,this._thumbBounds=void 0):this.isOpening&&t._initialThumbBounds?this._thumbBounds=t._initialThumbBounds:this._thumbBounds=this.pswp.getThumbBounds(),this._placeholder=null==e?void 0:e.getPlaceholderElement(),t.animations.stopAll(),this._useAnimation=Boolean(this._duration&&50<this._duration),this._animateZoom=Boolean(this._thumbBounds)&&(null==e?void 0:e.content.usePlaceholder())&&(!this.isClosing||!t.mainScroll.isShifted()),this._animateZoom?this._animateRootOpacity=null!=(i=i.showHideOpacity)&&i:(this._animateRootOpacity=!0,this.isOpening&&e&&(e.zoomAndPanToInitial(),e.applyCurrentZoomPan())),this._animateBgOpacity=!this._animateRootOpacity&&this.pswp.options.bgOpacity>MIN_OPACITY,this._opacityElement=this._animateRootOpacity?t.element:t.bg,this._useAnimation?(this._animateZoom&&this._thumbBounds&&this._thumbBounds.innerRect?(this._croppedZoom=!0,this._cropContainer1=this.pswp.container,this._cropContainer2=null==(i=this.pswp.currSlide)?void 0:i.holderElement,t.container&&(t.container.style.overflow="hidden",t.container.style.width=t.viewportSize.x+"px")):this._croppedZoom=!1,this.isOpening?(this._animateRootOpacity?(t.element&&(t.element.style.opacity=String(MIN_OPACITY)),t.applyBgOpacity(1)):(this._animateBgOpacity&&t.bg&&(t.bg.style.opacity=String(MIN_OPACITY)),t.element&&(t.element.style.opacity="1")),this._animateZoom&&(this._setClosedStateZoomPan(),this._placeholder)&&(this._placeholder.style.willChange="transform",this._placeholder.style.opacity=String(MIN_OPACITY))):this.isClosing&&(t.mainScroll.itemHolders[0]&&(t.mainScroll.itemHolders[0].el.style.display="none"),t.mainScroll.itemHolders[2]&&(t.mainScroll.itemHolders[2].el.style.display="none"),this._croppedZoom)&&0!==t.mainScroll.x&&(t.mainScroll.resetPosition(),t.mainScroll.resize())):(this._duration=0,this._animateZoom=!1,this._animateBgOpacity=!1,this._animateRootOpacity=!0,this.isOpening&&(t.element&&(t.element.style.opacity=String(MIN_OPACITY)),t.applyBgOpacity(1)))}},{key:"_start",value:function(){var n=this;this.isOpening&&this._useAnimation&&this._placeholder&&"IMG"===this._placeholder.tagName?new Promise(function(t){var e=!1,i=!0;decodeImage(n._placeholder).finally(function(){e=!0,i||t(!0)}),setTimeout(function(){i=!1,e&&t(!0)},50),setTimeout(t,250)}).finally(function(){return n._initiate()}):this._initiate()}},{key:"_initiate",value:function(){var t;null!=(t=this.pswp.element)&&t.style.setProperty("--pswp-transition-duration",this._duration+"ms"),this.pswp.dispatch(this.isOpening?"openingAnimationStart":"closingAnimationStart"),this.pswp.dispatch("initialZoom"+(this.isOpening?"In":"Out")),null!=(t=this.pswp.element)&&t.classList.toggle("pswp--ui-visible",this.isOpening),this.isOpening?(this._placeholder&&(this._placeholder.style.opacity="1"),this._animateToOpenState()):this.isClosing&&this._animateToClosedState(),this._useAnimation||this._onAnimationComplete()}},{key:"_onAnimationComplete",value:function(){var t=this.pswp;this.isOpen=this.isOpening,this.isClosed=this.isClosing,this.isOpening=!1,this.isClosing=!1,t.dispatch(this.isOpen?"openingAnimationEnd":"closingAnimationEnd"),t.dispatch("initialZoom"+(this.isOpen?"InEnd":"OutEnd")),this.isClosed?t.destroy():this.isOpen&&(this._animateZoom&&t.container&&(t.container.style.overflow="visible",t.container.style.width="100%"),null!=(t=t.currSlide))&&t.applyCurrentZoomPan()}},{key:"_animateToOpenState",value:function(){var t=this.pswp;this._animateZoom&&(this._croppedZoom&&this._cropContainer1&&this._cropContainer2&&(this._animateTo(this._cropContainer1,"transform","translate3d(0,0,0)"),this._animateTo(this._cropContainer2,"transform","none")),t.currSlide)&&(t.currSlide.zoomAndPanToInitial(),this._animateTo(t.currSlide.container,"transform",t.currSlide.getCurrentTransform())),this._animateBgOpacity&&t.bg&&this._animateTo(t.bg,"opacity",String(t.options.bgOpacity)),this._animateRootOpacity&&t.element&&this._animateTo(t.element,"opacity","1")}},{key:"_animateToClosedState",value:function(){var t=this.pswp;this._animateZoom&&this._setClosedStateZoomPan(!0),this._animateBgOpacity&&.01<t.bgOpacity&&t.bg&&this._animateTo(t.bg,"opacity","0"),this._animateRootOpacity&&t.element&&this._animateTo(t.element,"opacity","0")}},{key:"_setClosedStateZoomPan",value:function(t){var e,i,n,s,o,a;this._thumbBounds&&(a=this.pswp,e=this._thumbBounds.innerRect,i=a.currSlide,a=a.viewportSize,this._croppedZoom&&e&&this._cropContainer1&&this._cropContainer2&&(n=-a.x+(this._thumbBounds.x-e.x)+e.w,s=-a.y+(this._thumbBounds.y-e.y)+e.h,o=a.x-e.w,a=a.y-e.h,t?(this._animateTo(this._cropContainer1,"transform",toTransformString(n,s)),this._animateTo(this._cropContainer2,"transform",toTransformString(o,a))):(setTransform(this._cropContainer1,n,s),setTransform(this._cropContainer2,o,a))),i)&&(equalizePoints(i.pan,e||this._thumbBounds),i.currZoomLevel=this._thumbBounds.w/i.width,t?this._animateTo(i.container,"transform",i.getCurrentTransform()):i.applyCurrentZoomPan())}},{key:"_animateTo",value:function(t,e,i){var n,s,o=this;this._duration?(n=this.pswp.animations,(s={duration:this._duration,easing:this.pswp.options.easing,onComplete:function(){n.activeAnimations.length||o._onAnimationComplete()},target:t})[e]=i,n.startTransition(s)):t.style[e]=i}}])}(),defaultOptions={allowPanToNext:!0,spacing:.1,loop:!0,pinchToClose:!0,closeOnVerticalDrag:!0,hideAnimationDuration:333,showAnimationDuration:333,zoomAnimationDuration:333,escKey:!0,arrowKeys:!0,trapFocus:!0,returnFocus:!0,maxWidthToAnimate:4e3,clickToCloseNonZoomable:!0,imageClickAction:"zoom-or-close",bgClickAction:"close",tapAction:"toggle-controls",doubleTapAction:"zoom",indexIndicatorSep:" / ",preloaderDelay:2e3,bgOpacity:.8,index:0,errorMsg:"The image cannot be loaded",preload:[1,2],easing:"cubic-bezier(.4,0,.22,1)"},PhotoSwipe=exports.default=function(){function i(t){var e;return _classCallCheck(this,i),(e=_callSuper(this,i)).options=e._prepareOptions(t||{}),e.offset={x:0,y:0},e._prevViewportSize={x:0,y:0},e.viewportSize={x:0,y:0},e.bgOpacity=1,e.currIndex=0,e.potentialIndex=0,e.isOpen=!1,e.isDestroying=!1,e.hasMouse=!1,e._initialItemData={},e._initialThumbBounds=void 0,e.topBar=void 0,e.element=void 0,e.template=void 0,e.container=void 0,e.scrollWrap=void 0,e.currSlide=void 0,e.events=new DOMEvents,e.animations=new Animations,e.mainScroll=new MainScroll(e),e.gestures=new Gestures(e),e.opener=new Opener(e),e.keyboard=new Keyboard(e),e.contentLoader=new ContentLoader(e),e}return _inherits(i,PhotoSwipeBase),_createClass(i,[{key:"init",value:function(){var e=this;if(this.isOpen||this.isDestroying)return!1;this.isOpen=!0,this.dispatch("init"),this.dispatch("beforeOpen"),this._createMainStructure();var t="pswp--open";return this.gestures.supportsTouch&&(t+=" pswp--touch"),this.options.mainClass&&(t+=" "+this.options.mainClass),this.element&&(this.element.className+=" "+t),this.currIndex=this.options.index||0,this.potentialIndex=this.currIndex,this.dispatch("firstUpdate"),this.scrollWheel=new ScrollWheel(this),(Number.isNaN(this.currIndex)||this.currIndex<0||this.currIndex>=this.getNumItems())&&(this.currIndex=0),this.gestures.supportsTouch||this.mouseDetected(),this.updateSize(),this.offset.y=window.pageYOffset,this._initialItemData=this.getItemData(this.currIndex),this.dispatch("gettingData",{index:this.currIndex,data:this._initialItemData,slide:void 0}),this._initialThumbBounds=this.getThumbBounds(),this.dispatch("initialLayout"),this.on("openingAnimationEnd",function(){var t=e.mainScroll.itemHolders;t[0]&&(t[0].el.style.display="block",e.setContent(t[0],e.currIndex-1)),t[2]&&(t[2].el.style.display="block",e.setContent(t[2],e.currIndex+1)),e.appendHeavy(),e.contentLoader.updateLazy(),e.events.add(window,"resize",e._handlePageResize.bind(e)),e.events.add(window,"scroll",e._updatePageScrollOffset.bind(e)),e.dispatch("bindEvents")}),this.mainScroll.itemHolders[1]&&this.setContent(this.mainScroll.itemHolders[1],this.currIndex),this.dispatch("change"),this.opener.open(),this.dispatch("afterInit"),!0}},{key:"getLoopedIndex",value:function(t){var e=this.getNumItems();return this.options.loop&&(e-1<t&&(t-=e),t<0)&&(t+=e),clamp(t,0,e-1)}},{key:"appendHeavy",value:function(){this.mainScroll.itemHolders.forEach(function(t){null!=(t=t.slide)&&t.appendHeavy()})}},{key:"goTo",value:function(t){this.mainScroll.moveIndexBy(this.getLoopedIndex(t)-this.potentialIndex)}},{key:"next",value:function(){this.goTo(this.potentialIndex+1)}},{key:"prev",value:function(){this.goTo(this.potentialIndex-1)}},{key:"zoomTo",value:function(){var t;null!=(t=this.currSlide)&&t.zoomTo.apply(t,arguments)}},{key:"toggleZoom",value:function(){var t;null!=(t=this.currSlide)&&t.toggleZoom()}},{key:"close",value:function(){this.opener.isOpen&&!this.isDestroying&&(this.isDestroying=!0,this.dispatch("close"),this.events.removeAll(),this.opener.close())}},{key:"destroy",value:function(){var t;this.isDestroying?(this.dispatch("destroy"),this._listeners={},this.scrollWrap&&(this.scrollWrap.ontouchmove=null,this.scrollWrap.ontouchend=null),null!=(t=this.element)&&t.remove(),this.mainScroll.itemHolders.forEach(function(t){null!=(t=t.slide)&&t.destroy()}),this.contentLoader.destroy(),this.events.removeAll()):(this.options.showHideAnimationType="none",this.close())}},{key:"refreshSlideContent",value:function(n){var s=this;this.contentLoader.removeByIndex(n),this.mainScroll.itemHolders.forEach(function(t,e){var i=(null!=(i=null==(i=s.currSlide)?void 0:i.index)?i:0)-1+e;(i=s.canLoop()?s.getLoopedIndex(i):i)===n&&(s.setContent(t,n,!0),1===e)&&(s.currSlide=t.slide,null!=(i=t.slide))&&i.setIsActive(!0)}),this.dispatch("change")}},{key:"setContent",value:function(t,e,i){if(this.canLoop()&&(e=this.getLoopedIndex(e)),t.slide){if(t.slide.index===e&&!i)return;t.slide.destroy(),t.slide=void 0}!this.canLoop()&&(e<0||e>=this.getNumItems())||(i=this.getItemData(e),t.slide=new Slide(i,e,this),e===this.currIndex&&(this.currSlide=t.slide),t.slide.append(t.el))}},{key:"getViewportCenterPoint",value:function(){return{x:this.viewportSize.x/2,y:this.viewportSize.y/2}}},{key:"updateSize",value:function(t){var e;this.isDestroying||(e=getViewportSize(this.options,this),!t&&pointsEqual(e,this._prevViewportSize))||(equalizePoints(this._prevViewportSize,e),this.dispatch("beforeResize"),equalizePoints(this.viewportSize,this._prevViewportSize),this._updatePageScrollOffset(),this.dispatch("viewportSize"),this.mainScroll.resize(this.opener.isOpen),!this.hasMouse&&window.matchMedia("(any-hover: hover)").matches&&this.mouseDetected(),this.dispatch("resize"))}},{key:"applyBgOpacity",value:function(t){this.bgOpacity=Math.max(t,0),this.bg&&(this.bg.style.opacity=String(this.bgOpacity*this.options.bgOpacity))}},{key:"mouseDetected",value:function(){var t;this.hasMouse||(this.hasMouse=!0,null!=(t=this.element)&&t.classList.add("pswp--has_mouse"))}},{key:"_handlePageResize",value:function(){var t=this;this.updateSize(),/iPhone|iPad|iPod/i.test(window.navigator.userAgent)&&setTimeout(function(){t.updateSize()},500)}},{key:"_updatePageScrollOffset",value:function(){this.setScrollOffset(0,window.pageYOffset)}},{key:"setScrollOffset",value:function(t,e){this.offset.x=t,this.offset.y=e,this.dispatch("updateScrollOffset")}},{key:"_createMainStructure",value:function(){this.element=createElement("pswp","div"),this.element.setAttribute("tabindex","-1"),this.element.setAttribute("role","dialog"),this.template=this.element,this.bg=createElement("pswp__bg","div",this.element),this.scrollWrap=createElement("pswp__scroll-wrap","section",this.element),this.container=createElement("pswp__container","div",this.scrollWrap),this.scrollWrap.setAttribute("aria-roledescription","carousel"),this.container.setAttribute("aria-live","off"),this.container.setAttribute("id","pswp__items"),this.mainScroll.appendHolders(),this.ui=new UI(this),this.ui.init(),(this.options.appendToEl||document.body).appendChild(this.element)}},{key:"getThumbBounds",value:function(){return _getThumbBounds(this.currIndex,this.currSlide?this.currSlide.data:this._initialItemData,this)}},{key:"canLoop",value:function(){return this.options.loop&&2<this.getNumItems()}},{key:"_prepareOptions",value:function(t){return window.matchMedia("(prefers-reduced-motion), (update: slow)").matches&&(t.showHideAnimationType="none",t.zoomAnimationDuration=0),_objectSpread(_objectSpread({},defaultOptions),t)}}])}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBob3Rvc3dpcGUuZXNtLmpzIl0sIm5hbWVzIjpbImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJ0YWdOYW1lIiwiYXBwZW5kVG9FbCIsImVsIiwiZG9jdW1lbnQiLCJhcHBlbmRDaGlsZCIsImVxdWFsaXplUG9pbnRzIiwicDEiLCJwMiIsIngiLCJ5IiwiaWQiLCJyb3VuZFBvaW50IiwicCIsIk1hdGgiLCJyb3VuZCIsImdldERpc3RhbmNlQmV0d2VlbiIsImFicyIsInNxcnQiLCJwb2ludHNFcXVhbCIsImNsYW1wIiwidmFsIiwibWluIiwibWF4IiwidG9UcmFuc2Zvcm1TdHJpbmciLCJzY2FsZSIsInByb3BWYWx1ZSIsImNvbmNhdCIsInVuZGVmaW5lZCIsInN0eWxlIiwidHJhbnNmb3JtIiwiZGVmYXVsdENTU0Vhc2luZyIsInNldFRyYW5zaXRpb25TdHlsZSIsInByb3AiLCJkdXJhdGlvbiIsImVhc2UiLCJ0cmFuc2l0aW9uIiwic2V0V2lkdGhIZWlnaHQiLCJ3IiwiaCIsImhlaWdodCIsInJlbW92ZVRyYW5zaXRpb25TdHlsZSIsImltZyIsImRlY29kZSIsImNvbXBsZXRlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJvbmxvYWQiLCJvbmVycm9yIiwiSURMRSIsIkxPQURJTkciLCJMT0FERUQiLCJFUlJPUiIsIkxPQURfU1RBVEUiLCJlIiwiYnV0dG9uIiwiY3RybEtleSIsIm1ldGFLZXkiLCJhbHRLZXkiLCJzaGlmdEtleSIsImdldEVsZW1lbnRzRnJvbU9wdGlvbiIsIm9wdGlvbiIsImxlZ2FjeVNlbGVjdG9yIiwicGFyZW50IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiZWxlbWVudHMiLCJzcGVjaWFsS2V5VXNlZCIsIkVsZW1lbnQiLCJOb2RlTGlzdCIsIkFycmF5IiwiaXNBcnJheSIsImZyb20iLCJzZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ2ZW5kb3IiLCJzdXBwb3J0c1Bhc3NpdmUiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXQiLCJET01FdmVudHMiLCJfY3JlYXRlQ2xhc3MiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX3Bvb2wiLCJrZXkiLCJ2YWx1ZSIsInRhcmdldCIsInR5cGUiLCJsaXN0ZW5lciIsInBhc3NpdmUiLCJfdG9nZ2xlTGlzdGVuZXIiLCJfdGhpcyIsImZvckVhY2giLCJwb29sSXRlbSIsInVuYmluZCIsInNraXBQb29sIiwibWV0aG9kTmFtZSIsIl90aGlzMiIsInNwbGl0IiwiZVR5cGUiLCJmaWx0ZXIiLCJwdXNoIiwiZXZlbnRPcHRpb25zIiwiZ2V0Vmlld3BvcnRTaXplIiwib3B0aW9ucyIsInBzd3AiLCJnZXRWaWV3cG9ydFNpemVGbiIsIm5ld1ZpZXdwb3J0U2l6ZSIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudFdpZHRoIiwiaW5uZXJIZWlnaHQiLCJwYXJzZVBhZGRpbmdPcHRpb24iLCJ2aWV3cG9ydFNpemUiLCJpdGVtRGF0YSIsImluZGV4IiwicGFkZGluZ1ZhbHVlIiwicGFkZGluZ0ZuIiwibGVnYWN5UHJvcE5hbWUiLCJwYWRkaW5nIiwidG9VcHBlckNhc2UiLCJzbGljZSIsIk51bWJlciIsImdldFBhbkFyZWFTaXplIiwiUGFuQm91bmRzIiwic2xpZGUiLCJjdXJyWm9vbUxldmVsIiwiX3VwZGF0ZUF4aXMiLCJkaXNwYXRjaCIsInJlc2V0IiwicGFuQXJlYVNpemUiLCJjZW50ZXIiLCJlbFNpemUiLCJheGlzIiwiZGF0YSIsInBhbk9mZnNldCIsIk1BWF9JTUFHRV9XSURUSCIsIlpvb21MZXZlbCIsImVsZW1lbnRTaXplIiwiZml0IiwiZmlsbCIsInNlY29uZGFyeSIsInZGaWxsIiwiaW5pdGlhbCIsIm1heFdpZHRoIiwibWF4SGVpZ2h0IiwiaFJhdGlvIiwiX2dldFNlY29uZGFyeSIsInZSYXRpbyIsInNsaWRlRGF0YSIsIl9nZXRJbml0aWFsIiwiX2dldE1heCIsInpvb21MZXZlbHMiLCJvcHRpb25QcmVmaXgiLCJvcHRpb25WYWx1ZSIsIl9wYXJzZVpvb21MZXZlbE9wdGlvbiIsImlzQWN0aXZlIiwiY3VyckluZGV4IiwiU2xpZGUiLCJwYW4iLCJjb250ZW50IiwiY29udGVudExvYWRlciIsImhvbGRlckVsZW1lbnQiLCJib3VuZHMiLCJvcGVuZXIiLCJpc09wZW4iLCJwcmV2RGlzcGxheWVkV2lkdGgiLCJwcmV2RGlzcGxheWVkSGVpZ2h0IiwiZ2V0Q29udGVudEJ5U2xpZGUiLCJjb250YWluZXIiLCJ3aWR0aCIsImhlYXZ5QXBwZW5kZWQiLCJkZWFjdGl2YXRlIiwiY2FsY3VsYXRlU2l6ZSIsImFwcGVuZEhlYXZ5IiwidHJhbnNmb3JtT3JpZ2luIiwidXBkYXRlQ29udGVudFNpemUiLCJ6b29tQW5kUGFuVG9Jbml0aWFsIiwiYXBwbHlDdXJyZW50Wm9vbVBhbiIsImFwcGVuZEhlYXZ5TmVhcmJ5IiwiYWN0aXZhdGUiLCJkZWZhdWx0UHJldmVudGVkIiwibWFpblNjcm9sbCIsImlzU2hpZnRlZCIsImFwcGVuZCIsImN1cnJlbnRSZXNvbHV0aW9uIiwiaGFzU2xpZGUiLCJyZW1vdmUiLCJ1cGRhdGUiLCJwYW5UbyIsImZvcmNlIiwic2NhbGVNdWx0aXBsaWVyIiwic2l6ZUNoYW5nZWQiLCJzZXREaXNwbGF5ZWRTaXplIiwiZGVzdFpvb21MZXZlbCIsImNlbnRlclBvaW50IiwiX3RoaXMkY29udGVudCRwbGFjZWhvIiwicGxhY2Vob2xkZXIiLCJlbGVtZW50IiwiZmluaXNoVHJhbnNpdGlvbiIsInRyYW5zaXRpb25EdXJhdGlvbiIsImlnbm9yZUJvdW5kcyIsInByZXZab29tTGV2ZWwiLCJfdGhpczMiLCJlYXNpbmciLCJhbmltYXRpb25zIiwic3RvcEFsbFBhbiIsInNldFpvb21MZXZlbCIsIl9zZXRSZXNvbHV0aW9uIiwic3RhcnRUcmFuc2l0aW9uIiwiaXNQYW4iLCJuYW1lIiwiZ2V0Q3VycmVudFRyYW5zZm9ybSIsIm9uQ29tcGxldGUiLCJ0b3RhbFBhbkRpc3RhbmNlIiwiem9vbVRvIiwiem9vbUZhY3RvciIsInpvb21BbmltYXRpb25EdXJhdGlvbiIsInBvaW50IiwiZ2V0Vmlld3BvcnRDZW50ZXJQb2ludCIsIl9hcHBseVpvb21UcmFuc2Zvcm0iLCJjb3JyZWN0UGFuIiwicGFuWCIsInBhblkiLCJCb29sZWFuIiwiaXNab29tYWJsZSIsInpvb20iLCJzZXRUcmFuc2Zvcm0iLCJQQU5fRU5EX0ZSSUNUSU9OIiwiVkVSVElDQUxfRFJBR19GUklDVElPTiIsIk1JTl9SQVRJT19UT19DTE9TRSIsIk1JTl9ORVhUX1NMSURFX1NQRUVEIiwicHJvamVjdCIsImluaXRpYWxWZWxvY2l0eSIsImRlY2VsZXJhdGlvblJhdGUiLCJuZXdSZXNvbHV0aW9uIiwiRHJhZ0hhbmRsZXIiLCJzdGFydFBhbiIsImN1cnJTbGlkZSIsIm1haW5TY3JvbGxDaGFuZ2VkIiwiZ2VzdHVyZXMiLCJfdGhpcyRwc3dwNCIsInN0b3BBbGwiLCJfdGhpcyRnZXN0dXJlcyIsInZlbG9jaXR5IiwicHJldlAxIiwiZHJhZ0F4aXMiLCJjbG9zZU9uVmVydGljYWxEcmFnIiwiaXNNdWx0aXRvdWNoIiwibW92ZUluZGV4QnkiLCJiZ09wYWNpdHkiLCJfZ2V0VmVydGljYWxEcmFnUmF0aW8iLCJhcHBseUJnT3BhY2l0eSIsIl9maW5pc2hQYW5HZXN0dXJlRm9yQXhpcyIsIl9wYW5Pck1vdmVNYWluU2Nyb2xsIiwiY3VycmVudFNsaWRlVmlzaWJpbGl0eVJhdGlvIiwicmVzdG9yZUJnT3BhY2l0eSIsInBhblBvcyIsImluZGV4RGlmZiIsImdldEN1cnJTbGlkZVgiLCJpbml0aWFsQmdPcGFjaXR5IiwidG90YWxQYW5EaXN0IiwiY29ycmVjdGVkUGFuUG9zaXRpb24iLCJkYW1waW5nUmF0aW8iLCJvblVwZGF0ZSIsIl90aGlzNCIsIl90aGlzJHBzd3A1IiwicHJvamVjdGVkUG9zaXRpb24iLCJuZXdNYWluU2Nyb2xsWCIsInByb2plY3RlZFZEcmFnUmF0aW8iLCJ2RHJhZ1JhdGlvIiwiY3VyclNsaWRlTWFpblNjcm9sbFgiLCJjbG9zZSIsIndhc0F0TWluUGFuUG9zaXRpb24iLCJpc1JpZ2h0VG9MZWZ0Iiwic3RhcnRTcHJpbmciLCJzdGFydCIsImVuZCIsIl9zZXRQYW5XaXRoRnJpY3Rpb24iLCJwb3MiLCJmbG9vciIsIl90aGlzJGdlc3R1cmVzMiIsImRlbHRhIiwiaXNQYW5uYWJsZSIsIm1vdmVUbyIsIl90aGlzJHBzd3AkY3VyclNsaWRlJCIsIm5ld1BhbiIsImFsbG93UGFuVG9OZXh0IiwibWFpblNjcm9sbFNoaWZ0RGlmZiIsImlzTGVmdFRvUmlnaHQiLCJwb3RlbnRpYWxQYW4iLCJjb3JyZWN0ZWRQYW4iLCJjdXN0b21GcmljdGlvbiIsIkxPV0VSX1pPT01fRlJJQ1RJT04iLCJVUFBFUl9aT09NX0ZSSUNUSU9OIiwiWm9vbUhhbmRsZXIiLCJfc3RhcnRQYW4iLCJfdGhpcyRwc3dwJGN1cnJTbGlkZSIsIl90aGlzJGdlc3R1cmVzMyIsInN0YXJ0UDIiLCJzdGFydFAxIiwiX3dhc092ZXJGaXRab29tTGV2ZWwiLCJjb3JyZWN0Wm9vbVBhbiIsIl9zdGFydFpvb21Qb2ludCIsIl96b29tUG9pbnQiLCJfc3RhcnRab29tTGV2ZWwiLCJkZXN0aW5hdGlvblpvb21MZXZlbCIsImRlc3RpbmF0aW9uUGFuIiwiaWdub3JlR2VzdHVyZSIsImluaXRpYWxQYW4iLCJfY2FsY3VsYXRlUGFuRm9yWm9vbUxldmVsIiwiZ2V0Wm9vbVBvaW50c0NlbnRlciIsInBhbk5lZWRzQ2hhbmdlIiwiY3Vyclpvb21MZXZlbE5lZWRzQ2hhbmdlIiwicGluY2hUb0Nsb3NlIiwibWluWm9vbUxldmVsIiwibWF4Wm9vbUxldmVsIiwibmV3Wm9vbUxldmVsIiwib3JpZ2luYWxFdmVudCIsIlRhcEhhbmRsZXIiLCJjbGFzc0xpc3QiLCJpc0JhY2tncm91bmRDbGljayIsInRhcmdldENsYXNzTGlzdCIsIl9kb0NsaWNrT3JUYXBBY3Rpb24iLCJkaWRUYXBPbk1haW5Db250ZW50IiwiZG91YmxlVGFwIiwiYWN0aW9uTmFtZSIsIl90aGlzJGdlc3R1cmVzJHBzd3AkZSIsImFjdGlvbkZ1bGxOYW1lIiwibmF0dXJhbEZyZXF1ZW5jeSIsIm5vdyIsInRvZ2dsZVpvb20iLCJBWElTX1NXSVBFX0hZU1RFUklTSVMiLCJldmVudCIsImNsb3Nlc3QiLCJpc0ltYWdlQ2xpY2siLCJjb250YWlucyIsIl9pbnRlcnZhbFRpbWUiLCJfdmVsb2NpdHlDYWxjdWxhdGVkIiwiaXNEcmFnZ2luZyIsImNhbGwiLCJkcmFnIiwiZXZlbnRzIiwiX3RoaXM1IiwiY2xpY2tUb0Nsb3NlTm9uWm9vbWFibGUiLCJ0b2dnbGUiLCJET1VCTEVfVEFQX0RFTEFZIiwiYmluZCIsIk1JTl9UQVBfRElTVEFOQ0UiLCJHZXN0dXJlcyIsInByZXZlbnREZWZhdWx0IiwicHJldlAyIiwiX2xhc3RTdGFydFAxIiwiX2ludGVydmFsUDEiLCJfbnVtQWN0aXZlUG9pbnRzIiwiX29uZ29pbmdQb2ludGVycyIsIl90b3VjaEV2ZW50RW5hYmxlZCIsIl9wb2ludGVyRXZlbnRFbmFibGVkIiwiUG9pbnRlckV2ZW50Iiwic3VwcG9ydHNUb3VjaCIsIm5hdmlnYXRvciIsIm1heFRvdWNoUG9pbnRzIiwiX3VwZGF0ZVN0YXJ0UG9pbnRzIiwiaXNab29taW5nIiwiX3JhZlN0b3BMb29wIiwicmFmIiwiX3RhcFRpbWVyIiwiX3VwZGF0ZVZlbG9jaXR5IiwidGFwSGFuZGxlciIsIm9uIiwiYWRkIiwic2Nyb2xsV3JhcCIsIl9vbkNsaWNrIiwiX2JpbmRFdmVudHMiLCJvblBvaW50ZXJVcCIsInByZWYiLCJkb3duIiwidXAiLCJjYW5jZWwiLCJjYW5jZWxFdmVudCIsIm9uUG9pbnRlckRvd24iLCJvblBvaW50ZXJNb3ZlIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiaXNNb3VzZVBvaW50ZXIiLCJwb2ludGVyVHlwZSIsInRpbWUiLCJtb3VzZURldGVjdGVkIiwiX3ByZXZlbnRQb2ludGVyRXZlbnRCZWhhdmlvdXIiLCJjbGljayIsIl91cGRhdGVQb2ludHMiLCJ0YXBEZWxheSIsIl9jbGVhclRhcFRpbWVyIiwiX3RoaXM2IiwiX2ZpbmlzaERyYWciLCJfcmFmUmVuZGVyTG9vcCIsIl9jYWxjdWxhdGVEcmFnRGlyZWN0aW9uIiwiZGlzcGxhY2VtZW50IiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJEYXRlIiwicHJldmVudFBvaW50ZXJFdmVudCIsInRvdWNoRXZlbnQiLCJfY29udmVydEV2ZW50UG9zVG9Qb2ludCIsIl9maW5pc2hUYXAiLCJjaGFuZ2UiLCJfdXBkYXRlUHJldlBvaW50cyIsIl9nZXRWZWxvY2l0eSIsImluZGV4T2YiLCJkb3VibGVUYXBBY3Rpb24iLCJzZXRUaW1lb3V0Iiwic2xpZGVXaWR0aCIsInRhcCIsIl9jdXJyUG9zaXRpb25JbmRleCIsIml0ZW1Ib2xkZXJzIiwiY2xlYXJUaW1lb3V0Iiwic2xpZGVXaWR0aENoYW5nZWQiLCJuZXdTbGlkZVdpZHRoIiwiYXBwbHlGaWx0ZXJzIiwic2V0QXR0cmlidXRlIiwiX3RoaXM4IiwicG9pbnRlckluZGV4IiwiZmluZEluZGV4Iiwib25nb2luZ1BvaW50ZXIiLCJwb2ludGVyRXZlbnQiLCJwb2ludGVySWQiLCJzcGxpY2UiLCJnZXROdW1JdGVtcyIsIm51bVNsaWRlcyIsIm5ld0luZGV4IiwiZ2V0TG9vcGVkSW5kZXgiLCJ0b3VjaGVzIiwiZGlmZiIsImRlc3RpbmF0aW9uWCIsImN1cnJEaXN0YW5jZSIsImF4aXNUb0NoZWNrIiwidXBkYXRlQ3Vyckl0ZW0iLCJwYWdlWCIsIm9mZnNldCIsInBhZ2VZIiwiX3RoaXMkaXRlbUhvbGRlcnMkIiwiaWRlbnRpZmllciIsInBvc2l0aW9uRGlmZmVyZW5jZSIsInN0b3BQcm9wYWdhdGlvbiIsIl9pdGVtSG9sZGVyJHNsaWRlIiwiTUFJTl9TQ1JPTExfRU5EX0ZSSUNUSU9OIiwidGVtcEhvbGRlciIsIk1haW5TY3JvbGwiLCJfcHJldlBvc2l0aW9uSW5kZXgiLCJfY29udGFpbmVyU2hpZnRJbmRleCIsInJlc2l6ZVNsaWRlcyIsIl90aGlzNyIsInNwYWNpbmciLCJuZXdTbGlkZUluZGV4T2Zmc2V0IiwiaXRlbUhvbGRlciIsInJlc2l6ZSIsIktleWJvYXJkS2V5Q29kZXNNYXAiLCJFc2NhcGUiLCJBcnJvd0xlZnQiLCJBcnJvd1JpZ2h0IiwiQXJyb3dEb3duIiwiVGFiIiwiaXNLZXlTdXBwb3J0ZWQiLCJLZXlib2FyZCIsImRpc3BsYXkiLCJpIiwiaW5pdGlhbFBvaW50ZXJQb3MiLCJhbmltYXRlIiwidmVsb2NpdHlYIiwiX2ZvY3VzUm9vdCIsIl93YXNGb2N1c2VkIiwia2V5ZG93bkFjdGlvbiIsImRpc3RhbmNlIiwiX29uS2V5RG93biIsInBvdGVudGlhbEluZGV4Iiwic3RvcE1haW5TY3JvbGwiLCJpc01haW5TY3JvbGwiLCJnZXRLZXlib2FyZEV2ZW50S2V5IiwiY2FuTG9vcCIsImN1cnJEaWZmIiwiYXJyb3dLZXlzIiwiaXNGb3J3YXJkIiwiX29uRm9jdXNJbiIsImRpZmZBYnMiLCJDU1NBbmltYXRpb24iLCJkZXN0cm95IiwiX3RoaXMxMCIsInByb3BzIiwic2hpZnQiLCJfcHJvcHMkZHVyYXRpb24iLCJfcHJvcHMkZWFzaW5nIiwiREVGQVVMVF9FQVNJTkciLCJvbkZpbmlzaCIsIl9wcm9wcyRwcm9wIiwiX3RhcmdldCIsInVuc2hpZnQiLCJfb25Db21wbGV0ZSIsInNldENvbnRlbnQiLCJyZXNldFBvc2l0aW9uIiwic2V0SXNBY3RpdmUiLCJfZmluYWxpemVBbmltYXRpb24iLCJ1cGRhdGVMYXp5IiwiZHJhZ2dpbmciLCJTcHJpbmdFYXNlciIsInoiLCJBcnJvd1VwIiwiX2RhbXBlZEZyZXF1ZW5jeSIsIl90aGlzOSIsImxhc3RBY3RpdmVFbGVtZW50IiwidHJhcEZvY3VzIiwiY29lZmYiLCJuYXR1cmFsRHVtcGluZ1BvdyIsImRlbHRhUG9zaXRpb24iLCJfZGFtcGluZ1JhdGlvIiwicmV0dXJuRm9jdXMiLCJmb2N1cyIsIl90aGlzMTEiLCJhbmltYXRpb25Mb29wIiwia2V5Q29kZSIsImVzY0tleSIsIkFuaW1hdGlvbnMiLCJ0ZW1wbGF0ZSIsImFuaW1hdGlvbiIsImFjdGl2ZUFuaW1hdGlvbnMiLCJfZmluaXNoZWQiLCJfb25UcmFuc2l0aW9uRW5kIiwiX2hlbHBlclRpbWVvdXQiLCJTY3JvbGxXaGVlbCIsIl9vbldoZWVsIiwiZGVsdGFYIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIkRFRkFVTFRfTkFUVVJBTF9GUkVRVUVOQ1kiLCJERUZBVUxUX0RBTVBJTkdfUkFUSU8iLCJfbmF0dXJhbEZyZXF1ZW5jeSIsImRlbHRhVGltZSIsImR1bXBlZEZDb3MiLCJodG1sRGF0YSIsInBvdyIsIkUiLCJvdXQiLCJzdmdEYXRhIiwiY29zIiwic2luIiwib3V0bGluZUlEIiwiZHVtcGVkRlNpbiIsIlNwcmluZ0FuaW1hdGlvbiIsImVsZW1lbnRIVE1MIiwiX3Byb3BzJG9uRmluaXNoMiIsInRvTG93ZXJDYXNlIiwicHJldlRpbWUiLCJvbkluaXQiLCJfcmFmIiwiZWFzZXIiLCJlYXNlRnJhbWUiLCJhcmlhTGFiZWwiLCJ0aXRsZSIsImFyaWFUZXh0Iiwib25DbGljayIsImluaXRBcnJvd0J1dHRvbiIsIl9zdGFydCIsImRpc2FibGVkIiwiaXNTcHJpbmciLCJfdGhpczEyIiwib3JkZXIiLCJodG1sIiwic2l6ZSIsInN0b3AiLCJhcnJvd05leHQiLCJpc0J1dHRvbiIsInpvb21CdXR0b24iLCJpc0N1c3RvbVNWRyIsImFwcGVuZFRvIiwic29tZSIsInRvZ2dsZUluZGljYXRvckNsYXNzIiwiaXNWaXNpYmxlIiwidmlzaWJsZSIsInNldEluZGljYXRvclZpc2liaWxpdHkiLCJkZWxheVRpbWVvdXQiLCJkZWx0YVkiLCJ3aGVlbFRvWm9vbSIsImRlbHRhTW9kZSIsImNvdW50ZXJJbmRpY2F0b3IiLCJjb3VudGVyRWxlbWVudCIsImlubmVyVGV4dCIsImNsaWVudFgiLCJjbGllbnRZIiwiX3RoaXMxMyIsInJlZ2lzdGVyRWxlbWVudCIsImlzUmVnaXN0ZXJlZCIsInVpRWxlbWVudHNEYXRhIiwiX3RoaXMkcHN3cDYiLCJVSUVsZW1lbnQiLCJpbnN0YW5jZSIsImN1cnJab29tTGV2ZWxEaWZmIiwidGh1bWJBcmVhUmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsImdldENyb3BwZWRCb3VuZHNCeUVsZW1lbnQiLCJvZmZzZXRYIiwib2Zmc2V0WSIsIm9uY2xpY2siLCJ0aHVtYkJvdW5kcyIsInRvcEJhciIsInRodW1ibmFpbCIsIl9jb250YWluZXIiLCJpc05leHRCdXR0b24iLCJsb29wIiwiYXJyb3dQcmV2IiwiaW5uZXIiLCJjbG9zZUJ1dHRvbiIsImxvYWRpbmdJbmRpY2F0b3IiLCJpbmRpY2F0b3JFbGVtZW50IiwidXBkYXRlUHJlbG9hZGVyVmlzaWJpbGl0eSIsIl9wc3dwJGN1cnJTbGlkZSIsImlzTG9hZGluZyIsIl9wc3dwJGN1cnJTbGlkZTIiLCJwcmVsb2FkZXJEZWxheSIsInVpIiwiaW5kZXhJbmRpY2F0b3JTZXAiLCJzZXRab29tZWRJbiIsImlzWm9vbWVkSW4iLCJVSSIsIml0ZW1zIiwiUGhvdG9Td2lwZUV2ZW50IiwiZGV0YWlscyIsInNvcnQiLCJhIiwiYiIsInVpRWxlbWVudERhdGEiLCJfcHN3cCRlbGVtZW50IiwiRXZlbnRhYmxlIiwiX29uWm9vbVBhblVwZGF0ZSIsImVsZW1lbnREYXRhIiwicHJpb3JpdHkiLCJfZmlsdGVycyIsIl9sYXN0VXBkYXRlZFpvb21MZXZlbCIsImltYWdlQ2xpY2tBY3Rpb24iLCJnZXRCb3VuZHNCeUVsZW1lbnQiLCJsZWZ0IiwiaW1hZ2VXaWR0aCIsImltYWdlSGVpZ2h0IiwiZmlsbFpvb21MZXZlbCIsImZuIiwiX3RoaXMkcHN3cDMiLCJpbm5lclJlY3QiLCJnZXRUaHVtYkJvdW5kcyIsImltZ0VsIiwiUGxhY2Vob2xkZXIiLCJ0aHVtYlNlbGVjdG9yIiwibWF0Y2hlcyIsInF1ZXJ5U2VsZWN0b3IiLCJ0aHVtYkNyb3BwZWQiLCJpc0Vycm9yIiwiYXNzaWduIiwiX2xpc3RlbmVycyIsImRpc3BsYXllZEltYWdlV2lkdGgiLCJfdGhpcyRwc3dwIiwiX3RoaXMkX2ZpbHRlcnMkbmFtZSIsIl90aGlzJF9maWx0ZXJzJG5hbWUyIiwiZjEiLCJmMiIsImFkZEZpbHRlciIsInJlbW92ZUZpbHRlciIsIl90aGlzMTQiLCJfbGVuIiwiYXJncyIsIl9rZXkiLCJ1c2VQbGFjZWhvbGRlciIsIl90aGlzJF9maWx0ZXJzJG5hbWUzIiwiYXBwbHkiLCJfdGhpcyRwc3dwMiIsIl90aGlzJF9saXN0ZW5lcnMkbmFtZSIsIm9mZiIsImVycm9yTXNnRWwiLCJfdGhpczE1IiwiX3RoaXMkaW5zdGFuY2Ukb3B0aW9uIiwiX3RoaXMkaW5zdGFuY2Ukb3B0aW9uMiIsIl90aGlzJF9saXN0ZW5lcnMkbmFtZTIiLCJfdGhpczE4Iiwic3RhdGUiLCJpbWFnZVNyYyIsImFsdCIsInNyYyIsInN1cHBvcnRzRGVjb2RlIiwiaXNEZWNvZGluZyIsImFwcGVuZEltYWdlIiwiX3RoaXMkZWxlbWVudCIsInBhcmVudE5vZGUiLCJDb250ZW50IiwiZGlzcGxheWVkSW1hZ2VIZWlnaHQiLCJpc0F0dGFjaGVkIiwiX3RoaXMxNiIsImtlZXBQbGFjZWhvbGRlciIsImlzTGF6eSIsInJlbG9hZCIsInBsYWNlaG9sZGVyU3JjIiwicGxhY2Vob2xkZXJFbCIsInBhcmVudEVsZW1lbnQiLCJwcmVwZW5kIiwibXNyYyIsImlzRmlyc3RTbGlkZSIsIk1JTl9TTElERVNfVE9fQ0FDSEUiLCJ6b29tTGV2ZWwiLCJpc0ltYWdlQ29udGVudCIsImlubmVySFRNTCIsIl90aGlzJGRhdGEkYWx0IiwiX3RoaXMxNyIsImxhenlMb2FkRGF0YSIsIkNvbnRlbnRMb2FkZXIiLCJzcmNzZXQiLCJpbWFnZUVsZW1lbnQiLCJfdGhpcyRkYXRhJHNyYyIsIm9uTG9hZGVkIiwiX2NhY2hlZEl0ZW1zIiwib25FcnJvciIsImxvYWRTbGlkZUJ5SW5kZXgiLCJsYXp5TG9hZFNsaWRlIiwiYWRkVG9DYWNoZSIsInJlbW92ZVBsYWNlaG9sZGVyIiwiZ2V0Q29udGVudEJ5SW5kZXgiLCJzZXRTbGlkZSIsImluZGV4VG9SZW1vdmUiLCJyZW1vdmVCeUluZGV4IiwiaXNJbml0aWFsU2l6ZVVwZGF0ZSIsIlBob3RvU3dpcGVCYXNlIiwiX2luaGVyaXRzIiwiZGF0YVNvdXJjZSIsImltYWdlIiwic2l6ZXNXaWR0aCIsImRhdGFzZXQiLCJsYXJnZXN0VXNlZFNpemUiLCJwYXJzZUludCIsInNpemVzIiwiY3JlYXRlQ29udGVudEZyb21EYXRhIiwiU3RyaW5nIiwibG9hZCIsImRhdGFTb3VyY2VJdGVtIiwiX3RoaXMkb3B0aW9uczMiLCJfdGhpcyRvcHRpb25zNCIsImVycm9yTXNnIiwibGlua0VsIiwicHN3cFNyYyIsInBzd3BTcmNzZXQiLCJfdGh1bWJuYWlsRWwkZ2V0QXR0cmkiLCJkaXNwbGF5RXJyb3IiLCJwc3dwQ3JvcHBlZCIsImlzU2FmYXJpIiwiTUlOX09QQUNJVFkiLCJfdXNlQW5pbWF0aW9uIiwiX2Nyb3BwZWRab29tIiwiX2FuaW1hdGVCZ09wYWNpdHkiLCJfcHJlcGFyZU9wZW4iLCJfZHVyYXRpb24iLCJfdGhpczE5IiwiX2FwcGx5U3RhcnRQcm9wcyIsIl90aHVtYkJvdW5kcyIsInNob3dIaWRlQW5pbWF0aW9uVHlwZSIsIl9wbGFjZWhvbGRlciIsIl9hbmltYXRlWm9vbSIsIl9hbmltYXRlUm9vdE9wYWNpdHkiLCJsYXp5TG9hZCIsIl9vcGFjaXR5RWxlbWVudCIsImNlaWwiLCJnZXRJdGVtRGF0YSIsIl9jcm9wQ29udGFpbmVyMiIsImxpbWl0IiwiYmciLCJvcGFjaXR5IiwicHJlbG9hZCIsImluaXRpYWxJbmRleCIsImlzRGVsYXlpbmciLCJkZWNvZGVkIiwiaXNPcGVuaW5nIiwiX29uQW5pbWF0aW9uQ29tcGxldGUiLCJpc0Nsb3NpbmciLCJpdGVtIiwiX2FuaW1hdGVUb0Nsb3NlZFN0YXRlIiwiZmluZCIsIl9hbmltYXRlVG8iLCJfY2FsbFN1cGVyIiwibnVtSXRlbXMiLCJfdGhpcyRvcHRpb25zIiwiX2dldEdhbGxlcnlET01FbGVtZW50cyIsImdhbGxlcnkiLCJjb250YWluZXJPbmVQYW5ZIiwiX3RoaXMkb3B0aW9uczIiLCJfZG9tRWxlbWVudFRvSXRlbURhdGEiLCJnYWxsZXJ5RWxlbWVudCIsImNoaWxkcmVuIiwiY2hpbGRTZWxlY3RvciIsImhyZWYiLCJwc3dwV2lkdGgiLCJwc3dwSGVpZ2h0IiwicHN3cFR5cGUiLCJ0aHVtYm5haWxFbCIsImN1cnJlbnRTcmMiLCJnZXRBdHRyaWJ1dGUiLCJjcm9wcGVkIiwiT3BlbmVyIiwiaXNDbG9zZWQiLCJfY3JvcENvbnRhaW5lcjEiLCJoaWRlQW5pbWF0aW9uRHVyYXRpb24iLCJtYXhXaWR0aFRvQW5pbWF0ZSIsImRlZmF1bHRPcHRpb25zIiwiYmdDbGlja0FjdGlvbiIsInNob3dBbmltYXRpb25EdXJhdGlvbiIsIlBob3RvU3dpcGUiLCJfdGhpczIyIiwiX3ByZXBhcmVPcHRpb25zIiwic2hvd0hpZGVPcGFjaXR5IiwiX2luaXRpYWxUaHVtYkJvdW5kcyIsImdldFBsYWNlaG9sZGVyRWxlbWVudCIsIl9wcmV2Vmlld3BvcnRTaXplIiwiX29wdGlvbnMkc2hvd0hpZGVPcGFjIiwib3ZlcmZsb3ciLCJrZXlib2FyZCIsIl9QaG90b1N3aXBlQmFzZSIsIl90aGlzMjMiLCJpc0Rlc3Ryb3lpbmciLCJfc2V0Q2xvc2VkU3RhdGVab29tUGFuIiwiX2NyZWF0ZU1haW5TdHJ1Y3R1cmUiLCJyb290Q2xhc3NlcyIsIndpbGxDaGFuZ2UiLCJfaW5pdGlhbEl0ZW1EYXRhIiwiZGVjb2RlSW1hZ2UiLCJfdGhpczIwIiwiX2luaXRpYXRlIiwiX3RoaXMkcHN3cCRlbGVtZW50MiIsIl90aGlzJHBzd3AkZWxlbWVudCIsInNldFByb3BlcnR5IiwiX2FuaW1hdGVUb09wZW5TdGF0ZSIsImdvVG8iLCJfdGhpcyRjdXJyU2xpZGUkaW5kZXgiLCJwb3RlbnRpYWxIb2xkZXJJbmRleCIsIl90aGlzMjQiLCJzbGlkZUluZGV4IiwiX3RoaXMkY3VyclNsaWRlMyIsImNvbnRhaW5lck9uZVBhblgiLCJjb250YWluZXJUd29QYW5YIiwiY29udGFpbmVyVHdvUGFuWSIsIl9pdGVtSG9sZGVyJHNsaWRlMyIsImFuaW1Qcm9wcyIsIl90aGlzMjEiLCJob2xkZXIiLCJ0YXBBY3Rpb24iLCJleHBvcnRzIiwiaGFzTW91c2UiLCJtYWluQ2xhc3MiLCJzY3JvbGxXaGVlbCIsImlzTmFOIiwidXBkYXRlU2l6ZSIsInBhZ2VZT2Zmc2V0IiwiX2hhbmRsZVBhZ2VSZXNpemUiLCJfdXBkYXRlUGFnZVNjcm9sbE9mZnNldCIsIm9wZW4iLCJfdGhpcyRjdXJyU2xpZGUiLCJfdGhpcyRjdXJyU2xpZGUyIiwicmVtb3ZlQWxsIiwib250b3VjaG1vdmUiLCJvbnRvdWNoZW5kIiwiX2l0ZW1Ib2xkZXIkc2xpZGUyIiwibWF0Y2hNZWRpYSIsIl90aGlzJGVsZW1lbnQyIiwiX3RoaXMyNSIsInRlc3QiLCJ1c2VyQWdlbnQiLCJzZXRTY3JvbGxPZmZzZXQiLCJhcHBlbmRIb2xkZXJzIiwiaW5pdCIsImJvZHkiLCJfb2JqZWN0U3ByZWFkIl0sIm1hcHBpbmdzIjoidW5HQWFBLFNBQVNBLGNBQWNDLEVBQVdDLEVBQVNDLEdBQ25DQyxFQUFLQyxTQUFTTCxjQUFjRSxDQUFPLEVBWjNDLE9BY01ELElBQ0ZHLEVBQUdILFVBQVlBLEdBR2JFLEdBQ0ZBLEVBQVdHLFlBQVlGLENBQUUsRUFuQjdCQSxDQUNBLENBT0EsU0FBQUcsZUFBQUMsRUFBQUMsR0FVRSxPQVRGRCxFQUFBRSxFQUFBRCxFQUFBQyxFQUNBRixFQUFBRyxFQUFBRixFQUFBRSxFQUVhTixLQUFBQSxJQUFMRCxFQUFFUSxLQUVSSixFQUFJUCxHQUFBQSxFQUFTVyxJQUlUVCxDQXFCTixDQWRBLFNBQUFVLFdBQUFDLEdBQ0FBLEVBQUFKLEVBQUFLLEtBQUFDLE1BQUFGLEVBQUFKLENBQUEsRUFDQUksRUFBQUgsRUFBQUksS0FBQUMsTUFBQUYsRUFBQUgsQ0FBQSxDQUNBLENBV0EsU0FBQU0sbUJBQUFULEVBQUFDLEdBQ0EsSUFBQUMsRUFBQUssS0FBQUcsSUFBQVYsRUFBQUUsRUFBQUQsRUFBQUMsQ0FBQSxFQUNBQyxFQUFBSSxLQUFBRyxJQUFBVixFQUFBRyxFQUFBRixFQUFBRSxDQUFBLEVBQ0EsT0FBQUksS0FBQUksS0FBQVQsRUFBQUEsRUFBQUMsRUFBQUEsQ0FBQSxDQWtCQSxDQVJB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QUttSCxPQUFPLENBQ3JFLENBQ0EsRUFBQSxDQUFBakgsSUFBQSxpQkFBQUMsTUFVQSxXQUNFLE9BQU82aUIsZ0JBQWVoakIsS0FBSzBFLFVBQVcxRSxLQUFLMkosVUFBWTNKLEtBQUsySixVQUFVeEcsS0FBT25ELEtBQUtrdUIsaUJBQWtCbHVCLElBQUksQ0FDMUcsQ0FDQSxFQUFBLENBQUFFLElBQUEsVUFBQUMsTUFNQSxXQUNFLE9BQU9ILEtBQUtzQixRQUFRbWYsTUFBNkIsRUFBckJ6Z0IsS0FBS3NWLFlBQVksQ0FDL0MsQ0FDQSxFQUFBLENBQUFwVixJQUFBLGtCQUFBQyxNQU9BLFNBQWdCbUIsR0FRZCxPQVBJOUIsT0FBT2d4QixXQUFXLDBDQUEwQyxFQUFFcE4sVUFDaEU5aEIsRUFBUXlvQixzQkFBd0IsT0FDaEN6b0IsRUFBUWdILHNCQUF3QixHQUtsQzJvQixjQUFBQSxjQUFBLEdBQVluRSxjQUFjLEVBQ3JCeHJCLENBQU8sQ0FFZCxDQUFDLEVBQUEsQ0FBQSxFQXBqQm9DIiwiZmlsZSI6InBob3Rvc3dpcGUuZXNtLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICAqIFBob3RvU3dpcGUgNS40LjQgLSBodHRwczovL3Bob3Rvc3dpcGUuY29tXG4gICogKGMpIDIwMjQgRG15dHJvIFNlbWVub3ZcbiAgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9waG90b3N3aXBlLmpzJykuUG9pbnR9IFBvaW50ICovXG5cbi8qKlxuICogQHRlbXBsYXRlIHtrZXlvZiBIVE1MRWxlbWVudFRhZ05hbWVNYXB9IFRcbiAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWVcbiAqIEBwYXJhbSB7VH0gdGFnTmFtZVxuICogQHBhcmFtIHtOb2RlfSBbYXBwZW5kVG9FbF1cbiAqIEByZXR1cm5zIHtIVE1MRWxlbWVudFRhZ05hbWVNYXBbVF19XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQoY2xhc3NOYW1lLCB0YWdOYW1lLCBhcHBlbmRUb0VsKSB7XG4gIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcblxuICBpZiAoY2xhc3NOYW1lKSB7XG4gICAgZWwuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICB9XG5cbiAgaWYgKGFwcGVuZFRvRWwpIHtcbiAgICBhcHBlbmRUb0VsLmFwcGVuZENoaWxkKGVsKTtcbiAgfVxuXG4gIHJldHVybiBlbDtcbn1cbi8qKlxuICogQHBhcmFtIHtQb2ludH0gcDFcbiAqIEBwYXJhbSB7UG9pbnR9IHAyXG4gKiBAcmV0dXJucyB7UG9pbnR9XG4gKi9cblxuZnVuY3Rpb24gZXF1YWxpemVQb2ludHMocDEsIHAyKSB7XG4gIHAxLnggPSBwMi54O1xuICBwMS55ID0gcDIueTtcblxuICBpZiAocDIuaWQgIT09IHVuZGVmaW5lZCkge1xuICAgIHAxLmlkID0gcDIuaWQ7XG4gIH1cblxuICByZXR1cm4gcDE7XG59XG4vKipcbiAqIEBwYXJhbSB7UG9pbnR9IHBcbiAqL1xuXG5mdW5jdGlvbiByb3VuZFBvaW50KHApIHtcbiAgcC54ID0gTWF0aC5yb3VuZChwLngpO1xuICBwLnkgPSBNYXRoLnJvdW5kKHAueSk7XG59XG4vKipcbiAqIFJldHVybnMgZGlzdGFuY2UgYmV0d2VlbiB0d28gcG9pbnRzLlxuICpcbiAqIEBwYXJhbSB7UG9pbnR9IHAxXG4gKiBAcGFyYW0ge1BvaW50fSBwMlxuICogQHJldHVybnMge251bWJlcn1cbiAqL1xuXG5mdW5jdGlvbiBnZXREaXN0YW5jZUJldHdlZW4ocDEsIHAyKSB7XG4gIGNvbnN0IHggPSBNYXRoLmFicyhwMS54IC0gcDIueCk7XG4gIGNvbnN0IHkgPSBNYXRoLmFicyhwMS55IC0gcDIueSk7XG4gIHJldHVybiBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSk7XG59XG4vKipcbiAqIFdoZXRoZXIgWCBhbmQgWSBwb3NpdGlvbnMgb2YgcG9pbnRzIGFyZSBlcXVhbFxuICpcbiAqIEBwYXJhbSB7UG9pbnR9IHAxXG4gKiBAcGFyYW0ge1BvaW50fSBwMlxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gcG9pbnRzRXF1YWwocDEsIHAyKSB7XG4gIHJldHVybiBwMS54ID09PSBwMi54ICYmIHAxLnkgPT09IHAyLnk7XG59XG4vKipcbiAqIFRoZSBmbG9hdCByZXN1bHQgYmV0d2VlbiB0aGUgbWluIGFuZCBtYXggdmFsdWVzLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWxcbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhcbiAqIEByZXR1cm5zIHtudW1iZXJ9XG4gKi9cblxuZnVuY3Rpb24gY2xhbXAodmFsLCBtaW4sIG1heCkge1xuICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodmFsLCBtaW4pLCBtYXgpO1xufVxuLyoqXG4gKiBHZXQgdHJhbnNmb3JtIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gKiBAcGFyYW0ge251bWJlcn0gW3ldXG4gKiBAcGFyYW0ge251bWJlcn0gW3NjYWxlXVxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiB0b1RyYW5zZm9ybVN0cmluZyh4LCB5LCBzY2FsZSkge1xuICBsZXQgcHJvcFZhbHVlID0gYHRyYW5zbGF0ZTNkKCR7eH1weCwke3kgfHwgMH1weCwwKWA7XG5cbiAgaWYgKHNjYWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICBwcm9wVmFsdWUgKz0gYCBzY2FsZTNkKCR7c2NhbGV9LCR7c2NhbGV9LDEpYDtcbiAgfVxuXG4gIHJldHVybiBwcm9wVmFsdWU7XG59XG4vKipcbiAqIEFwcGx5IHRyYW5zZm9ybTp0cmFuc2xhdGUoeCwgeSkgc2NhbGUoc2NhbGUpIHRvIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbFxuICogQHBhcmFtIHtudW1iZXJ9IHhcbiAqIEBwYXJhbSB7bnVtYmVyfSBbeV1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbc2NhbGVdXG4gKi9cblxuZnVuY3Rpb24gc2V0VHJhbnNmb3JtKGVsLCB4LCB5LCBzY2FsZSkge1xuICBlbC5zdHlsZS50cmFuc2Zvcm0gPSB0b1RyYW5zZm9ybVN0cmluZyh4LCB5LCBzY2FsZSk7XG59XG5jb25zdCBkZWZhdWx0Q1NTRWFzaW5nID0gJ2N1YmljLWJlemllciguNCwwLC4yMiwxKSc7XG4vKipcbiAqIEFwcGx5IENTUyB0cmFuc2l0aW9uIHRvIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbFxuICogQHBhcmFtIHtzdHJpbmd9IFtwcm9wXSBDU1MgcHJvcGVydHkgdG8gYW5pbWF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IFtkdXJhdGlvbl0gaW4gbXNcbiAqIEBwYXJhbSB7c3RyaW5nfSBbZWFzZV0gQ1NTIGVhc2luZyBmdW5jdGlvblxuICovXG5cbmZ1bmN0aW9uIHNldFRyYW5zaXRpb25TdHlsZShlbCwgcHJvcCwgZHVyYXRpb24sIGVhc2UpIHtcbiAgLy8gaW5PdXQ6ICdjdWJpYy1iZXppZXIoLjQsIDAsIC4yMiwgMSknLCAvLyBmb3IgXCJ0b2dnbGUgc3RhdGVcIiB0cmFuc2l0aW9uc1xuICAvLyBvdXQ6ICdjdWJpYy1iZXppZXIoMCwgMCwgLjIyLCAxKScsIC8vIGZvciBcInNob3dcIiB0cmFuc2l0aW9uc1xuICAvLyBpbjogJ2N1YmljLWJlemllciguNCwgMCwgMSwgMSknLy8gZm9yIFwiaGlkZVwiIHRyYW5zaXRpb25zXG4gIGVsLnN0eWxlLnRyYW5zaXRpb24gPSBwcm9wID8gYCR7cHJvcH0gJHtkdXJhdGlvbn1tcyAke2Vhc2UgfHwgZGVmYXVsdENTU0Vhc2luZ31gIDogJ25vbmUnO1xufVxuLyoqXG4gKiBBcHBseSB3aWR0aCBhbmQgaGVpZ2h0IENTUyBwcm9wZXJ0aWVzIHRvIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbFxuICogQHBhcmFtIHtzdHJpbmcgfCBudW1iZXJ9IHdcbiAqIEBwYXJhbSB7c3RyaW5nIHwgbnVtYmVyfSBoXG4gKi9cblxuZnVuY3Rpb24gc2V0V2lkdGhIZWlnaHQoZWwsIHcsIGgpIHtcbiAgZWwuc3R5bGUud2lkdGggPSB0eXBlb2YgdyA9PT0gJ251bWJlcicgPyBgJHt3fXB4YCA6IHc7XG4gIGVsLnN0eWxlLmhlaWdodCA9IHR5cGVvZiBoID09PSAnbnVtYmVyJyA/IGAke2h9cHhgIDogaDtcbn1cbi8qKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxcbiAqL1xuXG5mdW5jdGlvbiByZW1vdmVUcmFuc2l0aW9uU3R5bGUoZWwpIHtcbiAgc2V0VHJhbnNpdGlvblN0eWxlKGVsKTtcbn1cbi8qKlxuICogQHBhcmFtIHtIVE1MSW1hZ2VFbGVtZW50fSBpbWdcbiAqIEByZXR1cm5zIHtQcm9taXNlPEhUTUxJbWFnZUVsZW1lbnQgfCB2b2lkPn1cbiAqL1xuXG5mdW5jdGlvbiBkZWNvZGVJbWFnZShpbWcpIHtcbiAgaWYgKCdkZWNvZGUnIGluIGltZykge1xuICAgIHJldHVybiBpbWcuZGVjb2RlKCkuY2F0Y2goKCkgPT4ge30pO1xuICB9XG5cbiAgaWYgKGltZy5jb21wbGV0ZSkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoaW1nKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgaW1nLm9ubG9hZCA9ICgpID0+IHJlc29sdmUoaW1nKTtcblxuICAgIGltZy5vbmVycm9yID0gcmVqZWN0O1xuICB9KTtcbn1cbi8qKiBAdHlwZWRlZiB7TE9BRF9TVEFURVtrZXlvZiBMT0FEX1NUQVRFXX0gTG9hZFN0YXRlICovXG5cbi8qKiBAdHlwZSB7eyBJRExFOiAnaWRsZSc7IExPQURJTkc6ICdsb2FkaW5nJzsgTE9BREVEOiAnbG9hZGVkJzsgRVJST1I6ICdlcnJvcicgfX0gKi9cblxuY29uc3QgTE9BRF9TVEFURSA9IHtcbiAgSURMRTogJ2lkbGUnLFxuICBMT0FESU5HOiAnbG9hZGluZycsXG4gIExPQURFRDogJ2xvYWRlZCcsXG4gIEVSUk9SOiAnZXJyb3InXG59O1xuLyoqXG4gKiBDaGVjayBpZiBjbGljayBvciBrZXlkb3duIGV2ZW50IHdhcyBkaXNwYXRjaGVkXG4gKiB3aXRoIGEgc3BlY2lhbCBrZXkgb3IgdmlhIG1vdXNlIHdoZWVsLlxuICpcbiAqIEBwYXJhbSB7TW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnR9IGVcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5cbmZ1bmN0aW9uIHNwZWNpYWxLZXlVc2VkKGUpIHtcbiAgcmV0dXJuICdidXR0b24nIGluIGUgJiYgZS5idXR0b24gPT09IDEgfHwgZS5jdHJsS2V5IHx8IGUubWV0YUtleSB8fCBlLmFsdEtleSB8fCBlLnNoaWZ0S2V5O1xufVxuLyoqXG4gKiBQYXJzZSBgZ2FsbGVyeWAgb3IgYGNoaWxkcmVuYCBvcHRpb25zLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KCcuLi9waG90b3N3aXBlLmpzJykuRWxlbWVudFByb3ZpZGVyfSBbb3B0aW9uXVxuICogQHBhcmFtIHtzdHJpbmd9IFtsZWdhY3lTZWxlY3Rvcl1cbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnQgfCBEb2N1bWVudH0gW3BhcmVudF1cbiAqIEByZXR1cm5zIEhUTUxFbGVtZW50W11cbiAqL1xuXG5mdW5jdGlvbiBnZXRFbGVtZW50c0Zyb21PcHRpb24ob3B0aW9uLCBsZWdhY3lTZWxlY3RvciwgcGFyZW50ID0gZG9jdW1lbnQpIHtcbiAgLyoqIEB0eXBlIHtIVE1MRWxlbWVudFtdfSAqL1xuICBsZXQgZWxlbWVudHMgPSBbXTtcblxuICBpZiAob3B0aW9uIGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgIGVsZW1lbnRzID0gW29wdGlvbl07XG4gIH0gZWxzZSBpZiAob3B0aW9uIGluc3RhbmNlb2YgTm9kZUxpc3QgfHwgQXJyYXkuaXNBcnJheShvcHRpb24pKSB7XG4gICAgZWxlbWVudHMgPSBBcnJheS5mcm9tKG9wdGlvbik7XG4gIH0gZWxzZSB7XG4gICAgY29uc3Qgc2VsZWN0b3IgPSB0eXBlb2Ygb3B0aW9uID09PSAnc3RyaW5nJyA/IG9wdGlvbiA6IGxlZ2FjeVNlbGVjdG9yO1xuXG4gICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICBlbGVtZW50cyA9IEFycmF5LmZyb20ocGFyZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZWxlbWVudHM7XG59XG4vKipcbiAqIENoZWNrIGlmIGJyb3dzZXIgaXMgU2FmYXJpXG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNTYWZhcmkoKSB7XG4gIHJldHVybiAhIShuYXZpZ2F0b3IudmVuZG9yICYmIG5hdmlnYXRvci52ZW5kb3IubWF0Y2goL2FwcGxlL2kpKTtcbn1cblxuLy8gRGV0ZWN0IHBhc3NpdmUgZXZlbnQgbGlzdGVuZXIgc3VwcG9ydFxubGV0IHN1cHBvcnRzUGFzc2l2ZSA9IGZhbHNlO1xuLyogZXNsaW50LWRpc2FibGUgKi9cblxudHJ5IHtcbiAgLyogQHRzLWlnbm9yZSAqL1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGVzdCcsIG51bGwsIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ3Bhc3NpdmUnLCB7XG4gICAgZ2V0OiAoKSA9PiB7XG4gICAgICBzdXBwb3J0c1Bhc3NpdmUgPSB0cnVlO1xuICAgIH1cbiAgfSkpO1xufSBjYXRjaCAoZSkge31cbi8qIGVzbGludC1lbmFibGUgKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBQb29sSXRlbVxuICogQHByb3Age0hUTUxFbGVtZW50IHwgV2luZG93IHwgRG9jdW1lbnQgfCB1bmRlZmluZWQgfCBudWxsfSB0YXJnZXRcbiAqIEBwcm9wIHtzdHJpbmd9IHR5cGVcbiAqIEBwcm9wIHtFdmVudExpc3RlbmVyT3JFdmVudExpc3RlbmVyT2JqZWN0fSBsaXN0ZW5lclxuICogQHByb3Age2Jvb2xlYW59IFtwYXNzaXZlXVxuICovXG5cblxuY2xhc3MgRE9NRXZlbnRzIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge1Bvb2xJdGVtW119XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLl9wb29sID0gW107XG4gIH1cbiAgLyoqXG4gICAqIEFkZHMgZXZlbnQgbGlzdGVuZXJzXG4gICAqXG4gICAqIEBwYXJhbSB7UG9vbEl0ZW1bJ3RhcmdldCddfSB0YXJnZXRcbiAgICogQHBhcmFtIHtQb29sSXRlbVsndHlwZSddfSB0eXBlIENhbiBiZSBtdWx0aXBsZSwgc2VwYXJhdGVkIGJ5IHNwYWNlLlxuICAgKiBAcGFyYW0ge1Bvb2xJdGVtWydsaXN0ZW5lciddfSBsaXN0ZW5lclxuICAgKiBAcGFyYW0ge1Bvb2xJdGVtWydwYXNzaXZlJ119IFtwYXNzaXZlXVxuICAgKi9cblxuXG4gIGFkZCh0YXJnZXQsIHR5cGUsIGxpc3RlbmVyLCBwYXNzaXZlKSB7XG4gICAgdGhpcy5fdG9nZ2xlTGlzdGVuZXIodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgcGFzc2l2ZSk7XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZXMgZXZlbnQgbGlzdGVuZXJzXG4gICAqXG4gICAqIEBwYXJhbSB7UG9vbEl0ZW1bJ3RhcmdldCddfSB0YXJnZXRcbiAgICogQHBhcmFtIHtQb29sSXRlbVsndHlwZSddfSB0eXBlXG4gICAqIEBwYXJhbSB7UG9vbEl0ZW1bJ2xpc3RlbmVyJ119IGxpc3RlbmVyXG4gICAqIEBwYXJhbSB7UG9vbEl0ZW1bJ3Bhc3NpdmUnXX0gW3Bhc3NpdmVdXG4gICAqL1xuXG5cbiAgcmVtb3ZlKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIHBhc3NpdmUpIHtcbiAgICB0aGlzLl90b2dnbGVMaXN0ZW5lcih0YXJnZXQsIHR5cGUsIGxpc3RlbmVyLCBwYXNzaXZlLCB0cnVlKTtcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlcyBhbGwgYm91bmQgZXZlbnRzXG4gICAqL1xuXG5cbiAgcmVtb3ZlQWxsKCkge1xuICAgIHRoaXMuX3Bvb2wuZm9yRWFjaChwb29sSXRlbSA9PiB7XG4gICAgICB0aGlzLl90b2dnbGVMaXN0ZW5lcihwb29sSXRlbS50YXJnZXQsIHBvb2xJdGVtLnR5cGUsIHBvb2xJdGVtLmxpc3RlbmVyLCBwb29sSXRlbS5wYXNzaXZlLCB0cnVlLCB0cnVlKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3Bvb2wgPSBbXTtcbiAgfVxuICAvKipcbiAgICogQWRkcyBvciByZW1vdmVzIGV2ZW50XG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7UG9vbEl0ZW1bJ3RhcmdldCddfSB0YXJnZXRcbiAgICogQHBhcmFtIHtQb29sSXRlbVsndHlwZSddfSB0eXBlXG4gICAqIEBwYXJhbSB7UG9vbEl0ZW1bJ2xpc3RlbmVyJ119IGxpc3RlbmVyXG4gICAqIEBwYXJhbSB7UG9vbEl0ZW1bJ3Bhc3NpdmUnXX0gW3Bhc3NpdmVdXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3VuYmluZF0gV2hldGhlciB0aGUgZXZlbnQgc2hvdWxkIGJlIGFkZGVkIG9yIHJlbW92ZWRcbiAgICogQHBhcmFtIHtib29sZWFufSBbc2tpcFBvb2xdIFdoZXRoZXIgZXZlbnRzIHBvb2wgc2hvdWxkIGJlIHNraXBwZWRcbiAgICovXG5cblxuICBfdG9nZ2xlTGlzdGVuZXIodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgcGFzc2l2ZSwgdW5iaW5kLCBza2lwUG9vbCkge1xuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbWV0aG9kTmFtZSA9IHVuYmluZCA/ICdyZW1vdmVFdmVudExpc3RlbmVyJyA6ICdhZGRFdmVudExpc3RlbmVyJztcbiAgICBjb25zdCB0eXBlcyA9IHR5cGUuc3BsaXQoJyAnKTtcbiAgICB0eXBlcy5mb3JFYWNoKGVUeXBlID0+IHtcbiAgICAgIGlmIChlVHlwZSkge1xuICAgICAgICAvLyBFdmVudHMgcG9vbCBpcyB1c2VkIHRvIGVhc2lseSB1bmJpbmQgYWxsIGV2ZW50cyB3aGVuIFBob3RvU3dpcGUgaXMgY2xvc2VkLFxuICAgICAgICAvLyBzbyBkZXZlbG9wZXIgZG9lc24ndCBuZWVkIHRvIGRvIHRoaXMgbWFudWFsbHlcbiAgICAgICAgaWYgKCFza2lwUG9vbCkge1xuICAgICAgICAgIGlmICh1bmJpbmQpIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSBmcm9tIHRoZSBldmVudHMgcG9vbFxuICAgICAgICAgICAgdGhpcy5fcG9vbCA9IHRoaXMuX3Bvb2wuZmlsdGVyKHBvb2xJdGVtID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHBvb2xJdGVtLnR5cGUgIT09IGVUeXBlIHx8IHBvb2xJdGVtLmxpc3RlbmVyICE9PSBsaXN0ZW5lciB8fCBwb29sSXRlbS50YXJnZXQgIT09IHRhcmdldDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBBZGQgdG8gdGhlIGV2ZW50cyBwb29sXG4gICAgICAgICAgICB0aGlzLl9wb29sLnB1c2goe1xuICAgICAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgICAgIHR5cGU6IGVUeXBlLFxuICAgICAgICAgICAgICBsaXN0ZW5lcixcbiAgICAgICAgICAgICAgcGFzc2l2ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IC8vIG1vc3QgUGhvdG9Td2lwZSBldmVudHMgY2FsbCBwcmV2ZW50RGVmYXVsdCxcbiAgICAgICAgLy8gYW5kIHdlIGRvIG5vdCBuZWVkIGJyb3dzZXIgdG8gc2Nyb2xsIHRoZSBwYWdlXG5cblxuICAgICAgICBjb25zdCBldmVudE9wdGlvbnMgPSBzdXBwb3J0c1Bhc3NpdmUgPyB7XG4gICAgICAgICAgcGFzc2l2ZTogcGFzc2l2ZSB8fCBmYWxzZVxuICAgICAgICB9IDogZmFsc2U7XG4gICAgICAgIHRhcmdldFttZXRob2ROYW1lXShlVHlwZSwgbGlzdGVuZXIsIGV2ZW50T3B0aW9ucyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxufVxuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vcGhvdG9zd2lwZS5qcycpLlBob3RvU3dpcGVPcHRpb25zfSBQaG90b1N3aXBlT3B0aW9ucyAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vY29yZS9iYXNlLmpzJykuZGVmYXVsdH0gUGhvdG9Td2lwZUJhc2UgKi9cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4uL3Bob3Rvc3dpcGUuanMnKS5Qb2ludH0gUG9pbnQgKi9cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4uL3NsaWRlL3NsaWRlLmpzJykuU2xpZGVEYXRhfSBTbGlkZURhdGEgKi9cblxuLyoqXG4gKiBAcGFyYW0ge1Bob3RvU3dpcGVPcHRpb25zfSBvcHRpb25zXG4gKiBAcGFyYW0ge1Bob3RvU3dpcGVCYXNlfSBwc3dwXG4gKiBAcmV0dXJucyB7UG9pbnR9XG4gKi9cbmZ1bmN0aW9uIGdldFZpZXdwb3J0U2l6ZShvcHRpb25zLCBwc3dwKSB7XG4gIGlmIChvcHRpb25zLmdldFZpZXdwb3J0U2l6ZUZuKSB7XG4gICAgY29uc3QgbmV3Vmlld3BvcnRTaXplID0gb3B0aW9ucy5nZXRWaWV3cG9ydFNpemVGbihvcHRpb25zLCBwc3dwKTtcblxuICAgIGlmIChuZXdWaWV3cG9ydFNpemUpIHtcbiAgICAgIHJldHVybiBuZXdWaWV3cG9ydFNpemU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB4OiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgsXG4gICAgLy8gVE9ETzogaGVpZ2h0IG9uIG1vYmlsZSBpcyB2ZXJ5IGluY29zaXN0ZW50IGR1ZSB0byB0b29sYmFyXG4gICAgLy8gZmluZCBhIHdheSB0byBpbXByb3ZlIHRoaXNcbiAgICAvL1xuICAgIC8vIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgLSBkb2Vzbid0IHNlZW0gdG8gd29yayB3ZWxsXG4gICAgeTogd2luZG93LmlubmVySGVpZ2h0XG4gIH07XG59XG4vKipcbiAqIFBhcnNlcyBwYWRkaW5nIG9wdGlvbi5cbiAqIFN1cHBvcnRlZCBmb3JtYXRzOlxuICpcbiAqIC8vIE9iamVjdFxuICogcGFkZGluZzoge1xuICogIHRvcDogMCxcbiAqICBib3R0b206IDAsXG4gKiAgbGVmdDogMCxcbiAqICByaWdodDogMFxuICogfVxuICpcbiAqIC8vIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBvYmplY3RcbiAqIHBhZGRpbmdGbjogKHZpZXdwb3J0U2l6ZSwgaXRlbURhdGEsIGluZGV4KSA9PiB7XG4gKiAgcmV0dXJuIHtcbiAqICAgIHRvcDogMCxcbiAqICAgIGJvdHRvbTogMCxcbiAqICAgIGxlZnQ6IDAsXG4gKiAgICByaWdodDogMFxuICogIH07XG4gKiB9XG4gKlxuICogLy8gTGVnYWN5IHZhcmlhbnRcbiAqIHBhZGRpbmdMZWZ0OiAwLFxuICogcGFkZGluZ1JpZ2h0OiAwLFxuICogcGFkZGluZ1RvcDogMCxcbiAqIHBhZGRpbmdCb3R0b206IDAsXG4gKlxuICogQHBhcmFtIHsnbGVmdCcgfCAndG9wJyB8ICdib3R0b20nIHwgJ3JpZ2h0J30gcHJvcFxuICogQHBhcmFtIHtQaG90b1N3aXBlT3B0aW9uc30gb3B0aW9ucyBQaG90b1N3aXBlIG9wdGlvbnNcbiAqIEBwYXJhbSB7UG9pbnR9IHZpZXdwb3J0U2l6ZSBQaG90b1N3aXBlIHZpZXdwb3J0IHNpemUsIGZvciBleGFtcGxlOiB7IHg6ODAwLCB5OjYwMCB9XG4gKiBAcGFyYW0ge1NsaWRlRGF0YX0gaXRlbURhdGEgRGF0YSBhYm91dCB0aGUgc2xpZGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBTbGlkZSBpbmRleFxuICogQHJldHVybnMge251bWJlcn1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZVBhZGRpbmdPcHRpb24ocHJvcCwgb3B0aW9ucywgdmlld3BvcnRTaXplLCBpdGVtRGF0YSwgaW5kZXgpIHtcbiAgbGV0IHBhZGRpbmdWYWx1ZSA9IDA7XG5cbiAgaWYgKG9wdGlvbnMucGFkZGluZ0ZuKSB7XG4gICAgcGFkZGluZ1ZhbHVlID0gb3B0aW9ucy5wYWRkaW5nRm4odmlld3BvcnRTaXplLCBpdGVtRGF0YSwgaW5kZXgpW3Byb3BdO1xuICB9IGVsc2UgaWYgKG9wdGlvbnMucGFkZGluZykge1xuICAgIHBhZGRpbmdWYWx1ZSA9IG9wdGlvbnMucGFkZGluZ1twcm9wXTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBsZWdhY3lQcm9wTmFtZSA9ICdwYWRkaW5nJyArIHByb3BbMF0udG9VcHBlckNhc2UoKSArIHByb3Auc2xpY2UoMSk7IC8vIEB0cy1leHBlY3QtZXJyb3JcblxuICAgIGlmIChvcHRpb25zW2xlZ2FjeVByb3BOYW1lXSkge1xuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgcGFkZGluZ1ZhbHVlID0gb3B0aW9uc1tsZWdhY3lQcm9wTmFtZV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIE51bWJlcihwYWRkaW5nVmFsdWUpIHx8IDA7XG59XG4vKipcbiAqIEBwYXJhbSB7UGhvdG9Td2lwZU9wdGlvbnN9IG9wdGlvbnNcbiAqIEBwYXJhbSB7UG9pbnR9IHZpZXdwb3J0U2l6ZVxuICogQHBhcmFtIHtTbGlkZURhdGF9IGl0ZW1EYXRhXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcbiAqIEByZXR1cm5zIHtQb2ludH1cbiAqL1xuXG5mdW5jdGlvbiBnZXRQYW5BcmVhU2l6ZShvcHRpb25zLCB2aWV3cG9ydFNpemUsIGl0ZW1EYXRhLCBpbmRleCkge1xuICByZXR1cm4ge1xuICAgIHg6IHZpZXdwb3J0U2l6ZS54IC0gcGFyc2VQYWRkaW5nT3B0aW9uKCdsZWZ0Jywgb3B0aW9ucywgdmlld3BvcnRTaXplLCBpdGVtRGF0YSwgaW5kZXgpIC0gcGFyc2VQYWRkaW5nT3B0aW9uKCdyaWdodCcsIG9wdGlvbnMsIHZpZXdwb3J0U2l6ZSwgaXRlbURhdGEsIGluZGV4KSxcbiAgICB5OiB2aWV3cG9ydFNpemUueSAtIHBhcnNlUGFkZGluZ09wdGlvbigndG9wJywgb3B0aW9ucywgdmlld3BvcnRTaXplLCBpdGVtRGF0YSwgaW5kZXgpIC0gcGFyc2VQYWRkaW5nT3B0aW9uKCdib3R0b20nLCBvcHRpb25zLCB2aWV3cG9ydFNpemUsIGl0ZW1EYXRhLCBpbmRleClcbiAgfTtcbn1cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4vc2xpZGUuanMnKS5kZWZhdWx0fSBTbGlkZSAqL1xuXG4vKiogQHR5cGVkZWYge1JlY29yZDxBeGlzLCBudW1iZXI+fSBQb2ludCAqL1xuXG4vKiogQHR5cGVkZWYgeyd4JyB8ICd5J30gQXhpcyAqL1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgbWluaW11bSwgbWF4aW11bSBhbmQgaW5pdGlhbCAoY2VudGVyKSBib3VuZHMgb2YgYSBzbGlkZVxuICovXG5cbmNsYXNzIFBhbkJvdW5kcyB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge1NsaWRlfSBzbGlkZVxuICAgKi9cbiAgY29uc3RydWN0b3Ioc2xpZGUpIHtcbiAgICB0aGlzLnNsaWRlID0gc2xpZGU7XG4gICAgdGhpcy5jdXJyWm9vbUxldmVsID0gMTtcbiAgICB0aGlzLmNlbnRlciA9XG4gICAgLyoqIEB0eXBlIHtQb2ludH0gKi9cbiAgICB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMFxuICAgIH07XG4gICAgdGhpcy5tYXggPVxuICAgIC8qKiBAdHlwZSB7UG9pbnR9ICovXG4gICAge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDBcbiAgICB9O1xuICAgIHRoaXMubWluID1cbiAgICAvKiogQHR5cGUge1BvaW50fSAqL1xuICAgIHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogX2dldEl0ZW1Cb3VuZHNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGN1cnJab29tTGV2ZWxcbiAgICovXG5cblxuICB1cGRhdGUoY3Vyclpvb21MZXZlbCkge1xuICAgIHRoaXMuY3Vyclpvb21MZXZlbCA9IGN1cnJab29tTGV2ZWw7XG5cbiAgICBpZiAoIXRoaXMuc2xpZGUud2lkdGgpIHtcbiAgICAgIHRoaXMucmVzZXQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fdXBkYXRlQXhpcygneCcpO1xuXG4gICAgICB0aGlzLl91cGRhdGVBeGlzKCd5Jyk7XG5cbiAgICAgIHRoaXMuc2xpZGUucHN3cC5kaXNwYXRjaCgnY2FsY0JvdW5kcycsIHtcbiAgICAgICAgc2xpZGU6IHRoaXMuc2xpZGVcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogX2NhbGN1bGF0ZUl0ZW1Cb3VuZHNGb3JBeGlzXG4gICAqXG4gICAqIEBwYXJhbSB7QXhpc30gYXhpc1xuICAgKi9cblxuXG4gIF91cGRhdGVBeGlzKGF4aXMpIHtcbiAgICBjb25zdCB7XG4gICAgICBwc3dwXG4gICAgfSA9IHRoaXMuc2xpZGU7XG4gICAgY29uc3QgZWxTaXplID0gdGhpcy5zbGlkZVtheGlzID09PSAneCcgPyAnd2lkdGgnIDogJ2hlaWdodCddICogdGhpcy5jdXJyWm9vbUxldmVsO1xuICAgIGNvbnN0IHBhZGRpbmdQcm9wID0gYXhpcyA9PT0gJ3gnID8gJ2xlZnQnIDogJ3RvcCc7XG4gICAgY29uc3QgcGFkZGluZyA9IHBhcnNlUGFkZGluZ09wdGlvbihwYWRkaW5nUHJvcCwgcHN3cC5vcHRpb25zLCBwc3dwLnZpZXdwb3J0U2l6ZSwgdGhpcy5zbGlkZS5kYXRhLCB0aGlzLnNsaWRlLmluZGV4KTtcbiAgICBjb25zdCBwYW5BcmVhU2l6ZSA9IHRoaXMuc2xpZGUucGFuQXJlYVNpemVbYXhpc107IC8vIERlZmF1bHQgcG9zaXRpb24gb2YgZWxlbWVudC5cbiAgICAvLyBCeSBkZWZhdWx0LCBpdCBpcyBjZW50ZXIgb2Ygdmlld3BvcnQ6XG5cbiAgICB0aGlzLmNlbnRlcltheGlzXSA9IE1hdGgucm91bmQoKHBhbkFyZWFTaXplIC0gZWxTaXplKSAvIDIpICsgcGFkZGluZzsgLy8gbWF4aW11bSBwYW4gcG9zaXRpb25cblxuICAgIHRoaXMubWF4W2F4aXNdID0gZWxTaXplID4gcGFuQXJlYVNpemUgPyBNYXRoLnJvdW5kKHBhbkFyZWFTaXplIC0gZWxTaXplKSArIHBhZGRpbmcgOiB0aGlzLmNlbnRlcltheGlzXTsgLy8gbWluaW11bSBwYW4gcG9zaXRpb25cblxuICAgIHRoaXMubWluW2F4aXNdID0gZWxTaXplID4gcGFuQXJlYVNpemUgPyBwYWRkaW5nIDogdGhpcy5jZW50ZXJbYXhpc107XG4gIH0gLy8gX2dldFplcm9Cb3VuZHNcblxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMuY2VudGVyLnggPSAwO1xuICAgIHRoaXMuY2VudGVyLnkgPSAwO1xuICAgIHRoaXMubWF4LnggPSAwO1xuICAgIHRoaXMubWF4LnkgPSAwO1xuICAgIHRoaXMubWluLnggPSAwO1xuICAgIHRoaXMubWluLnkgPSAwO1xuICB9XG4gIC8qKlxuICAgKiBDb3JyZWN0IHBhbiBwb3NpdGlvbiBpZiBpdCdzIGJleW9uZCB0aGUgYm91bmRzXG4gICAqXG4gICAqIEBwYXJhbSB7QXhpc30gYXhpcyB4IG9yIHlcbiAgICogQHBhcmFtIHtudW1iZXJ9IHBhbk9mZnNldFxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cblxuXG4gIGNvcnJlY3RQYW4oYXhpcywgcGFuT2Zmc2V0KSB7XG4gICAgLy8gY2hlY2tQYW5Cb3VuZHNcbiAgICByZXR1cm4gY2xhbXAocGFuT2Zmc2V0LCB0aGlzLm1heFtheGlzXSwgdGhpcy5taW5bYXhpc10pO1xuICB9XG5cbn1cblxuY29uc3QgTUFYX0lNQUdFX1dJRFRIID0gNDAwMDtcbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9waG90b3N3aXBlLmpzJykuZGVmYXVsdH0gUGhvdG9Td2lwZSAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vcGhvdG9zd2lwZS5qcycpLlBob3RvU3dpcGVPcHRpb25zfSBQaG90b1N3aXBlT3B0aW9ucyAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vcGhvdG9zd2lwZS5qcycpLlBvaW50fSBQb2ludCAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vc2xpZGUvc2xpZGUuanMnKS5TbGlkZURhdGF9IFNsaWRlRGF0YSAqL1xuXG4vKiogQHR5cGVkZWYgeydmaXQnIHwgJ2ZpbGwnIHwgbnVtYmVyIHwgKCh6b29tTGV2ZWxPYmplY3Q6IFpvb21MZXZlbCkgPT4gbnVtYmVyKX0gWm9vbUxldmVsT3B0aW9uICovXG5cbi8qKlxuICogQ2FsY3VsYXRlcyB6b29tIGxldmVscyBmb3Igc3BlY2lmaWMgc2xpZGUuXG4gKiBEZXBlbmRzIG9uIHZpZXdwb3J0IHNpemUgYW5kIGltYWdlIHNpemUuXG4gKi9cblxuY2xhc3MgWm9vbUxldmVsIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7UGhvdG9Td2lwZU9wdGlvbnN9IG9wdGlvbnMgUGhvdG9Td2lwZSBvcHRpb25zXG4gICAqIEBwYXJhbSB7U2xpZGVEYXRhfSBpdGVtRGF0YSBTbGlkZSBkYXRhXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBTbGlkZSBpbmRleFxuICAgKiBAcGFyYW0ge1Bob3RvU3dpcGV9IFtwc3dwXSBQaG90b1N3aXBlIGluc3RhbmNlLCBjYW4gYmUgdW5kZWZpbmVkIGlmIG5vdCBpbml0aWFsaXplZCB5ZXRcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGl0ZW1EYXRhLCBpbmRleCwgcHN3cCkge1xuICAgIHRoaXMucHN3cCA9IHBzd3A7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLml0ZW1EYXRhID0gaXRlbURhdGE7XG4gICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgIC8qKiBAdHlwZSB7IFBvaW50IHwgbnVsbCB9ICovXG5cbiAgICB0aGlzLnBhbkFyZWFTaXplID0gbnVsbDtcbiAgICAvKiogQHR5cGUgeyBQb2ludCB8IG51bGwgfSAqL1xuXG4gICAgdGhpcy5lbGVtZW50U2l6ZSA9IG51bGw7XG4gICAgdGhpcy5maXQgPSAxO1xuICAgIHRoaXMuZmlsbCA9IDE7XG4gICAgdGhpcy52RmlsbCA9IDE7XG4gICAgdGhpcy5pbml0aWFsID0gMTtcbiAgICB0aGlzLnNlY29uZGFyeSA9IDE7XG4gICAgdGhpcy5tYXggPSAxO1xuICAgIHRoaXMubWluID0gMTtcbiAgfVxuICAvKipcbiAgICogQ2FsY3VsYXRlIGluaXRpYWwsIHNlY29uZGFyeSBhbmQgbWF4aW11bSB6b29tIGxldmVsIGZvciB0aGUgc3BlY2lmaWVkIHNsaWRlLlxuICAgKlxuICAgKiBJdCBzaG91bGQgYmUgY2FsbGVkIHdoZW4gZWl0aGVyIGltYWdlIG9yIHZpZXdwb3J0IHNpemUgY2hhbmdlcy5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IG1heFdpZHRoXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhIZWlnaHRcbiAgICogQHBhcmFtIHtQb2ludH0gcGFuQXJlYVNpemVcbiAgICovXG5cblxuICB1cGRhdGUobWF4V2lkdGgsIG1heEhlaWdodCwgcGFuQXJlYVNpemUpIHtcbiAgICAvKiogQHR5cGUge1BvaW50fSAqL1xuICAgIGNvbnN0IGVsZW1lbnRTaXplID0ge1xuICAgICAgeDogbWF4V2lkdGgsXG4gICAgICB5OiBtYXhIZWlnaHRcbiAgICB9O1xuICAgIHRoaXMuZWxlbWVudFNpemUgPSBlbGVtZW50U2l6ZTtcbiAgICB0aGlzLnBhbkFyZWFTaXplID0gcGFuQXJlYVNpemU7XG4gICAgY29uc3QgaFJhdGlvID0gcGFuQXJlYVNpemUueCAvIGVsZW1lbnRTaXplLng7XG4gICAgY29uc3QgdlJhdGlvID0gcGFuQXJlYVNpemUueSAvIGVsZW1lbnRTaXplLnk7XG4gICAgdGhpcy5maXQgPSBNYXRoLm1pbigxLCBoUmF0aW8gPCB2UmF0aW8gPyBoUmF0aW8gOiB2UmF0aW8pO1xuICAgIHRoaXMuZmlsbCA9IE1hdGgubWluKDEsIGhSYXRpbyA+IHZSYXRpbyA/IGhSYXRpbyA6IHZSYXRpbyk7IC8vIHpvb20udkZpbGwgZGVmaW5lcyB6b29tIGxldmVsIG9mIHRoZSBpbWFnZVxuICAgIC8vIHdoZW4gaXQgaGFzIDEwMCUgb2Ygdmlld3BvcnQgdmVydGljYWwgc3BhY2UgKGhlaWdodClcblxuICAgIHRoaXMudkZpbGwgPSBNYXRoLm1pbigxLCB2UmF0aW8pO1xuICAgIHRoaXMuaW5pdGlhbCA9IHRoaXMuX2dldEluaXRpYWwoKTtcbiAgICB0aGlzLnNlY29uZGFyeSA9IHRoaXMuX2dldFNlY29uZGFyeSgpO1xuICAgIHRoaXMubWF4ID0gTWF0aC5tYXgodGhpcy5pbml0aWFsLCB0aGlzLnNlY29uZGFyeSwgdGhpcy5fZ2V0TWF4KCkpO1xuICAgIHRoaXMubWluID0gTWF0aC5taW4odGhpcy5maXQsIHRoaXMuaW5pdGlhbCwgdGhpcy5zZWNvbmRhcnkpO1xuXG4gICAgaWYgKHRoaXMucHN3cCkge1xuICAgICAgdGhpcy5wc3dwLmRpc3BhdGNoKCd6b29tTGV2ZWxzVXBkYXRlJywge1xuICAgICAgICB6b29tTGV2ZWxzOiB0aGlzLFxuICAgICAgICBzbGlkZURhdGE6IHRoaXMuaXRlbURhdGFcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogUGFyc2VzIHVzZXItZGVmaW5lZCB6b29tIG9wdGlvbi5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHsnaW5pdGlhbCcgfCAnc2Vjb25kYXJ5JyB8ICdtYXgnfSBvcHRpb25QcmVmaXggWm9vbSBsZXZlbCBvcHRpb24gcHJlZml4IChpbml0aWFsLCBzZWNvbmRhcnksIG1heClcbiAgICogQHJldHVybnMgeyBudW1iZXIgfCB1bmRlZmluZWQgfVxuICAgKi9cblxuXG4gIF9wYXJzZVpvb21MZXZlbE9wdGlvbihvcHRpb25QcmVmaXgpIHtcbiAgICBjb25zdCBvcHRpb25OYW1lID1cbiAgICAvKiogQHR5cGUgeydpbml0aWFsWm9vbUxldmVsJyB8ICdzZWNvbmRhcnlab29tTGV2ZWwnIHwgJ21heFpvb21MZXZlbCd9ICovXG4gICAgb3B0aW9uUHJlZml4ICsgJ1pvb21MZXZlbCc7XG4gICAgY29uc3Qgb3B0aW9uVmFsdWUgPSB0aGlzLm9wdGlvbnNbb3B0aW9uTmFtZV07XG5cbiAgICBpZiAoIW9wdGlvblZhbHVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25WYWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIG9wdGlvblZhbHVlKHRoaXMpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25WYWx1ZSA9PT0gJ2ZpbGwnKSB7XG4gICAgICByZXR1cm4gdGhpcy5maWxsO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25WYWx1ZSA9PT0gJ2ZpdCcpIHtcbiAgICAgIHJldHVybiB0aGlzLmZpdDtcbiAgICB9XG5cbiAgICByZXR1cm4gTnVtYmVyKG9wdGlvblZhbHVlKTtcbiAgfVxuICAvKipcbiAgICogR2V0IHpvb20gbGV2ZWwgdG8gd2hpY2ggaW1hZ2Ugd2lsbCBiZSB6b29tZWQgYWZ0ZXIgZG91YmxlLXRhcCBnZXN0dXJlLFxuICAgKiBvciB3aGVuIHVzZXIgY2xpY2tzIG9uIHpvb20gaWNvbixcbiAgICogb3IgbW91c2UtY2xpY2sgb24gaW1hZ2UgaXRzZWxmLlxuICAgKiBJZiB5b3UgcmV0dXJuIDEgaW1hZ2Ugd2lsbCBiZSB6b29tZWQgdG8gaXRzIG9yaWdpbmFsIHNpemUuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG5cblxuICBfZ2V0U2Vjb25kYXJ5KCkge1xuICAgIGxldCBjdXJyWm9vbUxldmVsID0gdGhpcy5fcGFyc2Vab29tTGV2ZWxPcHRpb24oJ3NlY29uZGFyeScpO1xuXG4gICAgaWYgKGN1cnJab29tTGV2ZWwpIHtcbiAgICAgIHJldHVybiBjdXJyWm9vbUxldmVsO1xuICAgIH0gLy8gM3ggb2YgXCJmaXRcIiBzdGF0ZSwgYnV0IG5vdCBsYXJnZXIgdGhhbiBvcmlnaW5hbFxuXG5cbiAgICBjdXJyWm9vbUxldmVsID0gTWF0aC5taW4oMSwgdGhpcy5maXQgKiAzKTtcblxuICAgIGlmICh0aGlzLmVsZW1lbnRTaXplICYmIGN1cnJab29tTGV2ZWwgKiB0aGlzLmVsZW1lbnRTaXplLnggPiBNQVhfSU1BR0VfV0lEVEgpIHtcbiAgICAgIGN1cnJab29tTGV2ZWwgPSBNQVhfSU1BR0VfV0lEVEggLyB0aGlzLmVsZW1lbnRTaXplLng7XG4gICAgfVxuXG4gICAgcmV0dXJuIGN1cnJab29tTGV2ZWw7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBpbml0aWFsIGltYWdlIHpvb20gbGV2ZWwuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG5cblxuICBfZ2V0SW5pdGlhbCgpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFyc2Vab29tTGV2ZWxPcHRpb24oJ2luaXRpYWwnKSB8fCB0aGlzLmZpdDtcbiAgfVxuICAvKipcbiAgICogTWF4aW11bSB6b29tIGxldmVsIHdoZW4gdXNlciB6b29tc1xuICAgKiB2aWEgem9vbS9waW5jaCBnZXN0dXJlLFxuICAgKiB2aWEgY21kL2N0cmwtd2hlZWwgb3IgdmlhIHRyYWNrcGFkLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuXG5cbiAgX2dldE1heCgpIHtcbiAgICAvLyBtYXggem9vbSBsZXZlbCBpcyB4NCBmcm9tIFwiZml0IHN0YXRlXCIsXG4gICAgLy8gdXNlZCBmb3Igem9vbSBnZXN0dXJlIGFuZCBjdHJsL3RyYWNrcGFkIHpvb21cbiAgICByZXR1cm4gdGhpcy5fcGFyc2Vab29tTGV2ZWxPcHRpb24oJ21heCcpIHx8IE1hdGgubWF4KDEsIHRoaXMuZml0ICogNCk7XG4gIH1cblxufVxuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vcGhvdG9zd2lwZS5qcycpLmRlZmF1bHR9IFBob3RvU3dpcGUgKi9cbi8qKlxuICogUmVuZGVycyBhbmQgYWxsb3dzIHRvIGNvbnRyb2wgYSBzaW5nbGUgc2xpZGVcbiAqL1xuXG5jbGFzcyBTbGlkZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge1NsaWRlRGF0YX0gZGF0YVxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtQaG90b1N3aXBlfSBwc3dwXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkYXRhLCBpbmRleCwgcHN3cCkge1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgIHRoaXMucHN3cCA9IHBzd3A7XG4gICAgdGhpcy5pc0FjdGl2ZSA9IGluZGV4ID09PSBwc3dwLmN1cnJJbmRleDtcbiAgICB0aGlzLmN1cnJlbnRSZXNvbHV0aW9uID0gMDtcbiAgICAvKiogQHR5cGUge1BvaW50fSAqL1xuXG4gICAgdGhpcy5wYW5BcmVhU2l6ZSA9IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwXG4gICAgfTtcbiAgICAvKiogQHR5cGUge1BvaW50fSAqL1xuXG4gICAgdGhpcy5wYW4gPSB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMFxuICAgIH07XG4gICAgdGhpcy5pc0ZpcnN0U2xpZGUgPSB0aGlzLmlzQWN0aXZlICYmICFwc3dwLm9wZW5lci5pc09wZW47XG4gICAgdGhpcy56b29tTGV2ZWxzID0gbmV3IFpvb21MZXZlbChwc3dwLm9wdGlvbnMsIGRhdGEsIGluZGV4LCBwc3dwKTtcbiAgICB0aGlzLnBzd3AuZGlzcGF0Y2goJ2dldHRpbmdEYXRhJywge1xuICAgICAgc2xpZGU6IHRoaXMsXG4gICAgICBkYXRhOiB0aGlzLmRhdGEsXG4gICAgICBpbmRleFxuICAgIH0pO1xuICAgIHRoaXMuY29udGVudCA9IHRoaXMucHN3cC5jb250ZW50TG9hZGVyLmdldENvbnRlbnRCeVNsaWRlKHRoaXMpO1xuICAgIHRoaXMuY29udGFpbmVyID0gY3JlYXRlRWxlbWVudCgncHN3cF9fem9vbS13cmFwJywgJ2RpdicpO1xuICAgIC8qKiBAdHlwZSB7SFRNTEVsZW1lbnQgfCBudWxsfSAqL1xuXG4gICAgdGhpcy5ob2xkZXJFbGVtZW50ID0gbnVsbDtcbiAgICB0aGlzLmN1cnJab29tTGV2ZWwgPSAxO1xuICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuXG4gICAgdGhpcy53aWR0aCA9IHRoaXMuY29udGVudC53aWR0aDtcbiAgICAvKiogQHR5cGUge251bWJlcn0gKi9cblxuICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5jb250ZW50LmhlaWdodDtcbiAgICB0aGlzLmhlYXZ5QXBwZW5kZWQgPSBmYWxzZTtcbiAgICB0aGlzLmJvdW5kcyA9IG5ldyBQYW5Cb3VuZHModGhpcyk7XG4gICAgdGhpcy5wcmV2RGlzcGxheWVkV2lkdGggPSAtMTtcbiAgICB0aGlzLnByZXZEaXNwbGF5ZWRIZWlnaHQgPSAtMTtcbiAgICB0aGlzLnBzd3AuZGlzcGF0Y2goJ3NsaWRlSW5pdCcsIHtcbiAgICAgIHNsaWRlOiB0aGlzXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIElmIHRoaXMgc2xpZGUgaXMgYWN0aXZlL2N1cnJlbnQvdmlzaWJsZVxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzQWN0aXZlXG4gICAqL1xuXG5cbiAgc2V0SXNBY3RpdmUoaXNBY3RpdmUpIHtcbiAgICBpZiAoaXNBY3RpdmUgJiYgIXRoaXMuaXNBY3RpdmUpIHtcbiAgICAgIC8vIHNsaWRlIGp1c3QgYmVjYW1lIGFjdGl2ZVxuICAgICAgdGhpcy5hY3RpdmF0ZSgpO1xuICAgIH0gZWxzZSBpZiAoIWlzQWN0aXZlICYmIHRoaXMuaXNBY3RpdmUpIHtcbiAgICAgIC8vIHNsaWRlIGp1c3QgYmVjYW1lIG5vbi1hY3RpdmVcbiAgICAgIHRoaXMuZGVhY3RpdmF0ZSgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQXBwZW5kcyBzbGlkZSBjb250ZW50IHRvIERPTVxuICAgKlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBob2xkZXJFbGVtZW50XG4gICAqL1xuXG5cbiAgYXBwZW5kKGhvbGRlckVsZW1lbnQpIHtcbiAgICB0aGlzLmhvbGRlckVsZW1lbnQgPSBob2xkZXJFbGVtZW50O1xuICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9ICcwIDAnOyAvLyBTbGlkZSBhcHBlbmRlZCB0byBET01cblxuICAgIGlmICghdGhpcy5kYXRhKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5jYWxjdWxhdGVTaXplKCk7XG4gICAgdGhpcy5sb2FkKCk7XG4gICAgdGhpcy51cGRhdGVDb250ZW50U2l6ZSgpO1xuICAgIHRoaXMuYXBwZW5kSGVhdnkoKTtcbiAgICB0aGlzLmhvbGRlckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5jb250YWluZXIpO1xuICAgIHRoaXMuem9vbUFuZFBhblRvSW5pdGlhbCgpO1xuICAgIHRoaXMucHN3cC5kaXNwYXRjaCgnZmlyc3Rab29tUGFuJywge1xuICAgICAgc2xpZGU6IHRoaXNcbiAgICB9KTtcbiAgICB0aGlzLmFwcGx5Q3VycmVudFpvb21QYW4oKTtcbiAgICB0aGlzLnBzd3AuZGlzcGF0Y2goJ2FmdGVyU2V0Q29udGVudCcsIHtcbiAgICAgIHNsaWRlOiB0aGlzXG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5pc0FjdGl2ZSkge1xuICAgICAgdGhpcy5hY3RpdmF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIGxvYWQoKSB7XG4gICAgdGhpcy5jb250ZW50LmxvYWQoZmFsc2UpO1xuICAgIHRoaXMucHN3cC5kaXNwYXRjaCgnc2xpZGVMb2FkJywge1xuICAgICAgc2xpZGU6IHRoaXNcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQXBwZW5kIFwiaGVhdnlcIiBET00gZWxlbWVudHNcbiAgICpcbiAgICogVGhpcyBtYXkgZGVwZW5kIG9uIGEgdHlwZSBvZiBzbGlkZSxcbiAgICogYnV0IGdlbmVyYWxseSB0aGVzZSBhcmUgbGFyZ2UgaW1hZ2VzLlxuICAgKi9cblxuXG4gIGFwcGVuZEhlYXZ5KCkge1xuICAgIGNvbnN0IHtcbiAgICAgIHBzd3BcbiAgICB9ID0gdGhpcztcbiAgICBjb25zdCBhcHBlbmRIZWF2eU5lYXJieSA9IHRydWU7IC8vIHRvZG9cbiAgICAvLyBBdm9pZCBhcHBlbmRpbmcgaGVhdnkgZWxlbWVudHMgZHVyaW5nIGFuaW1hdGlvbnNcblxuICAgIGlmICh0aGlzLmhlYXZ5QXBwZW5kZWQgfHwgIXBzd3Aub3BlbmVyLmlzT3BlbiB8fCBwc3dwLm1haW5TY3JvbGwuaXNTaGlmdGVkKCkgfHwgIXRoaXMuaXNBY3RpdmUgJiYgIWFwcGVuZEhlYXZ5TmVhcmJ5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHN3cC5kaXNwYXRjaCgnYXBwZW5kSGVhdnknLCB7XG4gICAgICBzbGlkZTogdGhpc1xuICAgIH0pLmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmhlYXZ5QXBwZW5kZWQgPSB0cnVlO1xuICAgIHRoaXMuY29udGVudC5hcHBlbmQoKTtcbiAgICB0aGlzLnBzd3AuZGlzcGF0Y2goJ2FwcGVuZEhlYXZ5Q29udGVudCcsIHtcbiAgICAgIHNsaWRlOiB0aGlzXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB3aGVuIHRoaXMgc2xpZGUgaXMgYWN0aXZlIChzZWxlY3RlZCkuXG4gICAqXG4gICAqIElmIGl0J3MgcGFydCBvZiBvcGVuaW5nL2Nsb3NpbmcgdHJhbnNpdGlvbiAtXG4gICAqIGFjdGl2YXRlKCkgd2lsbCB0cmlnZ2VyIGFmdGVyIHRoZSB0cmFuc2l0aW9uIGlzIGVuZGVkLlxuICAgKi9cblxuXG4gIGFjdGl2YXRlKCkge1xuICAgIHRoaXMuaXNBY3RpdmUgPSB0cnVlO1xuICAgIHRoaXMuYXBwZW5kSGVhdnkoKTtcbiAgICB0aGlzLmNvbnRlbnQuYWN0aXZhdGUoKTtcbiAgICB0aGlzLnBzd3AuZGlzcGF0Y2goJ3NsaWRlQWN0aXZhdGUnLCB7XG4gICAgICBzbGlkZTogdGhpc1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgd2hlbiB0aGlzIHNsaWRlIGJlY29tZXMgaW5hY3RpdmUuXG4gICAqXG4gICAqIFNsaWRlIGNhbiBiZWNvbWUgaW5hY3RpdmUgb25seSBhZnRlciBpdCB3YXMgYWN0aXZlLlxuICAgKi9cblxuXG4gIGRlYWN0aXZhdGUoKSB7XG4gICAgdGhpcy5pc0FjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMuY29udGVudC5kZWFjdGl2YXRlKCk7XG5cbiAgICBpZiAodGhpcy5jdXJyWm9vbUxldmVsICE9PSB0aGlzLnpvb21MZXZlbHMuaW5pdGlhbCkge1xuICAgICAgLy8gYWxsb3cgZmlsdGVyaW5nXG4gICAgICB0aGlzLmNhbGN1bGF0ZVNpemUoKTtcbiAgICB9IC8vIHJlc2V0IHpvb20gbGV2ZWxcblxuXG4gICAgdGhpcy5jdXJyZW50UmVzb2x1dGlvbiA9IDA7XG4gICAgdGhpcy56b29tQW5kUGFuVG9Jbml0aWFsKCk7XG4gICAgdGhpcy5hcHBseUN1cnJlbnRab29tUGFuKCk7XG4gICAgdGhpcy51cGRhdGVDb250ZW50U2l6ZSgpO1xuICAgIHRoaXMucHN3cC5kaXNwYXRjaCgnc2xpZGVEZWFjdGl2YXRlJywge1xuICAgICAgc2xpZGU6IHRoaXNcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogVGhlIHNsaWRlIHNob3VsZCBkZXN0cm95IGl0c2VsZiwgaXQgd2lsbCBuZXZlciBiZSB1c2VkIGFnYWluLlxuICAgKiAodW5iaW5kIGFsbCBldmVudHMgYW5kIGRlc3Ryb3kgaW50ZXJuYWwgY29tcG9uZW50cylcbiAgICovXG5cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuY29udGVudC5oYXNTbGlkZSA9IGZhbHNlO1xuICAgIHRoaXMuY29udGVudC5yZW1vdmUoKTtcbiAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmUoKTtcbiAgICB0aGlzLnBzd3AuZGlzcGF0Y2goJ3NsaWRlRGVzdHJveScsIHtcbiAgICAgIHNsaWRlOiB0aGlzXG4gICAgfSk7XG4gIH1cblxuICByZXNpemUoKSB7XG4gICAgaWYgKHRoaXMuY3Vyclpvb21MZXZlbCA9PT0gdGhpcy56b29tTGV2ZWxzLmluaXRpYWwgfHwgIXRoaXMuaXNBY3RpdmUpIHtcbiAgICAgIC8vIEtlZXAgaW5pdGlhbCB6b29tIGxldmVsIGlmIGl0IHdhcyBiZWZvcmUgdGhlIHJlc2l6ZSxcbiAgICAgIC8vIGFzIHdlbGwgYXMgd2hlbiB0aGlzIHNsaWRlIGlzIG5vdCBhY3RpdmVcbiAgICAgIC8vIFJlc2V0IHBvc2l0aW9uIGFuZCBzY2FsZSB0byBvcmlnaW5hbCBzdGF0ZVxuICAgICAgdGhpcy5jYWxjdWxhdGVTaXplKCk7XG4gICAgICB0aGlzLmN1cnJlbnRSZXNvbHV0aW9uID0gMDtcbiAgICAgIHRoaXMuem9vbUFuZFBhblRvSW5pdGlhbCgpO1xuICAgICAgdGhpcy5hcHBseUN1cnJlbnRab29tUGFuKCk7XG4gICAgICB0aGlzLnVwZGF0ZUNvbnRlbnRTaXplKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHJlYWRqdXN0IHBhbiBwb3NpdGlvbiBpZiBpdCdzIGJleW9uZCB0aGUgYm91bmRzXG4gICAgICB0aGlzLmNhbGN1bGF0ZVNpemUoKTtcbiAgICAgIHRoaXMuYm91bmRzLnVwZGF0ZSh0aGlzLmN1cnJab29tTGV2ZWwpO1xuICAgICAgdGhpcy5wYW5Ubyh0aGlzLnBhbi54LCB0aGlzLnBhbi55KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEFwcGx5IHNpemUgdG8gY3VycmVudCBzbGlkZSBjb250ZW50LFxuICAgKiBiYXNlZCBvbiB0aGUgY3VycmVudCByZXNvbHV0aW9uIGFuZCBzY2FsZS5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbZm9yY2VdIGlmIHNpemUgc2hvdWxkIGJlIHVwZGF0ZWQgZXZlbiBpZiBkaW1lbnNpb25zIHdlcmVuJ3QgY2hhbmdlZFxuICAgKi9cblxuXG4gIHVwZGF0ZUNvbnRlbnRTaXplKGZvcmNlKSB7XG4gICAgLy8gVXNlIGluaXRpYWwgem9vbSBsZXZlbFxuICAgIC8vIGlmIHJlc29sdXRpb24gaXMgbm90IGRlZmluZWQgKHVzZXIgZGlkbid0IHpvb20geWV0KVxuICAgIGNvbnN0IHNjYWxlTXVsdGlwbGllciA9IHRoaXMuY3VycmVudFJlc29sdXRpb24gfHwgdGhpcy56b29tTGV2ZWxzLmluaXRpYWw7XG5cbiAgICBpZiAoIXNjYWxlTXVsdGlwbGllcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHdpZHRoID0gTWF0aC5yb3VuZCh0aGlzLndpZHRoICogc2NhbGVNdWx0aXBsaWVyKSB8fCB0aGlzLnBzd3Audmlld3BvcnRTaXplLng7XG4gICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5yb3VuZCh0aGlzLmhlaWdodCAqIHNjYWxlTXVsdGlwbGllcikgfHwgdGhpcy5wc3dwLnZpZXdwb3J0U2l6ZS55O1xuXG4gICAgaWYgKCF0aGlzLnNpemVDaGFuZ2VkKHdpZHRoLCBoZWlnaHQpICYmICFmb3JjZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuY29udGVudC5zZXREaXNwbGF5ZWRTaXplKHdpZHRoLCBoZWlnaHQpO1xuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGhcbiAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodFxuICAgKi9cblxuXG4gIHNpemVDaGFuZ2VkKHdpZHRoLCBoZWlnaHQpIHtcbiAgICBpZiAod2lkdGggIT09IHRoaXMucHJldkRpc3BsYXllZFdpZHRoIHx8IGhlaWdodCAhPT0gdGhpcy5wcmV2RGlzcGxheWVkSGVpZ2h0KSB7XG4gICAgICB0aGlzLnByZXZEaXNwbGF5ZWRXaWR0aCA9IHdpZHRoO1xuICAgICAgdGhpcy5wcmV2RGlzcGxheWVkSGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKiBAcmV0dXJucyB7SFRNTEltYWdlRWxlbWVudCB8IEhUTUxEaXZFbGVtZW50IHwgbnVsbCB8IHVuZGVmaW5lZH0gKi9cblxuXG4gIGdldFBsYWNlaG9sZGVyRWxlbWVudCgpIHtcbiAgICB2YXIgX3RoaXMkY29udGVudCRwbGFjZWhvO1xuXG4gICAgcmV0dXJuIChfdGhpcyRjb250ZW50JHBsYWNlaG8gPSB0aGlzLmNvbnRlbnQucGxhY2Vob2xkZXIpID09PSBudWxsIHx8IF90aGlzJGNvbnRlbnQkcGxhY2VobyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkY29udGVudCRwbGFjZWhvLmVsZW1lbnQ7XG4gIH1cbiAgLyoqXG4gICAqIFpvb20gY3VycmVudCBzbGlkZSBpbWFnZSB0by4uLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVzdFpvb21MZXZlbCBEZXN0aW5hdGlvbiB6b29tIGxldmVsLlxuICAgKiBAcGFyYW0ge1BvaW50fSBbY2VudGVyUG9pbnRdXG4gICAqIFRyYW5zZm9ybSBvcmlnaW4gY2VudGVyIHBvaW50LCBvciBmYWxzZSBpZiB2aWV3cG9ydCBjZW50ZXIgc2hvdWxkIGJlIHVzZWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyIHwgZmFsc2V9IFt0cmFuc2l0aW9uRHVyYXRpb25dIFRyYW5zaXRpb24gZHVyYXRpb24sIG1heSBiZSBzZXQgdG8gMC5cbiAgICogQHBhcmFtIHtib29sZWFufSBbaWdub3JlQm91bmRzXSBNaW5pbXVtIGFuZCBtYXhpbXVtIHpvb20gbGV2ZWxzIHdpbGwgYmUgaWdub3JlZC5cbiAgICovXG5cblxuICB6b29tVG8oZGVzdFpvb21MZXZlbCwgY2VudGVyUG9pbnQsIHRyYW5zaXRpb25EdXJhdGlvbiwgaWdub3JlQm91bmRzKSB7XG4gICAgY29uc3Qge1xuICAgICAgcHN3cFxuICAgIH0gPSB0aGlzO1xuXG4gICAgaWYgKCF0aGlzLmlzWm9vbWFibGUoKSB8fCBwc3dwLm1haW5TY3JvbGwuaXNTaGlmdGVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBwc3dwLmRpc3BhdGNoKCdiZWZvcmVab29tVG8nLCB7XG4gICAgICBkZXN0Wm9vbUxldmVsLFxuICAgICAgY2VudGVyUG9pbnQsXG4gICAgICB0cmFuc2l0aW9uRHVyYXRpb25cbiAgICB9KTsgLy8gc3RvcCBhbGwgcGFuIGFuZCB6b29tIHRyYW5zaXRpb25zXG5cbiAgICBwc3dwLmFuaW1hdGlvbnMuc3RvcEFsbFBhbigpOyAvLyBpZiAoIWNlbnRlclBvaW50KSB7XG4gICAgLy8gICBjZW50ZXJQb2ludCA9IHBzd3AuZ2V0Vmlld3BvcnRDZW50ZXJQb2ludCgpO1xuICAgIC8vIH1cblxuICAgIGNvbnN0IHByZXZab29tTGV2ZWwgPSB0aGlzLmN1cnJab29tTGV2ZWw7XG5cbiAgICBpZiAoIWlnbm9yZUJvdW5kcykge1xuICAgICAgZGVzdFpvb21MZXZlbCA9IGNsYW1wKGRlc3Rab29tTGV2ZWwsIHRoaXMuem9vbUxldmVscy5taW4sIHRoaXMuem9vbUxldmVscy5tYXgpO1xuICAgIH0gLy8gaWYgKHRyYW5zaXRpb25EdXJhdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gICB0cmFuc2l0aW9uRHVyYXRpb24gPSB0aGlzLnBzd3Aub3B0aW9ucy56b29tQW5pbWF0aW9uRHVyYXRpb247XG4gICAgLy8gfVxuXG5cbiAgICB0aGlzLnNldFpvb21MZXZlbChkZXN0Wm9vbUxldmVsKTtcbiAgICB0aGlzLnBhbi54ID0gdGhpcy5jYWxjdWxhdGVab29tVG9QYW5PZmZzZXQoJ3gnLCBjZW50ZXJQb2ludCwgcHJldlpvb21MZXZlbCk7XG4gICAgdGhpcy5wYW4ueSA9IHRoaXMuY2FsY3VsYXRlWm9vbVRvUGFuT2Zmc2V0KCd5JywgY2VudGVyUG9pbnQsIHByZXZab29tTGV2ZWwpO1xuICAgIHJvdW5kUG9pbnQodGhpcy5wYW4pO1xuXG4gICAgY29uc3QgZmluaXNoVHJhbnNpdGlvbiA9ICgpID0+IHtcbiAgICAgIHRoaXMuX3NldFJlc29sdXRpb24oZGVzdFpvb21MZXZlbCk7XG5cbiAgICAgIHRoaXMuYXBwbHlDdXJyZW50Wm9vbVBhbigpO1xuICAgIH07XG5cbiAgICBpZiAoIXRyYW5zaXRpb25EdXJhdGlvbikge1xuICAgICAgZmluaXNoVHJhbnNpdGlvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwc3dwLmFuaW1hdGlvbnMuc3RhcnRUcmFuc2l0aW9uKHtcbiAgICAgICAgaXNQYW46IHRydWUsXG4gICAgICAgIG5hbWU6ICd6b29tVG8nLFxuICAgICAgICB0YXJnZXQ6IHRoaXMuY29udGFpbmVyLFxuICAgICAgICB0cmFuc2Zvcm06IHRoaXMuZ2V0Q3VycmVudFRyYW5zZm9ybSgpLFxuICAgICAgICBvbkNvbXBsZXRlOiBmaW5pc2hUcmFuc2l0aW9uLFxuICAgICAgICBkdXJhdGlvbjogdHJhbnNpdGlvbkR1cmF0aW9uLFxuICAgICAgICBlYXNpbmc6IHBzd3Aub3B0aW9ucy5lYXNpbmdcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHtQb2ludH0gW2NlbnRlclBvaW50XVxuICAgKi9cblxuXG4gIHRvZ2dsZVpvb20oY2VudGVyUG9pbnQpIHtcbiAgICB0aGlzLnpvb21Ubyh0aGlzLmN1cnJab29tTGV2ZWwgPT09IHRoaXMuem9vbUxldmVscy5pbml0aWFsID8gdGhpcy56b29tTGV2ZWxzLnNlY29uZGFyeSA6IHRoaXMuem9vbUxldmVscy5pbml0aWFsLCBjZW50ZXJQb2ludCwgdGhpcy5wc3dwLm9wdGlvbnMuem9vbUFuaW1hdGlvbkR1cmF0aW9uKTtcbiAgfVxuICAvKipcbiAgICogVXBkYXRlcyB6b29tIGxldmVsIHByb3BlcnR5IGFuZCByZWNhbGN1bGF0ZXMgbmV3IHBhbiBib3VuZHMsXG4gICAqIHVubGlrZSB6b29tVG8gaXQgZG9lcyBub3QgYXBwbHkgdHJhbnNmb3JtICh1c2UgYXBwbHlDdXJyZW50Wm9vbVBhbilcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGN1cnJab29tTGV2ZWxcbiAgICovXG5cblxuICBzZXRab29tTGV2ZWwoY3Vyclpvb21MZXZlbCkge1xuICAgIHRoaXMuY3Vyclpvb21MZXZlbCA9IGN1cnJab29tTGV2ZWw7XG4gICAgdGhpcy5ib3VuZHMudXBkYXRlKHRoaXMuY3Vyclpvb21MZXZlbCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBwYW4gcG9zaXRpb24gYWZ0ZXIgem9vbSBhdCBhIGdpdmVuIGBwb2ludGAuXG4gICAqXG4gICAqIEFsd2F5cyBjYWxsIHNldFpvb21MZXZlbChuZXdab29tTGV2ZWwpIGJlZm9yZWhhbmQgdG8gcmVjYWxjdWxhdGVcbiAgICogcGFuIGJvdW5kcyBhY2NvcmRpbmcgdG8gdGhlIG5ldyB6b29tIGxldmVsLlxuICAgKlxuICAgKiBAcGFyYW0geyd4JyB8ICd5J30gYXhpc1xuICAgKiBAcGFyYW0ge1BvaW50fSBbcG9pbnRdXG4gICAqIHBvaW50IGJhc2VkIG9uIHdoaWNoIHpvb20gaXMgcGVyZm9ybWVkLCB1c3VhbGx5IHJlZmVycyB0byB0aGUgY3VycmVudCBtb3VzZSBwb3NpdGlvbixcbiAgICogaWYgZmFsc2UgLSB2aWV3cG9ydCBjZW50ZXIgd2lsbCBiZSB1c2VkLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW3ByZXZab29tTGV2ZWxdIFpvb20gbGV2ZWwgYmVmb3JlIG5ldyB6b29tIHdhcyBhcHBsaWVkLlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cblxuXG4gIGNhbGN1bGF0ZVpvb21Ub1Bhbk9mZnNldChheGlzLCBwb2ludCwgcHJldlpvb21MZXZlbCkge1xuICAgIGNvbnN0IHRvdGFsUGFuRGlzdGFuY2UgPSB0aGlzLmJvdW5kcy5tYXhbYXhpc10gLSB0aGlzLmJvdW5kcy5taW5bYXhpc107XG5cbiAgICBpZiAodG90YWxQYW5EaXN0YW5jZSA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoaXMuYm91bmRzLmNlbnRlcltheGlzXTtcbiAgICB9XG5cbiAgICBpZiAoIXBvaW50KSB7XG4gICAgICBwb2ludCA9IHRoaXMucHN3cC5nZXRWaWV3cG9ydENlbnRlclBvaW50KCk7XG4gICAgfVxuXG4gICAgaWYgKCFwcmV2Wm9vbUxldmVsKSB7XG4gICAgICBwcmV2Wm9vbUxldmVsID0gdGhpcy56b29tTGV2ZWxzLmluaXRpYWw7XG4gICAgfVxuXG4gICAgY29uc3Qgem9vbUZhY3RvciA9IHRoaXMuY3Vyclpvb21MZXZlbCAvIHByZXZab29tTGV2ZWw7XG4gICAgcmV0dXJuIHRoaXMuYm91bmRzLmNvcnJlY3RQYW4oYXhpcywgKHRoaXMucGFuW2F4aXNdIC0gcG9pbnRbYXhpc10pICogem9vbUZhY3RvciArIHBvaW50W2F4aXNdKTtcbiAgfVxuICAvKipcbiAgICogQXBwbHkgcGFuIGFuZCBrZWVwIGl0IHdpdGhpbiBib3VuZHMuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwYW5YXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwYW5ZXG4gICAqL1xuXG5cbiAgcGFuVG8ocGFuWCwgcGFuWSkge1xuICAgIHRoaXMucGFuLnggPSB0aGlzLmJvdW5kcy5jb3JyZWN0UGFuKCd4JywgcGFuWCk7XG4gICAgdGhpcy5wYW4ueSA9IHRoaXMuYm91bmRzLmNvcnJlY3RQYW4oJ3knLCBwYW5ZKTtcbiAgICB0aGlzLmFwcGx5Q3VycmVudFpvb21QYW4oKTtcbiAgfVxuICAvKipcbiAgICogSWYgdGhlIHNsaWRlIGluIHRoZSBjdXJyZW50IHN0YXRlIGNhbiBiZSBwYW5uZWQgYnkgdGhlIHVzZXJcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuXG5cbiAgaXNQYW5uYWJsZSgpIHtcbiAgICByZXR1cm4gQm9vbGVhbih0aGlzLndpZHRoKSAmJiB0aGlzLmN1cnJab29tTGV2ZWwgPiB0aGlzLnpvb21MZXZlbHMuZml0O1xuICB9XG4gIC8qKlxuICAgKiBJZiB0aGUgc2xpZGUgY2FuIGJlIHpvb21lZFxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG5cblxuICBpc1pvb21hYmxlKCkge1xuICAgIHJldHVybiBCb29sZWFuKHRoaXMud2lkdGgpICYmIHRoaXMuY29udGVudC5pc1pvb21hYmxlKCk7XG4gIH1cbiAgLyoqXG4gICAqIEFwcGx5IHRyYW5zZm9ybSBhbmQgc2NhbGUgYmFzZWQgb25cbiAgICogdGhlIGN1cnJlbnQgcGFuIHBvc2l0aW9uICh0aGlzLnBhbikgYW5kIHpvb20gbGV2ZWwgKHRoaXMuY3Vyclpvb21MZXZlbClcbiAgICovXG5cblxuICBhcHBseUN1cnJlbnRab29tUGFuKCkge1xuICAgIHRoaXMuX2FwcGx5Wm9vbVRyYW5zZm9ybSh0aGlzLnBhbi54LCB0aGlzLnBhbi55LCB0aGlzLmN1cnJab29tTGV2ZWwpO1xuXG4gICAgaWYgKHRoaXMgPT09IHRoaXMucHN3cC5jdXJyU2xpZGUpIHtcbiAgICAgIHRoaXMucHN3cC5kaXNwYXRjaCgnem9vbVBhblVwZGF0ZScsIHtcbiAgICAgICAgc2xpZGU6IHRoaXNcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHpvb21BbmRQYW5Ub0luaXRpYWwoKSB7XG4gICAgdGhpcy5jdXJyWm9vbUxldmVsID0gdGhpcy56b29tTGV2ZWxzLmluaXRpYWw7IC8vIHBhbiBhY2NvcmRpbmcgdG8gdGhlIHpvb20gbGV2ZWxcblxuICAgIHRoaXMuYm91bmRzLnVwZGF0ZSh0aGlzLmN1cnJab29tTGV2ZWwpO1xuICAgIGVxdWFsaXplUG9pbnRzKHRoaXMucGFuLCB0aGlzLmJvdW5kcy5jZW50ZXIpO1xuICAgIHRoaXMucHN3cC5kaXNwYXRjaCgnaW5pdGlhbFpvb21QYW4nLCB7XG4gICAgICBzbGlkZTogdGhpc1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdHJhbnNsYXRlIGFuZCBzY2FsZSBiYXNlZCBvbiBjdXJyZW50IHJlc29sdXRpb25cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHhcbiAgICogQHBhcmFtIHtudW1iZXJ9IHlcbiAgICogQHBhcmFtIHtudW1iZXJ9IHpvb21cbiAgICogQHByaXZhdGVcbiAgICovXG5cblxuICBfYXBwbHlab29tVHJhbnNmb3JtKHgsIHksIHpvb20pIHtcbiAgICB6b29tIC89IHRoaXMuY3VycmVudFJlc29sdXRpb24gfHwgdGhpcy56b29tTGV2ZWxzLmluaXRpYWw7XG4gICAgc2V0VHJhbnNmb3JtKHRoaXMuY29udGFpbmVyLCB4LCB5LCB6b29tKTtcbiAgfVxuXG4gIGNhbGN1bGF0ZVNpemUoKSB7XG4gICAgY29uc3Qge1xuICAgICAgcHN3cFxuICAgIH0gPSB0aGlzO1xuICAgIGVxdWFsaXplUG9pbnRzKHRoaXMucGFuQXJlYVNpemUsIGdldFBhbkFyZWFTaXplKHBzd3Aub3B0aW9ucywgcHN3cC52aWV3cG9ydFNpemUsIHRoaXMuZGF0YSwgdGhpcy5pbmRleCkpO1xuICAgIHRoaXMuem9vbUxldmVscy51cGRhdGUodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQsIHRoaXMucGFuQXJlYVNpemUpO1xuICAgIHBzd3AuZGlzcGF0Y2goJ2NhbGNTbGlkZVNpemUnLCB7XG4gICAgICBzbGlkZTogdGhpc1xuICAgIH0pO1xuICB9XG4gIC8qKiBAcmV0dXJucyB7c3RyaW5nfSAqL1xuXG5cbiAgZ2V0Q3VycmVudFRyYW5zZm9ybSgpIHtcbiAgICBjb25zdCBzY2FsZSA9IHRoaXMuY3Vyclpvb21MZXZlbCAvICh0aGlzLmN1cnJlbnRSZXNvbHV0aW9uIHx8IHRoaXMuem9vbUxldmVscy5pbml0aWFsKTtcbiAgICByZXR1cm4gdG9UcmFuc2Zvcm1TdHJpbmcodGhpcy5wYW4ueCwgdGhpcy5wYW4ueSwgc2NhbGUpO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgcmVzb2x1dGlvbiBhbmQgcmUtcmVuZGVyIHRoZSBpbWFnZS5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGlmIHRoZSByZWFsIGltYWdlIHNpemUgaXMgMjAwMHgxNTAwLFxuICAgKiBhbmQgcmVzb2x1dGlvbiBpcyAwLjUgLSBpdCB3aWxsIGJlIHJlbmRlcmVkIGFzIDEwMDB4NzUwLlxuICAgKlxuICAgKiBJbWFnZSB3aXRoIHpvb20gbGV2ZWwgMiBhbmQgcmVzb2x1dGlvbiAwLjUgaXNcbiAgICogdGhlIHNhbWUgYXMgaW1hZ2Ugd2l0aCB6b29tIGxldmVsIDEgYW5kIHJlc29sdXRpb24gMS5cbiAgICpcbiAgICogVXNlZCB0byBvcHRpbWl6ZSBhbmltYXRpb25zIGFuZCBtYWtlXG4gICAqIHN1cmUgdGhhdCBicm93c2VyIHJlbmRlcnMgaW1hZ2UgaW4gdGhlIGhpZ2hlc3QgcXVhbGl0eS5cbiAgICogQWxzbyB1c2VkIGJ5IHJlc3BvbnNpdmUgaW1hZ2VzIHRvIGxvYWQgdGhlIGNvcnJlY3Qgb25lLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gbmV3UmVzb2x1dGlvblxuICAgKi9cblxuXG4gIF9zZXRSZXNvbHV0aW9uKG5ld1Jlc29sdXRpb24pIHtcbiAgICBpZiAobmV3UmVzb2x1dGlvbiA9PT0gdGhpcy5jdXJyZW50UmVzb2x1dGlvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuY3VycmVudFJlc29sdXRpb24gPSBuZXdSZXNvbHV0aW9uO1xuICAgIHRoaXMudXBkYXRlQ29udGVudFNpemUoKTtcbiAgICB0aGlzLnBzd3AuZGlzcGF0Y2goJ3Jlc29sdXRpb25DaGFuZ2VkJyk7XG4gIH1cblxufVxuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vcGhvdG9zd2lwZS5qcycpLlBvaW50fSBQb2ludCAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi9nZXN0dXJlcy5qcycpLmRlZmF1bHR9IEdlc3R1cmVzICovXG5cbmNvbnN0IFBBTl9FTkRfRlJJQ1RJT04gPSAwLjM1O1xuY29uc3QgVkVSVElDQUxfRFJBR19GUklDVElPTiA9IDAuNjsgLy8gMSBjb3JyZXNwb25kcyB0byB0aGUgdGhpcmQgb2Ygdmlld3BvcnQgaGVpZ2h0XG5cbmNvbnN0IE1JTl9SQVRJT19UT19DTE9TRSA9IDAuNDsgLy8gTWluaW11bSBzcGVlZCByZXF1aXJlZCB0byBuYXZpZ2F0ZVxuLy8gdG8gbmV4dCBvciBwcmV2aW91cyBzbGlkZVxuXG5jb25zdCBNSU5fTkVYVF9TTElERV9TUEVFRCA9IDAuNTtcbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IGluaXRpYWxWZWxvY2l0eVxuICogQHBhcmFtIHtudW1iZXJ9IGRlY2VsZXJhdGlvblJhdGVcbiAqIEByZXR1cm5zIHtudW1iZXJ9XG4gKi9cblxuZnVuY3Rpb24gcHJvamVjdChpbml0aWFsVmVsb2NpdHksIGRlY2VsZXJhdGlvblJhdGUpIHtcbiAgcmV0dXJuIGluaXRpYWxWZWxvY2l0eSAqIGRlY2VsZXJhdGlvblJhdGUgLyAoMSAtIGRlY2VsZXJhdGlvblJhdGUpO1xufVxuLyoqXG4gKiBIYW5kbGVzIHNpbmdsZSBwb2ludGVyIGRyYWdnaW5nXG4gKi9cblxuXG5jbGFzcyBEcmFnSGFuZGxlciB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge0dlc3R1cmVzfSBnZXN0dXJlc1xuICAgKi9cbiAgY29uc3RydWN0b3IoZ2VzdHVyZXMpIHtcbiAgICB0aGlzLmdlc3R1cmVzID0gZ2VzdHVyZXM7XG4gICAgdGhpcy5wc3dwID0gZ2VzdHVyZXMucHN3cDtcbiAgICAvKiogQHR5cGUge1BvaW50fSAqL1xuXG4gICAgdGhpcy5zdGFydFBhbiA9IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwXG4gICAgfTtcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIGlmICh0aGlzLnBzd3AuY3VyclNsaWRlKSB7XG4gICAgICBlcXVhbGl6ZVBvaW50cyh0aGlzLnN0YXJ0UGFuLCB0aGlzLnBzd3AuY3VyclNsaWRlLnBhbik7XG4gICAgfVxuXG4gICAgdGhpcy5wc3dwLmFuaW1hdGlvbnMuc3RvcEFsbCgpO1xuICB9XG5cbiAgY2hhbmdlKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIHAxLFxuICAgICAgcHJldlAxLFxuICAgICAgZHJhZ0F4aXNcbiAgICB9ID0gdGhpcy5nZXN0dXJlcztcbiAgICBjb25zdCB7XG4gICAgICBjdXJyU2xpZGVcbiAgICB9ID0gdGhpcy5wc3dwO1xuXG4gICAgaWYgKGRyYWdBeGlzID09PSAneScgJiYgdGhpcy5wc3dwLm9wdGlvbnMuY2xvc2VPblZlcnRpY2FsRHJhZyAmJiBjdXJyU2xpZGUgJiYgY3VyclNsaWRlLmN1cnJab29tTGV2ZWwgPD0gY3VyclNsaWRlLnpvb21MZXZlbHMuZml0ICYmICF0aGlzLmdlc3R1cmVzLmlzTXVsdGl0b3VjaCkge1xuICAgICAgLy8gSGFuZGxlIHZlcnRpY2FsIGRyYWcgdG8gY2xvc2VcbiAgICAgIGNvbnN0IHBhblkgPSBjdXJyU2xpZGUucGFuLnkgKyAocDEueSAtIHByZXZQMS55KTtcblxuICAgICAgaWYgKCF0aGlzLnBzd3AuZGlzcGF0Y2goJ3ZlcnRpY2FsRHJhZycsIHtcbiAgICAgICAgcGFuWVxuICAgICAgfSkuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICB0aGlzLl9zZXRQYW5XaXRoRnJpY3Rpb24oJ3knLCBwYW5ZLCBWRVJUSUNBTF9EUkFHX0ZSSUNUSU9OKTtcblxuICAgICAgICBjb25zdCBiZ09wYWNpdHkgPSAxIC0gTWF0aC5hYnModGhpcy5fZ2V0VmVydGljYWxEcmFnUmF0aW8oY3VyclNsaWRlLnBhbi55KSk7XG4gICAgICAgIHRoaXMucHN3cC5hcHBseUJnT3BhY2l0eShiZ09wYWNpdHkpO1xuICAgICAgICBjdXJyU2xpZGUuYXBwbHlDdXJyZW50Wm9vbVBhbigpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBtYWluU2Nyb2xsQ2hhbmdlZCA9IHRoaXMuX3Bhbk9yTW92ZU1haW5TY3JvbGwoJ3gnKTtcblxuICAgICAgaWYgKCFtYWluU2Nyb2xsQ2hhbmdlZCkge1xuICAgICAgICB0aGlzLl9wYW5Pck1vdmVNYWluU2Nyb2xsKCd5Jyk7XG5cbiAgICAgICAgaWYgKGN1cnJTbGlkZSkge1xuICAgICAgICAgIHJvdW5kUG9pbnQoY3VyclNsaWRlLnBhbik7XG4gICAgICAgICAgY3VyclNsaWRlLmFwcGx5Q3VycmVudFpvb21QYW4oKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGVuZCgpIHtcbiAgICBjb25zdCB7XG4gICAgICB2ZWxvY2l0eVxuICAgIH0gPSB0aGlzLmdlc3R1cmVzO1xuICAgIGNvbnN0IHtcbiAgICAgIG1haW5TY3JvbGwsXG4gICAgICBjdXJyU2xpZGVcbiAgICB9ID0gdGhpcy5wc3dwO1xuICAgIGxldCBpbmRleERpZmYgPSAwO1xuICAgIHRoaXMucHN3cC5hbmltYXRpb25zLnN0b3BBbGwoKTsgLy8gSGFuZGxlIG1haW4gc2Nyb2xsIGlmIGl0J3Mgc2hpZnRlZFxuXG4gICAgaWYgKG1haW5TY3JvbGwuaXNTaGlmdGVkKCkpIHtcbiAgICAgIC8vIFBvc2l0aW9uIG9mIHRoZSBtYWluIHNjcm9sbCByZWxhdGl2ZSB0byB0aGUgdmlld3BvcnRcbiAgICAgIGNvbnN0IG1haW5TY3JvbGxTaGlmdERpZmYgPSBtYWluU2Nyb2xsLnggLSBtYWluU2Nyb2xsLmdldEN1cnJTbGlkZVgoKTsgLy8gUmF0aW8gYmV0d2VlbiAwIGFuZCAxOlxuICAgICAgLy8gMCAtIHNsaWRlIGlzIG5vdCB2aXNpYmxlIGF0IGFsbCxcbiAgICAgIC8vIDAuNSAtIGhhbGYgb2YgdGhlIHNsaWRlIGlzIHZpc2libGVcbiAgICAgIC8vIDEgLSBzbGlkZSBpcyBmdWxseSB2aXNpYmxlXG5cbiAgICAgIGNvbnN0IGN1cnJlbnRTbGlkZVZpc2liaWxpdHlSYXRpbyA9IG1haW5TY3JvbGxTaGlmdERpZmYgLyB0aGlzLnBzd3Audmlld3BvcnRTaXplLng7IC8vIEdvIG5leHQgc2xpZGUuXG4gICAgICAvL1xuICAgICAgLy8gLSBpZiB2ZWxvY2l0eSBhbmQgaXRzIGRpcmVjdGlvbiBpcyBtYXRjaGVkLFxuICAgICAgLy8gICBhbmQgd2Ugc2VlIGF0IGxlYXN0IHRpbnkgcGFydCBvZiB0aGUgbmV4dCBzbGlkZVxuICAgICAgLy9cbiAgICAgIC8vIC0gb3IgaWYgd2Ugc2VlIGxlc3MgdGhhbiA1MCUgb2YgdGhlIGN1cnJlbnQgc2xpZGVcbiAgICAgIC8vICAgYW5kIHZlbG9jaXR5IGlzIGNsb3NlIHRvIDBcbiAgICAgIC8vXG5cbiAgICAgIGlmICh2ZWxvY2l0eS54IDwgLU1JTl9ORVhUX1NMSURFX1NQRUVEICYmIGN1cnJlbnRTbGlkZVZpc2liaWxpdHlSYXRpbyA8IDAgfHwgdmVsb2NpdHkueCA8IDAuMSAmJiBjdXJyZW50U2xpZGVWaXNpYmlsaXR5UmF0aW8gPCAtMC41KSB7XG4gICAgICAgIC8vIEdvIHRvIG5leHQgc2xpZGVcbiAgICAgICAgaW5kZXhEaWZmID0gMTtcbiAgICAgICAgdmVsb2NpdHkueCA9IE1hdGgubWluKHZlbG9jaXR5LngsIDApO1xuICAgICAgfSBlbHNlIGlmICh2ZWxvY2l0eS54ID4gTUlOX05FWFRfU0xJREVfU1BFRUQgJiYgY3VycmVudFNsaWRlVmlzaWJpbGl0eVJhdGlvID4gMCB8fCB2ZWxvY2l0eS54ID4gLTAuMSAmJiBjdXJyZW50U2xpZGVWaXNpYmlsaXR5UmF0aW8gPiAwLjUpIHtcbiAgICAgICAgLy8gR28gdG8gcHJldiBzbGlkZVxuICAgICAgICBpbmRleERpZmYgPSAtMTtcbiAgICAgICAgdmVsb2NpdHkueCA9IE1hdGgubWF4KHZlbG9jaXR5LngsIDApO1xuICAgICAgfVxuXG4gICAgICBtYWluU2Nyb2xsLm1vdmVJbmRleEJ5KGluZGV4RGlmZiwgdHJ1ZSwgdmVsb2NpdHkueCk7XG4gICAgfSAvLyBSZXN0b3JlIHpvb20gbGV2ZWxcblxuXG4gICAgaWYgKGN1cnJTbGlkZSAmJiBjdXJyU2xpZGUuY3Vyclpvb21MZXZlbCA+IGN1cnJTbGlkZS56b29tTGV2ZWxzLm1heCB8fCB0aGlzLmdlc3R1cmVzLmlzTXVsdGl0b3VjaCkge1xuICAgICAgdGhpcy5nZXN0dXJlcy56b29tTGV2ZWxzLmNvcnJlY3Rab29tUGFuKHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyB3ZSBydW4gdHdvIGFuaW1hdGlvbnMgaW5zdGVhZCBvZiBvbmUsXG4gICAgICAvLyBhcyBlYWNoIGF4aXMgaGFzIG93biBwYW4gYm91bmRhcmllcyBhbmQgdGh1cyBkaWZmZXJlbnQgc3ByaW5nIGZ1bmN0aW9uXG4gICAgICAvLyAoY29ycmVjdFpvb21QYW4gZG9lcyBub3QgaGF2ZSB0aGlzIGZ1bmN0aW9uYWxpdHksXG4gICAgICAvLyAgaXQgYW5pbWF0ZXMgYWxsIHByb3BlcnRpZXMgd2l0aCBzaW5nbGUgdGltaW5nIGZ1bmN0aW9uKVxuICAgICAgdGhpcy5fZmluaXNoUGFuR2VzdHVyZUZvckF4aXMoJ3gnKTtcblxuICAgICAgdGhpcy5fZmluaXNoUGFuR2VzdHVyZUZvckF4aXMoJ3knKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7J3gnIHwgJ3knfSBheGlzXG4gICAqL1xuXG5cbiAgX2ZpbmlzaFBhbkdlc3R1cmVGb3JBeGlzKGF4aXMpIHtcbiAgICBjb25zdCB7XG4gICAgICB2ZWxvY2l0eVxuICAgIH0gPSB0aGlzLmdlc3R1cmVzO1xuICAgIGNvbnN0IHtcbiAgICAgIGN1cnJTbGlkZVxuICAgIH0gPSB0aGlzLnBzd3A7XG5cbiAgICBpZiAoIWN1cnJTbGlkZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHtcbiAgICAgIHBhbixcbiAgICAgIGJvdW5kc1xuICAgIH0gPSBjdXJyU2xpZGU7XG4gICAgY29uc3QgcGFuUG9zID0gcGFuW2F4aXNdO1xuICAgIGNvbnN0IHJlc3RvcmVCZ09wYWNpdHkgPSB0aGlzLnBzd3AuYmdPcGFjaXR5IDwgMSAmJiBheGlzID09PSAneSc7IC8vIDAuOTk1IG1lYW5zIC0gc2Nyb2xsIHZpZXcgbG9zZXMgMC41JSBvZiBpdHMgdmVsb2NpdHkgcGVyIG1pbGxpc2Vjb25kXG4gICAgLy8gSW5jcmVhc2luZyB0aGlzIG51bWJlciB3aWxsIHJlZHVjZSB0cmF2ZWwgZGlzdGFuY2VcblxuICAgIGNvbnN0IGRlY2VsZXJhdGlvblJhdGUgPSAwLjk5NTsgLy8gMC45OVxuICAgIC8vIFBhbiBwb3NpdGlvbiBpZiB0aGVyZSBpcyBubyBib3VuZHNcblxuICAgIGNvbnN0IHByb2plY3RlZFBvc2l0aW9uID0gcGFuUG9zICsgcHJvamVjdCh2ZWxvY2l0eVtheGlzXSwgZGVjZWxlcmF0aW9uUmF0ZSk7XG5cbiAgICBpZiAocmVzdG9yZUJnT3BhY2l0eSkge1xuICAgICAgY29uc3QgdkRyYWdSYXRpbyA9IHRoaXMuX2dldFZlcnRpY2FsRHJhZ1JhdGlvKHBhblBvcyk7XG5cbiAgICAgIGNvbnN0IHByb2plY3RlZFZEcmFnUmF0aW8gPSB0aGlzLl9nZXRWZXJ0aWNhbERyYWdSYXRpbyhwcm9qZWN0ZWRQb3NpdGlvbik7IC8vIElmIHdlIGFyZSBhYm92ZSBhbmQgbW92aW5nIHVwd2FyZHMsXG4gICAgICAvLyBvciBpZiB3ZSBhcmUgYmVsb3cgYW5kIG1vdmluZyBkb3dud2FyZHNcblxuXG4gICAgICBpZiAodkRyYWdSYXRpbyA8IDAgJiYgcHJvamVjdGVkVkRyYWdSYXRpbyA8IC1NSU5fUkFUSU9fVE9fQ0xPU0UgfHwgdkRyYWdSYXRpbyA+IDAgJiYgcHJvamVjdGVkVkRyYWdSYXRpbyA+IE1JTl9SQVRJT19UT19DTE9TRSkge1xuICAgICAgICB0aGlzLnBzd3AuY2xvc2UoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gLy8gUGFuIHBvc2l0aW9uIHdpdGggY29ycmVjdGVkIGJvdW5kc1xuXG5cbiAgICBjb25zdCBjb3JyZWN0ZWRQYW5Qb3NpdGlvbiA9IGJvdW5kcy5jb3JyZWN0UGFuKGF4aXMsIHByb2plY3RlZFBvc2l0aW9uKTsgLy8gRXhpdCBpZiBwYW4gcG9zaXRpb24gc2hvdWxkIG5vdCBiZSBjaGFuZ2VkXG4gICAgLy8gb3IgaWYgc3BlZWQgaXQgdG9vIGxvd1xuXG4gICAgaWYgKHBhblBvcyA9PT0gY29ycmVjdGVkUGFuUG9zaXRpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIE92ZXJzaG9vdCBpZiB0aGUgZmluYWwgcG9zaXRpb24gaXMgb3V0IG9mIHBhbiBib3VuZHNcblxuXG4gICAgY29uc3QgZGFtcGluZ1JhdGlvID0gY29ycmVjdGVkUGFuUG9zaXRpb24gPT09IHByb2plY3RlZFBvc2l0aW9uID8gMSA6IDAuODI7XG4gICAgY29uc3QgaW5pdGlhbEJnT3BhY2l0eSA9IHRoaXMucHN3cC5iZ09wYWNpdHk7XG4gICAgY29uc3QgdG90YWxQYW5EaXN0ID0gY29ycmVjdGVkUGFuUG9zaXRpb24gLSBwYW5Qb3M7XG4gICAgdGhpcy5wc3dwLmFuaW1hdGlvbnMuc3RhcnRTcHJpbmcoe1xuICAgICAgbmFtZTogJ3Bhbkdlc3R1cmUnICsgYXhpcyxcbiAgICAgIGlzUGFuOiB0cnVlLFxuICAgICAgc3RhcnQ6IHBhblBvcyxcbiAgICAgIGVuZDogY29ycmVjdGVkUGFuUG9zaXRpb24sXG4gICAgICB2ZWxvY2l0eTogdmVsb2NpdHlbYXhpc10sXG4gICAgICBkYW1waW5nUmF0aW8sXG4gICAgICBvblVwZGF0ZTogcG9zID0+IHtcbiAgICAgICAgLy8gQW5pbWF0ZSBvcGFjaXR5IG9mIGJhY2tncm91bmQgcmVsYXRpdmUgdG8gWSBwYW4gcG9zaXRpb24gb2YgYW4gaW1hZ2VcbiAgICAgICAgaWYgKHJlc3RvcmVCZ09wYWNpdHkgJiYgdGhpcy5wc3dwLmJnT3BhY2l0eSA8IDEpIHtcbiAgICAgICAgICAvLyAwIC0gc3RhcnQgb2YgYW5pbWF0aW9uLCAxIC0gZW5kIG9mIGFuaW1hdGlvblxuICAgICAgICAgIGNvbnN0IGFuaW1hdGlvblByb2dyZXNzUmF0aW8gPSAxIC0gKGNvcnJlY3RlZFBhblBvc2l0aW9uIC0gcG9zKSAvIHRvdGFsUGFuRGlzdDsgLy8gV2UgY2xhbXAgb3BhY2l0eSB0byBrZWVwIGl0IGJldHdlZW4gMCBhbmQgMS5cbiAgICAgICAgICAvLyBBcyBwcm9ncmVzcyByYXRpbyBjYW4gYmUgbGFyZ2VyIHRoYW4gMSBkdWUgdG8gb3ZlcnNob290LFxuICAgICAgICAgIC8vIGFuZCB3ZSBkbyBub3Qgd2FudCB0byBib3VuY2Ugb3BhY2l0eS5cblxuICAgICAgICAgIHRoaXMucHN3cC5hcHBseUJnT3BhY2l0eShjbGFtcChpbml0aWFsQmdPcGFjaXR5ICsgKDEgLSBpbml0aWFsQmdPcGFjaXR5KSAqIGFuaW1hdGlvblByb2dyZXNzUmF0aW8sIDAsIDEpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhbltheGlzXSA9IE1hdGguZmxvb3IocG9zKTtcbiAgICAgICAgY3VyclNsaWRlLmFwcGx5Q3VycmVudFpvb21QYW4oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIHBvc2l0aW9uIG9mIHRoZSBtYWluIHNjcm9sbCxcbiAgICogb3IvYW5kIHVwZGF0ZSBwYW4gcG9zaXRpb24gb2YgdGhlIGN1cnJlbnQgc2xpZGUuXG4gICAqXG4gICAqIFNob3VsZCByZXR1cm4gdHJ1ZSBpZiBpdCBjaGFuZ2VzIChvciBjYW4gY2hhbmdlKSBtYWluIHNjcm9sbC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHsneCcgfCAneSd9IGF4aXNcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuXG5cbiAgX3Bhbk9yTW92ZU1haW5TY3JvbGwoYXhpcykge1xuICAgIGNvbnN0IHtcbiAgICAgIHAxLFxuICAgICAgZHJhZ0F4aXMsXG4gICAgICBwcmV2UDEsXG4gICAgICBpc011bHRpdG91Y2hcbiAgICB9ID0gdGhpcy5nZXN0dXJlcztcbiAgICBjb25zdCB7XG4gICAgICBjdXJyU2xpZGUsXG4gICAgICBtYWluU2Nyb2xsXG4gICAgfSA9IHRoaXMucHN3cDtcbiAgICBjb25zdCBkZWx0YSA9IHAxW2F4aXNdIC0gcHJldlAxW2F4aXNdO1xuICAgIGNvbnN0IG5ld01haW5TY3JvbGxYID0gbWFpblNjcm9sbC54ICsgZGVsdGE7XG5cbiAgICBpZiAoIWRlbHRhIHx8ICFjdXJyU2xpZGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IC8vIEFsd2F5cyBtb3ZlIG1haW4gc2Nyb2xsIGlmIGltYWdlIGNhbiBub3QgYmUgcGFubmVkXG5cblxuICAgIGlmIChheGlzID09PSAneCcgJiYgIWN1cnJTbGlkZS5pc1Bhbm5hYmxlKCkgJiYgIWlzTXVsdGl0b3VjaCkge1xuICAgICAgbWFpblNjcm9sbC5tb3ZlVG8obmV3TWFpblNjcm9sbFgsIHRydWUpO1xuICAgICAgcmV0dXJuIHRydWU7IC8vIGNoYW5nZWQgbWFpbiBzY3JvbGxcbiAgICB9XG5cbiAgICBjb25zdCB7XG4gICAgICBib3VuZHNcbiAgICB9ID0gY3VyclNsaWRlO1xuICAgIGNvbnN0IG5ld1BhbiA9IGN1cnJTbGlkZS5wYW5bYXhpc10gKyBkZWx0YTtcblxuICAgIGlmICh0aGlzLnBzd3Aub3B0aW9ucy5hbGxvd1BhblRvTmV4dCAmJiBkcmFnQXhpcyA9PT0gJ3gnICYmIGF4aXMgPT09ICd4JyAmJiAhaXNNdWx0aXRvdWNoKSB7XG4gICAgICBjb25zdCBjdXJyU2xpZGVNYWluU2Nyb2xsWCA9IG1haW5TY3JvbGwuZ2V0Q3VyclNsaWRlWCgpOyAvLyBQb3NpdGlvbiBvZiB0aGUgbWFpbiBzY3JvbGwgcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0XG5cbiAgICAgIGNvbnN0IG1haW5TY3JvbGxTaGlmdERpZmYgPSBtYWluU2Nyb2xsLnggLSBjdXJyU2xpZGVNYWluU2Nyb2xsWDtcbiAgICAgIGNvbnN0IGlzTGVmdFRvUmlnaHQgPSBkZWx0YSA+IDA7XG4gICAgICBjb25zdCBpc1JpZ2h0VG9MZWZ0ID0gIWlzTGVmdFRvUmlnaHQ7XG5cbiAgICAgIGlmIChuZXdQYW4gPiBib3VuZHMubWluW2F4aXNdICYmIGlzTGVmdFRvUmlnaHQpIHtcbiAgICAgICAgLy8gUGFubmluZyBmcm9tIGxlZnQgdG8gcmlnaHQsIGJleW9uZCB0aGUgbGVmdCBlZGdlXG4gICAgICAgIC8vIFdldGhlciB0aGUgaW1hZ2Ugd2FzIGF0IG1pbmltdW0gcGFuIHBvc2l0aW9uIChvciBsZXNzKVxuICAgICAgICAvLyB3aGVuIHRoaXMgZHJhZyBnZXN0dXJlIHN0YXJ0ZWQuXG4gICAgICAgIC8vIE1pbmltdW0gcGFuIHBvc2l0aW9uIHJlZmVycyB0byB0aGUgbGVmdCBlZGdlIG9mIHRoZSBpbWFnZS5cbiAgICAgICAgY29uc3Qgd2FzQXRNaW5QYW5Qb3NpdGlvbiA9IGJvdW5kcy5taW5bYXhpc10gPD0gdGhpcy5zdGFydFBhbltheGlzXTtcblxuICAgICAgICBpZiAod2FzQXRNaW5QYW5Qb3NpdGlvbikge1xuICAgICAgICAgIG1haW5TY3JvbGwubW92ZVRvKG5ld01haW5TY3JvbGxYLCB0cnVlKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9zZXRQYW5XaXRoRnJpY3Rpb24oYXhpcywgbmV3UGFuKTsgLy9jdXJyU2xpZGUucGFuW2F4aXNdID0gbmV3UGFuO1xuXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobmV3UGFuIDwgYm91bmRzLm1heFtheGlzXSAmJiBpc1JpZ2h0VG9MZWZ0KSB7XG4gICAgICAgIC8vIFBhbmluZyBmcm9tIHJpZ2h0IHRvIGxlZnQsIGJleW9uZCB0aGUgcmlnaHQgZWRnZVxuICAgICAgICAvLyBNYXhpbXVtIHBhbiBwb3NpdGlvbiByZWZlcnMgdG8gdGhlIHJpZ2h0IGVkZ2Ugb2YgdGhlIGltYWdlLlxuICAgICAgICBjb25zdCB3YXNBdE1heFBhblBvc2l0aW9uID0gdGhpcy5zdGFydFBhbltheGlzXSA8PSBib3VuZHMubWF4W2F4aXNdO1xuXG4gICAgICAgIGlmICh3YXNBdE1heFBhblBvc2l0aW9uKSB7XG4gICAgICAgICAgbWFpblNjcm9sbC5tb3ZlVG8obmV3TWFpblNjcm9sbFgsIHRydWUpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX3NldFBhbldpdGhGcmljdGlvbihheGlzLCBuZXdQYW4pOyAvL2N1cnJTbGlkZS5wYW5bYXhpc10gPSBuZXdQYW47XG5cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgbWFpbiBzY3JvbGwgaXMgc2hpZnRlZFxuICAgICAgICBpZiAobWFpblNjcm9sbFNoaWZ0RGlmZiAhPT0gMCkge1xuICAgICAgICAgIC8vIElmIG1haW4gc2Nyb2xsIGlzIHNoaWZ0ZWQgcmlnaHRcbiAgICAgICAgICBpZiAobWFpblNjcm9sbFNoaWZ0RGlmZiA+IDBcbiAgICAgICAgICAvKiYmIGlzUmlnaHRUb0xlZnQqL1xuICAgICAgICAgICkge1xuICAgICAgICAgICAgbWFpblNjcm9sbC5tb3ZlVG8oTWF0aC5tYXgobmV3TWFpblNjcm9sbFgsIGN1cnJTbGlkZU1haW5TY3JvbGxYKSwgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG1haW5TY3JvbGxTaGlmdERpZmYgPCAwXG4gICAgICAgICAgLyomJiBpc0xlZnRUb1JpZ2h0Ki9cbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIE1haW4gc2Nyb2xsIGlzIHNoaWZ0ZWQgbGVmdCAoUG9zaXRpb24gaXMgbGVzcyB0aGFuIDAgY29tcGFyaW5nIHRvIHRoZSB2aWV3cG9ydCAwKVxuICAgICAgICAgICAgbWFpblNjcm9sbC5tb3ZlVG8oTWF0aC5taW4obmV3TWFpblNjcm9sbFgsIGN1cnJTbGlkZU1haW5TY3JvbGxYKSwgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gV2UgYXJlIHdpdGhpbiBwYW4gYm91bmRzLCBzbyBqdXN0IHBhblxuICAgICAgICAgIHRoaXMuX3NldFBhbldpdGhGcmljdGlvbihheGlzLCBuZXdQYW4pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChheGlzID09PSAneScpIHtcbiAgICAgICAgLy8gRG8gbm90IHBhbiB2ZXJ0aWNhbGx5IGlmIG1haW4gc2Nyb2xsIGlzIHNoaWZ0ZWQgb1xuICAgICAgICBpZiAoIW1haW5TY3JvbGwuaXNTaGlmdGVkKCkgJiYgYm91bmRzLm1pbi55ICE9PSBib3VuZHMubWF4LnkpIHtcbiAgICAgICAgICB0aGlzLl9zZXRQYW5XaXRoRnJpY3Rpb24oYXhpcywgbmV3UGFuKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fc2V0UGFuV2l0aEZyaWN0aW9uKGF4aXMsIG5ld1Bhbik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IC8vIElmIHdlIG1vdmUgYWJvdmUgLSB0aGUgcmF0aW8gaXMgbmVnYXRpdmVcbiAgLy8gSWYgd2UgbW92ZSBiZWxvdyB0aGUgcmF0aW8gaXMgcG9zaXRpdmVcblxuICAvKipcbiAgICogUmVsYXRpb24gYmV0d2VlbiBwYW4gWSBwb3NpdGlvbiBhbmQgdGhpcmQgb2Ygdmlld3BvcnQgaGVpZ2h0LlxuICAgKlxuICAgKiBXaGVuIHdlIGFyZSBhdCBpbml0aWFsIHBvc2l0aW9uIChjZW50ZXIgYm91bmRzKSAtIHRoZSByYXRpbyBpcyAwLFxuICAgKiBpZiBwb3NpdGlvbiBpcyBzaGlmdGVkIHVwd2FyZHMgLSB0aGUgcmF0aW8gaXMgbmVnYXRpdmUsXG4gICAqIGlmIHBvc2l0aW9uIGlzIHNoaWZ0ZWQgZG93bndhcmRzIC0gdGhlIHJhdGlvIGlzIHBvc2l0aXZlLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge251bWJlcn0gcGFuWSBUaGUgY3VycmVudCBwYW4gWSBwb3NpdGlvbi5cbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG5cblxuICBfZ2V0VmVydGljYWxEcmFnUmF0aW8ocGFuWSkge1xuICAgIHZhciBfdGhpcyRwc3dwJGN1cnJTbGlkZSQsIF90aGlzJHBzd3AkY3VyclNsaWRlO1xuXG4gICAgcmV0dXJuIChwYW5ZIC0gKChfdGhpcyRwc3dwJGN1cnJTbGlkZSQgPSAoX3RoaXMkcHN3cCRjdXJyU2xpZGUgPSB0aGlzLnBzd3AuY3VyclNsaWRlKSA9PT0gbnVsbCB8fCBfdGhpcyRwc3dwJGN1cnJTbGlkZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkcHN3cCRjdXJyU2xpZGUuYm91bmRzLmNlbnRlci55KSAhPT0gbnVsbCAmJiBfdGhpcyRwc3dwJGN1cnJTbGlkZSQgIT09IHZvaWQgMCA/IF90aGlzJHBzd3AkY3VyclNsaWRlJCA6IDApKSAvICh0aGlzLnBzd3Audmlld3BvcnRTaXplLnkgLyAzKTtcbiAgfVxuICAvKipcbiAgICogU2V0IHBhbiBwb3NpdGlvbiBvZiB0aGUgY3VycmVudCBzbGlkZS5cbiAgICogQXBwbHkgZnJpY3Rpb24gaWYgdGhlIHBvc2l0aW9uIGlzIGJleW9uZCB0aGUgcGFuIGJvdW5kcyxcbiAgICogb3IgaWYgY3VzdG9tIGZyaWN0aW9uIGlzIGRlZmluZWQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7J3gnIHwgJ3knfSBheGlzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwb3RlbnRpYWxQYW5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtjdXN0b21GcmljdGlvbl0gKDAuMSAtIDEpXG4gICAqL1xuXG5cbiAgX3NldFBhbldpdGhGcmljdGlvbihheGlzLCBwb3RlbnRpYWxQYW4sIGN1c3RvbUZyaWN0aW9uKSB7XG4gICAgY29uc3Qge1xuICAgICAgY3VyclNsaWRlXG4gICAgfSA9IHRoaXMucHN3cDtcblxuICAgIGlmICghY3VyclNsaWRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qge1xuICAgICAgcGFuLFxuICAgICAgYm91bmRzXG4gICAgfSA9IGN1cnJTbGlkZTtcbiAgICBjb25zdCBjb3JyZWN0ZWRQYW4gPSBib3VuZHMuY29ycmVjdFBhbihheGlzLCBwb3RlbnRpYWxQYW4pOyAvLyBJZiB3ZSBhcmUgb3V0IG9mIHBhbiBib3VuZHNcblxuICAgIGlmIChjb3JyZWN0ZWRQYW4gIT09IHBvdGVudGlhbFBhbiB8fCBjdXN0b21GcmljdGlvbikge1xuICAgICAgY29uc3QgZGVsdGEgPSBNYXRoLnJvdW5kKHBvdGVudGlhbFBhbiAtIHBhbltheGlzXSk7XG4gICAgICBwYW5bYXhpc10gKz0gZGVsdGEgKiAoY3VzdG9tRnJpY3Rpb24gfHwgUEFOX0VORF9GUklDVElPTik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhbltheGlzXSA9IHBvdGVudGlhbFBhbjtcbiAgICB9XG4gIH1cblxufVxuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vcGhvdG9zd2lwZS5qcycpLlBvaW50fSBQb2ludCAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi9nZXN0dXJlcy5qcycpLmRlZmF1bHR9IEdlc3R1cmVzICovXG5cbmNvbnN0IFVQUEVSX1pPT01fRlJJQ1RJT04gPSAwLjA1O1xuY29uc3QgTE9XRVJfWk9PTV9GUklDVElPTiA9IDAuMTU7XG4vKipcbiAqIEdldCBjZW50ZXIgcG9pbnQgYmV0d2VlbiB0d28gcG9pbnRzXG4gKlxuICogQHBhcmFtIHtQb2ludH0gcFxuICogQHBhcmFtIHtQb2ludH0gcDFcbiAqIEBwYXJhbSB7UG9pbnR9IHAyXG4gKiBAcmV0dXJucyB7UG9pbnR9XG4gKi9cblxuZnVuY3Rpb24gZ2V0Wm9vbVBvaW50c0NlbnRlcihwLCBwMSwgcDIpIHtcbiAgcC54ID0gKHAxLnggKyBwMi54KSAvIDI7XG4gIHAueSA9IChwMS55ICsgcDIueSkgLyAyO1xuICByZXR1cm4gcDtcbn1cblxuY2xhc3MgWm9vbUhhbmRsZXIge1xuICAvKipcbiAgICogQHBhcmFtIHtHZXN0dXJlc30gZ2VzdHVyZXNcbiAgICovXG4gIGNvbnN0cnVjdG9yKGdlc3R1cmVzKSB7XG4gICAgdGhpcy5nZXN0dXJlcyA9IGdlc3R1cmVzO1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge1BvaW50fVxuICAgICAqL1xuXG4gICAgdGhpcy5fc3RhcnRQYW4gPSB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMFxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7UG9pbnR9XG4gICAgICovXG5cbiAgICB0aGlzLl9zdGFydFpvb21Qb2ludCA9IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwXG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtQb2ludH1cbiAgICAgKi9cblxuICAgIHRoaXMuX3pvb21Qb2ludCA9IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwXG4gICAgfTtcbiAgICAvKiogQHByaXZhdGUgKi9cblxuICAgIHRoaXMuX3dhc092ZXJGaXRab29tTGV2ZWwgPSBmYWxzZTtcbiAgICAvKiogQHByaXZhdGUgKi9cblxuICAgIHRoaXMuX3N0YXJ0Wm9vbUxldmVsID0gMTtcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGN1cnJTbGlkZVxuICAgIH0gPSB0aGlzLmdlc3R1cmVzLnBzd3A7XG5cbiAgICBpZiAoY3VyclNsaWRlKSB7XG4gICAgICB0aGlzLl9zdGFydFpvb21MZXZlbCA9IGN1cnJTbGlkZS5jdXJyWm9vbUxldmVsO1xuICAgICAgZXF1YWxpemVQb2ludHModGhpcy5fc3RhcnRQYW4sIGN1cnJTbGlkZS5wYW4pO1xuICAgIH1cblxuICAgIHRoaXMuZ2VzdHVyZXMucHN3cC5hbmltYXRpb25zLnN0b3BBbGxQYW4oKTtcbiAgICB0aGlzLl93YXNPdmVyRml0Wm9vbUxldmVsID0gZmFsc2U7XG4gIH1cblxuICBjaGFuZ2UoKSB7XG4gICAgY29uc3Qge1xuICAgICAgcDEsXG4gICAgICBzdGFydFAxLFxuICAgICAgcDIsXG4gICAgICBzdGFydFAyLFxuICAgICAgcHN3cFxuICAgIH0gPSB0aGlzLmdlc3R1cmVzO1xuICAgIGNvbnN0IHtcbiAgICAgIGN1cnJTbGlkZVxuICAgIH0gPSBwc3dwO1xuXG4gICAgaWYgKCFjdXJyU2xpZGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtaW5ab29tTGV2ZWwgPSBjdXJyU2xpZGUuem9vbUxldmVscy5taW47XG4gICAgY29uc3QgbWF4Wm9vbUxldmVsID0gY3VyclNsaWRlLnpvb21MZXZlbHMubWF4O1xuXG4gICAgaWYgKCFjdXJyU2xpZGUuaXNab29tYWJsZSgpIHx8IHBzd3AubWFpblNjcm9sbC5pc1NoaWZ0ZWQoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGdldFpvb21Qb2ludHNDZW50ZXIodGhpcy5fc3RhcnRab29tUG9pbnQsIHN0YXJ0UDEsIHN0YXJ0UDIpO1xuICAgIGdldFpvb21Qb2ludHNDZW50ZXIodGhpcy5fem9vbVBvaW50LCBwMSwgcDIpO1xuXG4gICAgbGV0IGN1cnJab29tTGV2ZWwgPSAxIC8gZ2V0RGlzdGFuY2VCZXR3ZWVuKHN0YXJ0UDEsIHN0YXJ0UDIpICogZ2V0RGlzdGFuY2VCZXR3ZWVuKHAxLCBwMikgKiB0aGlzLl9zdGFydFpvb21MZXZlbDsgLy8gc2xpZ2h0bHkgb3ZlciB0aGUgem9vbS5maXRcblxuXG4gICAgaWYgKGN1cnJab29tTGV2ZWwgPiBjdXJyU2xpZGUuem9vbUxldmVscy5pbml0aWFsICsgY3VyclNsaWRlLnpvb21MZXZlbHMuaW5pdGlhbCAvIDE1KSB7XG4gICAgICB0aGlzLl93YXNPdmVyRml0Wm9vbUxldmVsID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoY3Vyclpvb21MZXZlbCA8IG1pblpvb21MZXZlbCkge1xuICAgICAgaWYgKHBzd3Aub3B0aW9ucy5waW5jaFRvQ2xvc2UgJiYgIXRoaXMuX3dhc092ZXJGaXRab29tTGV2ZWwgJiYgdGhpcy5fc3RhcnRab29tTGV2ZWwgPD0gY3VyclNsaWRlLnpvb21MZXZlbHMuaW5pdGlhbCkge1xuICAgICAgICAvLyBmYWRlIG91dCBiYWNrZ3JvdW5kIGlmIHpvb21pbmcgb3V0XG4gICAgICAgIGNvbnN0IGJnT3BhY2l0eSA9IDEgLSAobWluWm9vbUxldmVsIC0gY3Vyclpvb21MZXZlbCkgLyAobWluWm9vbUxldmVsIC8gMS4yKTtcblxuICAgICAgICBpZiAoIXBzd3AuZGlzcGF0Y2goJ3BpbmNoQ2xvc2UnLCB7XG4gICAgICAgICAgYmdPcGFjaXR5XG4gICAgICAgIH0pLmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgICBwc3dwLmFwcGx5QmdPcGFjaXR5KGJnT3BhY2l0eSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEFwcGx5IHRoZSBmcmljdGlvbiBpZiB6b29tIGxldmVsIGlzIGJlbG93IHRoZSBtaW5cbiAgICAgICAgY3Vyclpvb21MZXZlbCA9IG1pblpvb21MZXZlbCAtIChtaW5ab29tTGV2ZWwgLSBjdXJyWm9vbUxldmVsKSAqIExPV0VSX1pPT01fRlJJQ1RJT047XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjdXJyWm9vbUxldmVsID4gbWF4Wm9vbUxldmVsKSB7XG4gICAgICAvLyBBcHBseSB0aGUgZnJpY3Rpb24gaWYgem9vbSBsZXZlbCBpcyBhYm92ZSB0aGUgbWF4XG4gICAgICBjdXJyWm9vbUxldmVsID0gbWF4Wm9vbUxldmVsICsgKGN1cnJab29tTGV2ZWwgLSBtYXhab29tTGV2ZWwpICogVVBQRVJfWk9PTV9GUklDVElPTjtcbiAgICB9XG5cbiAgICBjdXJyU2xpZGUucGFuLnggPSB0aGlzLl9jYWxjdWxhdGVQYW5Gb3Jab29tTGV2ZWwoJ3gnLCBjdXJyWm9vbUxldmVsKTtcbiAgICBjdXJyU2xpZGUucGFuLnkgPSB0aGlzLl9jYWxjdWxhdGVQYW5Gb3Jab29tTGV2ZWwoJ3knLCBjdXJyWm9vbUxldmVsKTtcbiAgICBjdXJyU2xpZGUuc2V0Wm9vbUxldmVsKGN1cnJab29tTGV2ZWwpO1xuICAgIGN1cnJTbGlkZS5hcHBseUN1cnJlbnRab29tUGFuKCk7XG4gIH1cblxuICBlbmQoKSB7XG4gICAgY29uc3Qge1xuICAgICAgcHN3cFxuICAgIH0gPSB0aGlzLmdlc3R1cmVzO1xuICAgIGNvbnN0IHtcbiAgICAgIGN1cnJTbGlkZVxuICAgIH0gPSBwc3dwO1xuXG4gICAgaWYgKCghY3VyclNsaWRlIHx8IGN1cnJTbGlkZS5jdXJyWm9vbUxldmVsIDwgY3VyclNsaWRlLnpvb21MZXZlbHMuaW5pdGlhbCkgJiYgIXRoaXMuX3dhc092ZXJGaXRab29tTGV2ZWwgJiYgcHN3cC5vcHRpb25zLnBpbmNoVG9DbG9zZSkge1xuICAgICAgcHN3cC5jbG9zZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvcnJlY3Rab29tUGFuKCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0geyd4JyB8ICd5J30gYXhpc1xuICAgKiBAcGFyYW0ge251bWJlcn0gY3Vyclpvb21MZXZlbFxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cblxuXG4gIF9jYWxjdWxhdGVQYW5Gb3Jab29tTGV2ZWwoYXhpcywgY3Vyclpvb21MZXZlbCkge1xuICAgIGNvbnN0IHpvb21GYWN0b3IgPSBjdXJyWm9vbUxldmVsIC8gdGhpcy5fc3RhcnRab29tTGV2ZWw7XG4gICAgcmV0dXJuIHRoaXMuX3pvb21Qb2ludFtheGlzXSAtICh0aGlzLl9zdGFydFpvb21Qb2ludFtheGlzXSAtIHRoaXMuX3N0YXJ0UGFuW2F4aXNdKSAqIHpvb21GYWN0b3I7XG4gIH1cbiAgLyoqXG4gICAqIENvcnJlY3QgY3Vyclpvb21MZXZlbCBhbmQgcGFuIGlmIHRoZXkgYXJlXG4gICAqIGJleW9uZCBtaW5pbXVtIG9yIG1heGltdW0gdmFsdWVzLlxuICAgKiBXaXRoIGFuaW1hdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbaWdub3JlR2VzdHVyZV1cbiAgICogV2V0aGVyIGdlc3R1cmUgY29vcmRpbmF0ZXMgc2hvdWxkIGJlIGlnbm9yZWQgd2hlbiBjYWxjdWxhdGluZyBkZXN0aW5hdGlvbiBwYW4gcG9zaXRpb24uXG4gICAqL1xuXG5cbiAgY29ycmVjdFpvb21QYW4oaWdub3JlR2VzdHVyZSkge1xuICAgIGNvbnN0IHtcbiAgICAgIHBzd3BcbiAgICB9ID0gdGhpcy5nZXN0dXJlcztcbiAgICBjb25zdCB7XG4gICAgICBjdXJyU2xpZGVcbiAgICB9ID0gcHN3cDtcblxuICAgIGlmICghKGN1cnJTbGlkZSAhPT0gbnVsbCAmJiBjdXJyU2xpZGUgIT09IHZvaWQgMCAmJiBjdXJyU2xpZGUuaXNab29tYWJsZSgpKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl96b29tUG9pbnQueCA9PT0gMCkge1xuICAgICAgaWdub3JlR2VzdHVyZSA9IHRydWU7XG4gICAgfVxuXG4gICAgY29uc3QgcHJldlpvb21MZXZlbCA9IGN1cnJTbGlkZS5jdXJyWm9vbUxldmVsO1xuICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuXG4gICAgbGV0IGRlc3RpbmF0aW9uWm9vbUxldmVsO1xuICAgIGxldCBjdXJyWm9vbUxldmVsTmVlZHNDaGFuZ2UgPSB0cnVlO1xuXG4gICAgaWYgKHByZXZab29tTGV2ZWwgPCBjdXJyU2xpZGUuem9vbUxldmVscy5pbml0aWFsKSB7XG4gICAgICBkZXN0aW5hdGlvblpvb21MZXZlbCA9IGN1cnJTbGlkZS56b29tTGV2ZWxzLmluaXRpYWw7IC8vIHpvb20gdG8gbWluXG4gICAgfSBlbHNlIGlmIChwcmV2Wm9vbUxldmVsID4gY3VyclNsaWRlLnpvb21MZXZlbHMubWF4KSB7XG4gICAgICBkZXN0aW5hdGlvblpvb21MZXZlbCA9IGN1cnJTbGlkZS56b29tTGV2ZWxzLm1heDsgLy8gem9vbSB0byBtYXhcbiAgICB9IGVsc2Uge1xuICAgICAgY3Vyclpvb21MZXZlbE5lZWRzQ2hhbmdlID0gZmFsc2U7XG4gICAgICBkZXN0aW5hdGlvblpvb21MZXZlbCA9IHByZXZab29tTGV2ZWw7XG4gICAgfVxuXG4gICAgY29uc3QgaW5pdGlhbEJnT3BhY2l0eSA9IHBzd3AuYmdPcGFjaXR5O1xuICAgIGNvbnN0IHJlc3RvcmVCZ09wYWNpdHkgPSBwc3dwLmJnT3BhY2l0eSA8IDE7XG4gICAgY29uc3QgaW5pdGlhbFBhbiA9IGVxdWFsaXplUG9pbnRzKHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwXG4gICAgfSwgY3VyclNsaWRlLnBhbik7XG4gICAgbGV0IGRlc3RpbmF0aW9uUGFuID0gZXF1YWxpemVQb2ludHMoe1xuICAgICAgeDogMCxcbiAgICAgIHk6IDBcbiAgICB9LCBpbml0aWFsUGFuKTtcblxuICAgIGlmIChpZ25vcmVHZXN0dXJlKSB7XG4gICAgICB0aGlzLl96b29tUG9pbnQueCA9IDA7XG4gICAgICB0aGlzLl96b29tUG9pbnQueSA9IDA7XG4gICAgICB0aGlzLl9zdGFydFpvb21Qb2ludC54ID0gMDtcbiAgICAgIHRoaXMuX3N0YXJ0Wm9vbVBvaW50LnkgPSAwO1xuICAgICAgdGhpcy5fc3RhcnRab29tTGV2ZWwgPSBwcmV2Wm9vbUxldmVsO1xuICAgICAgZXF1YWxpemVQb2ludHModGhpcy5fc3RhcnRQYW4sIGluaXRpYWxQYW4pO1xuICAgIH1cblxuICAgIGlmIChjdXJyWm9vbUxldmVsTmVlZHNDaGFuZ2UpIHtcbiAgICAgIGRlc3RpbmF0aW9uUGFuID0ge1xuICAgICAgICB4OiB0aGlzLl9jYWxjdWxhdGVQYW5Gb3Jab29tTGV2ZWwoJ3gnLCBkZXN0aW5hdGlvblpvb21MZXZlbCksXG4gICAgICAgIHk6IHRoaXMuX2NhbGN1bGF0ZVBhbkZvclpvb21MZXZlbCgneScsIGRlc3RpbmF0aW9uWm9vbUxldmVsKVxuICAgICAgfTtcbiAgICB9IC8vIHNldCB6b29tIGxldmVsLCBzbyBwYW4gYm91bmRzIGFyZSB1cGRhdGVkIGFjY29yZGluZyB0byBpdFxuXG5cbiAgICBjdXJyU2xpZGUuc2V0Wm9vbUxldmVsKGRlc3RpbmF0aW9uWm9vbUxldmVsKTtcbiAgICBkZXN0aW5hdGlvblBhbiA9IHtcbiAgICAgIHg6IGN1cnJTbGlkZS5ib3VuZHMuY29ycmVjdFBhbigneCcsIGRlc3RpbmF0aW9uUGFuLngpLFxuICAgICAgeTogY3VyclNsaWRlLmJvdW5kcy5jb3JyZWN0UGFuKCd5JywgZGVzdGluYXRpb25QYW4ueSlcbiAgICB9OyAvLyByZXR1cm4gem9vbSBsZXZlbCBhbmQgaXRzIGJvdW5kcyB0byBpbml0aWFsXG5cbiAgICBjdXJyU2xpZGUuc2V0Wm9vbUxldmVsKHByZXZab29tTGV2ZWwpO1xuICAgIGNvbnN0IHBhbk5lZWRzQ2hhbmdlID0gIXBvaW50c0VxdWFsKGRlc3RpbmF0aW9uUGFuLCBpbml0aWFsUGFuKTtcblxuICAgIGlmICghcGFuTmVlZHNDaGFuZ2UgJiYgIWN1cnJab29tTGV2ZWxOZWVkc0NoYW5nZSAmJiAhcmVzdG9yZUJnT3BhY2l0eSkge1xuICAgICAgLy8gdXBkYXRlIHJlc29sdXRpb24gYWZ0ZXIgZ2VzdHVyZVxuICAgICAgY3VyclNsaWRlLl9zZXRSZXNvbHV0aW9uKGRlc3RpbmF0aW9uWm9vbUxldmVsKTtcblxuICAgICAgY3VyclNsaWRlLmFwcGx5Q3VycmVudFpvb21QYW4oKTsgLy8gbm90aGluZyB0byBhbmltYXRlXG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBwc3dwLmFuaW1hdGlvbnMuc3RvcEFsbFBhbigpO1xuICAgIHBzd3AuYW5pbWF0aW9ucy5zdGFydFNwcmluZyh7XG4gICAgICBpc1BhbjogdHJ1ZSxcbiAgICAgIHN0YXJ0OiAwLFxuICAgICAgZW5kOiAxMDAwLFxuICAgICAgdmVsb2NpdHk6IDAsXG4gICAgICBkYW1waW5nUmF0aW86IDEsXG4gICAgICBuYXR1cmFsRnJlcXVlbmN5OiA0MCxcbiAgICAgIG9uVXBkYXRlOiBub3cgPT4ge1xuICAgICAgICBub3cgLz0gMTAwMDsgLy8gMCAtIHN0YXJ0LCAxIC0gZW5kXG5cbiAgICAgICAgaWYgKHBhbk5lZWRzQ2hhbmdlIHx8IGN1cnJab29tTGV2ZWxOZWVkc0NoYW5nZSkge1xuICAgICAgICAgIGlmIChwYW5OZWVkc0NoYW5nZSkge1xuICAgICAgICAgICAgY3VyclNsaWRlLnBhbi54ID0gaW5pdGlhbFBhbi54ICsgKGRlc3RpbmF0aW9uUGFuLnggLSBpbml0aWFsUGFuLngpICogbm93O1xuICAgICAgICAgICAgY3VyclNsaWRlLnBhbi55ID0gaW5pdGlhbFBhbi55ICsgKGRlc3RpbmF0aW9uUGFuLnkgLSBpbml0aWFsUGFuLnkpICogbm93O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChjdXJyWm9vbUxldmVsTmVlZHNDaGFuZ2UpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1pvb21MZXZlbCA9IHByZXZab29tTGV2ZWwgKyAoZGVzdGluYXRpb25ab29tTGV2ZWwgLSBwcmV2Wm9vbUxldmVsKSAqIG5vdztcbiAgICAgICAgICAgIGN1cnJTbGlkZS5zZXRab29tTGV2ZWwobmV3Wm9vbUxldmVsKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjdXJyU2xpZGUuYXBwbHlDdXJyZW50Wm9vbVBhbigpO1xuICAgICAgICB9IC8vIFJlc3RvcmUgYmFja2dyb3VuZCBvcGFjaXR5XG5cblxuICAgICAgICBpZiAocmVzdG9yZUJnT3BhY2l0eSAmJiBwc3dwLmJnT3BhY2l0eSA8IDEpIHtcbiAgICAgICAgICAvLyBXZSBjbGFtcCBvcGFjaXR5IHRvIGtlZXAgaXQgYmV0d2VlbiAwIGFuZCAxLlxuICAgICAgICAgIC8vIEFzIHByb2dyZXNzIHJhdGlvIGNhbiBiZSBsYXJnZXIgdGhhbiAxIGR1ZSB0byBvdmVyc2hvb3QsXG4gICAgICAgICAgLy8gYW5kIHdlIGRvIG5vdCB3YW50IHRvIGJvdW5jZSBvcGFjaXR5LlxuICAgICAgICAgIHBzd3AuYXBwbHlCZ09wYWNpdHkoY2xhbXAoaW5pdGlhbEJnT3BhY2l0eSArICgxIC0gaW5pdGlhbEJnT3BhY2l0eSkgKiBub3csIDAsIDEpKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcbiAgICAgICAgLy8gdXBkYXRlIHJlc29sdXRpb24gYWZ0ZXIgdHJhbnNpdGlvbiBlbmRzXG4gICAgICAgIGN1cnJTbGlkZS5fc2V0UmVzb2x1dGlvbihkZXN0aW5hdGlvblpvb21MZXZlbCk7XG5cbiAgICAgICAgY3VyclNsaWRlLmFwcGx5Q3VycmVudFpvb21QYW4oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG59XG5cbi8qKlxuICogQHRlbXBsYXRlIHtzdHJpbmd9IFRcbiAqIEB0ZW1wbGF0ZSB7c3RyaW5nfSBQXG4gKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi90eXBlcy5qcycpLkFkZFBvc3RmaXg8VCwgUD59IEFkZFBvc3RmaXg8VCwgUD5cbiAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi9nZXN0dXJlcy5qcycpLmRlZmF1bHR9IEdlc3R1cmVzICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9waG90b3N3aXBlLmpzJykuUG9pbnR9IFBvaW50ICovXG5cbi8qKiBAdHlwZWRlZiB7J2ltYWdlQ2xpY2snIHwgJ2JnQ2xpY2snIHwgJ3RhcCcgfCAnZG91YmxlVGFwJ30gQWN0aW9ucyAqL1xuXG4vKipcbiAqIFdoZXRoZXIgdGhlIHRhcCB3YXMgcGVyZm9ybWVkIG9uIHRoZSBtYWluIHNsaWRlXG4gKiAocmF0aGVyIHRoYW4gY29udHJvbHMgb3IgY2FwdGlvbikuXG4gKlxuICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IGV2ZW50XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gZGlkVGFwT25NYWluQ29udGVudChldmVudCkge1xuICByZXR1cm4gISFcbiAgLyoqIEB0eXBlIHtIVE1MRWxlbWVudH0gKi9cbiAgZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5wc3dwX19jb250YWluZXInKTtcbn1cbi8qKlxuICogVGFwLCBkb3VibGUtdGFwIGhhbmRsZXIuXG4gKi9cblxuXG5jbGFzcyBUYXBIYW5kbGVyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7R2VzdHVyZXN9IGdlc3R1cmVzXG4gICAqL1xuICBjb25zdHJ1Y3RvcihnZXN0dXJlcykge1xuICAgIHRoaXMuZ2VzdHVyZXMgPSBnZXN0dXJlcztcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHtQb2ludH0gcG9pbnRcbiAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IG9yaWdpbmFsRXZlbnRcbiAgICovXG5cblxuICBjbGljayhwb2ludCwgb3JpZ2luYWxFdmVudCkge1xuICAgIGNvbnN0IHRhcmdldENsYXNzTGlzdCA9XG4gICAgLyoqIEB0eXBlIHtIVE1MRWxlbWVudH0gKi9cbiAgICBvcmlnaW5hbEV2ZW50LnRhcmdldC5jbGFzc0xpc3Q7XG4gICAgY29uc3QgaXNJbWFnZUNsaWNrID0gdGFyZ2V0Q2xhc3NMaXN0LmNvbnRhaW5zKCdwc3dwX19pbWcnKTtcbiAgICBjb25zdCBpc0JhY2tncm91bmRDbGljayA9IHRhcmdldENsYXNzTGlzdC5jb250YWlucygncHN3cF9faXRlbScpIHx8IHRhcmdldENsYXNzTGlzdC5jb250YWlucygncHN3cF9fem9vbS13cmFwJyk7XG5cbiAgICBpZiAoaXNJbWFnZUNsaWNrKSB7XG4gICAgICB0aGlzLl9kb0NsaWNrT3JUYXBBY3Rpb24oJ2ltYWdlQ2xpY2snLCBwb2ludCwgb3JpZ2luYWxFdmVudCk7XG4gICAgfSBlbHNlIGlmIChpc0JhY2tncm91bmRDbGljaykge1xuICAgICAgdGhpcy5fZG9DbGlja09yVGFwQWN0aW9uKCdiZ0NsaWNrJywgcG9pbnQsIG9yaWdpbmFsRXZlbnQpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHtQb2ludH0gcG9pbnRcbiAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IG9yaWdpbmFsRXZlbnRcbiAgICovXG5cblxuICB0YXAocG9pbnQsIG9yaWdpbmFsRXZlbnQpIHtcbiAgICBpZiAoZGlkVGFwT25NYWluQ29udGVudChvcmlnaW5hbEV2ZW50KSkge1xuICAgICAgdGhpcy5fZG9DbGlja09yVGFwQWN0aW9uKCd0YXAnLCBwb2ludCwgb3JpZ2luYWxFdmVudCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0ge1BvaW50fSBwb2ludFxuICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gb3JpZ2luYWxFdmVudFxuICAgKi9cblxuXG4gIGRvdWJsZVRhcChwb2ludCwgb3JpZ2luYWxFdmVudCkge1xuICAgIGlmIChkaWRUYXBPbk1haW5Db250ZW50KG9yaWdpbmFsRXZlbnQpKSB7XG4gICAgICB0aGlzLl9kb0NsaWNrT3JUYXBBY3Rpb24oJ2RvdWJsZVRhcCcsIHBvaW50LCBvcmlnaW5hbEV2ZW50KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QWN0aW9uc30gYWN0aW9uTmFtZVxuICAgKiBAcGFyYW0ge1BvaW50fSBwb2ludFxuICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gb3JpZ2luYWxFdmVudFxuICAgKi9cblxuXG4gIF9kb0NsaWNrT3JUYXBBY3Rpb24oYWN0aW9uTmFtZSwgcG9pbnQsIG9yaWdpbmFsRXZlbnQpIHtcbiAgICB2YXIgX3RoaXMkZ2VzdHVyZXMkcHN3cCRlO1xuXG4gICAgY29uc3Qge1xuICAgICAgcHN3cFxuICAgIH0gPSB0aGlzLmdlc3R1cmVzO1xuICAgIGNvbnN0IHtcbiAgICAgIGN1cnJTbGlkZVxuICAgIH0gPSBwc3dwO1xuICAgIGNvbnN0IGFjdGlvbkZ1bGxOYW1lID1cbiAgICAvKiogQHR5cGUge0FkZFBvc3RmaXg8QWN0aW9ucywgJ0FjdGlvbic+fSAqL1xuICAgIGFjdGlvbk5hbWUgKyAnQWN0aW9uJztcbiAgICBjb25zdCBvcHRpb25WYWx1ZSA9IHBzd3Aub3B0aW9uc1thY3Rpb25GdWxsTmFtZV07XG5cbiAgICBpZiAocHN3cC5kaXNwYXRjaChhY3Rpb25GdWxsTmFtZSwge1xuICAgICAgcG9pbnQsXG4gICAgICBvcmlnaW5hbEV2ZW50XG4gICAgfSkuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygb3B0aW9uVmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG9wdGlvblZhbHVlLmNhbGwocHN3cCwgcG9pbnQsIG9yaWdpbmFsRXZlbnQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN3aXRjaCAob3B0aW9uVmFsdWUpIHtcbiAgICAgIGNhc2UgJ2Nsb3NlJzpcbiAgICAgIGNhc2UgJ25leHQnOlxuICAgICAgICBwc3dwW29wdGlvblZhbHVlXSgpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnem9vbSc6XG4gICAgICAgIGN1cnJTbGlkZSA9PT0gbnVsbCB8fCBjdXJyU2xpZGUgPT09IHZvaWQgMCB8fCBjdXJyU2xpZGUudG9nZ2xlWm9vbShwb2ludCk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICd6b29tLW9yLWNsb3NlJzpcbiAgICAgICAgLy8gYnkgZGVmYXVsdCBjbGljayB6b29tcyBjdXJyZW50IGltYWdlLFxuICAgICAgICAvLyBpZiBpdCBjYW4gbm90IGJlIHpvb21lZCAtIGdhbGxlcnkgd2lsbCBiZSBjbG9zZWRcbiAgICAgICAgaWYgKGN1cnJTbGlkZSAhPT0gbnVsbCAmJiBjdXJyU2xpZGUgIT09IHZvaWQgMCAmJiBjdXJyU2xpZGUuaXNab29tYWJsZSgpICYmIGN1cnJTbGlkZS56b29tTGV2ZWxzLnNlY29uZGFyeSAhPT0gY3VyclNsaWRlLnpvb21MZXZlbHMuaW5pdGlhbCkge1xuICAgICAgICAgIGN1cnJTbGlkZS50b2dnbGVab29tKHBvaW50KTtcbiAgICAgICAgfSBlbHNlIGlmIChwc3dwLm9wdGlvbnMuY2xpY2tUb0Nsb3NlTm9uWm9vbWFibGUpIHtcbiAgICAgICAgICBwc3dwLmNsb3NlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAndG9nZ2xlLWNvbnRyb2xzJzpcbiAgICAgICAgKF90aGlzJGdlc3R1cmVzJHBzd3AkZSA9IHRoaXMuZ2VzdHVyZXMucHN3cC5lbGVtZW50KSA9PT0gbnVsbCB8fCBfdGhpcyRnZXN0dXJlcyRwc3dwJGUgPT09IHZvaWQgMCB8fCBfdGhpcyRnZXN0dXJlcyRwc3dwJGUuY2xhc3NMaXN0LnRvZ2dsZSgncHN3cC0tdWktdmlzaWJsZScpOyAvLyBpZiAoX2NvbnRyb2xzVmlzaWJsZSkge1xuICAgICAgICAvLyAgIF91aS5oaWRlQ29udHJvbHMoKTtcbiAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgLy8gICBfdWkuc2hvd0NvbnRyb2xzKCk7XG4gICAgICAgIC8vIH1cblxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxufVxuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vcGhvdG9zd2lwZS5qcycpLmRlZmF1bHR9IFBob3RvU3dpcGUgKi9cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4uL3Bob3Rvc3dpcGUuanMnKS5Qb2ludH0gUG9pbnQgKi9cbi8vIEhvdyBmYXIgc2hvdWxkIHVzZXIgc2hvdWxkIGRyYWdcbi8vIHVudGlsIHdlIGNhbiBkZXRlcm1pbmUgdGhhdCB0aGUgZ2VzdHVyZSBpcyBzd2lwZSBhbmQgaXRzIGRpcmVjdGlvblxuXG5jb25zdCBBWElTX1NXSVBFX0hZU1RFUklTSVMgPSAxMDsgLy9jb25zdCBQQU5fRU5EX0ZSSUNUSU9OID0gMC4zNTtcblxuY29uc3QgRE9VQkxFX1RBUF9ERUxBWSA9IDMwMDsgLy8gbXNcblxuY29uc3QgTUlOX1RBUF9ESVNUQU5DRSA9IDI1OyAvLyBweFxuXG4vKipcbiAqIEdlc3R1cmVzIGNsYXNzIGJpbmQgdG91Y2gsIHBvaW50ZXIgb3IgbW91c2UgZXZlbnRzXG4gKiBhbmQgZW1pdHMgZHJhZyB0byBkcmFnLWhhbmRsZXIgYW5kIHpvb20gZXZlbnRzIHpvb20taGFuZGxlci5cbiAqXG4gKiBEcmFnIGFuZCB6b29tIGV2ZW50cyBhcmUgZW1pdGVkIGluIHJlcXVlc3RBbmltYXRpb25GcmFtZSxcbiAqIGFuZCBvbmx5IHdoZW4gb25lIG9mIHBvaW50ZXJzIHdhcyBhY3R1YWxseSBjaGFuZ2VkLlxuICovXG5cbmNsYXNzIEdlc3R1cmVzIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7UGhvdG9Td2lwZX0gcHN3cFxuICAgKi9cbiAgY29uc3RydWN0b3IocHN3cCkge1xuICAgIHRoaXMucHN3cCA9IHBzd3A7XG4gICAgLyoqIEB0eXBlIHsneCcgfCAneScgfCBudWxsfSAqL1xuXG4gICAgdGhpcy5kcmFnQXhpcyA9IG51bGw7IC8vIHBvaW50IG9iamVjdHMgYXJlIGRlZmluZWQgb25jZSBhbmQgcmV1c2VkXG4gICAgLy8gUGhvdG9Td2lwZSBrZWVwcyB0cmFjayBvbmx5IG9mIHR3byBwb2ludGVycywgb3RoZXJzIGFyZSBpZ25vcmVkXG5cbiAgICAvKiogQHR5cGUge1BvaW50fSAqL1xuXG4gICAgdGhpcy5wMSA9IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwXG4gICAgfTsgLy8gdGhlIGZpcnN0IHByZXNzZWQgcG9pbnRlclxuXG4gICAgLyoqIEB0eXBlIHtQb2ludH0gKi9cblxuICAgIHRoaXMucDIgPSB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMFxuICAgIH07IC8vIHRoZSBzZWNvbmQgcHJlc3NlZCBwb2ludGVyXG5cbiAgICAvKiogQHR5cGUge1BvaW50fSAqL1xuXG4gICAgdGhpcy5wcmV2UDEgPSB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMFxuICAgIH07XG4gICAgLyoqIEB0eXBlIHtQb2ludH0gKi9cblxuICAgIHRoaXMucHJldlAyID0ge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDBcbiAgICB9O1xuICAgIC8qKiBAdHlwZSB7UG9pbnR9ICovXG5cbiAgICB0aGlzLnN0YXJ0UDEgPSB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMFxuICAgIH07XG4gICAgLyoqIEB0eXBlIHtQb2ludH0gKi9cblxuICAgIHRoaXMuc3RhcnRQMiA9IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwXG4gICAgfTtcbiAgICAvKiogQHR5cGUge1BvaW50fSAqL1xuXG4gICAgdGhpcy52ZWxvY2l0eSA9IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwXG4gICAgfTtcbiAgICAvKiogQHR5cGUge1BvaW50fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG5cbiAgICB0aGlzLl9sYXN0U3RhcnRQMSA9IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwXG4gICAgfTtcbiAgICAvKiogQHR5cGUge1BvaW50fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG5cbiAgICB0aGlzLl9pbnRlcnZhbFAxID0ge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDBcbiAgICB9O1xuICAgIC8qKiBAcHJpdmF0ZSAqL1xuXG4gICAgdGhpcy5fbnVtQWN0aXZlUG9pbnRzID0gMDtcbiAgICAvKiogQHR5cGUge1BvaW50W119XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblxuICAgIHRoaXMuX29uZ29pbmdQb2ludGVycyA9IFtdO1xuICAgIC8qKiBAcHJpdmF0ZSAqL1xuXG4gICAgdGhpcy5fdG91Y2hFdmVudEVuYWJsZWQgPSAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3c7XG4gICAgLyoqIEBwcml2YXRlICovXG5cbiAgICB0aGlzLl9wb2ludGVyRXZlbnRFbmFibGVkID0gISF3aW5kb3cuUG9pbnRlckV2ZW50O1xuICAgIHRoaXMuc3VwcG9ydHNUb3VjaCA9IHRoaXMuX3RvdWNoRXZlbnRFbmFibGVkIHx8IHRoaXMuX3BvaW50ZXJFdmVudEVuYWJsZWQgJiYgbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzID4gMTtcbiAgICAvKiogQHByaXZhdGUgKi9cblxuICAgIHRoaXMuX251bUFjdGl2ZVBvaW50cyA9IDA7XG4gICAgLyoqIEBwcml2YXRlICovXG5cbiAgICB0aGlzLl9pbnRlcnZhbFRpbWUgPSAwO1xuICAgIC8qKiBAcHJpdmF0ZSAqL1xuXG4gICAgdGhpcy5fdmVsb2NpdHlDYWxjdWxhdGVkID0gZmFsc2U7XG4gICAgdGhpcy5pc011bHRpdG91Y2ggPSBmYWxzZTtcbiAgICB0aGlzLmlzRHJhZ2dpbmcgPSBmYWxzZTtcbiAgICB0aGlzLmlzWm9vbWluZyA9IGZhbHNlO1xuICAgIC8qKiBAdHlwZSB7bnVtYmVyIHwgbnVsbH0gKi9cblxuICAgIHRoaXMucmFmID0gbnVsbDtcbiAgICAvKiogQHR5cGUge05vZGVKUy5UaW1lb3V0IHwgbnVsbH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgdGhpcy5fdGFwVGltZXIgPSBudWxsO1xuXG4gICAgaWYgKCF0aGlzLnN1cHBvcnRzVG91Y2gpIHtcbiAgICAgIC8vIGRpc2FibGUgcGFuIHRvIG5leHQgc2xpZGUgZm9yIG5vbi10b3VjaCBkZXZpY2VzXG4gICAgICBwc3dwLm9wdGlvbnMuYWxsb3dQYW5Ub05leHQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB0aGlzLmRyYWcgPSBuZXcgRHJhZ0hhbmRsZXIodGhpcyk7XG4gICAgdGhpcy56b29tTGV2ZWxzID0gbmV3IFpvb21IYW5kbGVyKHRoaXMpO1xuICAgIHRoaXMudGFwSGFuZGxlciA9IG5ldyBUYXBIYW5kbGVyKHRoaXMpO1xuICAgIHBzd3Aub24oJ2JpbmRFdmVudHMnLCAoKSA9PiB7XG4gICAgICBwc3dwLmV2ZW50cy5hZGQocHN3cC5zY3JvbGxXcmFwLCAnY2xpY2snLFxuICAgICAgLyoqIEB0eXBlIEV2ZW50TGlzdGVuZXIgKi9cbiAgICAgIHRoaXMuX29uQ2xpY2suYmluZCh0aGlzKSk7XG5cbiAgICAgIGlmICh0aGlzLl9wb2ludGVyRXZlbnRFbmFibGVkKSB7XG4gICAgICAgIHRoaXMuX2JpbmRFdmVudHMoJ3BvaW50ZXInLCAnZG93bicsICd1cCcsICdjYW5jZWwnKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fdG91Y2hFdmVudEVuYWJsZWQpIHtcbiAgICAgICAgdGhpcy5fYmluZEV2ZW50cygndG91Y2gnLCAnc3RhcnQnLCAnZW5kJywgJ2NhbmNlbCcpOyAvLyBJbiBwcmV2aW91cyB2ZXJzaW9ucyB3ZSBhbHNvIGJvdW5kIG1vdXNlIGV2ZW50IGhlcmUsXG4gICAgICAgIC8vIGluIGNhc2UgZGV2aWNlIHN1cHBvcnRzIGJvdGggdG91Y2ggYW5kIG1vdXNlIGV2ZW50cyxcbiAgICAgICAgLy8gYnV0IG5ld2VyIHZlcnNpb25zIG9mIGJyb3dzZXJzIG5vdyBzdXBwb3J0IFBvaW50ZXJFdmVudC5cbiAgICAgICAgLy8gb24gaU9TMTAgaWYgeW91IGJpbmQgdG91Y2htb3ZlL2VuZCBhZnRlciB0b3VjaHN0YXJ0LFxuICAgICAgICAvLyBhbmQgeW91IGRvbid0IHByZXZlbnREZWZhdWx0IHRvdWNoc3RhcnQgKHdoaWNoIFBob3RvU3dpcGUgZG9lcyksXG4gICAgICAgIC8vIHByZXZlbnREZWZhdWx0IHdpbGwgaGF2ZSBubyBlZmZlY3Qgb24gdG91Y2htb3ZlIGFuZCB0b3VjaGVuZC5cbiAgICAgICAgLy8gVW5sZXNzIHlvdSBiaW5kIGl0IHByZXZpb3VzbHkuXG5cblxuICAgICAgICBpZiAocHN3cC5zY3JvbGxXcmFwKSB7XG4gICAgICAgICAgcHN3cC5zY3JvbGxXcmFwLm9udG91Y2htb3ZlID0gKCkgPT4ge307XG5cbiAgICAgICAgICBwc3dwLnNjcm9sbFdyYXAub250b3VjaGVuZCA9ICgpID0+IHt9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9iaW5kRXZlbnRzKCdtb3VzZScsICdkb3duJywgJ3VwJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7J21vdXNlJyB8ICd0b3VjaCcgfCAncG9pbnRlcid9IHByZWZcbiAgICogQHBhcmFtIHsnZG93bicgfCAnc3RhcnQnfSBkb3duXG4gICAqIEBwYXJhbSB7J3VwJyB8ICdlbmQnfSB1cFxuICAgKiBAcGFyYW0geydjYW5jZWwnfSBbY2FuY2VsXVxuICAgKi9cblxuXG4gIF9iaW5kRXZlbnRzKHByZWYsIGRvd24sIHVwLCBjYW5jZWwpIHtcbiAgICBjb25zdCB7XG4gICAgICBwc3dwXG4gICAgfSA9IHRoaXM7XG4gICAgY29uc3Qge1xuICAgICAgZXZlbnRzXG4gICAgfSA9IHBzd3A7XG4gICAgY29uc3QgY2FuY2VsRXZlbnQgPSBjYW5jZWwgPyBwcmVmICsgY2FuY2VsIDogJyc7XG4gICAgZXZlbnRzLmFkZChwc3dwLnNjcm9sbFdyYXAsIHByZWYgKyBkb3duLFxuICAgIC8qKiBAdHlwZSBFdmVudExpc3RlbmVyICovXG4gICAgdGhpcy5vblBvaW50ZXJEb3duLmJpbmQodGhpcykpO1xuICAgIGV2ZW50cy5hZGQod2luZG93LCBwcmVmICsgJ21vdmUnLFxuICAgIC8qKiBAdHlwZSBFdmVudExpc3RlbmVyICovXG4gICAgdGhpcy5vblBvaW50ZXJNb3ZlLmJpbmQodGhpcykpO1xuICAgIGV2ZW50cy5hZGQod2luZG93LCBwcmVmICsgdXAsXG4gICAgLyoqIEB0eXBlIEV2ZW50TGlzdGVuZXIgKi9cbiAgICB0aGlzLm9uUG9pbnRlclVwLmJpbmQodGhpcykpO1xuXG4gICAgaWYgKGNhbmNlbEV2ZW50KSB7XG4gICAgICBldmVudHMuYWRkKHBzd3Auc2Nyb2xsV3JhcCwgY2FuY2VsRXZlbnQsXG4gICAgICAvKiogQHR5cGUgRXZlbnRMaXN0ZW5lciAqL1xuICAgICAgdGhpcy5vblBvaW50ZXJVcC5iaW5kKHRoaXMpKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBlXG4gICAqL1xuXG5cbiAgb25Qb2ludGVyRG93bihlKSB7XG4gICAgLy8gV2UgZG8gbm90IGNhbGwgcHJldmVudERlZmF1bHQgZm9yIHRvdWNoIGV2ZW50c1xuICAgIC8vIHRvIGFsbG93IGJyb3dzZXIgdG8gc2hvdyBuYXRpdmUgZGlhbG9nIG9uIGxvbmdwcmVzc1xuICAgIC8vICh0aGUgb25lIHRoYXQgYWxsb3dzIHRvIHNhdmUgaW1hZ2Ugb3Igb3BlbiBpdCBpbiBuZXcgdGFiKS5cbiAgICAvL1xuICAgIC8vIERlc2t0b3AgU2FmYXJpIGFsbG93cyB0byBkcmFnIGltYWdlcyB3aGVuIHByZXZlbnREZWZhdWx0IGlzbid0IGNhbGxlZCBvbiBtb3VzZWRvd24sXG4gICAgLy8gZXZlbiB0aG91Z2ggcHJldmVudERlZmF1bHQgSVMgY2FsbGVkIG9uIG1vdXNlbW92ZS4gVGhhdCdzIHdoeSB3ZSBwcmV2ZW50RGVmYXVsdCBtb3VzZWRvd24uXG4gICAgY29uc3QgaXNNb3VzZVBvaW50ZXIgPSBlLnR5cGUgPT09ICdtb3VzZWRvd24nIHx8IGUucG9pbnRlclR5cGUgPT09ICdtb3VzZSc7IC8vIEFsbG93IGRyYWdnaW5nIG9ubHkgdmlhIGxlZnQgbW91c2UgYnV0dG9uLlxuICAgIC8vIGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvanMvZXZlbnRzX3Byb3BlcnRpZXMuaHRtbFxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9ldmVudC5idXR0b25cblxuICAgIGlmIChpc01vdXNlUG9pbnRlciAmJiBlLmJ1dHRvbiA+IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB7XG4gICAgICBwc3dwXG4gICAgfSA9IHRoaXM7IC8vIGlmIFBob3RvU3dpcGUgaXMgb3BlbmluZyBvciBjbG9zaW5nXG5cbiAgICBpZiAoIXBzd3Aub3BlbmVyLmlzT3Blbikge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChwc3dwLmRpc3BhdGNoKCdwb2ludGVyRG93bicsIHtcbiAgICAgIG9yaWdpbmFsRXZlbnQ6IGVcbiAgICB9KS5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGlzTW91c2VQb2ludGVyKSB7XG4gICAgICBwc3dwLm1vdXNlRGV0ZWN0ZWQoKTsgLy8gcHJldmVudERlZmF1bHQgbW91c2UgZXZlbnQgdG8gcHJldmVudFxuICAgICAgLy8gYnJvd3NlciBpbWFnZSBkcmFnIGZlYXR1cmVcblxuICAgICAgdGhpcy5fcHJldmVudFBvaW50ZXJFdmVudEJlaGF2aW91cihlLCAnZG93bicpO1xuICAgIH1cblxuICAgIHBzd3AuYW5pbWF0aW9ucy5zdG9wQWxsKCk7XG5cbiAgICB0aGlzLl91cGRhdGVQb2ludHMoZSwgJ2Rvd24nKTtcblxuICAgIGlmICh0aGlzLl9udW1BY3RpdmVQb2ludHMgPT09IDEpIHtcbiAgICAgIHRoaXMuZHJhZ0F4aXMgPSBudWxsOyAvLyB3ZSBuZWVkIHRvIHN0b3JlIGluaXRpYWwgcG9pbnQgdG8gZGV0ZXJtaW5lIHRoZSBtYWluIGF4aXMsXG4gICAgICAvLyBkcmFnIGlzIGFjdGl2YXRlZCBvbmx5IGFmdGVyIHRoZSBheGlzIGlzIGRldGVybWluZWRcblxuICAgICAgZXF1YWxpemVQb2ludHModGhpcy5zdGFydFAxLCB0aGlzLnAxKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fbnVtQWN0aXZlUG9pbnRzID4gMSkge1xuICAgICAgLy8gVGFwIG9yIGRvdWJsZSB0YXAgc2hvdWxkIG5vdCB0cmlnZ2VyIGlmIG1vcmUgdGhhbiBvbmUgcG9pbnRlclxuICAgICAgdGhpcy5fY2xlYXJUYXBUaW1lcigpO1xuXG4gICAgICB0aGlzLmlzTXVsdGl0b3VjaCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaXNNdWx0aXRvdWNoID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gZVxuICAgKi9cblxuXG4gIG9uUG9pbnRlck1vdmUoZSkge1xuICAgIHRoaXMuX3ByZXZlbnRQb2ludGVyRXZlbnRCZWhhdmlvdXIoZSwgJ21vdmUnKTtcblxuICAgIGlmICghdGhpcy5fbnVtQWN0aXZlUG9pbnRzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fdXBkYXRlUG9pbnRzKGUsICdtb3ZlJyk7XG5cbiAgICBpZiAodGhpcy5wc3dwLmRpc3BhdGNoKCdwb2ludGVyTW92ZScsIHtcbiAgICAgIG9yaWdpbmFsRXZlbnQ6IGVcbiAgICB9KS5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX251bUFjdGl2ZVBvaW50cyA9PT0gMSAmJiAhdGhpcy5pc0RyYWdnaW5nKSB7XG4gICAgICBpZiAoIXRoaXMuZHJhZ0F4aXMpIHtcbiAgICAgICAgdGhpcy5fY2FsY3VsYXRlRHJhZ0RpcmVjdGlvbigpO1xuICAgICAgfSAvLyBEcmFnIGF4aXMgd2FzIGRldGVjdGVkLCBlbWl0IGRyYWcuc3RhcnRcblxuXG4gICAgICBpZiAodGhpcy5kcmFnQXhpcyAmJiAhdGhpcy5pc0RyYWdnaW5nKSB7XG4gICAgICAgIGlmICh0aGlzLmlzWm9vbWluZykge1xuICAgICAgICAgIHRoaXMuaXNab29taW5nID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy56b29tTGV2ZWxzLmVuZCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pc0RyYWdnaW5nID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLl9jbGVhclRhcFRpbWVyKCk7IC8vIFRhcCBjYW4gbm90IHRyaWdnZXIgYWZ0ZXIgZHJhZ1xuICAgICAgICAvLyBBZGp1c3Qgc3RhcnRpbmcgcG9pbnRcblxuXG4gICAgICAgIHRoaXMuX3VwZGF0ZVN0YXJ0UG9pbnRzKCk7XG5cbiAgICAgICAgdGhpcy5faW50ZXJ2YWxUaW1lID0gRGF0ZS5ub3coKTsgLy90aGlzLl9zdGFydFRpbWUgPSB0aGlzLl9pbnRlcnZhbFRpbWU7XG5cbiAgICAgICAgdGhpcy5fdmVsb2NpdHlDYWxjdWxhdGVkID0gZmFsc2U7XG4gICAgICAgIGVxdWFsaXplUG9pbnRzKHRoaXMuX2ludGVydmFsUDEsIHRoaXMucDEpO1xuICAgICAgICB0aGlzLnZlbG9jaXR5LnggPSAwO1xuICAgICAgICB0aGlzLnZlbG9jaXR5LnkgPSAwO1xuICAgICAgICB0aGlzLmRyYWcuc3RhcnQoKTtcblxuICAgICAgICB0aGlzLl9yYWZTdG9wTG9vcCgpO1xuXG4gICAgICAgIHRoaXMuX3JhZlJlbmRlckxvb3AoKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuX251bUFjdGl2ZVBvaW50cyA+IDEgJiYgIXRoaXMuaXNab29taW5nKSB7XG4gICAgICB0aGlzLl9maW5pc2hEcmFnKCk7XG5cbiAgICAgIHRoaXMuaXNab29taW5nID0gdHJ1ZTsgLy8gQWRqdXN0IHN0YXJ0aW5nIHBvaW50c1xuXG4gICAgICB0aGlzLl91cGRhdGVTdGFydFBvaW50cygpO1xuXG4gICAgICB0aGlzLnpvb21MZXZlbHMuc3RhcnQoKTtcblxuICAgICAgdGhpcy5fcmFmU3RvcExvb3AoKTtcblxuICAgICAgdGhpcy5fcmFmUmVuZGVyTG9vcCgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG5cblxuICBfZmluaXNoRHJhZygpIHtcbiAgICBpZiAodGhpcy5pc0RyYWdnaW5nKSB7XG4gICAgICB0aGlzLmlzRHJhZ2dpbmcgPSBmYWxzZTsgLy8gVHJ5IHRvIGNhbGN1bGF0ZSB2ZWxvY2l0eSxcbiAgICAgIC8vIGlmIGl0IHdhc24ndCBjYWxjdWxhdGVkIHlldCBpbiBkcmFnLmNoYW5nZVxuXG4gICAgICBpZiAoIXRoaXMuX3ZlbG9jaXR5Q2FsY3VsYXRlZCkge1xuICAgICAgICB0aGlzLl91cGRhdGVWZWxvY2l0eSh0cnVlKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5kcmFnLmVuZCgpO1xuICAgICAgdGhpcy5kcmFnQXhpcyA9IG51bGw7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gZVxuICAgKi9cblxuXG4gIG9uUG9pbnRlclVwKGUpIHtcbiAgICBpZiAoIXRoaXMuX251bUFjdGl2ZVBvaW50cykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3VwZGF0ZVBvaW50cyhlLCAndXAnKTtcblxuICAgIGlmICh0aGlzLnBzd3AuZGlzcGF0Y2goJ3BvaW50ZXJVcCcsIHtcbiAgICAgIG9yaWdpbmFsRXZlbnQ6IGVcbiAgICB9KS5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX251bUFjdGl2ZVBvaW50cyA9PT0gMCkge1xuICAgICAgdGhpcy5fcmFmU3RvcExvb3AoKTtcblxuICAgICAgaWYgKHRoaXMuaXNEcmFnZ2luZykge1xuICAgICAgICB0aGlzLl9maW5pc2hEcmFnKCk7XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLmlzWm9vbWluZyAmJiAhdGhpcy5pc011bHRpdG91Y2gpIHtcbiAgICAgICAgLy90aGlzLnpvb21MZXZlbHMuY29ycmVjdFpvb21QYW4oKTtcbiAgICAgICAgdGhpcy5fZmluaXNoVGFwKGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLl9udW1BY3RpdmVQb2ludHMgPCAyICYmIHRoaXMuaXNab29taW5nKSB7XG4gICAgICB0aGlzLmlzWm9vbWluZyA9IGZhbHNlO1xuICAgICAgdGhpcy56b29tTGV2ZWxzLmVuZCgpO1xuXG4gICAgICBpZiAodGhpcy5fbnVtQWN0aXZlUG9pbnRzID09PSAxKSB7XG4gICAgICAgIC8vIFNpbmNlIHdlIGhhdmUgMSBwb2ludCBsZWZ0LCB3ZSBuZWVkIHRvIHJlaW5pdGlhdGUgZHJhZ1xuICAgICAgICB0aGlzLmRyYWdBeGlzID0gbnVsbDtcblxuICAgICAgICB0aGlzLl91cGRhdGVTdGFydFBvaW50cygpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG5cblxuICBfcmFmUmVuZGVyTG9vcCgpIHtcbiAgICBpZiAodGhpcy5pc0RyYWdnaW5nIHx8IHRoaXMuaXNab29taW5nKSB7XG4gICAgICB0aGlzLl91cGRhdGVWZWxvY2l0eSgpO1xuXG4gICAgICBpZiAodGhpcy5pc0RyYWdnaW5nKSB7XG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0aGF0IHBvaW50ZXIgbW92ZWQgc2luY2UgdGhlIGxhc3QgdXBkYXRlXG4gICAgICAgIGlmICghcG9pbnRzRXF1YWwodGhpcy5wMSwgdGhpcy5wcmV2UDEpKSB7XG4gICAgICAgICAgdGhpcy5kcmFnLmNoYW5nZSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2VcbiAgICAgICAgLyogaWYgKHRoaXMuaXNab29taW5nKSAqL1xuICAgICAgICB7XG4gICAgICAgICAgaWYgKCFwb2ludHNFcXVhbCh0aGlzLnAxLCB0aGlzLnByZXZQMSkgfHwgIXBvaW50c0VxdWFsKHRoaXMucDIsIHRoaXMucHJldlAyKSkge1xuICAgICAgICAgICAgdGhpcy56b29tTGV2ZWxzLmNoYW5nZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICB0aGlzLl91cGRhdGVQcmV2UG9pbnRzKCk7XG5cbiAgICAgIHRoaXMucmFmID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuX3JhZlJlbmRlckxvb3AuYmluZCh0aGlzKSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgdmVsb2NpdHkgYXQgNTBtcyBpbnRlcnZhbFxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmb3JjZV1cbiAgICovXG5cblxuICBfdXBkYXRlVmVsb2NpdHkoZm9yY2UpIHtcbiAgICBjb25zdCB0aW1lID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBkdXJhdGlvbiA9IHRpbWUgLSB0aGlzLl9pbnRlcnZhbFRpbWU7XG5cbiAgICBpZiAoZHVyYXRpb24gPCA1MCAmJiAhZm9yY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnZlbG9jaXR5LnggPSB0aGlzLl9nZXRWZWxvY2l0eSgneCcsIGR1cmF0aW9uKTtcbiAgICB0aGlzLnZlbG9jaXR5LnkgPSB0aGlzLl9nZXRWZWxvY2l0eSgneScsIGR1cmF0aW9uKTtcbiAgICB0aGlzLl9pbnRlcnZhbFRpbWUgPSB0aW1lO1xuICAgIGVxdWFsaXplUG9pbnRzKHRoaXMuX2ludGVydmFsUDEsIHRoaXMucDEpO1xuICAgIHRoaXMuX3ZlbG9jaXR5Q2FsY3VsYXRlZCA9IHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBlXG4gICAqL1xuXG5cbiAgX2ZpbmlzaFRhcChlKSB7XG4gICAgY29uc3Qge1xuICAgICAgbWFpblNjcm9sbFxuICAgIH0gPSB0aGlzLnBzd3A7IC8vIERvIG5vdCB0cmlnZ2VyIHRhcCBldmVudHMgaWYgbWFpbiBzY3JvbGwgaXMgc2hpZnRlZFxuXG4gICAgaWYgKG1haW5TY3JvbGwuaXNTaGlmdGVkKCkpIHtcbiAgICAgIC8vIHJlc3RvcmUgbWFpbiBzY3JvbGwgcG9zaXRpb25cbiAgICAgIC8vICh1c3VhbGx5IGhhcHBlbnMgaWYgc3RvcHBlZCBpbiB0aGUgbWlkZGxlIG9mIGFuaW1hdGlvbilcbiAgICAgIG1haW5TY3JvbGwubW92ZUluZGV4QnkoMCwgdHJ1ZSk7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBEbyBub3QgdHJpZ2dlciB0YXAgZm9yIHRvdWNoY2FuY2VsIG9yIHBvaW50ZXJjYW5jZWxcblxuXG4gICAgaWYgKGUudHlwZS5pbmRleE9mKCdjYW5jZWwnKSA+IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIFRyaWdnZXIgY2xpY2sgaW5zdGVhZCBvZiB0YXAgZm9yIG1vdXNlIGV2ZW50c1xuXG5cbiAgICBpZiAoZS50eXBlID09PSAnbW91c2V1cCcgfHwgZS5wb2ludGVyVHlwZSA9PT0gJ21vdXNlJykge1xuICAgICAgdGhpcy50YXBIYW5kbGVyLmNsaWNrKHRoaXMuc3RhcnRQMSwgZSk7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBEaXNhYmxlIGRlbGF5IGlmIHRoZXJlIGlzIG5vIGRvdWJsZVRhcEFjdGlvblxuXG5cbiAgICBjb25zdCB0YXBEZWxheSA9IHRoaXMucHN3cC5vcHRpb25zLmRvdWJsZVRhcEFjdGlvbiA/IERPVUJMRV9UQVBfREVMQVkgOiAwOyAvLyBJZiB0YXBUaW1lciBpcyBkZWZpbmVkIC0gd2UgdGFwcGVkIHJlY2VudGx5LFxuICAgIC8vIGNoZWNrIGlmIHRoZSBjdXJyZW50IHRhcCBpcyBjbG9zZSB0byB0aGUgcHJldmlvdXMgb25lLFxuICAgIC8vIGlmIHllcyAtIHRyaWdnZXIgZG91YmxlIHRhcFxuXG4gICAgaWYgKHRoaXMuX3RhcFRpbWVyKSB7XG4gICAgICB0aGlzLl9jbGVhclRhcFRpbWVyKCk7IC8vIENoZWNrIGlmIHR3byB0YXBzIHdlcmUgbW9yZSBvciBsZXNzIG9uIHRoZSBzYW1lIHBsYWNlXG5cblxuICAgICAgaWYgKGdldERpc3RhbmNlQmV0d2Vlbih0aGlzLl9sYXN0U3RhcnRQMSwgdGhpcy5zdGFydFAxKSA8IE1JTl9UQVBfRElTVEFOQ0UpIHtcbiAgICAgICAgdGhpcy50YXBIYW5kbGVyLmRvdWJsZVRhcCh0aGlzLnN0YXJ0UDEsIGUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBlcXVhbGl6ZVBvaW50cyh0aGlzLl9sYXN0U3RhcnRQMSwgdGhpcy5zdGFydFAxKTtcbiAgICAgIHRoaXMuX3RhcFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMudGFwSGFuZGxlci50YXAodGhpcy5zdGFydFAxLCBlKTtcblxuICAgICAgICB0aGlzLl9jbGVhclRhcFRpbWVyKCk7XG4gICAgICB9LCB0YXBEZWxheSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuXG4gIF9jbGVhclRhcFRpbWVyKCkge1xuICAgIGlmICh0aGlzLl90YXBUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RhcFRpbWVyKTtcbiAgICAgIHRoaXMuX3RhcFRpbWVyID0gbnVsbDtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEdldCB2ZWxvY2l0eSBmb3IgYXhpc1xuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0geyd4JyB8ICd5J30gYXhpc1xuICAgKiBAcGFyYW0ge251bWJlcn0gZHVyYXRpb25cbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG5cblxuICBfZ2V0VmVsb2NpdHkoYXhpcywgZHVyYXRpb24pIHtcbiAgICAvLyBkaXNwbGFjZW1lbnQgaXMgbGlrZSBkaXN0YW5jZSwgYnV0IGNhbiBiZSBuZWdhdGl2ZS5cbiAgICBjb25zdCBkaXNwbGFjZW1lbnQgPSB0aGlzLnAxW2F4aXNdIC0gdGhpcy5faW50ZXJ2YWxQMVtheGlzXTtcblxuICAgIGlmIChNYXRoLmFicyhkaXNwbGFjZW1lbnQpID4gMSAmJiBkdXJhdGlvbiA+IDUpIHtcbiAgICAgIHJldHVybiBkaXNwbGFjZW1lbnQgLyBkdXJhdGlvbjtcbiAgICB9XG5cbiAgICByZXR1cm4gMDtcbiAgfVxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG5cblxuICBfcmFmU3RvcExvb3AoKSB7XG4gICAgaWYgKHRoaXMucmFmKSB7XG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnJhZik7XG4gICAgICB0aGlzLnJhZiA9IG51bGw7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gZVxuICAgKiBAcGFyYW0geyd1cCcgfCAnZG93bicgfCAnbW92ZSd9IHBvaW50ZXJUeXBlIE5vcm1hbGl6ZWQgcG9pbnRlciB0eXBlXG4gICAqL1xuXG5cbiAgX3ByZXZlbnRQb2ludGVyRXZlbnRCZWhhdmlvdXIoZSwgcG9pbnRlclR5cGUpIHtcbiAgICBjb25zdCBwcmV2ZW50UG9pbnRlckV2ZW50ID0gdGhpcy5wc3dwLmFwcGx5RmlsdGVycygncHJldmVudFBvaW50ZXJFdmVudCcsIHRydWUsIGUsIHBvaW50ZXJUeXBlKTtcblxuICAgIGlmIChwcmV2ZW50UG9pbnRlckV2ZW50KSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBQYXJzZXMgYW5kIG5vcm1hbGl6ZXMgcG9pbnRzIGZyb20gdGhlIHRvdWNoLCBtb3VzZSBvciBwb2ludGVyIGV2ZW50LlxuICAgKiBVcGRhdGVzIHAxIGFuZCBwMi5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtQb2ludGVyRXZlbnQgfCBUb3VjaEV2ZW50fSBlXG4gICAqIEBwYXJhbSB7J3VwJyB8ICdkb3duJyB8ICdtb3ZlJ30gcG9pbnRlclR5cGUgTm9ybWFsaXplZCBwb2ludGVyIHR5cGVcbiAgICovXG5cblxuICBfdXBkYXRlUG9pbnRzKGUsIHBvaW50ZXJUeXBlKSB7XG4gICAgaWYgKHRoaXMuX3BvaW50ZXJFdmVudEVuYWJsZWQpIHtcbiAgICAgIGNvbnN0IHBvaW50ZXJFdmVudCA9XG4gICAgICAvKiogQHR5cGUge1BvaW50ZXJFdmVudH0gKi9cbiAgICAgIGU7IC8vIFRyeSB0byBmaW5kIHRoZSBjdXJyZW50IHBvaW50ZXIgaW4gb25nb2luZyBwb2ludGVycyBieSBpdHMgSURcblxuICAgICAgY29uc3QgcG9pbnRlckluZGV4ID0gdGhpcy5fb25nb2luZ1BvaW50ZXJzLmZpbmRJbmRleChvbmdvaW5nUG9pbnRlciA9PiB7XG4gICAgICAgIHJldHVybiBvbmdvaW5nUG9pbnRlci5pZCA9PT0gcG9pbnRlckV2ZW50LnBvaW50ZXJJZDtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocG9pbnRlclR5cGUgPT09ICd1cCcgJiYgcG9pbnRlckluZGV4ID4gLTEpIHtcbiAgICAgICAgLy8gcmVsZWFzZSB0aGUgcG9pbnRlciAtIHJlbW92ZSBpdCBmcm9tIG9uZ29pbmdcbiAgICAgICAgdGhpcy5fb25nb2luZ1BvaW50ZXJzLnNwbGljZShwb2ludGVySW5kZXgsIDEpO1xuICAgICAgfSBlbHNlIGlmIChwb2ludGVyVHlwZSA9PT0gJ2Rvd24nICYmIHBvaW50ZXJJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgLy8gYWRkIG5ldyBwb2ludGVyXG4gICAgICAgIHRoaXMuX29uZ29pbmdQb2ludGVycy5wdXNoKHRoaXMuX2NvbnZlcnRFdmVudFBvc1RvUG9pbnQocG9pbnRlckV2ZW50LCB7XG4gICAgICAgICAgeDogMCxcbiAgICAgICAgICB5OiAwXG4gICAgICAgIH0pKTtcbiAgICAgIH0gZWxzZSBpZiAocG9pbnRlckluZGV4ID4gLTEpIHtcbiAgICAgICAgLy8gdXBkYXRlIGV4aXN0aW5nIHBvaW50ZXJcbiAgICAgICAgdGhpcy5fY29udmVydEV2ZW50UG9zVG9Qb2ludChwb2ludGVyRXZlbnQsIHRoaXMuX29uZ29pbmdQb2ludGVyc1twb2ludGVySW5kZXhdKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fbnVtQWN0aXZlUG9pbnRzID0gdGhpcy5fb25nb2luZ1BvaW50ZXJzLmxlbmd0aDsgLy8gdXBkYXRlIHBvaW50cyB0aGF0IFBob3RvU3dpcGUgdXNlc1xuICAgICAgLy8gdG8gY2FsY3VsYXRlIHBvc2l0aW9uIGFuZCBzY2FsZVxuXG4gICAgICBpZiAodGhpcy5fbnVtQWN0aXZlUG9pbnRzID4gMCkge1xuICAgICAgICBlcXVhbGl6ZVBvaW50cyh0aGlzLnAxLCB0aGlzLl9vbmdvaW5nUG9pbnRlcnNbMF0pO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fbnVtQWN0aXZlUG9pbnRzID4gMSkge1xuICAgICAgICBlcXVhbGl6ZVBvaW50cyh0aGlzLnAyLCB0aGlzLl9vbmdvaW5nUG9pbnRlcnNbMV0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0b3VjaEV2ZW50ID1cbiAgICAgIC8qKiBAdHlwZSB7VG91Y2hFdmVudH0gKi9cbiAgICAgIGU7XG4gICAgICB0aGlzLl9udW1BY3RpdmVQb2ludHMgPSAwO1xuXG4gICAgICBpZiAodG91Y2hFdmVudC50eXBlLmluZGV4T2YoJ3RvdWNoJykgPiAtMSkge1xuICAgICAgICAvLyBUb3VjaCBFdmVudFxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvVG91Y2hFdmVudFxuICAgICAgICBpZiAodG91Y2hFdmVudC50b3VjaGVzICYmIHRvdWNoRXZlbnQudG91Y2hlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5fY29udmVydEV2ZW50UG9zVG9Qb2ludCh0b3VjaEV2ZW50LnRvdWNoZXNbMF0sIHRoaXMucDEpO1xuXG4gICAgICAgICAgdGhpcy5fbnVtQWN0aXZlUG9pbnRzKys7XG5cbiAgICAgICAgICBpZiAodG91Y2hFdmVudC50b3VjaGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHRoaXMuX2NvbnZlcnRFdmVudFBvc1RvUG9pbnQodG91Y2hFdmVudC50b3VjaGVzWzFdLCB0aGlzLnAyKTtcblxuICAgICAgICAgICAgdGhpcy5fbnVtQWN0aXZlUG9pbnRzKys7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBNb3VzZSBFdmVudFxuICAgICAgICB0aGlzLl9jb252ZXJ0RXZlbnRQb3NUb1BvaW50KFxuICAgICAgICAvKiogQHR5cGUge1BvaW50ZXJFdmVudH0gKi9cbiAgICAgICAgZSwgdGhpcy5wMSk7XG5cbiAgICAgICAgaWYgKHBvaW50ZXJUeXBlID09PSAndXAnKSB7XG4gICAgICAgICAgLy8gY2xlYXIgYWxsIHBvaW50cyBvbiBtb3VzZXVwXG4gICAgICAgICAgdGhpcy5fbnVtQWN0aXZlUG9pbnRzID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9udW1BY3RpdmVQb2ludHMrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKiogdXBkYXRlIHBvaW50cyB0aGF0IHdlcmUgdXNlZCBkdXJpbmcgcHJldmlvdXMgckFGIHRpY2tcbiAgICogQHByaXZhdGVcbiAgICovXG5cblxuICBfdXBkYXRlUHJldlBvaW50cygpIHtcbiAgICBlcXVhbGl6ZVBvaW50cyh0aGlzLnByZXZQMSwgdGhpcy5wMSk7XG4gICAgZXF1YWxpemVQb2ludHModGhpcy5wcmV2UDIsIHRoaXMucDIpO1xuICB9XG4gIC8qKiB1cGRhdGUgcG9pbnRzIGF0IHRoZSBzdGFydCBvZiBnZXN0dXJlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG5cbiAgX3VwZGF0ZVN0YXJ0UG9pbnRzKCkge1xuICAgIGVxdWFsaXplUG9pbnRzKHRoaXMuc3RhcnRQMSwgdGhpcy5wMSk7XG4gICAgZXF1YWxpemVQb2ludHModGhpcy5zdGFydFAyLCB0aGlzLnAyKTtcblxuICAgIHRoaXMuX3VwZGF0ZVByZXZQb2ludHMoKTtcbiAgfVxuICAvKiogQHByaXZhdGUgKi9cblxuXG4gIF9jYWxjdWxhdGVEcmFnRGlyZWN0aW9uKCkge1xuICAgIGlmICh0aGlzLnBzd3AubWFpblNjcm9sbC5pc1NoaWZ0ZWQoKSkge1xuICAgICAgLy8gaWYgbWFpbiBzY3JvbGwgcG9zaXRpb24gaXMgc2hpZnRlZCDigJMgZGlyZWN0aW9uIGlzIGFsd2F5cyBob3Jpem9udGFsXG4gICAgICB0aGlzLmRyYWdBeGlzID0gJ3gnO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBjYWxjdWxhdGUgZGVsdGEgb2YgdGhlIGxhc3QgdG91Y2htb3ZlIHRpY2tcbiAgICAgIGNvbnN0IGRpZmYgPSBNYXRoLmFicyh0aGlzLnAxLnggLSB0aGlzLnN0YXJ0UDEueCkgLSBNYXRoLmFicyh0aGlzLnAxLnkgLSB0aGlzLnN0YXJ0UDEueSk7XG5cbiAgICAgIGlmIChkaWZmICE9PSAwKSB7XG4gICAgICAgIC8vIGNoZWNrIGlmIHBvaW50ZXIgd2FzIHNoaWZ0ZWQgaG9yaXpvbnRhbGx5IG9yIHZlcnRpY2FsbHlcbiAgICAgICAgY29uc3QgYXhpc1RvQ2hlY2sgPSBkaWZmID4gMCA/ICd4JyA6ICd5JztcblxuICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5wMVtheGlzVG9DaGVja10gLSB0aGlzLnN0YXJ0UDFbYXhpc1RvQ2hlY2tdKSA+PSBBWElTX1NXSVBFX0hZU1RFUklTSVMpIHtcbiAgICAgICAgICB0aGlzLmRyYWdBeGlzID0gYXhpc1RvQ2hlY2s7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENvbnZlcnRzIHRvdWNoLCBwb2ludGVyIG9yIG1vdXNlIGV2ZW50XG4gICAqIHRvIFBob3RvU3dpcGUgcG9pbnQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7VG91Y2ggfCBQb2ludGVyRXZlbnR9IGVcbiAgICogQHBhcmFtIHtQb2ludH0gcFxuICAgKiBAcmV0dXJucyB7UG9pbnR9XG4gICAqL1xuXG5cbiAgX2NvbnZlcnRFdmVudFBvc1RvUG9pbnQoZSwgcCkge1xuICAgIHAueCA9IGUucGFnZVggLSB0aGlzLnBzd3Aub2Zmc2V0Lng7XG4gICAgcC55ID0gZS5wYWdlWSAtIHRoaXMucHN3cC5vZmZzZXQueTtcblxuICAgIGlmICgncG9pbnRlcklkJyBpbiBlKSB7XG4gICAgICBwLmlkID0gZS5wb2ludGVySWQ7XG4gICAgfSBlbHNlIGlmIChlLmlkZW50aWZpZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcC5pZCA9IGUuaWRlbnRpZmllcjtcbiAgICB9XG5cbiAgICByZXR1cm4gcDtcbiAgfVxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IGVcbiAgICovXG5cblxuICBfb25DbGljayhlKSB7XG4gICAgLy8gRG8gbm90IGFsbG93IGNsaWNrIGV2ZW50IHRvIHBhc3MgdGhyb3VnaCBhZnRlciBkcmFnXG4gICAgaWYgKHRoaXMucHN3cC5tYWluU2Nyb2xsLmlzU2hpZnRlZCgpKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgfVxuXG59XG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuL3Bob3Rvc3dpcGUuanMnKS5kZWZhdWx0fSBQaG90b1N3aXBlICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuL3NsaWRlL3NsaWRlLmpzJykuZGVmYXVsdH0gU2xpZGUgKi9cblxuLyoqIEB0eXBlZGVmIHt7IGVsOiBIVE1MRGl2RWxlbWVudDsgc2xpZGU/OiBTbGlkZSB9fSBJdGVtSG9sZGVyICovXG5cbmNvbnN0IE1BSU5fU0NST0xMX0VORF9GUklDVElPTiA9IDAuMzU7IC8vIGNvbnN0IE1JTl9TV0lQRV9UUkFOU0lUSU9OX0RVUkFUSU9OID0gMjUwO1xuLy8gY29uc3QgTUFYX1NXSVBFX1RSQUJTSVRJT05fRFVSQVRJT04gPSA1MDA7XG4vLyBjb25zdCBERUZBVUxUX1NXSVBFX1RSQU5TSVRJT05fRFVSQVRJT04gPSAzMzM7XG5cbi8qKlxuICogSGFuZGxlcyBtb3ZlbWVudCBvZiB0aGUgbWFpbiBzY3JvbGxpbmcgY29udGFpbmVyXG4gKiAoZm9yIGV4YW1wbGUsIGl0IHJlcG9zaXRpb25zIHdoZW4gdXNlciBzd2lwZXMgbGVmdCBvciByaWdodCkuXG4gKlxuICogQWxzbyBzdG9yZXMgaXRzIHN0YXRlLlxuICovXG5cbmNsYXNzIE1haW5TY3JvbGwge1xuICAvKipcbiAgICogQHBhcmFtIHtQaG90b1N3aXBlfSBwc3dwXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwc3dwKSB7XG4gICAgdGhpcy5wc3dwID0gcHN3cDtcbiAgICB0aGlzLnggPSAwO1xuICAgIHRoaXMuc2xpZGVXaWR0aCA9IDA7XG4gICAgLyoqIEBwcml2YXRlICovXG5cbiAgICB0aGlzLl9jdXJyUG9zaXRpb25JbmRleCA9IDA7XG4gICAgLyoqIEBwcml2YXRlICovXG5cbiAgICB0aGlzLl9wcmV2UG9zaXRpb25JbmRleCA9IDA7XG4gICAgLyoqIEBwcml2YXRlICovXG5cbiAgICB0aGlzLl9jb250YWluZXJTaGlmdEluZGV4ID0gLTE7XG4gICAgLyoqIEB0eXBlIHtJdGVtSG9sZGVyW119ICovXG5cbiAgICB0aGlzLml0ZW1Ib2xkZXJzID0gW107XG4gIH1cbiAgLyoqXG4gICAqIFBvc2l0aW9uIHRoZSBzY3JvbGxlciBhbmQgc2xpZGUgY29udGFpbmVyc1xuICAgKiBhY2NvcmRpbmcgdG8gdmlld3BvcnQgc2l6ZS5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbcmVzaXplU2xpZGVzXSBXaGV0aGVyIHNsaWRlcyBjb250ZW50IHNob3VsZCByZXNpemVkXG4gICAqL1xuXG5cbiAgcmVzaXplKHJlc2l6ZVNsaWRlcykge1xuICAgIGNvbnN0IHtcbiAgICAgIHBzd3BcbiAgICB9ID0gdGhpcztcbiAgICBjb25zdCBuZXdTbGlkZVdpZHRoID0gTWF0aC5yb3VuZChwc3dwLnZpZXdwb3J0U2l6ZS54ICsgcHN3cC52aWV3cG9ydFNpemUueCAqIHBzd3Aub3B0aW9ucy5zcGFjaW5nKTsgLy8gTW9iaWxlIGJyb3dzZXJzIG1pZ2h0IHRyaWdnZXIgYSByZXNpemUgZXZlbnQgZHVyaW5nIGEgZ2VzdHVyZS5cbiAgICAvLyAoZHVlIHRvIHRvb2xiYXIgYXBwZWFyaW5nIG9yIGhpZGluZykuXG4gICAgLy8gQXZvaWQgcmUtYWRqdXN0aW5nIG1haW4gc2Nyb2xsIHBvc2l0aW9uIGlmIHdpZHRoIHdhc24ndCBjaGFuZ2VkXG5cbiAgICBjb25zdCBzbGlkZVdpZHRoQ2hhbmdlZCA9IG5ld1NsaWRlV2lkdGggIT09IHRoaXMuc2xpZGVXaWR0aDtcblxuICAgIGlmIChzbGlkZVdpZHRoQ2hhbmdlZCkge1xuICAgICAgdGhpcy5zbGlkZVdpZHRoID0gbmV3U2xpZGVXaWR0aDtcbiAgICAgIHRoaXMubW92ZVRvKHRoaXMuZ2V0Q3VyclNsaWRlWCgpKTtcbiAgICB9XG5cbiAgICB0aGlzLml0ZW1Ib2xkZXJzLmZvckVhY2goKGl0ZW1Ib2xkZXIsIGluZGV4KSA9PiB7XG4gICAgICBpZiAoc2xpZGVXaWR0aENoYW5nZWQpIHtcbiAgICAgICAgc2V0VHJhbnNmb3JtKGl0ZW1Ib2xkZXIuZWwsIChpbmRleCArIHRoaXMuX2NvbnRhaW5lclNoaWZ0SW5kZXgpICogdGhpcy5zbGlkZVdpZHRoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlc2l6ZVNsaWRlcyAmJiBpdGVtSG9sZGVyLnNsaWRlKSB7XG4gICAgICAgIGl0ZW1Ib2xkZXIuc2xpZGUucmVzaXplKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFJlc2V0IFggcG9zaXRpb24gb2YgdGhlIG1haW4gc2Nyb2xsZXIgdG8gemVyb1xuICAgKi9cblxuXG4gIHJlc2V0UG9zaXRpb24oKSB7XG4gICAgLy8gUG9zaXRpb24gb24gdGhlIG1haW4gc2Nyb2xsZXIgKG9mZnNldClcbiAgICAvLyBpdCBpcyBpbmRlcGVuZGVudCBmcm9tIHNsaWRlIGluZGV4XG4gICAgdGhpcy5fY3VyclBvc2l0aW9uSW5kZXggPSAwO1xuICAgIHRoaXMuX3ByZXZQb3NpdGlvbkluZGV4ID0gMDsgLy8gVGhpcyB3aWxsIGZvcmNlIHJlY2FsY3VsYXRpb24gb2Ygc2l6ZSBvbiBuZXh0IHJlc2l6ZSgpXG5cbiAgICB0aGlzLnNsaWRlV2lkdGggPSAwOyAvLyBfY29udGFpbmVyU2hpZnRJbmRleCp2aWV3cG9ydFNpemUgd2lsbCBnaXZlIHlvdSBhbW91bnQgb2YgdHJhbnNmb3JtIG9mIHRoZSBjdXJyZW50IHNsaWRlXG5cbiAgICB0aGlzLl9jb250YWluZXJTaGlmdEluZGV4ID0gLTE7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhbmQgYXBwZW5kIGFycmF5IG9mIHRocmVlIGl0ZW1zXG4gICAqIHRoYXQgaG9sZCBkYXRhIGFib3V0IHNsaWRlcyBpbiBET01cbiAgICovXG5cblxuICBhcHBlbmRIb2xkZXJzKCkge1xuICAgIHRoaXMuaXRlbUhvbGRlcnMgPSBbXTsgLy8gYXBwZW5kIG91ciB0aHJlZSBzbGlkZSBob2xkZXJzIC1cbiAgICAvLyBwcmV2aW91cywgY3VycmVudCwgYW5kIG5leHRcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICBjb25zdCBlbCA9IGNyZWF0ZUVsZW1lbnQoJ3Bzd3BfX2l0ZW0nLCAnZGl2JywgdGhpcy5wc3dwLmNvbnRhaW5lcik7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnZ3JvdXAnKTtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnYXJpYS1yb2xlZGVzY3JpcHRpb24nLCAnc2xpZGUnKTtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpOyAvLyBoaWRlIG5lYXJieSBpdGVtIGhvbGRlcnMgdW50aWwgaW5pdGlhbCB6b29tIGFuaW1hdGlvbiBmaW5pc2hlcyAodG8gYXZvaWQgZXh0cmEgUGFpbnRzKVxuXG4gICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gaSA9PT0gMSA/ICdibG9jaycgOiAnbm9uZSc7XG4gICAgICB0aGlzLml0ZW1Ib2xkZXJzLnB1c2goe1xuICAgICAgICBlbCAvL2luZGV4OiAtMVxuXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIG1haW4gc2Nyb2xsIGNhbiBiZSBob3Jpem9udGFsbHkgc3dpcGVkIHRvIHRoZSBuZXh0IG9yIHByZXZpb3VzIHNsaWRlLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG5cblxuICBjYW5CZVN3aXBlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5wc3dwLmdldE51bUl0ZW1zKCkgPiAxO1xuICB9XG4gIC8qKlxuICAgKiBNb3ZlIG1haW4gc2Nyb2xsIGJ5IFggYW1vdW50IG9mIHNsaWRlcy5cbiAgICogRm9yIGV4YW1wbGU6XG4gICAqICAgYC0xYCB3aWxsIG1vdmUgdG8gdGhlIHByZXZpb3VzIHNsaWRlLFxuICAgKiAgICBgMGAgd2lsbCByZXNldCB0aGUgc2Nyb2xsIHBvc2l0aW9uIG9mIHRoZSBjdXJyZW50IHNsaWRlLFxuICAgKiAgICBgM2Agd2lsbCBtb3ZlIHRocmVlIHNsaWRlcyBmb3J3YXJkXG4gICAqXG4gICAqIElmIGxvb3Agb3B0aW9uIGlzIGVuYWJsZWQgLSBpbmRleCB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgbG9vcGVkIHRvbyxcbiAgICogKGZvciBleGFtcGxlIGAtMWAgd2lsbCBtb3ZlIHRvIHRoZSBsYXN0IHNsaWRlIG9mIHRoZSBnYWxsZXJ5KS5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGRpZmZcbiAgICogQHBhcmFtIHtib29sZWFufSBbYW5pbWF0ZV1cbiAgICogQHBhcmFtIHtudW1iZXJ9IFt2ZWxvY2l0eVhdXG4gICAqIEByZXR1cm5zIHtib29sZWFufSB3aGV0aGVyIGluZGV4IHdhcyBjaGFuZ2VkIG9yIG5vdFxuICAgKi9cblxuXG4gIG1vdmVJbmRleEJ5KGRpZmYsIGFuaW1hdGUsIHZlbG9jaXR5WCkge1xuICAgIGNvbnN0IHtcbiAgICAgIHBzd3BcbiAgICB9ID0gdGhpcztcbiAgICBsZXQgbmV3SW5kZXggPSBwc3dwLnBvdGVudGlhbEluZGV4ICsgZGlmZjtcbiAgICBjb25zdCBudW1TbGlkZXMgPSBwc3dwLmdldE51bUl0ZW1zKCk7XG5cbiAgICBpZiAocHN3cC5jYW5Mb29wKCkpIHtcbiAgICAgIG5ld0luZGV4ID0gcHN3cC5nZXRMb29wZWRJbmRleChuZXdJbmRleCk7XG4gICAgICBjb25zdCBkaXN0YW5jZSA9IChkaWZmICsgbnVtU2xpZGVzKSAlIG51bVNsaWRlcztcblxuICAgICAgaWYgKGRpc3RhbmNlIDw9IG51bVNsaWRlcyAvIDIpIHtcbiAgICAgICAgLy8gZ28gZm9yd2FyZFxuICAgICAgICBkaWZmID0gZGlzdGFuY2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBnbyBiYWNrd2FyZHNcbiAgICAgICAgZGlmZiA9IGRpc3RhbmNlIC0gbnVtU2xpZGVzO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAobmV3SW5kZXggPCAwKSB7XG4gICAgICAgIG5ld0luZGV4ID0gMDtcbiAgICAgIH0gZWxzZSBpZiAobmV3SW5kZXggPj0gbnVtU2xpZGVzKSB7XG4gICAgICAgIG5ld0luZGV4ID0gbnVtU2xpZGVzIC0gMTtcbiAgICAgIH1cblxuICAgICAgZGlmZiA9IG5ld0luZGV4IC0gcHN3cC5wb3RlbnRpYWxJbmRleDtcbiAgICB9XG5cbiAgICBwc3dwLnBvdGVudGlhbEluZGV4ID0gbmV3SW5kZXg7XG4gICAgdGhpcy5fY3VyclBvc2l0aW9uSW5kZXggLT0gZGlmZjtcbiAgICBwc3dwLmFuaW1hdGlvbnMuc3RvcE1haW5TY3JvbGwoKTtcbiAgICBjb25zdCBkZXN0aW5hdGlvblggPSB0aGlzLmdldEN1cnJTbGlkZVgoKTtcblxuICAgIGlmICghYW5pbWF0ZSkge1xuICAgICAgdGhpcy5tb3ZlVG8oZGVzdGluYXRpb25YKTtcbiAgICAgIHRoaXMudXBkYXRlQ3Vyckl0ZW0oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHN3cC5hbmltYXRpb25zLnN0YXJ0U3ByaW5nKHtcbiAgICAgICAgaXNNYWluU2Nyb2xsOiB0cnVlLFxuICAgICAgICBzdGFydDogdGhpcy54LFxuICAgICAgICBlbmQ6IGRlc3RpbmF0aW9uWCxcbiAgICAgICAgdmVsb2NpdHk6IHZlbG9jaXR5WCB8fCAwLFxuICAgICAgICBuYXR1cmFsRnJlcXVlbmN5OiAzMCxcbiAgICAgICAgZGFtcGluZ1JhdGlvOiAxLFxuICAgICAgICAvLzAuNyxcbiAgICAgICAgb25VcGRhdGU6IHggPT4ge1xuICAgICAgICAgIHRoaXMubW92ZVRvKHgpO1xuICAgICAgICB9LFxuICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgICAgdGhpcy51cGRhdGVDdXJySXRlbSgpO1xuICAgICAgICAgIHBzd3AuYXBwZW5kSGVhdnkoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsZXQgY3VyckRpZmYgPSBwc3dwLnBvdGVudGlhbEluZGV4IC0gcHN3cC5jdXJySW5kZXg7XG5cbiAgICAgIGlmIChwc3dwLmNhbkxvb3AoKSkge1xuICAgICAgICBjb25zdCBjdXJyRGlzdGFuY2UgPSAoY3VyckRpZmYgKyBudW1TbGlkZXMpICUgbnVtU2xpZGVzO1xuXG4gICAgICAgIGlmIChjdXJyRGlzdGFuY2UgPD0gbnVtU2xpZGVzIC8gMikge1xuICAgICAgICAgIC8vIGdvIGZvcndhcmRcbiAgICAgICAgICBjdXJyRGlmZiA9IGN1cnJEaXN0YW5jZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBnbyBiYWNrd2FyZHNcbiAgICAgICAgICBjdXJyRGlmZiA9IGN1cnJEaXN0YW5jZSAtIG51bVNsaWRlcztcbiAgICAgICAgfVxuICAgICAgfSAvLyBGb3JjZS1hcHBlbmQgbmV3IHNsaWRlcyBkdXJpbmcgdHJhbnNpdGlvblxuICAgICAgLy8gaWYgZGlmZmVyZW5jZSBiZXR3ZWVuIHNsaWRlcyBpcyBtb3JlIHRoYW4gMVxuXG5cbiAgICAgIGlmIChNYXRoLmFicyhjdXJyRGlmZikgPiAxKSB7XG4gICAgICAgIHRoaXMudXBkYXRlQ3Vyckl0ZW0oKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gQm9vbGVhbihkaWZmKTtcbiAgfVxuICAvKipcbiAgICogWCBwb3NpdGlvbiBvZiB0aGUgbWFpbiBzY3JvbGwgZm9yIHRoZSBjdXJyZW50IHNsaWRlXG4gICAqIChpZ25vcmVzIHBvc2l0aW9uIGR1cmluZyBkcmFnZ2luZylcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG5cblxuICBnZXRDdXJyU2xpZGVYKCkge1xuICAgIHJldHVybiB0aGlzLnNsaWRlV2lkdGggKiB0aGlzLl9jdXJyUG9zaXRpb25JbmRleDtcbiAgfVxuICAvKipcbiAgICogV2hldGhlciBzY3JvbGwgcG9zaXRpb24gaXMgc2hpZnRlZC5cbiAgICogRm9yIGV4YW1wbGUsIGl0IHdpbGwgcmV0dXJuIHRydWUgaWYgdGhlIHNjcm9sbCBpcyBiZWluZyBkcmFnZ2VkIG9yIGFuaW1hdGVkLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG5cblxuICBpc1NoaWZ0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMueCAhPT0gdGhpcy5nZXRDdXJyU2xpZGVYKCk7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSBzbGlkZXMgWCBwb3NpdGlvbnMgYW5kIHNldCB0aGVpciBjb250ZW50XG4gICAqL1xuXG5cbiAgdXBkYXRlQ3Vyckl0ZW0oKSB7XG4gICAgdmFyIF90aGlzJGl0ZW1Ib2xkZXJzJDtcblxuICAgIGNvbnN0IHtcbiAgICAgIHBzd3BcbiAgICB9ID0gdGhpcztcbiAgICBjb25zdCBwb3NpdGlvbkRpZmZlcmVuY2UgPSB0aGlzLl9wcmV2UG9zaXRpb25JbmRleCAtIHRoaXMuX2N1cnJQb3NpdGlvbkluZGV4O1xuXG4gICAgaWYgKCFwb3NpdGlvbkRpZmZlcmVuY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9wcmV2UG9zaXRpb25JbmRleCA9IHRoaXMuX2N1cnJQb3NpdGlvbkluZGV4O1xuICAgIHBzd3AuY3VyckluZGV4ID0gcHN3cC5wb3RlbnRpYWxJbmRleDtcbiAgICBsZXQgZGlmZkFicyA9IE1hdGguYWJzKHBvc2l0aW9uRGlmZmVyZW5jZSk7XG4gICAgLyoqIEB0eXBlIHtJdGVtSG9sZGVyIHwgdW5kZWZpbmVkfSAqL1xuXG4gICAgbGV0IHRlbXBIb2xkZXI7XG5cbiAgICBpZiAoZGlmZkFicyA+PSAzKSB7XG4gICAgICB0aGlzLl9jb250YWluZXJTaGlmdEluZGV4ICs9IHBvc2l0aW9uRGlmZmVyZW5jZSArIChwb3NpdGlvbkRpZmZlcmVuY2UgPiAwID8gLTMgOiAzKTtcbiAgICAgIGRpZmZBYnMgPSAzOyAvLyBJZiBzbGlkZXMgYXJlIGNoYW5nZWQgYnkgMyBzY3JlZW5zIG9yIG1vcmUgLSBjbGVhbiB1cCBwcmV2aW91cyBzbGlkZXNcblxuICAgICAgdGhpcy5pdGVtSG9sZGVycy5mb3JFYWNoKGl0ZW1Ib2xkZXIgPT4ge1xuICAgICAgICB2YXIgX2l0ZW1Ib2xkZXIkc2xpZGU7XG5cbiAgICAgICAgKF9pdGVtSG9sZGVyJHNsaWRlID0gaXRlbUhvbGRlci5zbGlkZSkgPT09IG51bGwgfHwgX2l0ZW1Ib2xkZXIkc2xpZGUgPT09IHZvaWQgMCB8fCBfaXRlbUhvbGRlciRzbGlkZS5kZXN0cm95KCk7XG4gICAgICAgIGl0ZW1Ib2xkZXIuc2xpZGUgPSB1bmRlZmluZWQ7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRpZmZBYnM7IGkrKykge1xuICAgICAgaWYgKHBvc2l0aW9uRGlmZmVyZW5jZSA+IDApIHtcbiAgICAgICAgdGVtcEhvbGRlciA9IHRoaXMuaXRlbUhvbGRlcnMuc2hpZnQoKTtcblxuICAgICAgICBpZiAodGVtcEhvbGRlcikge1xuICAgICAgICAgIHRoaXMuaXRlbUhvbGRlcnNbMl0gPSB0ZW1wSG9sZGVyOyAvLyBtb3ZlIGZpcnN0IHRvIGxhc3RcblxuICAgICAgICAgIHRoaXMuX2NvbnRhaW5lclNoaWZ0SW5kZXgrKztcbiAgICAgICAgICBzZXRUcmFuc2Zvcm0odGVtcEhvbGRlci5lbCwgKHRoaXMuX2NvbnRhaW5lclNoaWZ0SW5kZXggKyAyKSAqIHRoaXMuc2xpZGVXaWR0aCk7XG4gICAgICAgICAgcHN3cC5zZXRDb250ZW50KHRlbXBIb2xkZXIsIHBzd3AuY3VyckluZGV4IC0gZGlmZkFicyArIGkgKyAyKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGVtcEhvbGRlciA9IHRoaXMuaXRlbUhvbGRlcnMucG9wKCk7XG5cbiAgICAgICAgaWYgKHRlbXBIb2xkZXIpIHtcbiAgICAgICAgICB0aGlzLml0ZW1Ib2xkZXJzLnVuc2hpZnQodGVtcEhvbGRlcik7IC8vIG1vdmUgbGFzdCB0byBmaXJzdFxuXG4gICAgICAgICAgdGhpcy5fY29udGFpbmVyU2hpZnRJbmRleC0tO1xuICAgICAgICAgIHNldFRyYW5zZm9ybSh0ZW1wSG9sZGVyLmVsLCB0aGlzLl9jb250YWluZXJTaGlmdEluZGV4ICogdGhpcy5zbGlkZVdpZHRoKTtcbiAgICAgICAgICBwc3dwLnNldENvbnRlbnQodGVtcEhvbGRlciwgcHN3cC5jdXJySW5kZXggKyBkaWZmQWJzIC0gaSAtIDIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSAvLyBSZXNldCB0cmFuc2Zyb20gZXZlcnkgNTBpc2ggbmF2aWdhdGlvbnMgaW4gb25lIGRpcmVjdGlvbi5cbiAgICAvL1xuICAgIC8vIE90aGVyd2lzZSB0cmFuc2Zvcm0gd2lsbCBrZWVwIGdyb3dpbmcgaW5kZWZpbml0ZWx5LFxuICAgIC8vIHdoaWNoIG1pZ2h0IGNhdXNlIGlzc3VlcyBhcyBicm93c2VycyBoYXZlIGEgbWF4aW11bSB0cmFuc2Zvcm0gbGltaXQuXG4gICAgLy8gSSB3YXNuJ3QgYWJsZSB0byByZWFjaCBpdCwgYnV0IGp1c3QgdG8gYmUgc2FmZS5cbiAgICAvLyBUaGlzIHNob3VsZCBub3QgY2F1c2Ugbm90aWNhYmxlIGxhZy5cblxuXG4gICAgaWYgKE1hdGguYWJzKHRoaXMuX2NvbnRhaW5lclNoaWZ0SW5kZXgpID4gNTAgJiYgIXRoaXMuaXNTaGlmdGVkKCkpIHtcbiAgICAgIHRoaXMucmVzZXRQb3NpdGlvbigpO1xuICAgICAgdGhpcy5yZXNpemUoKTtcbiAgICB9IC8vIFBhbiB0cmFuc2l0aW9uIG1pZ2h0IGJlIHJ1bm5pbmcgKGFuZCBjb25zbnRhbnRseSB1cGRhdGluZyBwYW4gcG9zaXRpb24pXG5cblxuICAgIHBzd3AuYW5pbWF0aW9ucy5zdG9wQWxsUGFuKCk7XG4gICAgdGhpcy5pdGVtSG9sZGVycy5mb3JFYWNoKChpdGVtSG9sZGVyLCBpKSA9PiB7XG4gICAgICBpZiAoaXRlbUhvbGRlci5zbGlkZSkge1xuICAgICAgICAvLyBTbGlkZSBpbiB0aGUgMm5kIGhvbGRlciBpcyBhbHdheXMgYWN0aXZlXG4gICAgICAgIGl0ZW1Ib2xkZXIuc2xpZGUuc2V0SXNBY3RpdmUoaSA9PT0gMSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcHN3cC5jdXJyU2xpZGUgPSAoX3RoaXMkaXRlbUhvbGRlcnMkID0gdGhpcy5pdGVtSG9sZGVyc1sxXSkgPT09IG51bGwgfHwgX3RoaXMkaXRlbUhvbGRlcnMkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRpdGVtSG9sZGVycyQuc2xpZGU7XG4gICAgcHN3cC5jb250ZW50TG9hZGVyLnVwZGF0ZUxhenkocG9zaXRpb25EaWZmZXJlbmNlKTtcblxuICAgIGlmIChwc3dwLmN1cnJTbGlkZSkge1xuICAgICAgcHN3cC5jdXJyU2xpZGUuYXBwbHlDdXJyZW50Wm9vbVBhbigpO1xuICAgIH1cblxuICAgIHBzd3AuZGlzcGF0Y2goJ2NoYW5nZScpO1xuICB9XG4gIC8qKlxuICAgKiBNb3ZlIHRoZSBYIHBvc2l0aW9uIG9mIHRoZSBtYWluIHNjcm9sbCBjb250YWluZXJcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHhcbiAgICogQHBhcmFtIHtib29sZWFufSBbZHJhZ2dpbmddXG4gICAqL1xuXG5cbiAgbW92ZVRvKHgsIGRyYWdnaW5nKSB7XG4gICAgaWYgKCF0aGlzLnBzd3AuY2FuTG9vcCgpICYmIGRyYWdnaW5nKSB7XG4gICAgICAvLyBBcHBseSBmcmljdGlvblxuICAgICAgbGV0IG5ld1NsaWRlSW5kZXhPZmZzZXQgPSAodGhpcy5zbGlkZVdpZHRoICogdGhpcy5fY3VyclBvc2l0aW9uSW5kZXggLSB4KSAvIHRoaXMuc2xpZGVXaWR0aDtcbiAgICAgIG5ld1NsaWRlSW5kZXhPZmZzZXQgKz0gdGhpcy5wc3dwLmN1cnJJbmRleDtcbiAgICAgIGNvbnN0IGRlbHRhID0gTWF0aC5yb3VuZCh4IC0gdGhpcy54KTtcblxuICAgICAgaWYgKG5ld1NsaWRlSW5kZXhPZmZzZXQgPCAwICYmIGRlbHRhID4gMCB8fCBuZXdTbGlkZUluZGV4T2Zmc2V0ID49IHRoaXMucHN3cC5nZXROdW1JdGVtcygpIC0gMSAmJiBkZWx0YSA8IDApIHtcbiAgICAgICAgeCA9IHRoaXMueCArIGRlbHRhICogTUFJTl9TQ1JPTExfRU5EX0ZSSUNUSU9OO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMueCA9IHg7XG5cbiAgICBpZiAodGhpcy5wc3dwLmNvbnRhaW5lcikge1xuICAgICAgc2V0VHJhbnNmb3JtKHRoaXMucHN3cC5jb250YWluZXIsIHgpO1xuICAgIH1cblxuICAgIHRoaXMucHN3cC5kaXNwYXRjaCgnbW92ZU1haW5TY3JvbGwnLCB7XG4gICAgICB4LFxuICAgICAgZHJhZ2dpbmc6IGRyYWdnaW5nICE9PSBudWxsICYmIGRyYWdnaW5nICE9PSB2b2lkIDAgPyBkcmFnZ2luZyA6IGZhbHNlXG4gICAgfSk7XG4gIH1cblxufVxuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi9waG90b3N3aXBlLmpzJykuZGVmYXVsdH0gUGhvdG9Td2lwZSAqL1xuXG4vKipcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAdHlwZWRlZiB7aW1wb3J0KCcuL3R5cGVzLmpzJykuTWV0aG9kczxUPn0gTWV0aG9kczxUPlxuICovXG5cbmNvbnN0IEtleWJvYXJkS2V5Q29kZXNNYXAgPSB7XG4gIEVzY2FwZTogMjcsXG4gIHo6IDkwLFxuICBBcnJvd0xlZnQ6IDM3LFxuICBBcnJvd1VwOiAzOCxcbiAgQXJyb3dSaWdodDogMzksXG4gIEFycm93RG93bjogNDAsXG4gIFRhYjogOVxufTtcbi8qKlxuICogQHRlbXBsYXRlIHtrZXlvZiBLZXlib2FyZEtleUNvZGVzTWFwfSBUXG4gKiBAcGFyYW0ge1R9IGtleVxuICogQHBhcmFtIHtib29sZWFufSBpc0tleVN1cHBvcnRlZFxuICogQHJldHVybnMge1QgfCBudW1iZXIgfCB1bmRlZmluZWR9XG4gKi9cblxuY29uc3QgZ2V0S2V5Ym9hcmRFdmVudEtleSA9IChrZXksIGlzS2V5U3VwcG9ydGVkKSA9PiB7XG4gIHJldHVybiBpc0tleVN1cHBvcnRlZCA/IGtleSA6IEtleWJvYXJkS2V5Q29kZXNNYXBba2V5XTtcbn07XG4vKipcbiAqIC0gTWFuYWdlcyBrZXlib2FyZCBzaG9ydGN1dHMuXG4gKiAtIEhlbHBzIHRyYXAgZm9jdXMgd2l0aGluIHBob3Rvc3dpcGUuXG4gKi9cblxuXG5jbGFzcyBLZXlib2FyZCB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge1Bob3RvU3dpcGV9IHBzd3BcbiAgICovXG4gIGNvbnN0cnVjdG9yKHBzd3ApIHtcbiAgICB0aGlzLnBzd3AgPSBwc3dwO1xuICAgIC8qKiBAcHJpdmF0ZSAqL1xuXG4gICAgdGhpcy5fd2FzRm9jdXNlZCA9IGZhbHNlO1xuICAgIHBzd3Aub24oJ2JpbmRFdmVudHMnLCAoKSA9PiB7XG4gICAgICBpZiAocHN3cC5vcHRpb25zLnRyYXBGb2N1cykge1xuICAgICAgICAvLyBEaWFsb2cgd2FzIGxpa2VseSBvcGVuZWQgYnkga2V5Ym9hcmQgaWYgaW5pdGlhbCBwb2ludCBpcyBub3QgZGVmaW5lZFxuICAgICAgICBpZiAoIXBzd3Aub3B0aW9ucy5pbml0aWFsUG9pbnRlclBvcykge1xuICAgICAgICAgIC8vIGZvY3VzIGNhdXNlcyBsYXlvdXQsXG4gICAgICAgICAgLy8gd2hpY2ggY2F1c2VzIGxhZyBkdXJpbmcgdGhlIGFuaW1hdGlvbixcbiAgICAgICAgICAvLyB0aGF0J3Mgd2h5IHdlIGRlbGF5IGl0IHVudGlsIHRoZSBvcGVuZXIgdHJhbnNpdGlvbiBlbmRzXG4gICAgICAgICAgdGhpcy5fZm9jdXNSb290KCk7XG4gICAgICAgIH1cblxuICAgICAgICBwc3dwLmV2ZW50cy5hZGQoZG9jdW1lbnQsICdmb2N1c2luJyxcbiAgICAgICAgLyoqIEB0eXBlIEV2ZW50TGlzdGVuZXIgKi9cbiAgICAgICAgdGhpcy5fb25Gb2N1c0luLmJpbmQodGhpcykpO1xuICAgICAgfVxuXG4gICAgICBwc3dwLmV2ZW50cy5hZGQoZG9jdW1lbnQsICdrZXlkb3duJyxcbiAgICAgIC8qKiBAdHlwZSBFdmVudExpc3RlbmVyICovXG4gICAgICB0aGlzLl9vbktleURvd24uYmluZCh0aGlzKSk7XG4gICAgfSk7XG4gICAgY29uc3QgbGFzdEFjdGl2ZUVsZW1lbnQgPVxuICAgIC8qKiBAdHlwZSB7SFRNTEVsZW1lbnR9ICovXG4gICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICBwc3dwLm9uKCdkZXN0cm95JywgKCkgPT4ge1xuICAgICAgaWYgKHBzd3Aub3B0aW9ucy5yZXR1cm5Gb2N1cyAmJiBsYXN0QWN0aXZlRWxlbWVudCAmJiB0aGlzLl93YXNGb2N1c2VkKSB7XG4gICAgICAgIGxhc3RBY3RpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgLyoqIEBwcml2YXRlICovXG5cblxuICBfZm9jdXNSb290KCkge1xuICAgIGlmICghdGhpcy5fd2FzRm9jdXNlZCAmJiB0aGlzLnBzd3AuZWxlbWVudCkge1xuICAgICAgdGhpcy5wc3dwLmVsZW1lbnQuZm9jdXMoKTtcbiAgICAgIHRoaXMuX3dhc0ZvY3VzZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtLZXlib2FyZEV2ZW50fSBlXG4gICAqL1xuXG5cbiAgX29uS2V5RG93bihlKSB7XG4gICAgY29uc3Qge1xuICAgICAgcHN3cFxuICAgIH0gPSB0aGlzO1xuXG4gICAgaWYgKHBzd3AuZGlzcGF0Y2goJ2tleWRvd24nLCB7XG4gICAgICBvcmlnaW5hbEV2ZW50OiBlXG4gICAgfSkuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChzcGVjaWFsS2V5VXNlZChlKSkge1xuICAgICAgLy8gZG9uJ3QgZG8gYW55dGhpbmcgaWYgc3BlY2lhbCBrZXkgcHJlc3NlZFxuICAgICAgLy8gdG8gcHJldmVudCBmcm9tIG92ZXJyaWRpbmcgZGVmYXVsdCBicm93c2VyIGFjdGlvbnNcbiAgICAgIC8vIGZvciBleGFtcGxlLCBpbiBDaHJvbWUgb24gTWFjIGNtZCthcnJvdy1sZWZ0IHJldHVybnMgdG8gcHJldmlvdXMgcGFnZVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvKiogQHR5cGUge01ldGhvZHM8UGhvdG9Td2lwZT4gfCB1bmRlZmluZWR9ICovXG5cblxuICAgIGxldCBrZXlkb3duQWN0aW9uO1xuICAgIC8qKiBAdHlwZSB7J3gnIHwgJ3knIHwgdW5kZWZpbmVkfSAqL1xuXG4gICAgbGV0IGF4aXM7XG4gICAgbGV0IGlzRm9yd2FyZCA9IGZhbHNlO1xuICAgIGNvbnN0IGlzS2V5U3VwcG9ydGVkID0gKCdrZXknIGluIGUpO1xuXG4gICAgc3dpdGNoIChpc0tleVN1cHBvcnRlZCA/IGUua2V5IDogZS5rZXlDb2RlKSB7XG4gICAgICBjYXNlIGdldEtleWJvYXJkRXZlbnRLZXkoJ0VzY2FwZScsIGlzS2V5U3VwcG9ydGVkKTpcbiAgICAgICAgaWYgKHBzd3Aub3B0aW9ucy5lc2NLZXkpIHtcbiAgICAgICAgICBrZXlkb3duQWN0aW9uID0gJ2Nsb3NlJztcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIGdldEtleWJvYXJkRXZlbnRLZXkoJ3onLCBpc0tleVN1cHBvcnRlZCk6XG4gICAgICAgIGtleWRvd25BY3Rpb24gPSAndG9nZ2xlWm9vbSc7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIGdldEtleWJvYXJkRXZlbnRLZXkoJ0Fycm93TGVmdCcsIGlzS2V5U3VwcG9ydGVkKTpcbiAgICAgICAgYXhpcyA9ICd4JztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgZ2V0S2V5Ym9hcmRFdmVudEtleSgnQXJyb3dVcCcsIGlzS2V5U3VwcG9ydGVkKTpcbiAgICAgICAgYXhpcyA9ICd5JztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgZ2V0S2V5Ym9hcmRFdmVudEtleSgnQXJyb3dSaWdodCcsIGlzS2V5U3VwcG9ydGVkKTpcbiAgICAgICAgYXhpcyA9ICd4JztcbiAgICAgICAgaXNGb3J3YXJkID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgZ2V0S2V5Ym9hcmRFdmVudEtleSgnQXJyb3dEb3duJywgaXNLZXlTdXBwb3J0ZWQpOlxuICAgICAgICBpc0ZvcndhcmQgPSB0cnVlO1xuICAgICAgICBheGlzID0gJ3knO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBnZXRLZXlib2FyZEV2ZW50S2V5KCdUYWInLCBpc0tleVN1cHBvcnRlZCk6XG4gICAgICAgIHRoaXMuX2ZvY3VzUm9vdCgpO1xuXG4gICAgICAgIGJyZWFrO1xuICAgIH0gLy8gaWYgbGVmdC9yaWdodC90b3AvYm90dG9tIGtleVxuXG5cbiAgICBpZiAoYXhpcykge1xuICAgICAgLy8gcHJldmVudCBwYWdlIHNjcm9sbFxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3Qge1xuICAgICAgICBjdXJyU2xpZGVcbiAgICAgIH0gPSBwc3dwO1xuXG4gICAgICBpZiAocHN3cC5vcHRpb25zLmFycm93S2V5cyAmJiBheGlzID09PSAneCcgJiYgcHN3cC5nZXROdW1JdGVtcygpID4gMSkge1xuICAgICAgICBrZXlkb3duQWN0aW9uID0gaXNGb3J3YXJkID8gJ25leHQnIDogJ3ByZXYnO1xuICAgICAgfSBlbHNlIGlmIChjdXJyU2xpZGUgJiYgY3VyclNsaWRlLmN1cnJab29tTGV2ZWwgPiBjdXJyU2xpZGUuem9vbUxldmVscy5maXQpIHtcbiAgICAgICAgLy8gdXAvZG93biBhcnJvdyBrZXlzIHBhbiB0aGUgaW1hZ2UgdmVydGljYWxseVxuICAgICAgICAvLyBsZWZ0L3JpZ2h0IGFycm93IGtleXMgcGFuIGhvcml6b250YWxseS5cbiAgICAgICAgLy8gVW5sZXNzIHRoZXJlIGlzIG9ubHkgb25lIGltYWdlLFxuICAgICAgICAvLyBvciBhcnJvd0tleXMgb3B0aW9uIGlzIGRpc2FibGVkXG4gICAgICAgIGN1cnJTbGlkZS5wYW5bYXhpc10gKz0gaXNGb3J3YXJkID8gLTgwIDogODA7XG4gICAgICAgIGN1cnJTbGlkZS5wYW5UbyhjdXJyU2xpZGUucGFuLngsIGN1cnJTbGlkZS5wYW4ueSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGtleWRvd25BY3Rpb24pIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gQHRzLWlnbm9yZVxuXG4gICAgICBwc3dwW2tleWRvd25BY3Rpb25dKCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBUcmFwIGZvY3VzIGluc2lkZSBwaG90b3N3aXBlXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Rm9jdXNFdmVudH0gZVxuICAgKi9cblxuXG4gIF9vbkZvY3VzSW4oZSkge1xuICAgIGNvbnN0IHtcbiAgICAgIHRlbXBsYXRlXG4gICAgfSA9IHRoaXMucHN3cDtcblxuICAgIGlmICh0ZW1wbGF0ZSAmJiBkb2N1bWVudCAhPT0gZS50YXJnZXQgJiYgdGVtcGxhdGUgIT09IGUudGFyZ2V0ICYmICF0ZW1wbGF0ZS5jb250YWlucyhcbiAgICAvKiogQHR5cGUge05vZGV9ICovXG4gICAgZS50YXJnZXQpKSB7XG4gICAgICAvLyBmb2N1cyByb290IGVsZW1lbnRcbiAgICAgIHRlbXBsYXRlLmZvY3VzKCk7XG4gICAgfVxuICB9XG5cbn1cblxuY29uc3QgREVGQVVMVF9FQVNJTkcgPSAnY3ViaWMtYmV6aWVyKC40LDAsLjIyLDEpJztcbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuL2FuaW1hdGlvbnMuanMnKS5TaGFyZWRBbmltYXRpb25Qcm9wc30gU2hhcmVkQW5pbWF0aW9uUHJvcHMgKi9cblxuLyoqIEB0eXBlZGVmIHtPYmplY3R9IERlZmF1bHRDc3NBbmltYXRpb25Qcm9wc1xuICpcbiAqIEBwcm9wIHtIVE1MRWxlbWVudH0gdGFyZ2V0XG4gKiBAcHJvcCB7bnVtYmVyfSBbZHVyYXRpb25dXG4gKiBAcHJvcCB7c3RyaW5nfSBbZWFzaW5nXVxuICogQHByb3Age3N0cmluZ30gW3RyYW5zZm9ybV1cbiAqIEBwcm9wIHtzdHJpbmd9IFtvcGFjaXR5XVxuICogKi9cblxuLyoqIEB0eXBlZGVmIHtTaGFyZWRBbmltYXRpb25Qcm9wcyAmIERlZmF1bHRDc3NBbmltYXRpb25Qcm9wc30gQ3NzQW5pbWF0aW9uUHJvcHMgKi9cblxuLyoqXG4gKiBSdW5zIENTUyB0cmFuc2l0aW9uLlxuICovXG5cbmNsYXNzIENTU0FuaW1hdGlvbiB7XG4gIC8qKlxuICAgKiBvbkNvbXBsZXRlIGNhbiBiZSB1bnByZWRpY3RhYmxlLCBiZSBjYXJlZnVsIGFib3V0IGN1cnJlbnQgc3RhdGVcbiAgICpcbiAgICogQHBhcmFtIHtDc3NBbmltYXRpb25Qcm9wc30gcHJvcHNcbiAgICovXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgdmFyIF9wcm9wcyRwcm9wO1xuXG4gICAgdGhpcy5wcm9wcyA9IHByb3BzO1xuICAgIGNvbnN0IHtcbiAgICAgIHRhcmdldCxcbiAgICAgIG9uQ29tcGxldGUsXG4gICAgICB0cmFuc2Zvcm0sXG4gICAgICBvbkZpbmlzaCA9ICgpID0+IHt9LFxuICAgICAgZHVyYXRpb24gPSAzMzMsXG4gICAgICBlYXNpbmcgPSBERUZBVUxUX0VBU0lOR1xuICAgIH0gPSBwcm9wcztcbiAgICB0aGlzLm9uRmluaXNoID0gb25GaW5pc2g7IC8vIHN1cHBvcnQgb25seSB0cmFuc2Zvcm0gYW5kIG9wYWNpdHlcblxuICAgIGNvbnN0IHByb3AgPSB0cmFuc2Zvcm0gPyAndHJhbnNmb3JtJyA6ICdvcGFjaXR5JztcbiAgICBjb25zdCBwcm9wVmFsdWUgPSAoX3Byb3BzJHByb3AgPSBwcm9wc1twcm9wXSkgIT09IG51bGwgJiYgX3Byb3BzJHByb3AgIT09IHZvaWQgMCA/IF9wcm9wcyRwcm9wIDogJyc7XG4gICAgLyoqIEBwcml2YXRlICovXG5cbiAgICB0aGlzLl90YXJnZXQgPSB0YXJnZXQ7XG4gICAgLyoqIEBwcml2YXRlICovXG5cbiAgICB0aGlzLl9vbkNvbXBsZXRlID0gb25Db21wbGV0ZTtcbiAgICAvKiogQHByaXZhdGUgKi9cblxuICAgIHRoaXMuX2ZpbmlzaGVkID0gZmFsc2U7XG4gICAgLyoqIEBwcml2YXRlICovXG5cbiAgICB0aGlzLl9vblRyYW5zaXRpb25FbmQgPSB0aGlzLl9vblRyYW5zaXRpb25FbmQuYmluZCh0aGlzKTsgLy8gVXNpbmcgdGltZW91dCBoYWNrIHRvIG1ha2Ugc3VyZSB0aGF0IGFuaW1hdGlvblxuICAgIC8vIHN0YXJ0cyBldmVuIGlmIHRoZSBhbmltYXRlZCBwcm9wZXJ0eSB3YXMgY2hhbmdlZCByZWNlbnRseSxcbiAgICAvLyBvdGhlcndpc2UgdHJhbnNpdGlvbmVuZCBtaWdodCBub3QgZmlyZSBvciB0cmFuc2l0aW9uIHdvbid0IHN0YXJ0LlxuICAgIC8vIGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3MtdHJhbnNpdGlvbnMvI3N0YXJ0aW5nXG4gICAgLy9cbiAgICAvLyDCr1xcXyjjg4QpXy/Cr1xuXG4gICAgLyoqIEBwcml2YXRlICovXG5cbiAgICB0aGlzLl9oZWxwZXJUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzZXRUcmFuc2l0aW9uU3R5bGUodGFyZ2V0LCBwcm9wLCBkdXJhdGlvbiwgZWFzaW5nKTtcbiAgICAgIHRoaXMuX2hlbHBlclRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCB0aGlzLl9vblRyYW5zaXRpb25FbmQsIGZhbHNlKTtcbiAgICAgICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25jYW5jZWwnLCB0aGlzLl9vblRyYW5zaXRpb25FbmQsIGZhbHNlKTsgLy8gU2FmYXJpIG9jY2FzaW9uYWxseSBkb2VzIG5vdCBlbWl0IHRyYW5zaXRpb25lbmQgZXZlbnRcbiAgICAgICAgLy8gaWYgZWxlbWVudCBwcm9wZXJ0eSB3YXMgbW9kaWZpZWQgZHVyaW5nIHRoZSB0cmFuc2l0aW9uLFxuICAgICAgICAvLyB3aGljaCBtYXkgYmUgY2F1c2VkIGJ5IHJlc2l6ZSBvciB0aGlyZCBwYXJ0eSBjb21wb25lbnQsXG4gICAgICAgIC8vIHVzaW5nIHRpbWVvdXQgYXMgYSBzYWZldHkgZmFsbGJhY2tcblxuICAgICAgICB0aGlzLl9oZWxwZXJUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5fZmluYWxpemVBbmltYXRpb24oKTtcbiAgICAgICAgfSwgZHVyYXRpb24gKyA1MDApO1xuICAgICAgICB0YXJnZXQuc3R5bGVbcHJvcF0gPSBwcm9wVmFsdWU7XG4gICAgICB9LCAzMCk7IC8vIERvIG5vdCByZWR1Y2UgdGhpcyBudW1iZXJcbiAgICB9LCAwKTtcbiAgfVxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtUcmFuc2l0aW9uRXZlbnR9IGVcbiAgICovXG5cblxuICBfb25UcmFuc2l0aW9uRW5kKGUpIHtcbiAgICBpZiAoZS50YXJnZXQgPT09IHRoaXMuX3RhcmdldCkge1xuICAgICAgdGhpcy5fZmluYWxpemVBbmltYXRpb24oKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG5cbiAgX2ZpbmFsaXplQW5pbWF0aW9uKCkge1xuICAgIGlmICghdGhpcy5fZmluaXNoZWQpIHtcbiAgICAgIHRoaXMuX2ZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMub25GaW5pc2goKTtcblxuICAgICAgaWYgKHRoaXMuX29uQ29tcGxldGUpIHtcbiAgICAgICAgdGhpcy5fb25Db21wbGV0ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfSAvLyBEZXN0cm95IGlzIGNhbGxlZCBhdXRvbWF0aWNhbGx5IG9uRmluaXNoXG5cblxuICBkZXN0cm95KCkge1xuICAgIGlmICh0aGlzLl9oZWxwZXJUaW1lb3V0KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5faGVscGVyVGltZW91dCk7XG4gICAgfVxuXG4gICAgcmVtb3ZlVHJhbnNpdGlvblN0eWxlKHRoaXMuX3RhcmdldCk7XG5cbiAgICB0aGlzLl90YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIHRoaXMuX29uVHJhbnNpdGlvbkVuZCwgZmFsc2UpO1xuXG4gICAgdGhpcy5fdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25jYW5jZWwnLCB0aGlzLl9vblRyYW5zaXRpb25FbmQsIGZhbHNlKTtcblxuICAgIGlmICghdGhpcy5fZmluaXNoZWQpIHtcbiAgICAgIHRoaXMuX2ZpbmFsaXplQW5pbWF0aW9uKCk7XG4gICAgfVxuICB9XG5cbn1cblxuY29uc3QgREVGQVVMVF9OQVRVUkFMX0ZSRVFVRU5DWSA9IDEyO1xuY29uc3QgREVGQVVMVF9EQU1QSU5HX1JBVElPID0gMC43NTtcbi8qKlxuICogU3ByaW5nIGVhc2luZyBoZWxwZXJcbiAqL1xuXG5jbGFzcyBTcHJpbmdFYXNlciB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5pdGlhbFZlbG9jaXR5IEluaXRpYWwgdmVsb2NpdHksIHB4IHBlciBtcy5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtkYW1waW5nUmF0aW9dXG4gICAqIERldGVybWluZXMgaG93IGJvdW5jeSBhbmltYXRpb24gd2lsbCBiZS5cbiAgICogRnJvbSAwIHRvIDEsIDAgLSBhbHdheXMgb3ZlcnNob290LCAxIC0gZG8gbm90IG92ZXJzaG9vdC5cbiAgICogXCJvdmVyc2hvb3RcIiByZWZlcnMgdG8gcGFydCBvZiBhbmltYXRpb24gdGhhdFxuICAgKiBnb2VzIGJleW9uZCB0aGUgZmluYWwgdmFsdWUuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbbmF0dXJhbEZyZXF1ZW5jeV1cbiAgICogRGV0ZXJtaW5lcyBob3cgZmFzdCBhbmltYXRpb24gd2lsbCBzbG93IGRvd24uXG4gICAqIFRoZSBoaWdoZXIgdmFsdWUgLSB0aGUgc3RpZmZlciB0aGUgdHJhbnNpdGlvbiB3aWxsIGJlLFxuICAgKiBhbmQgdGhlIGZhc3RlciBpdCB3aWxsIHNsb3cgZG93bi5cbiAgICogUmVjb21tZW5kZWQgdmFsdWUgZnJvbSAxMCB0byA1MFxuICAgKi9cbiAgY29uc3RydWN0b3IoaW5pdGlhbFZlbG9jaXR5LCBkYW1waW5nUmF0aW8sIG5hdHVyYWxGcmVxdWVuY3kpIHtcbiAgICB0aGlzLnZlbG9jaXR5ID0gaW5pdGlhbFZlbG9jaXR5ICogMTAwMDsgLy8gY29udmVydCB0byBcInBpeGVscyBwZXIgc2Vjb25kXCJcbiAgICAvLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9EYW1waW5nX3JhdGlvXG5cbiAgICB0aGlzLl9kYW1waW5nUmF0aW8gPSBkYW1waW5nUmF0aW8gfHwgREVGQVVMVF9EQU1QSU5HX1JBVElPOyAvLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9OYXR1cmFsX2ZyZXF1ZW5jeVxuXG4gICAgdGhpcy5fbmF0dXJhbEZyZXF1ZW5jeSA9IG5hdHVyYWxGcmVxdWVuY3kgfHwgREVGQVVMVF9OQVRVUkFMX0ZSRVFVRU5DWTtcbiAgICB0aGlzLl9kYW1wZWRGcmVxdWVuY3kgPSB0aGlzLl9uYXR1cmFsRnJlcXVlbmN5O1xuXG4gICAgaWYgKHRoaXMuX2RhbXBpbmdSYXRpbyA8IDEpIHtcbiAgICAgIHRoaXMuX2RhbXBlZEZyZXF1ZW5jeSAqPSBNYXRoLnNxcnQoMSAtIHRoaXMuX2RhbXBpbmdSYXRpbyAqIHRoaXMuX2RhbXBpbmdSYXRpbyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGFQb3NpdGlvbiBEaWZmZXJlbmNlIGJldHdlZW4gY3VycmVudCBhbmQgZW5kIHBvc2l0aW9uIG9mIHRoZSBhbmltYXRpb25cbiAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhVGltZSBGcmFtZSBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHNcbiAgICpcbiAgICogQHJldHVybnMge251bWJlcn0gRGlzcGxhY2VtZW50LCByZWxhdGl2ZSB0byB0aGUgZW5kIHBvc2l0aW9uLlxuICAgKi9cblxuXG4gIGVhc2VGcmFtZShkZWx0YVBvc2l0aW9uLCBkZWx0YVRpbWUpIHtcbiAgICAvLyBJbnNwaXJlZCBieSBBcHBsZSBXZWJraXQgYW5kIEFuZHJvaWQgc3ByaW5nIGZ1bmN0aW9uIGltcGxlbWVudGF0aW9uXG4gICAgLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvT3NjaWxsYXRpb25cbiAgICAvLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9EYW1waW5nX3JhdGlvXG4gICAgLy8gd2UgaWdub3JlIG1hc3MgKGFzc3VtZSB0aGF0IGl0J3MgMWtnKVxuICAgIGxldCBkaXNwbGFjZW1lbnQgPSAwO1xuICAgIGxldCBjb2VmZjtcbiAgICBkZWx0YVRpbWUgLz0gMTAwMDtcbiAgICBjb25zdCBuYXR1cmFsRHVtcGluZ1BvdyA9IE1hdGguRSAqKiAoLXRoaXMuX2RhbXBpbmdSYXRpbyAqIHRoaXMuX25hdHVyYWxGcmVxdWVuY3kgKiBkZWx0YVRpbWUpO1xuXG4gICAgaWYgKHRoaXMuX2RhbXBpbmdSYXRpbyA9PT0gMSkge1xuICAgICAgY29lZmYgPSB0aGlzLnZlbG9jaXR5ICsgdGhpcy5fbmF0dXJhbEZyZXF1ZW5jeSAqIGRlbHRhUG9zaXRpb247XG4gICAgICBkaXNwbGFjZW1lbnQgPSAoZGVsdGFQb3NpdGlvbiArIGNvZWZmICogZGVsdGFUaW1lKSAqIG5hdHVyYWxEdW1waW5nUG93O1xuICAgICAgdGhpcy52ZWxvY2l0eSA9IGRpc3BsYWNlbWVudCAqIC10aGlzLl9uYXR1cmFsRnJlcXVlbmN5ICsgY29lZmYgKiBuYXR1cmFsRHVtcGluZ1BvdztcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2RhbXBpbmdSYXRpbyA8IDEpIHtcbiAgICAgIGNvZWZmID0gMSAvIHRoaXMuX2RhbXBlZEZyZXF1ZW5jeSAqICh0aGlzLl9kYW1waW5nUmF0aW8gKiB0aGlzLl9uYXR1cmFsRnJlcXVlbmN5ICogZGVsdGFQb3NpdGlvbiArIHRoaXMudmVsb2NpdHkpO1xuICAgICAgY29uc3QgZHVtcGVkRkNvcyA9IE1hdGguY29zKHRoaXMuX2RhbXBlZEZyZXF1ZW5jeSAqIGRlbHRhVGltZSk7XG4gICAgICBjb25zdCBkdW1wZWRGU2luID0gTWF0aC5zaW4odGhpcy5fZGFtcGVkRnJlcXVlbmN5ICogZGVsdGFUaW1lKTtcbiAgICAgIGRpc3BsYWNlbWVudCA9IG5hdHVyYWxEdW1waW5nUG93ICogKGRlbHRhUG9zaXRpb24gKiBkdW1wZWRGQ29zICsgY29lZmYgKiBkdW1wZWRGU2luKTtcbiAgICAgIHRoaXMudmVsb2NpdHkgPSBkaXNwbGFjZW1lbnQgKiAtdGhpcy5fbmF0dXJhbEZyZXF1ZW5jeSAqIHRoaXMuX2RhbXBpbmdSYXRpbyArIG5hdHVyYWxEdW1waW5nUG93ICogKC10aGlzLl9kYW1wZWRGcmVxdWVuY3kgKiBkZWx0YVBvc2l0aW9uICogZHVtcGVkRlNpbiArIHRoaXMuX2RhbXBlZEZyZXF1ZW5jeSAqIGNvZWZmICogZHVtcGVkRkNvcyk7XG4gICAgfSAvLyBPdmVyZGFtcGVkICg+MSkgZGFtcGluZyByYXRpbyBpcyBub3Qgc3VwcG9ydGVkXG5cblxuICAgIHJldHVybiBkaXNwbGFjZW1lbnQ7XG4gIH1cblxufVxuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi9hbmltYXRpb25zLmpzJykuU2hhcmVkQW5pbWF0aW9uUHJvcHN9IFNoYXJlZEFuaW1hdGlvblByb3BzICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRGVmYXVsdFNwcmluZ0FuaW1hdGlvblByb3BzXG4gKlxuICogQHByb3Age251bWJlcn0gc3RhcnRcbiAqIEBwcm9wIHtudW1iZXJ9IGVuZFxuICogQHByb3Age251bWJlcn0gdmVsb2NpdHlcbiAqIEBwcm9wIHtudW1iZXJ9IFtkYW1waW5nUmF0aW9dXG4gKiBAcHJvcCB7bnVtYmVyfSBbbmF0dXJhbEZyZXF1ZW5jeV1cbiAqIEBwcm9wIHsoZW5kOiBudW1iZXIpID0+IHZvaWR9IG9uVXBkYXRlXG4gKi9cblxuLyoqIEB0eXBlZGVmIHtTaGFyZWRBbmltYXRpb25Qcm9wcyAmIERlZmF1bHRTcHJpbmdBbmltYXRpb25Qcm9wc30gU3ByaW5nQW5pbWF0aW9uUHJvcHMgKi9cblxuY2xhc3MgU3ByaW5nQW5pbWF0aW9uIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7U3ByaW5nQW5pbWF0aW9uUHJvcHN9IHByb3BzXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHRoaXMucHJvcHMgPSBwcm9wcztcbiAgICB0aGlzLl9yYWYgPSAwO1xuICAgIGNvbnN0IHtcbiAgICAgIHN0YXJ0LFxuICAgICAgZW5kLFxuICAgICAgdmVsb2NpdHksXG4gICAgICBvblVwZGF0ZSxcbiAgICAgIG9uQ29tcGxldGUsXG4gICAgICBvbkZpbmlzaCA9ICgpID0+IHt9LFxuICAgICAgZGFtcGluZ1JhdGlvLFxuICAgICAgbmF0dXJhbEZyZXF1ZW5jeVxuICAgIH0gPSBwcm9wcztcbiAgICB0aGlzLm9uRmluaXNoID0gb25GaW5pc2g7XG4gICAgY29uc3QgZWFzZXIgPSBuZXcgU3ByaW5nRWFzZXIodmVsb2NpdHksIGRhbXBpbmdSYXRpbywgbmF0dXJhbEZyZXF1ZW5jeSk7XG4gICAgbGV0IHByZXZUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBsZXQgZGVsdGFQb3NpdGlvbiA9IHN0YXJ0IC0gZW5kO1xuXG4gICAgY29uc3QgYW5pbWF0aW9uTG9vcCA9ICgpID0+IHtcbiAgICAgIGlmICh0aGlzLl9yYWYpIHtcbiAgICAgICAgZGVsdGFQb3NpdGlvbiA9IGVhc2VyLmVhc2VGcmFtZShkZWx0YVBvc2l0aW9uLCBEYXRlLm5vdygpIC0gcHJldlRpbWUpOyAvLyBTdG9wIHRoZSBhbmltYXRpb24gaWYgdmVsb2NpdHkgaXMgbG93IGFuZCBwb3NpdGlvbiBpcyBjbG9zZSB0byBlbmRcblxuICAgICAgICBpZiAoTWF0aC5hYnMoZGVsdGFQb3NpdGlvbikgPCAxICYmIE1hdGguYWJzKGVhc2VyLnZlbG9jaXR5KSA8IDUwKSB7XG4gICAgICAgICAgLy8gRmluYWxpemUgdGhlIGFuaW1hdGlvblxuICAgICAgICAgIG9uVXBkYXRlKGVuZCk7XG5cbiAgICAgICAgICBpZiAob25Db21wbGV0ZSkge1xuICAgICAgICAgICAgb25Db21wbGV0ZSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMub25GaW5pc2goKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcmV2VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgb25VcGRhdGUoZGVsdGFQb3NpdGlvbiArIGVuZCk7XG4gICAgICAgICAgdGhpcy5fcmFmID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGlvbkxvb3ApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuX3JhZiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRpb25Mb29wKTtcbiAgfSAvLyBEZXN0cm95IGlzIGNhbGxlZCBhdXRvbWF0aWNhbGx5IG9uRmluaXNoXG5cblxuICBkZXN0cm95KCkge1xuICAgIGlmICh0aGlzLl9yYWYgPj0gMCkge1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5fcmFmKTtcbiAgICB9XG5cbiAgICB0aGlzLl9yYWYgPSAwO1xuICB9XG5cbn1cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4vY3NzLWFuaW1hdGlvbi5qcycpLkNzc0FuaW1hdGlvblByb3BzfSBDc3NBbmltYXRpb25Qcm9wcyAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi9zcHJpbmctYW5pbWF0aW9uLmpzJykuU3ByaW5nQW5pbWF0aW9uUHJvcHN9IFNwcmluZ0FuaW1hdGlvblByb3BzICovXG5cbi8qKiBAdHlwZWRlZiB7T2JqZWN0fSBTaGFyZWRBbmltYXRpb25Qcm9wc1xuICogQHByb3Age3N0cmluZ30gW25hbWVdXG4gKiBAcHJvcCB7Ym9vbGVhbn0gW2lzUGFuXVxuICogQHByb3Age2Jvb2xlYW59IFtpc01haW5TY3JvbGxdXG4gKiBAcHJvcCB7Vm9pZEZ1bmN0aW9ufSBbb25Db21wbGV0ZV1cbiAqIEBwcm9wIHtWb2lkRnVuY3Rpb259IFtvbkZpbmlzaF1cbiAqL1xuXG4vKiogQHR5cGVkZWYge1NwcmluZ0FuaW1hdGlvbiB8IENTU0FuaW1hdGlvbn0gQW5pbWF0aW9uICovXG5cbi8qKiBAdHlwZWRlZiB7U3ByaW5nQW5pbWF0aW9uUHJvcHMgfCBDc3NBbmltYXRpb25Qcm9wc30gQW5pbWF0aW9uUHJvcHMgKi9cblxuLyoqXG4gKiBNYW5hZ2VzIGFuaW1hdGlvbnNcbiAqL1xuXG5jbGFzcyBBbmltYXRpb25zIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLyoqIEB0eXBlIHtBbmltYXRpb25bXX0gKi9cbiAgICB0aGlzLmFjdGl2ZUFuaW1hdGlvbnMgPSBbXTtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHtTcHJpbmdBbmltYXRpb25Qcm9wc30gcHJvcHNcbiAgICovXG5cblxuICBzdGFydFNwcmluZyhwcm9wcykge1xuICAgIHRoaXMuX3N0YXJ0KHByb3BzLCB0cnVlKTtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHtDc3NBbmltYXRpb25Qcm9wc30gcHJvcHNcbiAgICovXG5cblxuICBzdGFydFRyYW5zaXRpb24ocHJvcHMpIHtcbiAgICB0aGlzLl9zdGFydChwcm9wcyk7XG4gIH1cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QW5pbWF0aW9uUHJvcHN9IHByb3BzXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzU3ByaW5nXVxuICAgKiBAcmV0dXJucyB7QW5pbWF0aW9ufVxuICAgKi9cblxuXG4gIF9zdGFydChwcm9wcywgaXNTcHJpbmcpIHtcbiAgICBjb25zdCBhbmltYXRpb24gPSBpc1NwcmluZyA/IG5ldyBTcHJpbmdBbmltYXRpb24oXG4gICAgLyoqIEB0eXBlIFNwcmluZ0FuaW1hdGlvblByb3BzICovXG4gICAgcHJvcHMpIDogbmV3IENTU0FuaW1hdGlvbihcbiAgICAvKiogQHR5cGUgQ3NzQW5pbWF0aW9uUHJvcHMgKi9cbiAgICBwcm9wcyk7XG4gICAgdGhpcy5hY3RpdmVBbmltYXRpb25zLnB1c2goYW5pbWF0aW9uKTtcblxuICAgIGFuaW1hdGlvbi5vbkZpbmlzaCA9ICgpID0+IHRoaXMuc3RvcChhbmltYXRpb24pO1xuXG4gICAgcmV0dXJuIGFuaW1hdGlvbjtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHtBbmltYXRpb259IGFuaW1hdGlvblxuICAgKi9cblxuXG4gIHN0b3AoYW5pbWF0aW9uKSB7XG4gICAgYW5pbWF0aW9uLmRlc3Ryb3koKTtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuYWN0aXZlQW5pbWF0aW9ucy5pbmRleE9mKGFuaW1hdGlvbik7XG5cbiAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgdGhpcy5hY3RpdmVBbmltYXRpb25zLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICB9XG5cbiAgc3RvcEFsbCgpIHtcbiAgICAvLyBfc3RvcEFsbEFuaW1hdGlvbnNcbiAgICB0aGlzLmFjdGl2ZUFuaW1hdGlvbnMuZm9yRWFjaChhbmltYXRpb24gPT4ge1xuICAgICAgYW5pbWF0aW9uLmRlc3Ryb3koKTtcbiAgICB9KTtcbiAgICB0aGlzLmFjdGl2ZUFuaW1hdGlvbnMgPSBbXTtcbiAgfVxuICAvKipcbiAgICogU3RvcCBhbGwgcGFuIG9yIHpvb20gdHJhbnNpdGlvbnNcbiAgICovXG5cblxuICBzdG9wQWxsUGFuKCkge1xuICAgIHRoaXMuYWN0aXZlQW5pbWF0aW9ucyA9IHRoaXMuYWN0aXZlQW5pbWF0aW9ucy5maWx0ZXIoYW5pbWF0aW9uID0+IHtcbiAgICAgIGlmIChhbmltYXRpb24ucHJvcHMuaXNQYW4pIHtcbiAgICAgICAgYW5pbWF0aW9uLmRlc3Ryb3koKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbiAgfVxuXG4gIHN0b3BNYWluU2Nyb2xsKCkge1xuICAgIHRoaXMuYWN0aXZlQW5pbWF0aW9ucyA9IHRoaXMuYWN0aXZlQW5pbWF0aW9ucy5maWx0ZXIoYW5pbWF0aW9uID0+IHtcbiAgICAgIGlmIChhbmltYXRpb24ucHJvcHMuaXNNYWluU2Nyb2xsKSB7XG4gICAgICAgIGFuaW1hdGlvbi5kZXN0cm95KCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiBtYWluIHNjcm9sbCB0cmFuc2l0aW9uIGlzIHJ1bm5pbmdcbiAgICovXG4gIC8vIGlzTWFpblNjcm9sbFJ1bm5pbmcoKSB7XG4gIC8vICAgcmV0dXJuIHRoaXMuYWN0aXZlQW5pbWF0aW9ucy5zb21lKChhbmltYXRpb24pID0+IHtcbiAgLy8gICAgIHJldHVybiBhbmltYXRpb24ucHJvcHMuaXNNYWluU2Nyb2xsO1xuICAvLyAgIH0pO1xuICAvLyB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiBhbnkgcGFuIG9yIHpvb20gdHJhbnNpdGlvbiBpcyBydW5uaW5nXG4gICAqL1xuXG5cbiAgaXNQYW5SdW5uaW5nKCkge1xuICAgIHJldHVybiB0aGlzLmFjdGl2ZUFuaW1hdGlvbnMuc29tZShhbmltYXRpb24gPT4ge1xuICAgICAgcmV0dXJuIGFuaW1hdGlvbi5wcm9wcy5pc1BhbjtcbiAgICB9KTtcbiAgfVxuXG59XG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuL3Bob3Rvc3dpcGUuanMnKS5kZWZhdWx0fSBQaG90b1N3aXBlICovXG5cbi8qKlxuICogSGFuZGxlcyBzY3JvbGwgd2hlZWwuXG4gKiBDYW4gcGFuIGFuZCB6b29tIGN1cnJlbnQgc2xpZGUgaW1hZ2UuXG4gKi9cbmNsYXNzIFNjcm9sbFdoZWVsIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7UGhvdG9Td2lwZX0gcHN3cFxuICAgKi9cbiAgY29uc3RydWN0b3IocHN3cCkge1xuICAgIHRoaXMucHN3cCA9IHBzd3A7XG4gICAgcHN3cC5ldmVudHMuYWRkKHBzd3AuZWxlbWVudCwgJ3doZWVsJyxcbiAgICAvKiogQHR5cGUgRXZlbnRMaXN0ZW5lciAqL1xuICAgIHRoaXMuX29uV2hlZWwuYmluZCh0aGlzKSk7XG4gIH1cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7V2hlZWxFdmVudH0gZVxuICAgKi9cblxuXG4gIF9vbldoZWVsKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3Qge1xuICAgICAgY3VyclNsaWRlXG4gICAgfSA9IHRoaXMucHN3cDtcbiAgICBsZXQge1xuICAgICAgZGVsdGFYLFxuICAgICAgZGVsdGFZXG4gICAgfSA9IGU7XG5cbiAgICBpZiAoIWN1cnJTbGlkZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBzd3AuZGlzcGF0Y2goJ3doZWVsJywge1xuICAgICAgb3JpZ2luYWxFdmVudDogZVxuICAgIH0pLmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZS5jdHJsS2V5IHx8IHRoaXMucHN3cC5vcHRpb25zLndoZWVsVG9ab29tKSB7XG4gICAgICAvLyB6b29tXG4gICAgICBpZiAoY3VyclNsaWRlLmlzWm9vbWFibGUoKSkge1xuICAgICAgICBsZXQgem9vbUZhY3RvciA9IC1kZWx0YVk7XG5cbiAgICAgICAgaWYgKGUuZGVsdGFNb2RlID09PSAxXG4gICAgICAgIC8qIERPTV9ERUxUQV9MSU5FICovXG4gICAgICAgICkge1xuICAgICAgICAgIHpvb21GYWN0b3IgKj0gMC4wNTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB6b29tRmFjdG9yICo9IGUuZGVsdGFNb2RlID8gMSA6IDAuMDAyO1xuICAgICAgICB9XG5cbiAgICAgICAgem9vbUZhY3RvciA9IDIgKiogem9vbUZhY3RvcjtcbiAgICAgICAgY29uc3QgZGVzdFpvb21MZXZlbCA9IGN1cnJTbGlkZS5jdXJyWm9vbUxldmVsICogem9vbUZhY3RvcjtcbiAgICAgICAgY3VyclNsaWRlLnpvb21UbyhkZXN0Wm9vbUxldmVsLCB7XG4gICAgICAgICAgeDogZS5jbGllbnRYLFxuICAgICAgICAgIHk6IGUuY2xpZW50WVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gcGFuXG4gICAgICBpZiAoY3VyclNsaWRlLmlzUGFubmFibGUoKSkge1xuICAgICAgICBpZiAoZS5kZWx0YU1vZGUgPT09IDFcbiAgICAgICAgLyogRE9NX0RFTFRBX0xJTkUgKi9cbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gMTggLSBhdmVyYWdlIGxpbmUgaGVpZ2h0XG4gICAgICAgICAgZGVsdGFYICo9IDE4O1xuICAgICAgICAgIGRlbHRhWSAqPSAxODtcbiAgICAgICAgfVxuXG4gICAgICAgIGN1cnJTbGlkZS5wYW5UbyhjdXJyU2xpZGUucGFuLnggLSBkZWx0YVgsIGN1cnJTbGlkZS5wYW4ueSAtIGRlbHRhWSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbn1cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4uL3Bob3Rvc3dpcGUuanMnKS5kZWZhdWx0fSBQaG90b1N3aXBlICovXG5cbi8qKlxuICogQHRlbXBsYXRlIFRcbiAqIEB0eXBlZGVmIHtpbXBvcnQoJy4uL3R5cGVzLmpzJykuTWV0aG9kczxUPn0gTWV0aG9kczxUPlxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gVUlFbGVtZW50TWFya3VwUHJvcHNcbiAqIEBwcm9wIHtib29sZWFufSBbaXNDdXN0b21TVkddXG4gKiBAcHJvcCB7c3RyaW5nfSBpbm5lclxuICogQHByb3Age3N0cmluZ30gW291dGxpbmVJRF1cbiAqIEBwcm9wIHtudW1iZXIgfCBzdHJpbmd9IFtzaXplXVxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gVUlFbGVtZW50RGF0YVxuICogQHByb3Age0RlZmF1bHRVSUVsZW1lbnRzIHwgc3RyaW5nfSBbbmFtZV1cbiAqIEBwcm9wIHtzdHJpbmd9IFtjbGFzc05hbWVdXG4gKiBAcHJvcCB7VUlFbGVtZW50TWFya3VwfSBbaHRtbF1cbiAqIEBwcm9wIHtib29sZWFufSBbaXNCdXR0b25dXG4gKiBAcHJvcCB7a2V5b2YgSFRNTEVsZW1lbnRUYWdOYW1lTWFwfSBbdGFnTmFtZV1cbiAqIEBwcm9wIHtzdHJpbmd9IFt0aXRsZV1cbiAqIEBwcm9wIHtzdHJpbmd9IFthcmlhTGFiZWxdXG4gKiBAcHJvcCB7KGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBwc3dwOiBQaG90b1N3aXBlKSA9PiB2b2lkfSBbb25Jbml0XVxuICogQHByb3Age01ldGhvZHM8UGhvdG9Td2lwZT4gfCAoKGU6IE1vdXNlRXZlbnQsIGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBwc3dwOiBQaG90b1N3aXBlKSA9PiB2b2lkKX0gW29uQ2xpY2tdXG4gKiBAcHJvcCB7J2JhcicgfCAnd3JhcHBlcicgfCAncm9vdCd9IFthcHBlbmRUb11cbiAqIEBwcm9wIHtudW1iZXJ9IFtvcmRlcl1cbiAqL1xuXG4vKiogQHR5cGVkZWYgeydhcnJvd1ByZXYnIHwgJ2Fycm93TmV4dCcgfCAnY2xvc2UnIHwgJ3pvb20nIHwgJ2NvdW50ZXInfSBEZWZhdWx0VUlFbGVtZW50cyAqL1xuXG4vKiogQHR5cGVkZWYge3N0cmluZyB8IFVJRWxlbWVudE1hcmt1cFByb3BzfSBVSUVsZW1lbnRNYXJrdXAgKi9cblxuLyoqXG4gKiBAcGFyYW0ge1VJRWxlbWVudE1hcmt1cH0gW2h0bWxEYXRhXVxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBhZGRFbGVtZW50SFRNTChodG1sRGF0YSkge1xuICBpZiAodHlwZW9mIGh0bWxEYXRhID09PSAnc3RyaW5nJykge1xuICAgIC8vIEFsbG93IGRldmVsb3BlcnMgdG8gcHJvdmlkZSBmdWxsIHN2ZyxcbiAgICAvLyBGb3IgZXhhbXBsZTpcbiAgICAvLyA8c3ZnIHZpZXdCb3g9XCIwIDAgMzIgMzJcIiB3aWR0aD1cIjMyXCIgaGVpZ2h0PVwiMzJcIiBhcmlhLWhpZGRlbj1cInRydWVcIiBjbGFzcz1cInBzd3BfX2ljblwiPlxuICAgIC8vICAgPHBhdGggZD1cIi4uLlwiIC8+XG4gICAgLy8gICA8Y2lyY2xlIC4uLiAvPlxuICAgIC8vIDwvc3ZnPlxuICAgIC8vIENhbiBhbHNvIGJlIGFueSBIVE1MIHN0cmluZy5cbiAgICByZXR1cm4gaHRtbERhdGE7XG4gIH1cblxuICBpZiAoIWh0bWxEYXRhIHx8ICFodG1sRGF0YS5pc0N1c3RvbVNWRykge1xuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIGNvbnN0IHN2Z0RhdGEgPSBodG1sRGF0YTtcbiAgbGV0IG91dCA9ICc8c3ZnIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIGNsYXNzPVwicHN3cF9faWNuXCIgdmlld0JveD1cIjAgMCAlZCAlZFwiIHdpZHRoPVwiJWRcIiBoZWlnaHQ9XCIlZFwiPic7IC8vIHJlcGxhY2UgYWxsICVkIHdpdGggc2l6ZVxuXG4gIG91dCA9IG91dC5zcGxpdCgnJWQnKS5qb2luKFxuICAvKiogQHR5cGUge3N0cmluZ30gKi9cbiAgc3ZnRGF0YS5zaXplIHx8IDMyKTsgLy8gSWNvbnMgbWF5IGNvbnRhaW4gb3V0bGluZS9zaGFkb3csXG4gIC8vIHRvIG1ha2UgaXQgd2UgXCJjbG9uZVwiIGJhc2UgaWNvbiBzaGFwZSBhbmQgYWRkIGJvcmRlciB0byBpdC5cbiAgLy8gSWNvbiBpdHNlbGYgYW5kIGJvcmRlciBhcmUgc3R5bGVkIHZpYSBDU1MuXG4gIC8vXG4gIC8vIFByb3BlcnR5IHNoYWRvd0lEIGRlZmluZXMgSUQgb2YgZWxlbWVudCB0aGF0IHNob3VsZCBiZSBjbG9uZWQuXG5cbiAgaWYgKHN2Z0RhdGEub3V0bGluZUlEKSB7XG4gICAgb3V0ICs9ICc8dXNlIGNsYXNzPVwicHN3cF9faWNuLXNoYWRvd1wiIHhsaW5rOmhyZWY9XCIjJyArIHN2Z0RhdGEub3V0bGluZUlEICsgJ1wiLz4nO1xuICB9XG5cbiAgb3V0ICs9IHN2Z0RhdGEuaW5uZXI7XG4gIG91dCArPSAnPC9zdmc+JztcbiAgcmV0dXJuIG91dDtcbn1cblxuY2xhc3MgVUlFbGVtZW50IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7UGhvdG9Td2lwZX0gcHN3cFxuICAgKiBAcGFyYW0ge1VJRWxlbWVudERhdGF9IGRhdGFcbiAgICovXG4gIGNvbnN0cnVjdG9yKHBzd3AsIGRhdGEpIHtcbiAgICB2YXIgX2NvbnRhaW5lcjtcblxuICAgIGNvbnN0IG5hbWUgPSBkYXRhLm5hbWUgfHwgZGF0YS5jbGFzc05hbWU7XG4gICAgbGV0IGVsZW1lbnRIVE1MID0gZGF0YS5odG1sOyAvLyBAdHMtZXhwZWN0LWVycm9yIGxvb2t1cCBvbmx5IGJ5IGBkYXRhLm5hbWVgIG1heWJlP1xuXG4gICAgaWYgKHBzd3Aub3B0aW9uc1tuYW1lXSA9PT0gZmFsc2UpIHtcbiAgICAgIC8vIGV4aXQgaWYgZWxlbWVudCBpcyBkaXNhYmxlZCBmcm9tIG9wdGlvbnNcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIEFsbG93IHRvIG92ZXJyaWRlIFNWRyBpY29ucyBmcm9tIG9wdGlvbnNcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGxvb2t1cCBvbmx5IGJ5IGBkYXRhLm5hbWVgIG1heWJlP1xuXG5cbiAgICBpZiAodHlwZW9mIHBzd3Aub3B0aW9uc1tuYW1lICsgJ1NWRyddID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gYXJyb3dQcmV2U1ZHXG4gICAgICAvLyBhcnJvd05leHRTVkdcbiAgICAgIC8vIGNsb3NlU1ZHXG4gICAgICAvLyB6b29tU1ZHXG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGxvb2t1cCBvbmx5IGJ5IGBkYXRhLm5hbWVgIG1heWJlP1xuICAgICAgZWxlbWVudEhUTUwgPSBwc3dwLm9wdGlvbnNbbmFtZSArICdTVkcnXTtcbiAgICB9XG5cbiAgICBwc3dwLmRpc3BhdGNoKCd1aUVsZW1lbnRDcmVhdGUnLCB7XG4gICAgICBkYXRhXG4gICAgfSk7XG4gICAgbGV0IGNsYXNzTmFtZSA9ICcnO1xuXG4gICAgaWYgKGRhdGEuaXNCdXR0b24pIHtcbiAgICAgIGNsYXNzTmFtZSArPSAncHN3cF9fYnV0dG9uICc7XG4gICAgICBjbGFzc05hbWUgKz0gZGF0YS5jbGFzc05hbWUgfHwgYHBzd3BfX2J1dHRvbi0tJHtkYXRhLm5hbWV9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgY2xhc3NOYW1lICs9IGRhdGEuY2xhc3NOYW1lIHx8IGBwc3dwX18ke2RhdGEubmFtZX1gO1xuICAgIH1cblxuICAgIGxldCB0YWdOYW1lID0gZGF0YS5pc0J1dHRvbiA/IGRhdGEudGFnTmFtZSB8fCAnYnV0dG9uJyA6IGRhdGEudGFnTmFtZSB8fCAnZGl2JztcbiAgICB0YWdOYW1lID1cbiAgICAvKiogQHR5cGUge2tleW9mIEhUTUxFbGVtZW50VGFnTmFtZU1hcH0gKi9cbiAgICB0YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgLyoqIEB0eXBlIHtIVE1MRWxlbWVudH0gKi9cblxuICAgIGNvbnN0IGVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KGNsYXNzTmFtZSwgdGFnTmFtZSk7XG5cbiAgICBpZiAoZGF0YS5pc0J1dHRvbikge1xuICAgICAgaWYgKHRhZ05hbWUgPT09ICdidXR0b24nKSB7XG4gICAgICAgIC8qKiBAdHlwZSB7SFRNTEJ1dHRvbkVsZW1lbnR9ICovXG4gICAgICAgIGVsZW1lbnQudHlwZSA9ICdidXR0b24nO1xuICAgICAgfVxuXG4gICAgICBsZXQge1xuICAgICAgICB0aXRsZVxuICAgICAgfSA9IGRhdGE7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGFyaWFMYWJlbFxuICAgICAgfSA9IGRhdGE7IC8vIEB0cy1leHBlY3QtZXJyb3IgbG9va3VwIG9ubHkgYnkgYGRhdGEubmFtZWAgbWF5YmU/XG5cbiAgICAgIGlmICh0eXBlb2YgcHN3cC5vcHRpb25zW25hbWUgKyAnVGl0bGUnXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBsb29rdXAgb25seSBieSBgZGF0YS5uYW1lYCBtYXliZT9cbiAgICAgICAgdGl0bGUgPSBwc3dwLm9wdGlvbnNbbmFtZSArICdUaXRsZSddO1xuICAgICAgfVxuXG4gICAgICBpZiAodGl0bGUpIHtcbiAgICAgICAgZWxlbWVudC50aXRsZSA9IHRpdGxlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBhcmlhVGV4dCA9IGFyaWFMYWJlbCB8fCB0aXRsZTtcblxuICAgICAgaWYgKGFyaWFUZXh0KSB7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgYXJpYVRleHQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gYWRkRWxlbWVudEhUTUwoZWxlbWVudEhUTUwpO1xuXG4gICAgaWYgKGRhdGEub25Jbml0KSB7XG4gICAgICBkYXRhLm9uSW5pdChlbGVtZW50LCBwc3dwKTtcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5vbkNsaWNrKSB7XG4gICAgICBlbGVtZW50Lm9uY2xpY2sgPSBlID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhLm9uQ2xpY2sgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgIHBzd3BbZGF0YS5vbkNsaWNrXSgpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkYXRhLm9uQ2xpY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBkYXRhLm9uQ2xpY2soZSwgZWxlbWVudCwgcHN3cCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSAvLyBUb3AgYmFyIGlzIGRlZmF1bHQgcG9zaXRpb25cblxuXG4gICAgY29uc3QgYXBwZW5kVG8gPSBkYXRhLmFwcGVuZFRvIHx8ICdiYXInO1xuICAgIC8qKiBAdHlwZSB7SFRNTEVsZW1lbnQgfCB1bmRlZmluZWR9IHJvb3QgZWxlbWVudCBieSBkZWZhdWx0ICovXG5cbiAgICBsZXQgY29udGFpbmVyID0gcHN3cC5lbGVtZW50O1xuXG4gICAgaWYgKGFwcGVuZFRvID09PSAnYmFyJykge1xuICAgICAgaWYgKCFwc3dwLnRvcEJhcikge1xuICAgICAgICBwc3dwLnRvcEJhciA9IGNyZWF0ZUVsZW1lbnQoJ3Bzd3BfX3RvcC1iYXIgcHN3cF9faGlkZS1vbi1jbG9zZScsICdkaXYnLCBwc3dwLnNjcm9sbFdyYXApO1xuICAgICAgfVxuXG4gICAgICBjb250YWluZXIgPSBwc3dwLnRvcEJhcjtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZWxlbWVudCBvdXRzaWRlIG9mIHRvcCBiYXIgZ2V0cyBhIHNlY29uZGFyeSBjbGFzc1xuICAgICAgLy8gdGhhdCBtYWtlcyBlbGVtZW50IGZhZGUgb3V0IG9uIGNsb3NlXG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3Bzd3BfX2hpZGUtb24tY2xvc2UnKTtcblxuICAgICAgaWYgKGFwcGVuZFRvID09PSAnd3JhcHBlcicpIHtcbiAgICAgICAgY29udGFpbmVyID0gcHN3cC5zY3JvbGxXcmFwO1xuICAgICAgfVxuICAgIH1cblxuICAgIChfY29udGFpbmVyID0gY29udGFpbmVyKSA9PT0gbnVsbCB8fCBfY29udGFpbmVyID09PSB2b2lkIDAgfHwgX2NvbnRhaW5lci5hcHBlbmRDaGlsZChwc3dwLmFwcGx5RmlsdGVycygndWlFbGVtZW50JywgZWxlbWVudCwgZGF0YSkpO1xuICB9XG5cbn1cblxuLypcbiAgQmFja3dhcmQgYW5kIGZvcndhcmQgYXJyb3cgYnV0dG9uc1xuICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuL3VpLWVsZW1lbnQuanMnKS5VSUVsZW1lbnREYXRhfSBVSUVsZW1lbnREYXRhICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9waG90b3N3aXBlLmpzJykuZGVmYXVsdH0gUGhvdG9Td2lwZSAqL1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge1Bob3RvU3dpcGV9IHBzd3BcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzTmV4dEJ1dHRvbl1cbiAqL1xuZnVuY3Rpb24gaW5pdEFycm93QnV0dG9uKGVsZW1lbnQsIHBzd3AsIGlzTmV4dEJ1dHRvbikge1xuICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3Bzd3BfX2J1dHRvbi0tYXJyb3cnKTsgLy8gVE9ETzogdGhpcyBzaG91bGQgcG9pbnQgdG8gYSB1bmlxdWUgaWQgZm9yIHRoaXMgaW5zdGFuY2VcblxuICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1jb250cm9scycsICdwc3dwX19pdGVtcycpO1xuICBwc3dwLm9uKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgaWYgKCFwc3dwLm9wdGlvbnMubG9vcCkge1xuICAgICAgaWYgKGlzTmV4dEJ1dHRvbikge1xuICAgICAgICAvKiogQHR5cGUge0hUTUxCdXR0b25FbGVtZW50fSAqL1xuICAgICAgICBlbGVtZW50LmRpc2FibGVkID0gIShwc3dwLmN1cnJJbmRleCA8IHBzd3AuZ2V0TnVtSXRlbXMoKSAtIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLyoqIEB0eXBlIHtIVE1MQnV0dG9uRWxlbWVudH0gKi9cbiAgICAgICAgZWxlbWVudC5kaXNhYmxlZCA9ICEocHN3cC5jdXJySW5kZXggPiAwKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuLyoqIEB0eXBlIHtVSUVsZW1lbnREYXRhfSAqL1xuXG5cbmNvbnN0IGFycm93UHJldiA9IHtcbiAgbmFtZTogJ2Fycm93UHJldicsXG4gIGNsYXNzTmFtZTogJ3Bzd3BfX2J1dHRvbi0tYXJyb3ctLXByZXYnLFxuICB0aXRsZTogJ1ByZXZpb3VzJyxcbiAgb3JkZXI6IDEwLFxuICBpc0J1dHRvbjogdHJ1ZSxcbiAgYXBwZW5kVG86ICd3cmFwcGVyJyxcbiAgaHRtbDoge1xuICAgIGlzQ3VzdG9tU1ZHOiB0cnVlLFxuICAgIHNpemU6IDYwLFxuICAgIGlubmVyOiAnPHBhdGggZD1cIk0yOSA0M2wtMyAzLTE2LTE2IDE2LTE2IDMgMy0xMyAxMyAxMyAxM3pcIiBpZD1cInBzd3BfX2ljbi1hcnJvd1wiLz4nLFxuICAgIG91dGxpbmVJRDogJ3Bzd3BfX2ljbi1hcnJvdydcbiAgfSxcbiAgb25DbGljazogJ3ByZXYnLFxuICBvbkluaXQ6IGluaXRBcnJvd0J1dHRvblxufTtcbi8qKiBAdHlwZSB7VUlFbGVtZW50RGF0YX0gKi9cblxuY29uc3QgYXJyb3dOZXh0ID0ge1xuICBuYW1lOiAnYXJyb3dOZXh0JyxcbiAgY2xhc3NOYW1lOiAncHN3cF9fYnV0dG9uLS1hcnJvdy0tbmV4dCcsXG4gIHRpdGxlOiAnTmV4dCcsXG4gIG9yZGVyOiAxMSxcbiAgaXNCdXR0b246IHRydWUsXG4gIGFwcGVuZFRvOiAnd3JhcHBlcicsXG4gIGh0bWw6IHtcbiAgICBpc0N1c3RvbVNWRzogdHJ1ZSxcbiAgICBzaXplOiA2MCxcbiAgICBpbm5lcjogJzx1c2UgeGxpbms6aHJlZj1cIiNwc3dwX19pY24tYXJyb3dcIi8+JyxcbiAgICBvdXRsaW5lSUQ6ICdwc3dwX19pY24tYXJyb3cnXG4gIH0sXG4gIG9uQ2xpY2s6ICduZXh0JyxcbiAgb25Jbml0OiAoZWwsIHBzd3ApID0+IHtcbiAgICBpbml0QXJyb3dCdXR0b24oZWwsIHBzd3AsIHRydWUpO1xuICB9XG59O1xuXG4vKiogQHR5cGUge2ltcG9ydCgnLi91aS1lbGVtZW50LmpzJykuVUlFbGVtZW50RGF0YX0gVUlFbGVtZW50RGF0YSAqL1xuY29uc3QgY2xvc2VCdXR0b24gPSB7XG4gIG5hbWU6ICdjbG9zZScsXG4gIHRpdGxlOiAnQ2xvc2UnLFxuICBvcmRlcjogMjAsXG4gIGlzQnV0dG9uOiB0cnVlLFxuICBodG1sOiB7XG4gICAgaXNDdXN0b21TVkc6IHRydWUsXG4gICAgaW5uZXI6ICc8cGF0aCBkPVwiTTI0IDEwbC0yLTItNiA2LTYtNi0yIDIgNiA2LTYgNiAyIDIgNi02IDYgNiAyLTItNi02elwiIGlkPVwicHN3cF9faWNuLWNsb3NlXCIvPicsXG4gICAgb3V0bGluZUlEOiAncHN3cF9faWNuLWNsb3NlJ1xuICB9LFxuICBvbkNsaWNrOiAnY2xvc2UnXG59O1xuXG4vKiogQHR5cGUge2ltcG9ydCgnLi91aS1lbGVtZW50LmpzJykuVUlFbGVtZW50RGF0YX0gVUlFbGVtZW50RGF0YSAqL1xuY29uc3Qgem9vbUJ1dHRvbiA9IHtcbiAgbmFtZTogJ3pvb20nLFxuICB0aXRsZTogJ1pvb20nLFxuICBvcmRlcjogMTAsXG4gIGlzQnV0dG9uOiB0cnVlLFxuICBodG1sOiB7XG4gICAgaXNDdXN0b21TVkc6IHRydWUsXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbiAgICBpbm5lcjogJzxwYXRoIGQ9XCJNMTcuNDI2IDE5LjkyNmE2IDYgMCAxIDEgMS41LTEuNUwyMyAyMi41IDIxLjUgMjRsLTQuMDc0LTQuMDc0elwiIGlkPVwicHN3cF9faWNuLXpvb21cIi8+JyArICc8cGF0aCBmaWxsPVwiY3VycmVudENvbG9yXCIgY2xhc3M9XCJwc3dwX196b29tLWljbi1iYXItaFwiIGQ9XCJNMTEgMTZ2LTJoNnYyelwiLz4nICsgJzxwYXRoIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBjbGFzcz1cInBzd3BfX3pvb20taWNuLWJhci12XCIgZD1cIk0xMyAxMmgydjZoLTJ6XCIvPicsXG4gICAgb3V0bGluZUlEOiAncHN3cF9faWNuLXpvb20nXG4gIH0sXG4gIG9uQ2xpY2s6ICd0b2dnbGVab29tJ1xufTtcblxuLyoqIEB0eXBlIHtpbXBvcnQoJy4vdWktZWxlbWVudC5qcycpLlVJRWxlbWVudERhdGF9IFVJRWxlbWVudERhdGEgKi9cbmNvbnN0IGxvYWRpbmdJbmRpY2F0b3IgPSB7XG4gIG5hbWU6ICdwcmVsb2FkZXInLFxuICBhcHBlbmRUbzogJ2JhcicsXG4gIG9yZGVyOiA3LFxuICBodG1sOiB7XG4gICAgaXNDdXN0b21TVkc6IHRydWUsXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbiAgICBpbm5lcjogJzxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBjbGlwLXJ1bGU9XCJldmVub2RkXCIgZD1cIk0yMS4yIDE2YTUuMiA1LjIgMCAxIDEtNS4yLTUuMlY4YTggOCAwIDEgMCA4IDhoLTIuOFpcIiBpZD1cInBzd3BfX2ljbi1sb2FkaW5nXCIvPicsXG4gICAgb3V0bGluZUlEOiAncHN3cF9faWNuLWxvYWRpbmcnXG4gIH0sXG4gIG9uSW5pdDogKGluZGljYXRvckVsZW1lbnQsIHBzd3ApID0+IHtcbiAgICAvKiogQHR5cGUge2Jvb2xlYW4gfCB1bmRlZmluZWR9ICovXG4gICAgbGV0IGlzVmlzaWJsZTtcbiAgICAvKiogQHR5cGUge05vZGVKUy5UaW1lb3V0IHwgbnVsbH0gKi9cblxuICAgIGxldCBkZWxheVRpbWVvdXQgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGFkZFxuICAgICAqL1xuXG4gICAgY29uc3QgdG9nZ2xlSW5kaWNhdG9yQ2xhc3MgPSAoY2xhc3NOYW1lLCBhZGQpID0+IHtcbiAgICAgIGluZGljYXRvckVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgncHN3cF9fcHJlbG9hZGVyLS0nICsgY2xhc3NOYW1lLCBhZGQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtib29sZWFufSB2aXNpYmxlXG4gICAgICovXG5cblxuICAgIGNvbnN0IHNldEluZGljYXRvclZpc2liaWxpdHkgPSB2aXNpYmxlID0+IHtcbiAgICAgIGlmIChpc1Zpc2libGUgIT09IHZpc2libGUpIHtcbiAgICAgICAgaXNWaXNpYmxlID0gdmlzaWJsZTtcbiAgICAgICAgdG9nZ2xlSW5kaWNhdG9yQ2xhc3MoJ2FjdGl2ZScsIHZpc2libGUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCB1cGRhdGVQcmVsb2FkZXJWaXNpYmlsaXR5ID0gKCkgPT4ge1xuICAgICAgdmFyIF9wc3dwJGN1cnJTbGlkZTtcblxuICAgICAgaWYgKCEoKF9wc3dwJGN1cnJTbGlkZSA9IHBzd3AuY3VyclNsaWRlKSAhPT0gbnVsbCAmJiBfcHN3cCRjdXJyU2xpZGUgIT09IHZvaWQgMCAmJiBfcHN3cCRjdXJyU2xpZGUuY29udGVudC5pc0xvYWRpbmcoKSkpIHtcbiAgICAgICAgc2V0SW5kaWNhdG9yVmlzaWJpbGl0eShmYWxzZSk7XG5cbiAgICAgICAgaWYgKGRlbGF5VGltZW91dCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dChkZWxheVRpbWVvdXQpO1xuICAgICAgICAgIGRlbGF5VGltZW91dCA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghZGVsYXlUaW1lb3V0KSB7XG4gICAgICAgIC8vIGRpc3BsYXkgbG9hZGluZyBpbmRpY2F0b3Igd2l0aCBkZWxheVxuICAgICAgICBkZWxheVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB2YXIgX3Bzd3AkY3VyclNsaWRlMjtcblxuICAgICAgICAgIHNldEluZGljYXRvclZpc2liaWxpdHkoQm9vbGVhbigoX3Bzd3AkY3VyclNsaWRlMiA9IHBzd3AuY3VyclNsaWRlKSA9PT0gbnVsbCB8fCBfcHN3cCRjdXJyU2xpZGUyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcHN3cCRjdXJyU2xpZGUyLmNvbnRlbnQuaXNMb2FkaW5nKCkpKTtcbiAgICAgICAgICBkZWxheVRpbWVvdXQgPSBudWxsO1xuICAgICAgICB9LCBwc3dwLm9wdGlvbnMucHJlbG9hZGVyRGVsYXkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBwc3dwLm9uKCdjaGFuZ2UnLCB1cGRhdGVQcmVsb2FkZXJWaXNpYmlsaXR5KTtcbiAgICBwc3dwLm9uKCdsb2FkQ29tcGxldGUnLCBlID0+IHtcbiAgICAgIGlmIChwc3dwLmN1cnJTbGlkZSA9PT0gZS5zbGlkZSkge1xuICAgICAgICB1cGRhdGVQcmVsb2FkZXJWaXNpYmlsaXR5KCk7XG4gICAgICB9XG4gICAgfSk7IC8vIGV4cG9zZSB0aGUgbWV0aG9kXG5cbiAgICBpZiAocHN3cC51aSkge1xuICAgICAgcHN3cC51aS51cGRhdGVQcmVsb2FkZXJWaXNpYmlsaXR5ID0gdXBkYXRlUHJlbG9hZGVyVmlzaWJpbGl0eTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKiBAdHlwZSB7aW1wb3J0KCcuL3VpLWVsZW1lbnQuanMnKS5VSUVsZW1lbnREYXRhfSBVSUVsZW1lbnREYXRhICovXG5jb25zdCBjb3VudGVySW5kaWNhdG9yID0ge1xuICBuYW1lOiAnY291bnRlcicsXG4gIG9yZGVyOiA1LFxuICBvbkluaXQ6IChjb3VudGVyRWxlbWVudCwgcHN3cCkgPT4ge1xuICAgIHBzd3Aub24oJ2NoYW5nZScsICgpID0+IHtcbiAgICAgIGNvdW50ZXJFbGVtZW50LmlubmVyVGV4dCA9IHBzd3AuY3VyckluZGV4ICsgMSArIHBzd3Aub3B0aW9ucy5pbmRleEluZGljYXRvclNlcCArIHBzd3AuZ2V0TnVtSXRlbXMoKTtcbiAgICB9KTtcbiAgfVxufTtcblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4uL3Bob3Rvc3dpcGUuanMnKS5kZWZhdWx0fSBQaG90b1N3aXBlICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuL3VpLWVsZW1lbnQuanMnKS5VSUVsZW1lbnREYXRhfSBVSUVsZW1lbnREYXRhICovXG5cbi8qKlxuICogU2V0IHNwZWNpYWwgY2xhc3Mgb24gZWxlbWVudCB3aGVuIGltYWdlIGlzIHpvb21lZC5cbiAqXG4gKiBCeSBkZWZhdWx0LCBpdCBpcyB1c2VkIHRvIGFkanVzdFxuICogem9vbSBpY29uIGFuZCB6b29tIGN1cnNvciB2aWEgQ1NTLlxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzWm9vbWVkSW5cbiAqL1xuXG5mdW5jdGlvbiBzZXRab29tZWRJbihlbCwgaXNab29tZWRJbikge1xuICBlbC5jbGFzc0xpc3QudG9nZ2xlKCdwc3dwLS16b29tZWQtaW4nLCBpc1pvb21lZEluKTtcbn1cblxuY2xhc3MgVUkge1xuICAvKipcbiAgICogQHBhcmFtIHtQaG90b1N3aXBlfSBwc3dwXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwc3dwKSB7XG4gICAgdGhpcy5wc3dwID0gcHN3cDtcbiAgICB0aGlzLmlzUmVnaXN0ZXJlZCA9IGZhbHNlO1xuICAgIC8qKiBAdHlwZSB7VUlFbGVtZW50RGF0YVtdfSAqL1xuXG4gICAgdGhpcy51aUVsZW1lbnRzRGF0YSA9IFtdO1xuICAgIC8qKiBAdHlwZSB7KFVJRWxlbWVudCB8IFVJRWxlbWVudERhdGEpW119ICovXG5cbiAgICB0aGlzLml0ZW1zID0gW107XG4gICAgLyoqIEB0eXBlIHsoKSA9PiB2b2lkfSAqL1xuXG4gICAgdGhpcy51cGRhdGVQcmVsb2FkZXJWaXNpYmlsaXR5ID0gKCkgPT4ge307XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyIHwgdW5kZWZpbmVkfVxuICAgICAqL1xuXG5cbiAgICB0aGlzLl9sYXN0VXBkYXRlZFpvb21MZXZlbCA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGluaXQoKSB7XG4gICAgY29uc3Qge1xuICAgICAgcHN3cFxuICAgIH0gPSB0aGlzO1xuICAgIHRoaXMuaXNSZWdpc3RlcmVkID0gZmFsc2U7XG4gICAgdGhpcy51aUVsZW1lbnRzRGF0YSA9IFtjbG9zZUJ1dHRvbiwgYXJyb3dQcmV2LCBhcnJvd05leHQsIHpvb21CdXR0b24sIGxvYWRpbmdJbmRpY2F0b3IsIGNvdW50ZXJJbmRpY2F0b3JdO1xuICAgIHBzd3AuZGlzcGF0Y2goJ3VpUmVnaXN0ZXInKTsgLy8gc29ydCBieSBvcmRlclxuXG4gICAgdGhpcy51aUVsZW1lbnRzRGF0YS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAvLyBkZWZhdWx0IG9yZGVyIGlzIDBcbiAgICAgIHJldHVybiAoYS5vcmRlciB8fCAwKSAtIChiLm9yZGVyIHx8IDApO1xuICAgIH0pO1xuICAgIHRoaXMuaXRlbXMgPSBbXTtcbiAgICB0aGlzLmlzUmVnaXN0ZXJlZCA9IHRydWU7XG4gICAgdGhpcy51aUVsZW1lbnRzRGF0YS5mb3JFYWNoKHVpRWxlbWVudERhdGEgPT4ge1xuICAgICAgdGhpcy5yZWdpc3RlckVsZW1lbnQodWlFbGVtZW50RGF0YSk7XG4gICAgfSk7XG4gICAgcHN3cC5vbignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgdmFyIF9wc3dwJGVsZW1lbnQ7XG5cbiAgICAgIChfcHN3cCRlbGVtZW50ID0gcHN3cC5lbGVtZW50KSA9PT0gbnVsbCB8fCBfcHN3cCRlbGVtZW50ID09PSB2b2lkIDAgfHwgX3Bzd3AkZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdwc3dwLS1vbmUtc2xpZGUnLCBwc3dwLmdldE51bUl0ZW1zKCkgPT09IDEpO1xuICAgIH0pO1xuICAgIHBzd3Aub24oJ3pvb21QYW5VcGRhdGUnLCAoKSA9PiB0aGlzLl9vblpvb21QYW5VcGRhdGUoKSk7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7VUlFbGVtZW50RGF0YX0gZWxlbWVudERhdGFcbiAgICovXG5cblxuICByZWdpc3RlckVsZW1lbnQoZWxlbWVudERhdGEpIHtcbiAgICBpZiAodGhpcy5pc1JlZ2lzdGVyZWQpIHtcbiAgICAgIHRoaXMuaXRlbXMucHVzaChuZXcgVUlFbGVtZW50KHRoaXMucHN3cCwgZWxlbWVudERhdGEpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy51aUVsZW1lbnRzRGF0YS5wdXNoKGVsZW1lbnREYXRhKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEZpcmVkIGVhY2ggdGltZSB6b29tIG9yIHBhbiBwb3NpdGlvbiBpcyBjaGFuZ2VkLlxuICAgKiBVcGRhdGUgY2xhc3NlcyB0aGF0IGNvbnRyb2wgdmlzaWJpbGl0eSBvZiB6b29tIGJ1dHRvbiBhbmQgY3Vyc29yIGljb24uXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG5cbiAgX29uWm9vbVBhblVwZGF0ZSgpIHtcbiAgICBjb25zdCB7XG4gICAgICB0ZW1wbGF0ZSxcbiAgICAgIGN1cnJTbGlkZSxcbiAgICAgIG9wdGlvbnNcbiAgICB9ID0gdGhpcy5wc3dwO1xuXG4gICAgaWYgKHRoaXMucHN3cC5vcGVuZXIuaXNDbG9zaW5nIHx8ICF0ZW1wbGF0ZSB8fCAhY3VyclNsaWRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHtcbiAgICAgIGN1cnJab29tTGV2ZWxcbiAgICB9ID0gY3VyclNsaWRlOyAvLyBpZiBub3Qgb3BlbiB5ZXQgLSBjaGVjayBhZ2FpbnN0IGluaXRpYWwgem9vbSBsZXZlbFxuXG4gICAgaWYgKCF0aGlzLnBzd3Aub3BlbmVyLmlzT3Blbikge1xuICAgICAgY3Vyclpvb21MZXZlbCA9IGN1cnJTbGlkZS56b29tTGV2ZWxzLmluaXRpYWw7XG4gICAgfVxuXG4gICAgaWYgKGN1cnJab29tTGV2ZWwgPT09IHRoaXMuX2xhc3RVcGRhdGVkWm9vbUxldmVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fbGFzdFVwZGF0ZWRab29tTGV2ZWwgPSBjdXJyWm9vbUxldmVsO1xuICAgIGNvbnN0IGN1cnJab29tTGV2ZWxEaWZmID0gY3VyclNsaWRlLnpvb21MZXZlbHMuaW5pdGlhbCAtIGN1cnJTbGlkZS56b29tTGV2ZWxzLnNlY29uZGFyeTsgLy8gSW5pdGlhbCBhbmQgc2Vjb25kYXJ5IHpvb20gbGV2ZWxzIGFyZSBhbG1vc3QgZXF1YWxcblxuICAgIGlmIChNYXRoLmFicyhjdXJyWm9vbUxldmVsRGlmZikgPCAwLjAxIHx8ICFjdXJyU2xpZGUuaXNab29tYWJsZSgpKSB7XG4gICAgICAvLyBkaXNhYmxlIHpvb21cbiAgICAgIHNldFpvb21lZEluKHRlbXBsYXRlLCBmYWxzZSk7XG4gICAgICB0ZW1wbGF0ZS5jbGFzc0xpc3QucmVtb3ZlKCdwc3dwLS16b29tLWFsbG93ZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0ZW1wbGF0ZS5jbGFzc0xpc3QuYWRkKCdwc3dwLS16b29tLWFsbG93ZWQnKTtcbiAgICBjb25zdCBwb3RlbnRpYWxab29tTGV2ZWwgPSBjdXJyWm9vbUxldmVsID09PSBjdXJyU2xpZGUuem9vbUxldmVscy5pbml0aWFsID8gY3VyclNsaWRlLnpvb21MZXZlbHMuc2Vjb25kYXJ5IDogY3VyclNsaWRlLnpvb21MZXZlbHMuaW5pdGlhbDtcbiAgICBzZXRab29tZWRJbih0ZW1wbGF0ZSwgcG90ZW50aWFsWm9vbUxldmVsIDw9IGN1cnJab29tTGV2ZWwpO1xuXG4gICAgaWYgKG9wdGlvbnMuaW1hZ2VDbGlja0FjdGlvbiA9PT0gJ3pvb20nIHx8IG9wdGlvbnMuaW1hZ2VDbGlja0FjdGlvbiA9PT0gJ3pvb20tb3ItY2xvc2UnKSB7XG4gICAgICB0ZW1wbGF0ZS5jbGFzc0xpc3QuYWRkKCdwc3dwLS1jbGljay10by16b29tJyk7XG4gICAgfVxuICB9XG5cbn1cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4vc2xpZGUuanMnKS5TbGlkZURhdGF9IFNsaWRlRGF0YSAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vcGhvdG9zd2lwZS5qcycpLmRlZmF1bHR9IFBob3RvU3dpcGUgKi9cblxuLyoqIEB0eXBlZGVmIHt7IHg6IG51bWJlcjsgeTogbnVtYmVyOyB3OiBudW1iZXI7IGlubmVyUmVjdD86IHsgdzogbnVtYmVyOyBoOiBudW1iZXI7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0gfX0gQm91bmRzICovXG5cbi8qKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxcbiAqIEByZXR1cm5zIEJvdW5kc1xuICovXG5mdW5jdGlvbiBnZXRCb3VuZHNCeUVsZW1lbnQoZWwpIHtcbiAgY29uc3QgdGh1bWJBcmVhUmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICByZXR1cm4ge1xuICAgIHg6IHRodW1iQXJlYVJlY3QubGVmdCxcbiAgICB5OiB0aHVtYkFyZWFSZWN0LnRvcCxcbiAgICB3OiB0aHVtYkFyZWFSZWN0LndpZHRoXG4gIH07XG59XG4vKipcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge251bWJlcn0gaW1hZ2VXaWR0aFxuICogQHBhcmFtIHtudW1iZXJ9IGltYWdlSGVpZ2h0XG4gKiBAcmV0dXJucyBCb3VuZHNcbiAqL1xuXG5cbmZ1bmN0aW9uIGdldENyb3BwZWRCb3VuZHNCeUVsZW1lbnQoZWwsIGltYWdlV2lkdGgsIGltYWdlSGVpZ2h0KSB7XG4gIGNvbnN0IHRodW1iQXJlYVJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsgLy8gZmlsbCBpbWFnZSBpbnRvIHRoZSBhcmVhXG4gIC8vIChkbyB0aGV5IHNhbWUgYXMgb2JqZWN0LWZpdDpjb3ZlciBkb2VzIHRvIHJldHJpZXZlIGNvb3JkaW5hdGVzKVxuXG4gIGNvbnN0IGhSYXRpbyA9IHRodW1iQXJlYVJlY3Qud2lkdGggLyBpbWFnZVdpZHRoO1xuICBjb25zdCB2UmF0aW8gPSB0aHVtYkFyZWFSZWN0LmhlaWdodCAvIGltYWdlSGVpZ2h0O1xuICBjb25zdCBmaWxsWm9vbUxldmVsID0gaFJhdGlvID4gdlJhdGlvID8gaFJhdGlvIDogdlJhdGlvO1xuICBjb25zdCBvZmZzZXRYID0gKHRodW1iQXJlYVJlY3Qud2lkdGggLSBpbWFnZVdpZHRoICogZmlsbFpvb21MZXZlbCkgLyAyO1xuICBjb25zdCBvZmZzZXRZID0gKHRodW1iQXJlYVJlY3QuaGVpZ2h0IC0gaW1hZ2VIZWlnaHQgKiBmaWxsWm9vbUxldmVsKSAvIDI7XG4gIC8qKlxuICAgKiBDb29yZGluYXRlcyBvZiB0aGUgaW1hZ2UsXG4gICAqIGFzIGlmIGl0IHdhcyBub3QgY3JvcHBlZCxcbiAgICogaGVpZ2h0IGlzIGNhbGN1bGF0ZWQgYXV0b21hdGljYWxseVxuICAgKlxuICAgKiBAdHlwZSB7Qm91bmRzfVxuICAgKi9cblxuICBjb25zdCBib3VuZHMgPSB7XG4gICAgeDogdGh1bWJBcmVhUmVjdC5sZWZ0ICsgb2Zmc2V0WCxcbiAgICB5OiB0aHVtYkFyZWFSZWN0LnRvcCArIG9mZnNldFksXG4gICAgdzogaW1hZ2VXaWR0aCAqIGZpbGxab29tTGV2ZWxcbiAgfTsgLy8gQ29vcmRpbmF0ZXMgb2YgaW5uZXIgY3JvcCBhcmVhXG4gIC8vIHJlbGF0aXZlIHRvIHRoZSBpbWFnZVxuXG4gIGJvdW5kcy5pbm5lclJlY3QgPSB7XG4gICAgdzogdGh1bWJBcmVhUmVjdC53aWR0aCxcbiAgICBoOiB0aHVtYkFyZWFSZWN0LmhlaWdodCxcbiAgICB4OiBvZmZzZXRYLFxuICAgIHk6IG9mZnNldFlcbiAgfTtcbiAgcmV0dXJuIGJvdW5kcztcbn1cbi8qKlxuICogR2V0IGRpbWVuc2lvbnMgb2YgdGh1bWJuYWlsIGltYWdlXG4gKiAoY2xpY2sgb24gd2hpY2ggb3BlbnMgcGhvdG9zd2lwZSBvciBjbG9zZXMgcGhvdG9zd2lwZSB0bylcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcbiAqIEBwYXJhbSB7U2xpZGVEYXRhfSBpdGVtRGF0YVxuICogQHBhcmFtIHtQaG90b1N3aXBlfSBpbnN0YW5jZSBQaG90b1N3aXBlIGluc3RhbmNlXG4gKiBAcmV0dXJucyB7Qm91bmRzIHwgdW5kZWZpbmVkfVxuICovXG5cblxuZnVuY3Rpb24gZ2V0VGh1bWJCb3VuZHMoaW5kZXgsIGl0ZW1EYXRhLCBpbnN0YW5jZSkge1xuICAvLyBsZWdhY3kgZXZlbnQsIGJlZm9yZSBmaWx0ZXJzIHdlcmUgaW50cm9kdWNlZFxuICBjb25zdCBldmVudCA9IGluc3RhbmNlLmRpc3BhdGNoKCd0aHVtYkJvdW5kcycsIHtcbiAgICBpbmRleCxcbiAgICBpdGVtRGF0YSxcbiAgICBpbnN0YW5jZVxuICB9KTsgLy8gQHRzLWV4cGVjdC1lcnJvclxuXG4gIGlmIChldmVudC50aHVtYkJvdW5kcykge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICByZXR1cm4gZXZlbnQudGh1bWJCb3VuZHM7XG4gIH1cblxuICBjb25zdCB7XG4gICAgZWxlbWVudFxuICB9ID0gaXRlbURhdGE7XG4gIC8qKiBAdHlwZSB7Qm91bmRzIHwgdW5kZWZpbmVkfSAqL1xuXG4gIGxldCB0aHVtYkJvdW5kcztcbiAgLyoqIEB0eXBlIHtIVE1MRWxlbWVudCB8IG51bGwgfCB1bmRlZmluZWR9ICovXG5cbiAgbGV0IHRodW1ibmFpbDtcblxuICBpZiAoZWxlbWVudCAmJiBpbnN0YW5jZS5vcHRpb25zLnRodW1iU2VsZWN0b3IgIT09IGZhbHNlKSB7XG4gICAgY29uc3QgdGh1bWJTZWxlY3RvciA9IGluc3RhbmNlLm9wdGlvbnMudGh1bWJTZWxlY3RvciB8fCAnaW1nJztcbiAgICB0aHVtYm5haWwgPSBlbGVtZW50Lm1hdGNoZXModGh1bWJTZWxlY3RvcikgPyBlbGVtZW50IDpcbiAgICAvKiogQHR5cGUge0hUTUxFbGVtZW50IHwgbnVsbH0gKi9cbiAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGh1bWJTZWxlY3Rvcik7XG4gIH1cblxuICB0aHVtYm5haWwgPSBpbnN0YW5jZS5hcHBseUZpbHRlcnMoJ3RodW1iRWwnLCB0aHVtYm5haWwsIGl0ZW1EYXRhLCBpbmRleCk7XG5cbiAgaWYgKHRodW1ibmFpbCkge1xuICAgIGlmICghaXRlbURhdGEudGh1bWJDcm9wcGVkKSB7XG4gICAgICB0aHVtYkJvdW5kcyA9IGdldEJvdW5kc0J5RWxlbWVudCh0aHVtYm5haWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHVtYkJvdW5kcyA9IGdldENyb3BwZWRCb3VuZHNCeUVsZW1lbnQodGh1bWJuYWlsLCBpdGVtRGF0YS53aWR0aCB8fCBpdGVtRGF0YS53IHx8IDAsIGl0ZW1EYXRhLmhlaWdodCB8fCBpdGVtRGF0YS5oIHx8IDApO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBpbnN0YW5jZS5hcHBseUZpbHRlcnMoJ3RodW1iQm91bmRzJywgdGh1bWJCb3VuZHMsIGl0ZW1EYXRhLCBpbmRleCk7XG59XG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9saWdodGJveC9saWdodGJveC5qcycpLmRlZmF1bHR9IFBob3RvU3dpcGVMaWdodGJveCAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vcGhvdG9zd2lwZS5qcycpLmRlZmF1bHR9IFBob3RvU3dpcGUgKi9cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4uL3Bob3Rvc3dpcGUuanMnKS5QaG90b1N3aXBlT3B0aW9uc30gUGhvdG9Td2lwZU9wdGlvbnMgKi9cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4uL3Bob3Rvc3dpcGUuanMnKS5EYXRhU291cmNlfSBEYXRhU291cmNlICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi91aS91aS1lbGVtZW50LmpzJykuVUlFbGVtZW50RGF0YX0gVUlFbGVtZW50RGF0YSAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vc2xpZGUvY29udGVudC5qcycpLmRlZmF1bHR9IENvbnRlbnREZWZhdWx0ICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9zbGlkZS9zbGlkZS5qcycpLmRlZmF1bHR9IFNsaWRlICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9zbGlkZS9zbGlkZS5qcycpLlNsaWRlRGF0YX0gU2xpZGVEYXRhICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9zbGlkZS96b29tLWxldmVsLmpzJykuZGVmYXVsdH0gWm9vbUxldmVsICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9zbGlkZS9nZXQtdGh1bWItYm91bmRzLmpzJykuQm91bmRzfSBCb3VuZHMgKi9cblxuLyoqXG4gKiBBbGxvdyBhZGRpbmcgYW4gYXJiaXRyYXJ5IHByb3BzIHRvIHRoZSBDb250ZW50XG4gKiBodHRwczovL3Bob3Rvc3dpcGUuY29tL2N1c3RvbS1jb250ZW50LyN1c2luZy13ZWJwLWltYWdlLWZvcm1hdFxuICogQHR5cGVkZWYge0NvbnRlbnREZWZhdWx0ICYgUmVjb3JkPHN0cmluZywgYW55Pn0gQ29udGVudFxuICovXG5cbi8qKiBAdHlwZWRlZiB7eyB4PzogbnVtYmVyOyB5PzogbnVtYmVyIH19IFBvaW50ICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gUGhvdG9Td2lwZUV2ZW50c01hcCBodHRwczovL3Bob3Rvc3dpcGUuY29tL2V2ZW50cy9cbiAqXG4gKlxuICogaHR0cHM6Ly9waG90b3N3aXBlLmNvbS9hZGRpbmctdWktZWxlbWVudHMvXG4gKlxuICogQHByb3Age3VuZGVmaW5lZH0gdWlSZWdpc3RlclxuICogQHByb3Age3sgZGF0YTogVUlFbGVtZW50RGF0YSB9fSB1aUVsZW1lbnRDcmVhdGVcbiAqXG4gKlxuICogaHR0cHM6Ly9waG90b3N3aXBlLmNvbS9ldmVudHMvI2luaXRpYWxpemF0aW9uLWV2ZW50c1xuICpcbiAqIEBwcm9wIHt1bmRlZmluZWR9IGJlZm9yZU9wZW5cbiAqIEBwcm9wIHt1bmRlZmluZWR9IGZpcnN0VXBkYXRlXG4gKiBAcHJvcCB7dW5kZWZpbmVkfSBpbml0aWFsTGF5b3V0XG4gKiBAcHJvcCB7dW5kZWZpbmVkfSBjaGFuZ2VcbiAqIEBwcm9wIHt1bmRlZmluZWR9IGFmdGVySW5pdFxuICogQHByb3Age3VuZGVmaW5lZH0gYmluZEV2ZW50c1xuICpcbiAqXG4gKiBodHRwczovL3Bob3Rvc3dpcGUuY29tL2V2ZW50cy8jb3BlbmluZy1vci1jbG9zaW5nLXRyYW5zaXRpb24tZXZlbnRzXG4gKlxuICogQHByb3Age3VuZGVmaW5lZH0gb3BlbmluZ0FuaW1hdGlvblN0YXJ0XG4gKiBAcHJvcCB7dW5kZWZpbmVkfSBvcGVuaW5nQW5pbWF0aW9uRW5kXG4gKiBAcHJvcCB7dW5kZWZpbmVkfSBjbG9zaW5nQW5pbWF0aW9uU3RhcnRcbiAqIEBwcm9wIHt1bmRlZmluZWR9IGNsb3NpbmdBbmltYXRpb25FbmRcbiAqXG4gKlxuICogaHR0cHM6Ly9waG90b3N3aXBlLmNvbS9ldmVudHMvI2Nsb3NpbmctZXZlbnRzXG4gKlxuICogQHByb3Age3VuZGVmaW5lZH0gY2xvc2VcbiAqIEBwcm9wIHt1bmRlZmluZWR9IGRlc3Ryb3lcbiAqXG4gKlxuICogaHR0cHM6Ly9waG90b3N3aXBlLmNvbS9ldmVudHMvI3BvaW50ZXItYW5kLWdlc3R1cmUtZXZlbnRzXG4gKlxuICogQHByb3Age3sgb3JpZ2luYWxFdmVudDogUG9pbnRlckV2ZW50IH19IHBvaW50ZXJEb3duXG4gKiBAcHJvcCB7eyBvcmlnaW5hbEV2ZW50OiBQb2ludGVyRXZlbnQgfX0gcG9pbnRlck1vdmVcbiAqIEBwcm9wIHt7IG9yaWdpbmFsRXZlbnQ6IFBvaW50ZXJFdmVudCB9fSBwb2ludGVyVXBcbiAqIEBwcm9wIHt7IGJnT3BhY2l0eTogbnVtYmVyIH19IHBpbmNoQ2xvc2UgY2FuIGJlIGRlZmF1bHQgcHJldmVudGVkXG4gKiBAcHJvcCB7eyBwYW5ZOiBudW1iZXIgfX0gdmVydGljYWxEcmFnIGNhbiBiZSBkZWZhdWx0IHByZXZlbnRlZFxuICpcbiAqXG4gKiBodHRwczovL3Bob3Rvc3dpcGUuY29tL2V2ZW50cy8jc2xpZGUtY29udGVudC1ldmVudHNcbiAqXG4gKiBAcHJvcCB7eyBjb250ZW50OiBDb250ZW50IH19IGNvbnRlbnRJbml0XG4gKiBAcHJvcCB7eyBjb250ZW50OiBDb250ZW50OyBpc0xhenk6IGJvb2xlYW4gfX0gY29udGVudExvYWQgY2FuIGJlIGRlZmF1bHQgcHJldmVudGVkXG4gKiBAcHJvcCB7eyBjb250ZW50OiBDb250ZW50OyBpc0xhenk6IGJvb2xlYW4gfX0gY29udGVudExvYWRJbWFnZSBjYW4gYmUgZGVmYXVsdCBwcmV2ZW50ZWRcbiAqIEBwcm9wIHt7IGNvbnRlbnQ6IENvbnRlbnQ7IHNsaWRlOiBTbGlkZTsgaXNFcnJvcj86IGJvb2xlYW4gfX0gbG9hZENvbXBsZXRlXG4gKiBAcHJvcCB7eyBjb250ZW50OiBDb250ZW50OyBzbGlkZTogU2xpZGUgfX0gbG9hZEVycm9yXG4gKiBAcHJvcCB7eyBjb250ZW50OiBDb250ZW50OyB3aWR0aDogbnVtYmVyOyBoZWlnaHQ6IG51bWJlciB9fSBjb250ZW50UmVzaXplIGNhbiBiZSBkZWZhdWx0IHByZXZlbnRlZFxuICogQHByb3Age3sgY29udGVudDogQ29udGVudDsgd2lkdGg6IG51bWJlcjsgaGVpZ2h0OiBudW1iZXI7IHNsaWRlOiBTbGlkZSB9fSBpbWFnZVNpemVDaGFuZ2VcbiAqIEBwcm9wIHt7IGNvbnRlbnQ6IENvbnRlbnQgfX0gY29udGVudExhenlMb2FkIGNhbiBiZSBkZWZhdWx0IHByZXZlbnRlZFxuICogQHByb3Age3sgY29udGVudDogQ29udGVudCB9fSBjb250ZW50QXBwZW5kIGNhbiBiZSBkZWZhdWx0IHByZXZlbnRlZFxuICogQHByb3Age3sgY29udGVudDogQ29udGVudCB9fSBjb250ZW50QWN0aXZhdGUgY2FuIGJlIGRlZmF1bHQgcHJldmVudGVkXG4gKiBAcHJvcCB7eyBjb250ZW50OiBDb250ZW50IH19IGNvbnRlbnREZWFjdGl2YXRlIGNhbiBiZSBkZWZhdWx0IHByZXZlbnRlZFxuICogQHByb3Age3sgY29udGVudDogQ29udGVudCB9fSBjb250ZW50UmVtb3ZlIGNhbiBiZSBkZWZhdWx0IHByZXZlbnRlZFxuICogQHByb3Age3sgY29udGVudDogQ29udGVudCB9fSBjb250ZW50RGVzdHJveSBjYW4gYmUgZGVmYXVsdCBwcmV2ZW50ZWRcbiAqXG4gKlxuICogdW5kb2N1bWVudGVkXG4gKlxuICogQHByb3Age3sgcG9pbnQ6IFBvaW50OyBvcmlnaW5hbEV2ZW50OiBQb2ludGVyRXZlbnQgfX0gaW1hZ2VDbGlja0FjdGlvbiBjYW4gYmUgZGVmYXVsdCBwcmV2ZW50ZWRcbiAqIEBwcm9wIHt7IHBvaW50OiBQb2ludDsgb3JpZ2luYWxFdmVudDogUG9pbnRlckV2ZW50IH19IGJnQ2xpY2tBY3Rpb24gY2FuIGJlIGRlZmF1bHQgcHJldmVudGVkXG4gKiBAcHJvcCB7eyBwb2ludDogUG9pbnQ7IG9yaWdpbmFsRXZlbnQ6IFBvaW50ZXJFdmVudCB9fSB0YXBBY3Rpb24gY2FuIGJlIGRlZmF1bHQgcHJldmVudGVkXG4gKiBAcHJvcCB7eyBwb2ludDogUG9pbnQ7IG9yaWdpbmFsRXZlbnQ6IFBvaW50ZXJFdmVudCB9fSBkb3VibGVUYXBBY3Rpb24gY2FuIGJlIGRlZmF1bHQgcHJldmVudGVkXG4gKlxuICogQHByb3Age3sgb3JpZ2luYWxFdmVudDogS2V5Ym9hcmRFdmVudCB9fSBrZXlkb3duIGNhbiBiZSBkZWZhdWx0IHByZXZlbnRlZFxuICogQHByb3Age3sgeDogbnVtYmVyOyBkcmFnZ2luZzogYm9vbGVhbiB9fSBtb3ZlTWFpblNjcm9sbFxuICogQHByb3Age3sgc2xpZGU6IFNsaWRlIH19IGZpcnN0Wm9vbVBhblxuICogQHByb3Age3sgc2xpZGU6IFNsaWRlIHwgdW5kZWZpbmVkLCBkYXRhOiBTbGlkZURhdGEsIGluZGV4OiBudW1iZXIgfX0gZ2V0dGluZ0RhdGFcbiAqIEBwcm9wIHt1bmRlZmluZWR9IGJlZm9yZVJlc2l6ZVxuICogQHByb3Age3VuZGVmaW5lZH0gcmVzaXplXG4gKiBAcHJvcCB7dW5kZWZpbmVkfSB2aWV3cG9ydFNpemVcbiAqIEBwcm9wIHt1bmRlZmluZWR9IHVwZGF0ZVNjcm9sbE9mZnNldFxuICogQHByb3Age3sgc2xpZGU6IFNsaWRlIH19IHNsaWRlSW5pdFxuICogQHByb3Age3sgc2xpZGU6IFNsaWRlIH19IGFmdGVyU2V0Q29udGVudFxuICogQHByb3Age3sgc2xpZGU6IFNsaWRlIH19IHNsaWRlTG9hZFxuICogQHByb3Age3sgc2xpZGU6IFNsaWRlIH19IGFwcGVuZEhlYXZ5IGNhbiBiZSBkZWZhdWx0IHByZXZlbnRlZFxuICogQHByb3Age3sgc2xpZGU6IFNsaWRlIH19IGFwcGVuZEhlYXZ5Q29udGVudFxuICogQHByb3Age3sgc2xpZGU6IFNsaWRlIH19IHNsaWRlQWN0aXZhdGVcbiAqIEBwcm9wIHt7IHNsaWRlOiBTbGlkZSB9fSBzbGlkZURlYWN0aXZhdGVcbiAqIEBwcm9wIHt7IHNsaWRlOiBTbGlkZSB9fSBzbGlkZURlc3Ryb3lcbiAqIEBwcm9wIHt7IGRlc3Rab29tTGV2ZWw6IG51bWJlciwgY2VudGVyUG9pbnQ6IFBvaW50IHwgdW5kZWZpbmVkLCB0cmFuc2l0aW9uRHVyYXRpb246IG51bWJlciB8IGZhbHNlIHwgdW5kZWZpbmVkIH19IGJlZm9yZVpvb21Ub1xuICogQHByb3Age3sgc2xpZGU6IFNsaWRlIH19IHpvb21QYW5VcGRhdGVcbiAqIEBwcm9wIHt7IHNsaWRlOiBTbGlkZSB9fSBpbml0aWFsWm9vbVBhblxuICogQHByb3Age3sgc2xpZGU6IFNsaWRlIH19IGNhbGNTbGlkZVNpemVcbiAqIEBwcm9wIHt1bmRlZmluZWR9IHJlc29sdXRpb25DaGFuZ2VkXG4gKiBAcHJvcCB7eyBvcmlnaW5hbEV2ZW50OiBXaGVlbEV2ZW50IH19IHdoZWVsIGNhbiBiZSBkZWZhdWx0IHByZXZlbnRlZFxuICogQHByb3Age3sgY29udGVudDogQ29udGVudCB9fSBjb250ZW50QXBwZW5kSW1hZ2UgY2FuIGJlIGRlZmF1bHQgcHJldmVudGVkXG4gKiBAcHJvcCB7eyBpbmRleDogbnVtYmVyOyBpdGVtRGF0YTogU2xpZGVEYXRhIH19IGxhenlMb2FkU2xpZGUgY2FuIGJlIGRlZmF1bHQgcHJldmVudGVkXG4gKiBAcHJvcCB7dW5kZWZpbmVkfSBsYXp5TG9hZFxuICogQHByb3Age3sgc2xpZGU6IFNsaWRlIH19IGNhbGNCb3VuZHNcbiAqIEBwcm9wIHt7IHpvb21MZXZlbHM6IFpvb21MZXZlbCwgc2xpZGVEYXRhOiBTbGlkZURhdGEgfX0gem9vbUxldmVsc1VwZGF0ZVxuICpcbiAqXG4gKiBsZWdhY3lcbiAqXG4gKiBAcHJvcCB7dW5kZWZpbmVkfSBpbml0XG4gKiBAcHJvcCB7dW5kZWZpbmVkfSBpbml0aWFsWm9vbUluXG4gKiBAcHJvcCB7dW5kZWZpbmVkfSBpbml0aWFsWm9vbU91dFxuICogQHByb3Age3VuZGVmaW5lZH0gaW5pdGlhbFpvb21JbkVuZFxuICogQHByb3Age3VuZGVmaW5lZH0gaW5pdGlhbFpvb21PdXRFbmRcbiAqIEBwcm9wIHt7IGRhdGFTb3VyY2U6IERhdGFTb3VyY2UgfCB1bmRlZmluZWQsIG51bUl0ZW1zOiBudW1iZXIgfX0gbnVtSXRlbXNcbiAqIEBwcm9wIHt7IGl0ZW1EYXRhOiBTbGlkZURhdGE7IGluZGV4OiBudW1iZXIgfX0gaXRlbURhdGFcbiAqIEBwcm9wIHt7IGluZGV4OiBudW1iZXIsIGl0ZW1EYXRhOiBTbGlkZURhdGEsIGluc3RhbmNlOiBQaG90b1N3aXBlIH19IHRodW1iQm91bmRzXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBQaG90b1N3aXBlRmlsdGVyc01hcCBodHRwczovL3Bob3Rvc3dpcGUuY29tL2ZpbHRlcnMvXG4gKlxuICogQHByb3AgeyhudW1JdGVtczogbnVtYmVyLCBkYXRhU291cmNlOiBEYXRhU291cmNlIHwgdW5kZWZpbmVkKSA9PiBudW1iZXJ9IG51bUl0ZW1zXG4gKiBNb2RpZnkgdGhlIHRvdGFsIGFtb3VudCBvZiBzbGlkZXMuIEV4YW1wbGUgb24gRGF0YSBzb3VyY2VzIHBhZ2UuXG4gKiBodHRwczovL3Bob3Rvc3dpcGUuY29tL2ZpbHRlcnMvI251bWl0ZW1zXG4gKlxuICogQHByb3AgeyhpdGVtRGF0YTogU2xpZGVEYXRhLCBpbmRleDogbnVtYmVyKSA9PiBTbGlkZURhdGF9IGl0ZW1EYXRhXG4gKiBNb2RpZnkgc2xpZGUgaXRlbSBkYXRhLiBFeGFtcGxlIG9uIERhdGEgc291cmNlcyBwYWdlLlxuICogaHR0cHM6Ly9waG90b3N3aXBlLmNvbS9maWx0ZXJzLyNpdGVtZGF0YVxuICpcbiAqIEBwcm9wIHsoaXRlbURhdGE6IFNsaWRlRGF0YSwgZWxlbWVudDogSFRNTEVsZW1lbnQsIGxpbmtFbDogSFRNTEFuY2hvckVsZW1lbnQpID0+IFNsaWRlRGF0YX0gZG9tSXRlbURhdGFcbiAqIE1vZGlmeSBpdGVtIGRhdGEgd2hlbiBpdCdzIHBhcnNlZCBmcm9tIERPTSBlbGVtZW50LiBFeGFtcGxlIG9uIERhdGEgc291cmNlcyBwYWdlLlxuICogaHR0cHM6Ly9waG90b3N3aXBlLmNvbS9maWx0ZXJzLyNkb21pdGVtZGF0YVxuICpcbiAqIEBwcm9wIHsoY2xpY2tlZEluZGV4OiBudW1iZXIsIGU6IE1vdXNlRXZlbnQsIGluc3RhbmNlOiBQaG90b1N3aXBlTGlnaHRib3gpID0+IG51bWJlcn0gY2xpY2tlZEluZGV4XG4gKiBNb2RpZnkgY2xpY2tlZCBnYWxsZXJ5IGl0ZW0gaW5kZXguXG4gKiBodHRwczovL3Bob3Rvc3dpcGUuY29tL2ZpbHRlcnMvI2NsaWNrZWRpbmRleFxuICpcbiAqIEBwcm9wIHsocGxhY2Vob2xkZXJTcmM6IHN0cmluZyB8IGZhbHNlLCBjb250ZW50OiBDb250ZW50KSA9PiBzdHJpbmcgfCBmYWxzZX0gcGxhY2Vob2xkZXJTcmNcbiAqIE1vZGlmeSBwbGFjZWhvbGRlciBpbWFnZSBzb3VyY2UuXG4gKiBodHRwczovL3Bob3Rvc3dpcGUuY29tL2ZpbHRlcnMvI3BsYWNlaG9sZGVyc3JjXG4gKlxuICogQHByb3Ageyhpc0NvbnRlbnRMb2FkaW5nOiBib29sZWFuLCBjb250ZW50OiBDb250ZW50KSA9PiBib29sZWFufSBpc0NvbnRlbnRMb2FkaW5nXG4gKiBNb2RpZnkgaWYgdGhlIGNvbnRlbnQgaXMgY3VycmVudGx5IGxvYWRpbmcuXG4gKiBodHRwczovL3Bob3Rvc3dpcGUuY29tL2ZpbHRlcnMvI2lzY29udGVudGxvYWRpbmdcbiAqXG4gKiBAcHJvcCB7KGlzQ29udGVudFpvb21hYmxlOiBib29sZWFuLCBjb250ZW50OiBDb250ZW50KSA9PiBib29sZWFufSBpc0NvbnRlbnRab29tYWJsZVxuICogTW9kaWZ5IGlmIHRoZSBjb250ZW50IGNhbiBiZSB6b29tZWQuXG4gKiBodHRwczovL3Bob3Rvc3dpcGUuY29tL2ZpbHRlcnMvI2lzY29udGVudHpvb21hYmxlXG4gKlxuICogQHByb3Ageyh1c2VDb250ZW50UGxhY2Vob2xkZXI6IGJvb2xlYW4sIGNvbnRlbnQ6IENvbnRlbnQpID0+IGJvb2xlYW59IHVzZUNvbnRlbnRQbGFjZWhvbGRlclxuICogTW9kaWZ5IGlmIHRoZSBwbGFjZWhvbGRlciBzaG91bGQgYmUgdXNlZCBmb3IgdGhlIGNvbnRlbnQuXG4gKiBodHRwczovL3Bob3Rvc3dpcGUuY29tL2ZpbHRlcnMvI3VzZWNvbnRlbnRwbGFjZWhvbGRlclxuICpcbiAqIEBwcm9wIHsoaXNLZWVwaW5nUGxhY2Vob2xkZXI6IGJvb2xlYW4sIGNvbnRlbnQ6IENvbnRlbnQpID0+IGJvb2xlYW59IGlzS2VlcGluZ1BsYWNlaG9sZGVyXG4gKiBNb2RpZnkgaWYgdGhlIHBsYWNlaG9sZGVyIHNob3VsZCBiZSBrZXB0IGFmdGVyIHRoZSBjb250ZW50IGlzIGxvYWRlZC5cbiAqIGh0dHBzOi8vcGhvdG9zd2lwZS5jb20vZmlsdGVycy8jaXNrZWVwaW5ncGxhY2Vob2xkZXJcbiAqXG4gKlxuICogQHByb3Ageyhjb250ZW50RXJyb3JFbGVtZW50OiBIVE1MRWxlbWVudCwgY29udGVudDogQ29udGVudCkgPT4gSFRNTEVsZW1lbnR9IGNvbnRlbnRFcnJvckVsZW1lbnRcbiAqIE1vZGlmeSBhbiBlbGVtZW50IHdoZW4gdGhlIGNvbnRlbnQgaGFzIGVycm9yIHN0YXRlIChmb3IgZXhhbXBsZSwgaWYgaW1hZ2UgY2Fubm90IGJlIGxvYWRlZCkuXG4gKiBodHRwczovL3Bob3Rvc3dpcGUuY29tL2ZpbHRlcnMvI2NvbnRlbnRlcnJvcmVsZW1lbnRcbiAqXG4gKiBAcHJvcCB7KGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBkYXRhOiBVSUVsZW1lbnREYXRhKSA9PiBIVE1MRWxlbWVudH0gdWlFbGVtZW50XG4gKiBNb2RpZnkgYSBVSSBlbGVtZW50IHRoYXQncyBiZWluZyBjcmVhdGVkLlxuICogaHR0cHM6Ly9waG90b3N3aXBlLmNvbS9maWx0ZXJzLyN1aWVsZW1lbnRcbiAqXG4gKiBAcHJvcCB7KHRodW1ibmFpbDogSFRNTEVsZW1lbnQgfCBudWxsIHwgdW5kZWZpbmVkLCBpdGVtRGF0YTogU2xpZGVEYXRhLCBpbmRleDogbnVtYmVyKSA9PiBIVE1MRWxlbWVudH0gdGh1bWJFbFxuICogTW9kaWZ5IHRoZSB0aHVtYm5haWwgZWxlbWVudCBmcm9tIHdoaWNoIG9wZW5pbmcgem9vbSBhbmltYXRpb24gc3RhcnRzIG9yIGVuZHMuXG4gKiBodHRwczovL3Bob3Rvc3dpcGUuY29tL2ZpbHRlcnMvI3RodW1iZWxcbiAqXG4gKiBAcHJvcCB7KHRodW1iQm91bmRzOiBCb3VuZHMgfCB1bmRlZmluZWQsIGl0ZW1EYXRhOiBTbGlkZURhdGEsIGluZGV4OiBudW1iZXIpID0+IEJvdW5kc30gdGh1bWJCb3VuZHNcbiAqIE1vZGlmeSB0aGUgdGh1bWJuYWlsIGJvdW5kcyBmcm9tIHdoaWNoIG9wZW5pbmcgem9vbSBhbmltYXRpb24gc3RhcnRzIG9yIGVuZHMuXG4gKiBodHRwczovL3Bob3Rvc3dpcGUuY29tL2ZpbHRlcnMvI3RodW1iYm91bmRzXG4gKlxuICogQHByb3AgeyhzcmNzZXRTaXplc1dpZHRoOiBudW1iZXIsIGNvbnRlbnQ6IENvbnRlbnQpID0+IG51bWJlcn0gc3Jjc2V0U2l6ZXNXaWR0aFxuICpcbiAqIEBwcm9wIHsocHJldmVudFBvaW50ZXJFdmVudDogYm9vbGVhbiwgZXZlbnQ6IFBvaW50ZXJFdmVudCwgcG9pbnRlclR5cGU6IHN0cmluZykgPT4gYm9vbGVhbn0gcHJldmVudFBvaW50ZXJFdmVudFxuICpcbiAqL1xuXG4vKipcbiAqIEB0ZW1wbGF0ZSB7a2V5b2YgUGhvdG9Td2lwZUZpbHRlcnNNYXB9IFRcbiAqIEB0eXBlZGVmIHt7IGZuOiBQaG90b1N3aXBlRmlsdGVyc01hcFtUXSwgcHJpb3JpdHk6IG51bWJlciB9fSBGaWx0ZXJcbiAqL1xuXG4vKipcbiAqIEB0ZW1wbGF0ZSB7a2V5b2YgUGhvdG9Td2lwZUV2ZW50c01hcH0gVFxuICogQHR5cGVkZWYge1Bob3RvU3dpcGVFdmVudHNNYXBbVF0gZXh0ZW5kcyB1bmRlZmluZWQgPyBQaG90b1N3aXBlRXZlbnQ8VD4gOiBQaG90b1N3aXBlRXZlbnQ8VD4gJiBQaG90b1N3aXBlRXZlbnRzTWFwW1RdfSBBdWdtZW50ZWRFdmVudFxuICovXG5cbi8qKlxuICogQHRlbXBsYXRlIHtrZXlvZiBQaG90b1N3aXBlRXZlbnRzTWFwfSBUXG4gKiBAdHlwZWRlZiB7KGV2ZW50OiBBdWdtZW50ZWRFdmVudDxUPikgPT4gdm9pZH0gRXZlbnRDYWxsYmFja1xuICovXG5cbi8qKlxuICogQmFzZSBQaG90b1N3aXBlIGV2ZW50IG9iamVjdFxuICpcbiAqIEB0ZW1wbGF0ZSB7a2V5b2YgUGhvdG9Td2lwZUV2ZW50c01hcH0gVFxuICovXG5jbGFzcyBQaG90b1N3aXBlRXZlbnQge1xuICAvKipcbiAgICogQHBhcmFtIHtUfSB0eXBlXG4gICAqIEBwYXJhbSB7UGhvdG9Td2lwZUV2ZW50c01hcFtUXX0gW2RldGFpbHNdXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih0eXBlLCBkZXRhaWxzKSB7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPSBmYWxzZTtcblxuICAgIGlmIChkZXRhaWxzKSB7XG4gICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGRldGFpbHMpO1xuICAgIH1cbiAgfVxuXG4gIHByZXZlbnREZWZhdWx0KCkge1xuICAgIHRoaXMuZGVmYXVsdFByZXZlbnRlZCA9IHRydWU7XG4gIH1cblxufVxuLyoqXG4gKiBQaG90b1N3aXBlIGJhc2UgY2xhc3MgdGhhdCBjYW4gbGlzdGVuIGFuZCBkaXNwYXRjaCBmb3IgZXZlbnRzLlxuICogU2hhcmVkIGJ5IFBob3RvU3dpcGUgQ29yZSBhbmQgUGhvdG9Td2lwZSBMaWdodGJveCwgZXh0ZW5kZWQgYnkgYmFzZS5qc1xuICovXG5cblxuY2xhc3MgRXZlbnRhYmxlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge3sgW1QgaW4ga2V5b2YgUGhvdG9Td2lwZUV2ZW50c01hcF0/OiAoKGV2ZW50OiBBdWdtZW50ZWRFdmVudDxUPikgPT4gdm9pZClbXSB9fVxuICAgICAqL1xuICAgIHRoaXMuX2xpc3RlbmVycyA9IHt9O1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHt7IFtUIGluIGtleW9mIFBob3RvU3dpcGVGaWx0ZXJzTWFwXT86IEZpbHRlcjxUPltdIH19XG4gICAgICovXG5cbiAgICB0aGlzLl9maWx0ZXJzID0ge307XG4gICAgLyoqIEB0eXBlIHtQaG90b1N3aXBlIHwgdW5kZWZpbmVkfSAqL1xuXG4gICAgdGhpcy5wc3dwID0gdW5kZWZpbmVkO1xuICAgIC8qKiBAdHlwZSB7UGhvdG9Td2lwZU9wdGlvbnMgfCB1bmRlZmluZWR9ICovXG5cbiAgICB0aGlzLm9wdGlvbnMgPSB1bmRlZmluZWQ7XG4gIH1cbiAgLyoqXG4gICAqIEB0ZW1wbGF0ZSB7a2V5b2YgUGhvdG9Td2lwZUZpbHRlcnNNYXB9IFRcbiAgICogQHBhcmFtIHtUfSBuYW1lXG4gICAqIEBwYXJhbSB7UGhvdG9Td2lwZUZpbHRlcnNNYXBbVF19IGZuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwcmlvcml0eVxuICAgKi9cblxuXG4gIGFkZEZpbHRlcihuYW1lLCBmbiwgcHJpb3JpdHkgPSAxMDApIHtcbiAgICB2YXIgX3RoaXMkX2ZpbHRlcnMkbmFtZSwgX3RoaXMkX2ZpbHRlcnMkbmFtZTIsIF90aGlzJHBzd3A7XG5cbiAgICBpZiAoIXRoaXMuX2ZpbHRlcnNbbmFtZV0pIHtcbiAgICAgIHRoaXMuX2ZpbHRlcnNbbmFtZV0gPSBbXTtcbiAgICB9XG5cbiAgICAoX3RoaXMkX2ZpbHRlcnMkbmFtZSA9IHRoaXMuX2ZpbHRlcnNbbmFtZV0pID09PSBudWxsIHx8IF90aGlzJF9maWx0ZXJzJG5hbWUgPT09IHZvaWQgMCB8fCBfdGhpcyRfZmlsdGVycyRuYW1lLnB1c2goe1xuICAgICAgZm4sXG4gICAgICBwcmlvcml0eVxuICAgIH0pO1xuICAgIChfdGhpcyRfZmlsdGVycyRuYW1lMiA9IHRoaXMuX2ZpbHRlcnNbbmFtZV0pID09PSBudWxsIHx8IF90aGlzJF9maWx0ZXJzJG5hbWUyID09PSB2b2lkIDAgfHwgX3RoaXMkX2ZpbHRlcnMkbmFtZTIuc29ydCgoZjEsIGYyKSA9PiBmMS5wcmlvcml0eSAtIGYyLnByaW9yaXR5KTtcbiAgICAoX3RoaXMkcHN3cCA9IHRoaXMucHN3cCkgPT09IG51bGwgfHwgX3RoaXMkcHN3cCA9PT0gdm9pZCAwIHx8IF90aGlzJHBzd3AuYWRkRmlsdGVyKG5hbWUsIGZuLCBwcmlvcml0eSk7XG4gIH1cbiAgLyoqXG4gICAqIEB0ZW1wbGF0ZSB7a2V5b2YgUGhvdG9Td2lwZUZpbHRlcnNNYXB9IFRcbiAgICogQHBhcmFtIHtUfSBuYW1lXG4gICAqIEBwYXJhbSB7UGhvdG9Td2lwZUZpbHRlcnNNYXBbVF19IGZuXG4gICAqL1xuXG5cbiAgcmVtb3ZlRmlsdGVyKG5hbWUsIGZuKSB7XG4gICAgaWYgKHRoaXMuX2ZpbHRlcnNbbmFtZV0pIHtcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgIHRoaXMuX2ZpbHRlcnNbbmFtZV0gPSB0aGlzLl9maWx0ZXJzW25hbWVdLmZpbHRlcihmaWx0ZXIgPT4gZmlsdGVyLmZuICE9PSBmbik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHN3cCkge1xuICAgICAgdGhpcy5wc3dwLnJlbW92ZUZpbHRlcihuYW1lLCBmbik7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAdGVtcGxhdGUge2tleW9mIFBob3RvU3dpcGVGaWx0ZXJzTWFwfSBUXG4gICAqIEBwYXJhbSB7VH0gbmFtZVxuICAgKiBAcGFyYW0ge1BhcmFtZXRlcnM8UGhvdG9Td2lwZUZpbHRlcnNNYXBbVF0+fSBhcmdzXG4gICAqIEByZXR1cm5zIHtQYXJhbWV0ZXJzPFBob3RvU3dpcGVGaWx0ZXJzTWFwW1RdPlswXX1cbiAgICovXG5cblxuICBhcHBseUZpbHRlcnMobmFtZSwgLi4uYXJncykge1xuICAgIHZhciBfdGhpcyRfZmlsdGVycyRuYW1lMztcblxuICAgIChfdGhpcyRfZmlsdGVycyRuYW1lMyA9IHRoaXMuX2ZpbHRlcnNbbmFtZV0pID09PSBudWxsIHx8IF90aGlzJF9maWx0ZXJzJG5hbWUzID09PSB2b2lkIDAgfHwgX3RoaXMkX2ZpbHRlcnMkbmFtZTMuZm9yRWFjaChmaWx0ZXIgPT4ge1xuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgYXJnc1swXSA9IGZpbHRlci5mbi5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9KTtcbiAgICByZXR1cm4gYXJnc1swXTtcbiAgfVxuICAvKipcbiAgICogQHRlbXBsYXRlIHtrZXlvZiBQaG90b1N3aXBlRXZlbnRzTWFwfSBUXG4gICAqIEBwYXJhbSB7VH0gbmFtZVxuICAgKiBAcGFyYW0ge0V2ZW50Q2FsbGJhY2s8VD59IGZuXG4gICAqL1xuXG5cbiAgb24obmFtZSwgZm4pIHtcbiAgICB2YXIgX3RoaXMkX2xpc3RlbmVycyRuYW1lLCBfdGhpcyRwc3dwMjtcblxuICAgIGlmICghdGhpcy5fbGlzdGVuZXJzW25hbWVdKSB7XG4gICAgICB0aGlzLl9saXN0ZW5lcnNbbmFtZV0gPSBbXTtcbiAgICB9XG5cbiAgICAoX3RoaXMkX2xpc3RlbmVycyRuYW1lID0gdGhpcy5fbGlzdGVuZXJzW25hbWVdKSA9PT0gbnVsbCB8fCBfdGhpcyRfbGlzdGVuZXJzJG5hbWUgPT09IHZvaWQgMCB8fCBfdGhpcyRfbGlzdGVuZXJzJG5hbWUucHVzaChmbik7IC8vIFdoZW4gYmluZGluZyBldmVudHMgdG8gbGlnaHRib3gsXG4gICAgLy8gYWxzbyBiaW5kIGV2ZW50cyB0byBQaG90b1N3aXBlIENvcmUsXG4gICAgLy8gaWYgaXQncyBvcGVuLlxuXG4gICAgKF90aGlzJHBzd3AyID0gdGhpcy5wc3dwKSA9PT0gbnVsbCB8fCBfdGhpcyRwc3dwMiA9PT0gdm9pZCAwIHx8IF90aGlzJHBzd3AyLm9uKG5hbWUsIGZuKTtcbiAgfVxuICAvKipcbiAgICogQHRlbXBsYXRlIHtrZXlvZiBQaG90b1N3aXBlRXZlbnRzTWFwfSBUXG4gICAqIEBwYXJhbSB7VH0gbmFtZVxuICAgKiBAcGFyYW0ge0V2ZW50Q2FsbGJhY2s8VD59IGZuXG4gICAqL1xuXG5cbiAgb2ZmKG5hbWUsIGZuKSB7XG4gICAgdmFyIF90aGlzJHBzd3AzO1xuXG4gICAgaWYgKHRoaXMuX2xpc3RlbmVyc1tuYW1lXSkge1xuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgdGhpcy5fbGlzdGVuZXJzW25hbWVdID0gdGhpcy5fbGlzdGVuZXJzW25hbWVdLmZpbHRlcihsaXN0ZW5lciA9PiBmbiAhPT0gbGlzdGVuZXIpO1xuICAgIH1cblxuICAgIChfdGhpcyRwc3dwMyA9IHRoaXMucHN3cCkgPT09IG51bGwgfHwgX3RoaXMkcHN3cDMgPT09IHZvaWQgMCB8fCBfdGhpcyRwc3dwMy5vZmYobmFtZSwgZm4pO1xuICB9XG4gIC8qKlxuICAgKiBAdGVtcGxhdGUge2tleW9mIFBob3RvU3dpcGVFdmVudHNNYXB9IFRcbiAgICogQHBhcmFtIHtUfSBuYW1lXG4gICAqIEBwYXJhbSB7UGhvdG9Td2lwZUV2ZW50c01hcFtUXX0gW2RldGFpbHNdXG4gICAqIEByZXR1cm5zIHtBdWdtZW50ZWRFdmVudDxUPn1cbiAgICovXG5cblxuICBkaXNwYXRjaChuYW1lLCBkZXRhaWxzKSB7XG4gICAgdmFyIF90aGlzJF9saXN0ZW5lcnMkbmFtZTI7XG5cbiAgICBpZiAodGhpcy5wc3dwKSB7XG4gICAgICByZXR1cm4gdGhpcy5wc3dwLmRpc3BhdGNoKG5hbWUsIGRldGFpbHMpO1xuICAgIH1cblxuICAgIGNvbnN0IGV2ZW50ID1cbiAgICAvKiogQHR5cGUge0F1Z21lbnRlZEV2ZW50PFQ+fSAqL1xuICAgIG5ldyBQaG90b1N3aXBlRXZlbnQobmFtZSwgZGV0YWlscyk7XG4gICAgKF90aGlzJF9saXN0ZW5lcnMkbmFtZTIgPSB0aGlzLl9saXN0ZW5lcnNbbmFtZV0pID09PSBudWxsIHx8IF90aGlzJF9saXN0ZW5lcnMkbmFtZTIgPT09IHZvaWQgMCB8fCBfdGhpcyRfbGlzdGVuZXJzJG5hbWUyLmZvckVhY2gobGlzdGVuZXIgPT4ge1xuICAgICAgbGlzdGVuZXIuY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGV2ZW50O1xuICB9XG5cbn1cblxuY2xhc3MgUGxhY2Vob2xkZXIge1xuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmcgfCBmYWxzZX0gaW1hZ2VTcmNcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyXG4gICAqL1xuICBjb25zdHJ1Y3RvcihpbWFnZVNyYywgY29udGFpbmVyKSB7XG4gICAgLy8gQ3JlYXRlIHBsYWNlaG9sZGVyXG4gICAgLy8gKHN0cmV0Y2hlZCB0aHVtYm5haWwgb3Igc2ltcGxlIGRpdiBiZWhpbmQgdGhlIG1haW4gaW1hZ2UpXG5cbiAgICAvKiogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnQgfCBIVE1MRGl2RWxlbWVudCB8IG51bGx9ICovXG4gICAgdGhpcy5lbGVtZW50ID0gY3JlYXRlRWxlbWVudCgncHN3cF9faW1nIHBzd3BfX2ltZy0tcGxhY2Vob2xkZXInLCBpbWFnZVNyYyA/ICdpbWcnIDogJ2RpdicsIGNvbnRhaW5lcik7XG5cbiAgICBpZiAoaW1hZ2VTcmMpIHtcbiAgICAgIGNvbnN0IGltZ0VsID1cbiAgICAgIC8qKiBAdHlwZSB7SFRNTEltYWdlRWxlbWVudH0gKi9cbiAgICAgIHRoaXMuZWxlbWVudDtcbiAgICAgIGltZ0VsLmRlY29kaW5nID0gJ2FzeW5jJztcbiAgICAgIGltZ0VsLmFsdCA9ICcnO1xuICAgICAgaW1nRWwuc3JjID0gaW1hZ2VTcmM7XG4gICAgICBpbWdFbC5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAncHJlc2VudGF0aW9uJyk7XG4gICAgfVxuXG4gICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGhcbiAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodFxuICAgKi9cblxuXG4gIHNldERpc3BsYXllZFNpemUod2lkdGgsIGhlaWdodCkge1xuICAgIGlmICghdGhpcy5lbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZWxlbWVudC50YWdOYW1lID09PSAnSU1HJykge1xuICAgICAgLy8gVXNlIHRyYW5zZm9ybSBzY2FsZSgpIHRvIG1vZGlmeSBpbWcgcGxhY2Vob2xkZXIgc2l6ZVxuICAgICAgLy8gKGluc3RlYWQgb2YgY2hhbmdpbmcgd2lkdGgvaGVpZ2h0IGRpcmVjdGx5KS5cbiAgICAgIC8vIFRoaXMgaGVscHMgd2l0aCBwZXJmb3JtYW5jZSwgc3BlY2lmaWNhbGx5IGluIGlPUzE1IFNhZmFyaS5cbiAgICAgIHNldFdpZHRoSGVpZ2h0KHRoaXMuZWxlbWVudCwgMjUwLCAnYXV0bycpO1xuICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9ICcwIDAnO1xuICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9IHRvVHJhbnNmb3JtU3RyaW5nKDAsIDAsIHdpZHRoIC8gMjUwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0V2lkdGhIZWlnaHQodGhpcy5lbGVtZW50LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICB9XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHZhciBfdGhpcyRlbGVtZW50O1xuXG4gICAgaWYgKChfdGhpcyRlbGVtZW50ID0gdGhpcy5lbGVtZW50KSAhPT0gbnVsbCAmJiBfdGhpcyRlbGVtZW50ICE9PSB2b2lkIDAgJiYgX3RoaXMkZWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG59XG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuL3NsaWRlLmpzJykuZGVmYXVsdH0gU2xpZGUgKi9cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4vc2xpZGUuanMnKS5TbGlkZURhdGF9IFNsaWRlRGF0YSAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vY29yZS9iYXNlLmpzJykuZGVmYXVsdH0gUGhvdG9Td2lwZUJhc2UgKi9cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4uL3V0aWwvdXRpbC5qcycpLkxvYWRTdGF0ZX0gTG9hZFN0YXRlICovXG5cbmNsYXNzIENvbnRlbnQge1xuICAvKipcbiAgICogQHBhcmFtIHtTbGlkZURhdGF9IGl0ZW1EYXRhIFNsaWRlIGRhdGFcbiAgICogQHBhcmFtIHtQaG90b1N3aXBlQmFzZX0gaW5zdGFuY2UgUGhvdG9Td2lwZSBvciBQaG90b1N3aXBlTGlnaHRib3ggaW5zdGFuY2VcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4XG4gICAqL1xuICBjb25zdHJ1Y3RvcihpdGVtRGF0YSwgaW5zdGFuY2UsIGluZGV4KSB7XG4gICAgdGhpcy5pbnN0YW5jZSA9IGluc3RhbmNlO1xuICAgIHRoaXMuZGF0YSA9IGl0ZW1EYXRhO1xuICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgICAvKiogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnQgfCBIVE1MRGl2RWxlbWVudCB8IHVuZGVmaW5lZH0gKi9cblxuICAgIHRoaXMuZWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICAvKiogQHR5cGUge1BsYWNlaG9sZGVyIHwgdW5kZWZpbmVkfSAqL1xuXG4gICAgdGhpcy5wbGFjZWhvbGRlciA9IHVuZGVmaW5lZDtcbiAgICAvKiogQHR5cGUge1NsaWRlIHwgdW5kZWZpbmVkfSAqL1xuXG4gICAgdGhpcy5zbGlkZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmRpc3BsYXllZEltYWdlV2lkdGggPSAwO1xuICAgIHRoaXMuZGlzcGxheWVkSW1hZ2VIZWlnaHQgPSAwO1xuICAgIHRoaXMud2lkdGggPSBOdW1iZXIodGhpcy5kYXRhLncpIHx8IE51bWJlcih0aGlzLmRhdGEud2lkdGgpIHx8IDA7XG4gICAgdGhpcy5oZWlnaHQgPSBOdW1iZXIodGhpcy5kYXRhLmgpIHx8IE51bWJlcih0aGlzLmRhdGEuaGVpZ2h0KSB8fCAwO1xuICAgIHRoaXMuaXNBdHRhY2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuaGFzU2xpZGUgPSBmYWxzZTtcbiAgICB0aGlzLmlzRGVjb2RpbmcgPSBmYWxzZTtcbiAgICAvKiogQHR5cGUge0xvYWRTdGF0ZX0gKi9cblxuICAgIHRoaXMuc3RhdGUgPSBMT0FEX1NUQVRFLklETEU7XG5cbiAgICBpZiAodGhpcy5kYXRhLnR5cGUpIHtcbiAgICAgIHRoaXMudHlwZSA9IHRoaXMuZGF0YS50eXBlO1xuICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhLnNyYykge1xuICAgICAgdGhpcy50eXBlID0gJ2ltYWdlJztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50eXBlID0gJ2h0bWwnO1xuICAgIH1cblxuICAgIHRoaXMuaW5zdGFuY2UuZGlzcGF0Y2goJ2NvbnRlbnRJbml0Jywge1xuICAgICAgY29udGVudDogdGhpc1xuICAgIH0pO1xuICB9XG5cbiAgcmVtb3ZlUGxhY2Vob2xkZXIoKSB7XG4gICAgaWYgKHRoaXMucGxhY2Vob2xkZXIgJiYgIXRoaXMua2VlcFBsYWNlaG9sZGVyKCkpIHtcbiAgICAgIC8vIFdpdGggZGVsYXksIGFzIGltYWdlIG1pZ2h0IGJlIGxvYWRlZCwgYnV0IG5vdCByZW5kZXJlZFxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgdGhpcy5wbGFjZWhvbGRlci5kZXN0cm95KCk7XG4gICAgICAgICAgdGhpcy5wbGFjZWhvbGRlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfSwgMTAwMCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBQcmVsb2FkIGNvbnRlbnRcbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBpc0xhenlcbiAgICogQHBhcmFtIHtib29sZWFufSBbcmVsb2FkXVxuICAgKi9cblxuXG4gIGxvYWQoaXNMYXp5LCByZWxvYWQpIHtcbiAgICBpZiAodGhpcy5zbGlkZSAmJiB0aGlzLnVzZVBsYWNlaG9sZGVyKCkpIHtcbiAgICAgIGlmICghdGhpcy5wbGFjZWhvbGRlcikge1xuICAgICAgICBjb25zdCBwbGFjZWhvbGRlclNyYyA9IHRoaXMuaW5zdGFuY2UuYXBwbHlGaWx0ZXJzKCdwbGFjZWhvbGRlclNyYycsIC8vIHVzZSAgaW1hZ2UtYmFzZWQgcGxhY2Vob2xkZXIgb25seSBmb3IgdGhlIGZpcnN0IHNsaWRlLFxuICAgICAgICAvLyBhcyByZW5kZXJpbmcgKGV2ZW4gc21hbGwgc3RyZXRjaGVkIHRodW1ibmFpbCkgaXMgYW4gZXhwZW5zaXZlIG9wZXJhdGlvblxuICAgICAgICB0aGlzLmRhdGEubXNyYyAmJiB0aGlzLnNsaWRlLmlzRmlyc3RTbGlkZSA/IHRoaXMuZGF0YS5tc3JjIDogZmFsc2UsIHRoaXMpO1xuICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gbmV3IFBsYWNlaG9sZGVyKHBsYWNlaG9sZGVyU3JjLCB0aGlzLnNsaWRlLmNvbnRhaW5lcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBwbGFjZWhvbGRlckVsID0gdGhpcy5wbGFjZWhvbGRlci5lbGVtZW50OyAvLyBBZGQgcGxhY2Vob2xkZXIgdG8gRE9NIGlmIGl0IHdhcyBhbHJlYWR5IGNyZWF0ZWRcblxuICAgICAgICBpZiAocGxhY2Vob2xkZXJFbCAmJiAhcGxhY2Vob2xkZXJFbC5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy5zbGlkZS5jb250YWluZXIucHJlcGVuZChwbGFjZWhvbGRlckVsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmVsZW1lbnQgJiYgIXJlbG9hZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmluc3RhbmNlLmRpc3BhdGNoKCdjb250ZW50TG9hZCcsIHtcbiAgICAgIGNvbnRlbnQ6IHRoaXMsXG4gICAgICBpc0xhenlcbiAgICB9KS5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNJbWFnZUNvbnRlbnQoKSkge1xuICAgICAgdGhpcy5lbGVtZW50ID0gY3JlYXRlRWxlbWVudCgncHN3cF9faW1nJywgJ2ltZycpOyAvLyBTdGFydCBsb2FkaW5nIG9ubHkgYWZ0ZXIgd2lkdGggaXMgZGVmaW5lZCwgYXMgc2l6ZXMgbWlnaHQgZGVwZW5kIG9uIGl0LlxuICAgICAgLy8gRHVlIHRvIFNhZmFyaSBmZWF0dXJlLCB3ZSBtdXN0IGRlZmluZSBzaXplcyBiZWZvcmUgc3Jjc2V0LlxuXG4gICAgICBpZiAodGhpcy5kaXNwbGF5ZWRJbWFnZVdpZHRoKSB7XG4gICAgICAgIHRoaXMubG9hZEltYWdlKGlzTGF6eSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoJ3Bzd3BfX2NvbnRlbnQnLCAnZGl2Jyk7XG4gICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5kYXRhLmh0bWwgfHwgJyc7XG4gICAgfVxuXG4gICAgaWYgKHJlbG9hZCAmJiB0aGlzLnNsaWRlKSB7XG4gICAgICB0aGlzLnNsaWRlLnVwZGF0ZUNvbnRlbnRTaXplKHRydWUpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogUHJlbG9hZCBpbWFnZVxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzTGF6eVxuICAgKi9cblxuXG4gIGxvYWRJbWFnZShpc0xhenkpIHtcbiAgICB2YXIgX3RoaXMkZGF0YSRzcmMsIF90aGlzJGRhdGEkYWx0O1xuXG4gICAgaWYgKCF0aGlzLmlzSW1hZ2VDb250ZW50KCkgfHwgIXRoaXMuZWxlbWVudCB8fCB0aGlzLmluc3RhbmNlLmRpc3BhdGNoKCdjb250ZW50TG9hZEltYWdlJywge1xuICAgICAgY29udGVudDogdGhpcyxcbiAgICAgIGlzTGF6eVxuICAgIH0pLmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBpbWFnZUVsZW1lbnQgPVxuICAgIC8qKiBAdHlwZSBIVE1MSW1hZ2VFbGVtZW50ICovXG4gICAgdGhpcy5lbGVtZW50O1xuICAgIHRoaXMudXBkYXRlU3Jjc2V0U2l6ZXMoKTtcblxuICAgIGlmICh0aGlzLmRhdGEuc3Jjc2V0KSB7XG4gICAgICBpbWFnZUVsZW1lbnQuc3Jjc2V0ID0gdGhpcy5kYXRhLnNyY3NldDtcbiAgICB9XG5cbiAgICBpbWFnZUVsZW1lbnQuc3JjID0gKF90aGlzJGRhdGEkc3JjID0gdGhpcy5kYXRhLnNyYykgIT09IG51bGwgJiYgX3RoaXMkZGF0YSRzcmMgIT09IHZvaWQgMCA/IF90aGlzJGRhdGEkc3JjIDogJyc7XG4gICAgaW1hZ2VFbGVtZW50LmFsdCA9IChfdGhpcyRkYXRhJGFsdCA9IHRoaXMuZGF0YS5hbHQpICE9PSBudWxsICYmIF90aGlzJGRhdGEkYWx0ICE9PSB2b2lkIDAgPyBfdGhpcyRkYXRhJGFsdCA6ICcnO1xuICAgIHRoaXMuc3RhdGUgPSBMT0FEX1NUQVRFLkxPQURJTkc7XG5cbiAgICBpZiAoaW1hZ2VFbGVtZW50LmNvbXBsZXRlKSB7XG4gICAgICB0aGlzLm9uTG9hZGVkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGltYWdlRWxlbWVudC5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMub25Mb2FkZWQoKTtcbiAgICAgIH07XG5cbiAgICAgIGltYWdlRWxlbWVudC5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICB0aGlzLm9uRXJyb3IoKTtcbiAgICAgIH07XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBBc3NpZ24gc2xpZGUgdG8gY29udGVudFxuICAgKlxuICAgKiBAcGFyYW0ge1NsaWRlfSBzbGlkZVxuICAgKi9cblxuXG4gIHNldFNsaWRlKHNsaWRlKSB7XG4gICAgdGhpcy5zbGlkZSA9IHNsaWRlO1xuICAgIHRoaXMuaGFzU2xpZGUgPSB0cnVlO1xuICAgIHRoaXMuaW5zdGFuY2UgPSBzbGlkZS5wc3dwOyAvLyB0b2RvOiBkbyB3ZSBuZWVkIHRvIHVuc2V0IHNsaWRlP1xuICB9XG4gIC8qKlxuICAgKiBDb250ZW50IGxvYWQgc3VjY2VzcyBoYW5kbGVyXG4gICAqL1xuXG5cbiAgb25Mb2FkZWQoKSB7XG4gICAgdGhpcy5zdGF0ZSA9IExPQURfU1RBVEUuTE9BREVEO1xuXG4gICAgaWYgKHRoaXMuc2xpZGUgJiYgdGhpcy5lbGVtZW50KSB7XG4gICAgICB0aGlzLmluc3RhbmNlLmRpc3BhdGNoKCdsb2FkQ29tcGxldGUnLCB7XG4gICAgICAgIHNsaWRlOiB0aGlzLnNsaWRlLFxuICAgICAgICBjb250ZW50OiB0aGlzXG4gICAgICB9KTsgLy8gaWYgY29udGVudCBpcyByZWxvYWRlZFxuXG4gICAgICBpZiAodGhpcy5zbGlkZS5pc0FjdGl2ZSAmJiB0aGlzLnNsaWRlLmhlYXZ5QXBwZW5kZWQgJiYgIXRoaXMuZWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICAgIHRoaXMuYXBwZW5kKCk7XG4gICAgICAgIHRoaXMuc2xpZGUudXBkYXRlQ29udGVudFNpemUodHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnN0YXRlID09PSBMT0FEX1NUQVRFLkxPQURFRCB8fCB0aGlzLnN0YXRlID09PSBMT0FEX1NUQVRFLkVSUk9SKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlUGxhY2Vob2xkZXIoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENvbnRlbnQgbG9hZCBlcnJvciBoYW5kbGVyXG4gICAqL1xuXG5cbiAgb25FcnJvcigpIHtcbiAgICB0aGlzLnN0YXRlID0gTE9BRF9TVEFURS5FUlJPUjtcblxuICAgIGlmICh0aGlzLnNsaWRlKSB7XG4gICAgICB0aGlzLmRpc3BsYXlFcnJvcigpO1xuICAgICAgdGhpcy5pbnN0YW5jZS5kaXNwYXRjaCgnbG9hZENvbXBsZXRlJywge1xuICAgICAgICBzbGlkZTogdGhpcy5zbGlkZSxcbiAgICAgICAgaXNFcnJvcjogdHJ1ZSxcbiAgICAgICAgY29udGVudDogdGhpc1xuICAgICAgfSk7XG4gICAgICB0aGlzLmluc3RhbmNlLmRpc3BhdGNoKCdsb2FkRXJyb3InLCB7XG4gICAgICAgIHNsaWRlOiB0aGlzLnNsaWRlLFxuICAgICAgICBjb250ZW50OiB0aGlzXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtCb29sZWFufSBJZiB0aGUgY29udGVudCBpcyBjdXJyZW50bHkgbG9hZGluZ1xuICAgKi9cblxuXG4gIGlzTG9hZGluZygpIHtcbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZS5hcHBseUZpbHRlcnMoJ2lzQ29udGVudExvYWRpbmcnLCB0aGlzLnN0YXRlID09PSBMT0FEX1NUQVRFLkxPQURJTkcsIHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gSWYgdGhlIGNvbnRlbnQgaXMgaW4gZXJyb3Igc3RhdGVcbiAgICovXG5cblxuICBpc0Vycm9yKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlID09PSBMT0FEX1NUQVRFLkVSUk9SO1xuICB9XG4gIC8qKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gSWYgdGhlIGNvbnRlbnQgaXMgaW1hZ2VcbiAgICovXG5cblxuICBpc0ltYWdlQ29udGVudCgpIHtcbiAgICByZXR1cm4gdGhpcy50eXBlID09PSAnaW1hZ2UnO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgY29udGVudCBzaXplXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB3aWR0aFxuICAgKiBAcGFyYW0ge051bWJlcn0gaGVpZ2h0XG4gICAqL1xuXG5cbiAgc2V0RGlzcGxheWVkU2l6ZSh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgaWYgKCF0aGlzLmVsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wbGFjZWhvbGRlcikge1xuICAgICAgdGhpcy5wbGFjZWhvbGRlci5zZXREaXNwbGF5ZWRTaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmluc3RhbmNlLmRpc3BhdGNoKCdjb250ZW50UmVzaXplJywge1xuICAgICAgY29udGVudDogdGhpcyxcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0XG4gICAgfSkuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNldFdpZHRoSGVpZ2h0KHRoaXMuZWxlbWVudCwgd2lkdGgsIGhlaWdodCk7XG5cbiAgICBpZiAodGhpcy5pc0ltYWdlQ29udGVudCgpICYmICF0aGlzLmlzRXJyb3IoKSkge1xuICAgICAgY29uc3QgaXNJbml0aWFsU2l6ZVVwZGF0ZSA9ICF0aGlzLmRpc3BsYXllZEltYWdlV2lkdGggJiYgd2lkdGg7XG4gICAgICB0aGlzLmRpc3BsYXllZEltYWdlV2lkdGggPSB3aWR0aDtcbiAgICAgIHRoaXMuZGlzcGxheWVkSW1hZ2VIZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICAgIGlmIChpc0luaXRpYWxTaXplVXBkYXRlKSB7XG4gICAgICAgIHRoaXMubG9hZEltYWdlKGZhbHNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudXBkYXRlU3Jjc2V0U2l6ZXMoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuc2xpZGUpIHtcbiAgICAgICAgdGhpcy5pbnN0YW5jZS5kaXNwYXRjaCgnaW1hZ2VTaXplQ2hhbmdlJywge1xuICAgICAgICAgIHNsaWRlOiB0aGlzLnNsaWRlLFxuICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgIGhlaWdodCxcbiAgICAgICAgICBjb250ZW50OiB0aGlzXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogQHJldHVybnMge2Jvb2xlYW59IElmIHRoZSBjb250ZW50IGNhbiBiZSB6b29tZWRcbiAgICovXG5cblxuICBpc1pvb21hYmxlKCkge1xuICAgIHJldHVybiB0aGlzLmluc3RhbmNlLmFwcGx5RmlsdGVycygnaXNDb250ZW50Wm9vbWFibGUnLCB0aGlzLmlzSW1hZ2VDb250ZW50KCkgJiYgdGhpcy5zdGF0ZSAhPT0gTE9BRF9TVEFURS5FUlJPUiwgdGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSBpbWFnZSBzcmNzZXQgc2l6ZXMgYXR0cmlidXRlIGJhc2VkIG9uIHdpZHRoIGFuZCBoZWlnaHRcbiAgICovXG5cblxuICB1cGRhdGVTcmNzZXRTaXplcygpIHtcbiAgICAvLyBIYW5kbGUgc3Jjc2V0IHNpemVzIGF0dHJpYnV0ZS5cbiAgICAvL1xuICAgIC8vIE5ldmVyIGxvd2VyIHF1YWxpdHksIGlmIGl0IHdhcyBpbmNyZWFzZWQgcHJldmlvdXNseS5cbiAgICAvLyBDaHJvbWUgZG9lcyB0aGlzIGF1dG9tYXRpY2FsbHksIEZpcmVmb3ggYW5kIFNhZmFyaSBkbyBub3QsXG4gICAgLy8gc28gd2Ugc3RvcmUgbGFyZ2VzdCB1c2VkIHNpemUgaW4gZGF0YXNldC5cbiAgICBpZiAoIXRoaXMuaXNJbWFnZUNvbnRlbnQoKSB8fCAhdGhpcy5lbGVtZW50IHx8ICF0aGlzLmRhdGEuc3Jjc2V0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgaW1hZ2UgPVxuICAgIC8qKiBAdHlwZSBIVE1MSW1hZ2VFbGVtZW50ICovXG4gICAgdGhpcy5lbGVtZW50O1xuICAgIGNvbnN0IHNpemVzV2lkdGggPSB0aGlzLmluc3RhbmNlLmFwcGx5RmlsdGVycygnc3Jjc2V0U2l6ZXNXaWR0aCcsIHRoaXMuZGlzcGxheWVkSW1hZ2VXaWR0aCwgdGhpcyk7XG5cbiAgICBpZiAoIWltYWdlLmRhdGFzZXQubGFyZ2VzdFVzZWRTaXplIHx8IHNpemVzV2lkdGggPiBwYXJzZUludChpbWFnZS5kYXRhc2V0Lmxhcmdlc3RVc2VkU2l6ZSwgMTApKSB7XG4gICAgICBpbWFnZS5zaXplcyA9IHNpemVzV2lkdGggKyAncHgnO1xuICAgICAgaW1hZ2UuZGF0YXNldC5sYXJnZXN0VXNlZFNpemUgPSBTdHJpbmcoc2l6ZXNXaWR0aCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gSWYgY29udGVudCBzaG91bGQgdXNlIGEgcGxhY2Vob2xkZXIgKGZyb20gbXNyYyBieSBkZWZhdWx0KVxuICAgKi9cblxuXG4gIHVzZVBsYWNlaG9sZGVyKCkge1xuICAgIHJldHVybiB0aGlzLmluc3RhbmNlLmFwcGx5RmlsdGVycygndXNlQ29udGVudFBsYWNlaG9sZGVyJywgdGhpcy5pc0ltYWdlQ29udGVudCgpLCB0aGlzKTtcbiAgfVxuICAvKipcbiAgICogUHJlbG9hZCBjb250ZW50IHdpdGggbGF6eS1sb2FkaW5nIHBhcmFtXG4gICAqL1xuXG5cbiAgbGF6eUxvYWQoKSB7XG4gICAgaWYgKHRoaXMuaW5zdGFuY2UuZGlzcGF0Y2goJ2NvbnRlbnRMYXp5TG9hZCcsIHtcbiAgICAgIGNvbnRlbnQ6IHRoaXNcbiAgICB9KS5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5sb2FkKHRydWUpO1xuICB9XG4gIC8qKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gSWYgcGxhY2Vob2xkZXIgc2hvdWxkIGJlIGtlcHQgYWZ0ZXIgY29udGVudCBpcyBsb2FkZWRcbiAgICovXG5cblxuICBrZWVwUGxhY2Vob2xkZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2UuYXBwbHlGaWx0ZXJzKCdpc0tlZXBpbmdQbGFjZWhvbGRlcicsIHRoaXMuaXNMb2FkaW5nKCksIHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBEZXN0cm95IHRoZSBjb250ZW50XG4gICAqL1xuXG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLmhhc1NsaWRlID0gZmFsc2U7XG4gICAgdGhpcy5zbGlkZSA9IHVuZGVmaW5lZDtcblxuICAgIGlmICh0aGlzLmluc3RhbmNlLmRpc3BhdGNoKCdjb250ZW50RGVzdHJveScsIHtcbiAgICAgIGNvbnRlbnQ6IHRoaXNcbiAgICB9KS5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5yZW1vdmUoKTtcblxuICAgIGlmICh0aGlzLnBsYWNlaG9sZGVyKSB7XG4gICAgICB0aGlzLnBsYWNlaG9sZGVyLmRlc3Ryb3koKTtcbiAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNJbWFnZUNvbnRlbnQoKSAmJiB0aGlzLmVsZW1lbnQpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5vbmxvYWQgPSBudWxsO1xuICAgICAgdGhpcy5lbGVtZW50Lm9uZXJyb3IgPSBudWxsO1xuICAgICAgdGhpcy5lbGVtZW50ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogRGlzcGxheSBlcnJvciBtZXNzYWdlXG4gICAqL1xuXG5cbiAgZGlzcGxheUVycm9yKCkge1xuICAgIGlmICh0aGlzLnNsaWRlKSB7XG4gICAgICB2YXIgX3RoaXMkaW5zdGFuY2Ukb3B0aW9uLCBfdGhpcyRpbnN0YW5jZSRvcHRpb24yO1xuXG4gICAgICBsZXQgZXJyb3JNc2dFbCA9IGNyZWF0ZUVsZW1lbnQoJ3Bzd3BfX2Vycm9yLW1zZycsICdkaXYnKTtcbiAgICAgIGVycm9yTXNnRWwuaW5uZXJUZXh0ID0gKF90aGlzJGluc3RhbmNlJG9wdGlvbiA9IChfdGhpcyRpbnN0YW5jZSRvcHRpb24yID0gdGhpcy5pbnN0YW5jZS5vcHRpb25zKSA9PT0gbnVsbCB8fCBfdGhpcyRpbnN0YW5jZSRvcHRpb24yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRpbnN0YW5jZSRvcHRpb24yLmVycm9yTXNnKSAhPT0gbnVsbCAmJiBfdGhpcyRpbnN0YW5jZSRvcHRpb24gIT09IHZvaWQgMCA/IF90aGlzJGluc3RhbmNlJG9wdGlvbiA6ICcnO1xuICAgICAgZXJyb3JNc2dFbCA9XG4gICAgICAvKiogQHR5cGUge0hUTUxEaXZFbGVtZW50fSAqL1xuICAgICAgdGhpcy5pbnN0YW5jZS5hcHBseUZpbHRlcnMoJ2NvbnRlbnRFcnJvckVsZW1lbnQnLCBlcnJvck1zZ0VsLCB0aGlzKTtcbiAgICAgIHRoaXMuZWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoJ3Bzd3BfX2NvbnRlbnQgcHN3cF9fZXJyb3ItbXNnLWNvbnRhaW5lcicsICdkaXYnKTtcbiAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChlcnJvck1zZ0VsKTtcbiAgICAgIHRoaXMuc2xpZGUuY29udGFpbmVyLmlubmVyVGV4dCA9ICcnO1xuICAgICAgdGhpcy5zbGlkZS5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgIHRoaXMuc2xpZGUudXBkYXRlQ29udGVudFNpemUodHJ1ZSk7XG4gICAgICB0aGlzLnJlbW92ZVBsYWNlaG9sZGVyKCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBBcHBlbmQgdGhlIGNvbnRlbnRcbiAgICovXG5cblxuICBhcHBlbmQoKSB7XG4gICAgaWYgKHRoaXMuaXNBdHRhY2hlZCB8fCAhdGhpcy5lbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5pc0F0dGFjaGVkID0gdHJ1ZTtcblxuICAgIGlmICh0aGlzLnN0YXRlID09PSBMT0FEX1NUQVRFLkVSUk9SKSB7XG4gICAgICB0aGlzLmRpc3BsYXlFcnJvcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmluc3RhbmNlLmRpc3BhdGNoKCdjb250ZW50QXBwZW5kJywge1xuICAgICAgY29udGVudDogdGhpc1xuICAgIH0pLmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzdXBwb3J0c0RlY29kZSA9ICgnZGVjb2RlJyBpbiB0aGlzLmVsZW1lbnQpO1xuXG4gICAgaWYgKHRoaXMuaXNJbWFnZUNvbnRlbnQoKSkge1xuICAgICAgLy8gVXNlIGRlY29kZSgpIG9uIG5lYXJieSBzbGlkZXNcbiAgICAgIC8vXG4gICAgICAvLyBOZWFyYnkgc2xpZGUgaW1hZ2VzIGFyZSBpbiBET00gYW5kIG5vdCBoaWRkZW4gdmlhIGRpc3BsYXk6bm9uZS5cbiAgICAgIC8vIEhvd2V2ZXIsIHRoZXkgYXJlIHBsYWNlZCBvZmZzY3JlZW4gKHRvIHRoZSBsZWZ0IGFuZCByaWdodCBzaWRlKS5cbiAgICAgIC8vXG4gICAgICAvLyBTb21lIGJyb3dzZXJzIGRvIG5vdCBjb21wb3NpdGUgdGhlIGltYWdlIHVudGlsIGl0J3MgYWN0dWFsbHkgdmlzaWJsZSxcbiAgICAgIC8vIHVzaW5nIGRlY29kZSgpIGhlbHBzLlxuICAgICAgLy9cbiAgICAgIC8vIFlvdSBtaWdodCBhc2sgXCJ3aHkgZG9udCB5b3UganVzdCBkZWNvZGUoKSBhbmQgdGhlbiBhcHBlbmQgYWxsIGltYWdlc1wiLFxuICAgICAgLy8gdGhhdCdzIGJlY2F1c2UgSSB3YW50IHRvIHNob3cgaW1hZ2UgYmVmb3JlIGl0J3MgZnVsbHkgbG9hZGVkLFxuICAgICAgLy8gYXMgYnJvd3NlciBjYW4gcmVuZGVyIHBhcnRzIG9mIGltYWdlIHdoaWxlIGl0IGlzIGxvYWRpbmcuXG4gICAgICAvLyBXZSBkbyBub3QgZG8gdGhpcyBpbiBTYWZhcmkgZHVlIHRvIHBhcnRpYWwgbG9hZGluZyBidWcuXG4gICAgICBpZiAoc3VwcG9ydHNEZWNvZGUgJiYgdGhpcy5zbGlkZSAmJiAoIXRoaXMuc2xpZGUuaXNBY3RpdmUgfHwgaXNTYWZhcmkoKSkpIHtcbiAgICAgICAgdGhpcy5pc0RlY29kaW5nID0gdHJ1ZTsgLy8gcHVycG9zZWZ1bGx5IHVzaW5nIGZpbmFsbHkgaW5zdGVhZCBvZiB0aGVuLFxuICAgICAgICAvLyBhcyBpZiBzcmNzZXQgc2l6ZXMgY2hhbmdlcyBkeW5hbWljYWxseSAtIGl0IG1heSBjYXVzZSBkZWNvZGUgZXJyb3JcblxuICAgICAgICAvKiogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR9ICovXG5cbiAgICAgICAgdGhpcy5lbGVtZW50LmRlY29kZSgpLmNhdGNoKCgpID0+IHt9KS5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICB0aGlzLmlzRGVjb2RpbmcgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLmFwcGVuZEltYWdlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hcHBlbmRJbWFnZSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5zbGlkZSAmJiAhdGhpcy5lbGVtZW50LnBhcmVudE5vZGUpIHtcbiAgICAgIHRoaXMuc2xpZGUuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBBY3RpdmF0ZSB0aGUgc2xpZGUsXG4gICAqIGFjdGl2ZSBzbGlkZSBpcyBnZW5lcmFsbHkgdGhlIGN1cnJlbnQgb25lLFxuICAgKiBtZWFuaW5nIHRoZSB1c2VyIGNhbiBzZWUgaXQuXG4gICAqL1xuXG5cbiAgYWN0aXZhdGUoKSB7XG4gICAgaWYgKHRoaXMuaW5zdGFuY2UuZGlzcGF0Y2goJ2NvbnRlbnRBY3RpdmF0ZScsIHtcbiAgICAgIGNvbnRlbnQ6IHRoaXNcbiAgICB9KS5kZWZhdWx0UHJldmVudGVkIHx8ICF0aGlzLnNsaWRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNJbWFnZUNvbnRlbnQoKSAmJiB0aGlzLmlzRGVjb2RpbmcgJiYgIWlzU2FmYXJpKCkpIHtcbiAgICAgIC8vIGFkZCBpbWFnZSB0byBzbGlkZSB3aGVuIGl0IGJlY29tZXMgYWN0aXZlLFxuICAgICAgLy8gZXZlbiBpZiBpdCdzIG5vdCBmaW5pc2hlZCBkZWNvZGluZ1xuICAgICAgdGhpcy5hcHBlbmRJbWFnZSgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pc0Vycm9yKCkpIHtcbiAgICAgIHRoaXMubG9hZChmYWxzZSwgdHJ1ZSk7IC8vIHRyeSB0byByZWxvYWRcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zbGlkZS5ob2xkZXJFbGVtZW50KSB7XG4gICAgICB0aGlzLnNsaWRlLmhvbGRlckVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICdmYWxzZScpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogRGVhY3RpdmF0ZSB0aGUgY29udGVudFxuICAgKi9cblxuXG4gIGRlYWN0aXZhdGUoKSB7XG4gICAgdGhpcy5pbnN0YW5jZS5kaXNwYXRjaCgnY29udGVudERlYWN0aXZhdGUnLCB7XG4gICAgICBjb250ZW50OiB0aGlzXG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5zbGlkZSAmJiB0aGlzLnNsaWRlLmhvbGRlckVsZW1lbnQpIHtcbiAgICAgIHRoaXMuc2xpZGUuaG9sZGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgY29udGVudCBmcm9tIERPTVxuICAgKi9cblxuXG4gIHJlbW92ZSgpIHtcbiAgICB0aGlzLmlzQXR0YWNoZWQgPSBmYWxzZTtcblxuICAgIGlmICh0aGlzLmluc3RhbmNlLmRpc3BhdGNoKCdjb250ZW50UmVtb3ZlJywge1xuICAgICAgY29udGVudDogdGhpc1xuICAgIH0pLmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5lbGVtZW50ICYmIHRoaXMuZWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGxhY2Vob2xkZXIgJiYgdGhpcy5wbGFjZWhvbGRlci5lbGVtZW50KSB7XG4gICAgICB0aGlzLnBsYWNlaG9sZGVyLmVsZW1lbnQucmVtb3ZlKCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBBcHBlbmQgdGhlIGltYWdlIGNvbnRlbnQgdG8gc2xpZGUgY29udGFpbmVyXG4gICAqL1xuXG5cbiAgYXBwZW5kSW1hZ2UoKSB7XG4gICAgaWYgKCF0aGlzLmlzQXR0YWNoZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pbnN0YW5jZS5kaXNwYXRjaCgnY29udGVudEFwcGVuZEltYWdlJywge1xuICAgICAgY29udGVudDogdGhpc1xuICAgIH0pLmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIGVuc3VyZSB0aGF0IGVsZW1lbnQgZXhpc3RzIGFuZCBpcyBub3QgYWxyZWFkeSBhcHBlbmRlZFxuXG5cbiAgICBpZiAodGhpcy5zbGlkZSAmJiB0aGlzLmVsZW1lbnQgJiYgIXRoaXMuZWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLnNsaWRlLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXRlID09PSBMT0FEX1NUQVRFLkxPQURFRCB8fCB0aGlzLnN0YXRlID09PSBMT0FEX1NUQVRFLkVSUk9SKSB7XG4gICAgICB0aGlzLnJlbW92ZVBsYWNlaG9sZGVyKCk7XG4gICAgfVxuICB9XG5cbn1cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4vY29udGVudC5qcycpLmRlZmF1bHR9IENvbnRlbnQgKi9cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4vc2xpZGUuanMnKS5kZWZhdWx0fSBTbGlkZSAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi9zbGlkZS5qcycpLlNsaWRlRGF0YX0gU2xpZGVEYXRhICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9jb3JlL2Jhc2UuanMnKS5kZWZhdWx0fSBQaG90b1N3aXBlQmFzZSAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vcGhvdG9zd2lwZS5qcycpLmRlZmF1bHR9IFBob3RvU3dpcGUgKi9cblxuY29uc3QgTUlOX1NMSURFU19UT19DQUNIRSA9IDU7XG4vKipcbiAqIExhenktbG9hZCBhbiBpbWFnZVxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGJvdGggYnkgTGlnaHRib3ggYW5kIFBob3RvU3dpcGUgY29yZSxcbiAqIHRodXMgaXQgY2FuIGJlIGNhbGxlZCBiZWZvcmUgZGlhbG9nIGlzIG9wZW5lZC5cbiAqXG4gKiBAcGFyYW0ge1NsaWRlRGF0YX0gaXRlbURhdGEgRGF0YSBhYm91dCB0aGUgc2xpZGVcbiAqIEBwYXJhbSB7UGhvdG9Td2lwZUJhc2V9IGluc3RhbmNlIFBob3RvU3dpcGUgb3IgUGhvdG9Td2lwZUxpZ2h0Ym94IGluc3RhbmNlXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcbiAqIEByZXR1cm5zIHtDb250ZW50fSBJbWFnZSB0aGF0IGlzIGJlaW5nIGRlY29kZWQgb3IgZmFsc2UuXG4gKi9cblxuZnVuY3Rpb24gbGF6eUxvYWREYXRhKGl0ZW1EYXRhLCBpbnN0YW5jZSwgaW5kZXgpIHtcbiAgY29uc3QgY29udGVudCA9IGluc3RhbmNlLmNyZWF0ZUNvbnRlbnRGcm9tRGF0YShpdGVtRGF0YSwgaW5kZXgpO1xuICAvKiogQHR5cGUge1pvb21MZXZlbCB8IHVuZGVmaW5lZH0gKi9cblxuICBsZXQgem9vbUxldmVsO1xuICBjb25zdCB7XG4gICAgb3B0aW9uc1xuICB9ID0gaW5zdGFuY2U7IC8vIFdlIG5lZWQgdG8ga25vdyBkaW1lbnNpb25zIG9mIHRoZSBpbWFnZSB0byBwcmVsb2FkIGl0LFxuICAvLyBhcyBpdCBtaWdodCB1c2Ugc3Jjc2V0LCBhbmQgd2UgbmVlZCB0byBkZWZpbmUgc2l6ZXNcblxuICBpZiAob3B0aW9ucykge1xuICAgIHpvb21MZXZlbCA9IG5ldyBab29tTGV2ZWwob3B0aW9ucywgaXRlbURhdGEsIC0xKTtcbiAgICBsZXQgdmlld3BvcnRTaXplO1xuXG4gICAgaWYgKGluc3RhbmNlLnBzd3ApIHtcbiAgICAgIHZpZXdwb3J0U2l6ZSA9IGluc3RhbmNlLnBzd3Audmlld3BvcnRTaXplO1xuICAgIH0gZWxzZSB7XG4gICAgICB2aWV3cG9ydFNpemUgPSBnZXRWaWV3cG9ydFNpemUob3B0aW9ucywgaW5zdGFuY2UpO1xuICAgIH1cblxuICAgIGNvbnN0IHBhbkFyZWFTaXplID0gZ2V0UGFuQXJlYVNpemUob3B0aW9ucywgdmlld3BvcnRTaXplLCBpdGVtRGF0YSwgaW5kZXgpO1xuICAgIHpvb21MZXZlbC51cGRhdGUoY29udGVudC53aWR0aCwgY29udGVudC5oZWlnaHQsIHBhbkFyZWFTaXplKTtcbiAgfVxuXG4gIGNvbnRlbnQubGF6eUxvYWQoKTtcblxuICBpZiAoem9vbUxldmVsKSB7XG4gICAgY29udGVudC5zZXREaXNwbGF5ZWRTaXplKE1hdGguY2VpbChjb250ZW50LndpZHRoICogem9vbUxldmVsLmluaXRpYWwpLCBNYXRoLmNlaWwoY29udGVudC5oZWlnaHQgKiB6b29tTGV2ZWwuaW5pdGlhbCkpO1xuICB9XG5cbiAgcmV0dXJuIGNvbnRlbnQ7XG59XG4vKipcbiAqIExhenktbG9hZHMgc3BlY2lmaWMgc2xpZGUuXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgYm90aCBieSBMaWdodGJveCBhbmQgUGhvdG9Td2lwZSBjb3JlLFxuICogdGh1cyBpdCBjYW4gYmUgY2FsbGVkIGJlZm9yZSBkaWFsb2cgaXMgb3BlbmVkLlxuICpcbiAqIEJ5IGRlZmF1bHQsIGl0IGxvYWRzIGltYWdlIGJhc2VkIG9uIHZpZXdwb3J0IHNpemUgYW5kIGluaXRpYWwgem9vbSBsZXZlbC5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXggU2xpZGUgaW5kZXhcbiAqIEBwYXJhbSB7UGhvdG9Td2lwZUJhc2V9IGluc3RhbmNlIFBob3RvU3dpcGUgb3IgUGhvdG9Td2lwZUxpZ2h0Ym94IGV2ZW50YWJsZSBpbnN0YW5jZVxuICogQHJldHVybnMge0NvbnRlbnQgfCB1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gbGF6eUxvYWRTbGlkZShpbmRleCwgaW5zdGFuY2UpIHtcbiAgY29uc3QgaXRlbURhdGEgPSBpbnN0YW5jZS5nZXRJdGVtRGF0YShpbmRleCk7XG5cbiAgaWYgKGluc3RhbmNlLmRpc3BhdGNoKCdsYXp5TG9hZFNsaWRlJywge1xuICAgIGluZGV4LFxuICAgIGl0ZW1EYXRhXG4gIH0pLmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICByZXR1cm4gbGF6eUxvYWREYXRhKGl0ZW1EYXRhLCBpbnN0YW5jZSwgaW5kZXgpO1xufVxuXG5jbGFzcyBDb250ZW50TG9hZGVyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7UGhvdG9Td2lwZX0gcHN3cFxuICAgKi9cbiAgY29uc3RydWN0b3IocHN3cCkge1xuICAgIHRoaXMucHN3cCA9IHBzd3A7IC8vIFRvdGFsIGFtb3VudCBvZiBjYWNoZWQgaW1hZ2VzXG5cbiAgICB0aGlzLmxpbWl0ID0gTWF0aC5tYXgocHN3cC5vcHRpb25zLnByZWxvYWRbMF0gKyBwc3dwLm9wdGlvbnMucHJlbG9hZFsxXSArIDEsIE1JTl9TTElERVNfVE9fQ0FDSEUpO1xuICAgIC8qKiBAdHlwZSB7Q29udGVudFtdfSAqL1xuXG4gICAgdGhpcy5fY2FjaGVkSXRlbXMgPSBbXTtcbiAgfVxuICAvKipcbiAgICogTGF6eSBsb2FkIG5lYXJieSBzbGlkZXMgYmFzZWQgb24gYHByZWxvYWRgIG9wdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtkaWZmXSBEaWZmZXJlbmNlIGJldHdlZW4gc2xpZGUgaW5kZXhlcyB0aGF0IHdhcyBjaGFuZ2VkIHJlY2VudGx5LCBvciAwLlxuICAgKi9cblxuXG4gIHVwZGF0ZUxhenkoZGlmZikge1xuICAgIGNvbnN0IHtcbiAgICAgIHBzd3BcbiAgICB9ID0gdGhpcztcblxuICAgIGlmIChwc3dwLmRpc3BhdGNoKCdsYXp5TG9hZCcpLmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB7XG4gICAgICBwcmVsb2FkXG4gICAgfSA9IHBzd3Aub3B0aW9ucztcbiAgICBjb25zdCBpc0ZvcndhcmQgPSBkaWZmID09PSB1bmRlZmluZWQgPyB0cnVlIDogZGlmZiA+PSAwO1xuICAgIGxldCBpOyAvLyBwcmVsb2FkWzFdIC0gbnVtIGl0ZW1zIHRvIHByZWxvYWQgaW4gZm9yd2FyZCBkaXJlY3Rpb25cblxuICAgIGZvciAoaSA9IDA7IGkgPD0gcHJlbG9hZFsxXTsgaSsrKSB7XG4gICAgICB0aGlzLmxvYWRTbGlkZUJ5SW5kZXgocHN3cC5jdXJySW5kZXggKyAoaXNGb3J3YXJkID8gaSA6IC1pKSk7XG4gICAgfSAvLyBwcmVsb2FkWzBdIC0gbnVtIGl0ZW1zIHRvIHByZWxvYWQgaW4gYmFja3dhcmQgZGlyZWN0aW9uXG5cblxuICAgIGZvciAoaSA9IDE7IGkgPD0gcHJlbG9hZFswXTsgaSsrKSB7XG4gICAgICB0aGlzLmxvYWRTbGlkZUJ5SW5kZXgocHN3cC5jdXJySW5kZXggKyAoaXNGb3J3YXJkID8gLWkgOiBpKSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5pdGlhbEluZGV4XG4gICAqL1xuXG5cbiAgbG9hZFNsaWRlQnlJbmRleChpbml0aWFsSW5kZXgpIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMucHN3cC5nZXRMb29wZWRJbmRleChpbml0aWFsSW5kZXgpOyAvLyB0cnkgdG8gZ2V0IGNhY2hlZCBjb250ZW50XG5cbiAgICBsZXQgY29udGVudCA9IHRoaXMuZ2V0Q29udGVudEJ5SW5kZXgoaW5kZXgpO1xuXG4gICAgaWYgKCFjb250ZW50KSB7XG4gICAgICAvLyBubyBjYWNoZWQgY29udGVudCwgc28gdHJ5IHRvIGxvYWQgZnJvbSBzY3JhdGNoOlxuICAgICAgY29udGVudCA9IGxhenlMb2FkU2xpZGUoaW5kZXgsIHRoaXMucHN3cCk7IC8vIGlmIGNvbnRlbnQgY2FuIGJlIGxvYWRlZCwgYWRkIGl0IHRvIGNhY2hlOlxuXG4gICAgICBpZiAoY29udGVudCkge1xuICAgICAgICB0aGlzLmFkZFRvQ2FjaGUoY29udGVudCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0ge1NsaWRlfSBzbGlkZVxuICAgKiBAcmV0dXJucyB7Q29udGVudH1cbiAgICovXG5cblxuICBnZXRDb250ZW50QnlTbGlkZShzbGlkZSkge1xuICAgIGxldCBjb250ZW50ID0gdGhpcy5nZXRDb250ZW50QnlJbmRleChzbGlkZS5pbmRleCk7XG5cbiAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgIC8vIGNyZWF0ZSBjb250ZW50IGlmIG5vdCBmb3VuZCBpbiBjYWNoZVxuICAgICAgY29udGVudCA9IHRoaXMucHN3cC5jcmVhdGVDb250ZW50RnJvbURhdGEoc2xpZGUuZGF0YSwgc2xpZGUuaW5kZXgpO1xuICAgICAgdGhpcy5hZGRUb0NhY2hlKGNvbnRlbnQpO1xuICAgIH0gLy8gYXNzaWduIHNsaWRlIHRvIGNvbnRlbnRcblxuXG4gICAgY29udGVudC5zZXRTbGlkZShzbGlkZSk7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7Q29udGVudH0gY29udGVudFxuICAgKi9cblxuXG4gIGFkZFRvQ2FjaGUoY29udGVudCkge1xuICAgIC8vIG1vdmUgdG8gdGhlIGVuZCBvZiBhcnJheVxuICAgIHRoaXMucmVtb3ZlQnlJbmRleChjb250ZW50LmluZGV4KTtcblxuICAgIHRoaXMuX2NhY2hlZEl0ZW1zLnB1c2goY29udGVudCk7XG5cbiAgICBpZiAodGhpcy5fY2FjaGVkSXRlbXMubGVuZ3RoID4gdGhpcy5saW1pdCkge1xuICAgICAgLy8gRGVzdHJveSB0aGUgZmlyc3QgY29udGVudCB0aGF0J3Mgbm90IGF0dGFjaGVkXG4gICAgICBjb25zdCBpbmRleFRvUmVtb3ZlID0gdGhpcy5fY2FjaGVkSXRlbXMuZmluZEluZGV4KGl0ZW0gPT4ge1xuICAgICAgICByZXR1cm4gIWl0ZW0uaXNBdHRhY2hlZCAmJiAhaXRlbS5oYXNTbGlkZTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoaW5kZXhUb1JlbW92ZSAhPT0gLTEpIHtcbiAgICAgICAgY29uc3QgcmVtb3ZlZEl0ZW0gPSB0aGlzLl9jYWNoZWRJdGVtcy5zcGxpY2UoaW5kZXhUb1JlbW92ZSwgMSlbMF07XG5cbiAgICAgICAgcmVtb3ZlZEl0ZW0uZGVzdHJveSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogUmVtb3ZlcyBhbiBpbWFnZSBmcm9tIGNhY2hlLCBkb2VzIG5vdCBkZXN0cm95KCkgaXQsIGp1c3QgcmVtb3Zlcy5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4XG4gICAqL1xuXG5cbiAgcmVtb3ZlQnlJbmRleChpbmRleCkge1xuICAgIGNvbnN0IGluZGV4VG9SZW1vdmUgPSB0aGlzLl9jYWNoZWRJdGVtcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmluZGV4ID09PSBpbmRleCk7XG5cbiAgICBpZiAoaW5kZXhUb1JlbW92ZSAhPT0gLTEpIHtcbiAgICAgIHRoaXMuX2NhY2hlZEl0ZW1zLnNwbGljZShpbmRleFRvUmVtb3ZlLCAxKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleFxuICAgKiBAcmV0dXJucyB7Q29udGVudCB8IHVuZGVmaW5lZH1cbiAgICovXG5cblxuICBnZXRDb250ZW50QnlJbmRleChpbmRleCkge1xuICAgIHJldHVybiB0aGlzLl9jYWNoZWRJdGVtcy5maW5kKGNvbnRlbnQgPT4gY29udGVudC5pbmRleCA9PT0gaW5kZXgpO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLl9jYWNoZWRJdGVtcy5mb3JFYWNoKGNvbnRlbnQgPT4gY29udGVudC5kZXN0cm95KCkpO1xuXG4gICAgdGhpcy5fY2FjaGVkSXRlbXMgPSBbXTtcbiAgfVxuXG59XG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vcGhvdG9zd2lwZS5qc1wiKS5kZWZhdWx0fSBQaG90b1N3aXBlICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vc2xpZGUvc2xpZGUuanNcIikuU2xpZGVEYXRhfSBTbGlkZURhdGEgKi9cblxuLyoqXG4gKiBQaG90b1N3aXBlIGJhc2UgY2xhc3MgdGhhdCBjYW4gcmV0cmlldmUgZGF0YSBhYm91dCBldmVyeSBzbGlkZS5cbiAqIFNoYXJlZCBieSBQaG90b1N3aXBlIENvcmUgYW5kIFBob3RvU3dpcGUgTGlnaHRib3hcbiAqL1xuXG5jbGFzcyBQaG90b1N3aXBlQmFzZSBleHRlbmRzIEV2ZW50YWJsZSB7XG4gIC8qKlxuICAgKiBHZXQgdG90YWwgbnVtYmVyIG9mIHNsaWRlc1xuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0TnVtSXRlbXMoKSB7XG4gICAgdmFyIF90aGlzJG9wdGlvbnM7XG5cbiAgICBsZXQgbnVtSXRlbXMgPSAwO1xuICAgIGNvbnN0IGRhdGFTb3VyY2UgPSAoX3RoaXMkb3B0aW9ucyA9IHRoaXMub3B0aW9ucykgPT09IG51bGwgfHwgX3RoaXMkb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkb3B0aW9ucy5kYXRhU291cmNlO1xuXG4gICAgaWYgKGRhdGFTb3VyY2UgJiYgJ2xlbmd0aCcgaW4gZGF0YVNvdXJjZSkge1xuICAgICAgLy8gbWF5IGJlIGFuIGFycmF5IG9yIGp1c3Qgb2JqZWN0IHdpdGggbGVuZ3RoIHByb3BlcnR5XG4gICAgICBudW1JdGVtcyA9IGRhdGFTb3VyY2UubGVuZ3RoO1xuICAgIH0gZWxzZSBpZiAoZGF0YVNvdXJjZSAmJiAnZ2FsbGVyeScgaW4gZGF0YVNvdXJjZSkge1xuICAgICAgLy8gcXVlcnkgRE9NIGVsZW1lbnRzXG4gICAgICBpZiAoIWRhdGFTb3VyY2UuaXRlbXMpIHtcbiAgICAgICAgZGF0YVNvdXJjZS5pdGVtcyA9IHRoaXMuX2dldEdhbGxlcnlET01FbGVtZW50cyhkYXRhU291cmNlLmdhbGxlcnkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGF0YVNvdXJjZS5pdGVtcykge1xuICAgICAgICBudW1JdGVtcyA9IGRhdGFTb3VyY2UuaXRlbXMubGVuZ3RoO1xuICAgICAgfVxuICAgIH0gLy8gbGVnYWN5IGV2ZW50LCBiZWZvcmUgZmlsdGVycyB3ZXJlIGludHJvZHVjZWRcblxuXG4gICAgY29uc3QgZXZlbnQgPSB0aGlzLmRpc3BhdGNoKCdudW1JdGVtcycsIHtcbiAgICAgIGRhdGFTb3VyY2UsXG4gICAgICBudW1JdGVtc1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLmFwcGx5RmlsdGVycygnbnVtSXRlbXMnLCBldmVudC5udW1JdGVtcywgZGF0YVNvdXJjZSk7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7U2xpZGVEYXRhfSBzbGlkZURhdGFcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4XG4gICAqIEByZXR1cm5zIHtDb250ZW50fVxuICAgKi9cblxuXG4gIGNyZWF0ZUNvbnRlbnRGcm9tRGF0YShzbGlkZURhdGEsIGluZGV4KSB7XG4gICAgcmV0dXJuIG5ldyBDb250ZW50KHNsaWRlRGF0YSwgdGhpcywgaW5kZXgpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgaXRlbSBkYXRhIGJ5IGluZGV4LlxuICAgKlxuICAgKiBcIml0ZW0gZGF0YVwiIHNob3VsZCBjb250YWluIG5vcm1hbGl6ZWQgaW5mb3JtYXRpb24gdGhhdCBQaG90b1N3aXBlIG5lZWRzIHRvIGdlbmVyYXRlIGEgc2xpZGUuXG4gICAqIEZvciBleGFtcGxlLCBpdCBtYXkgY29udGFpbiBwcm9wZXJ0aWVzIGxpa2VcbiAgICogYHNyY2AsIGBzcmNzZXRgLCBgd2AsIGBoYCwgd2hpY2ggd2lsbCBiZSB1c2VkIHRvIGdlbmVyYXRlIGEgc2xpZGUgd2l0aCBpbWFnZS5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4XG4gICAqIEByZXR1cm5zIHtTbGlkZURhdGF9XG4gICAqL1xuXG5cbiAgZ2V0SXRlbURhdGEoaW5kZXgpIHtcbiAgICB2YXIgX3RoaXMkb3B0aW9uczI7XG5cbiAgICBjb25zdCBkYXRhU291cmNlID0gKF90aGlzJG9wdGlvbnMyID0gdGhpcy5vcHRpb25zKSA9PT0gbnVsbCB8fCBfdGhpcyRvcHRpb25zMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkb3B0aW9uczIuZGF0YVNvdXJjZTtcbiAgICAvKiogQHR5cGUge1NsaWRlRGF0YSB8IEhUTUxFbGVtZW50fSAqL1xuXG4gICAgbGV0IGRhdGFTb3VyY2VJdGVtID0ge307XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhU291cmNlKSkge1xuICAgICAgLy8gRGF0YXNvdXJjZSBpcyBhbiBhcnJheSBvZiBlbGVtZW50c1xuICAgICAgZGF0YVNvdXJjZUl0ZW0gPSBkYXRhU291cmNlW2luZGV4XTtcbiAgICB9IGVsc2UgaWYgKGRhdGFTb3VyY2UgJiYgJ2dhbGxlcnknIGluIGRhdGFTb3VyY2UpIHtcbiAgICAgIC8vIGRhdGFTb3VyY2UgaGFzIGdhbGxlcnkgcHJvcGVydHksXG4gICAgICAvLyB0aHVzIGl0IHdhcyBjcmVhdGVkIGJ5IExpZ2h0Ym94LCBiYXNlZCBvblxuICAgICAgLy8gZ2FsbGVyeSBhbmQgY2hpbGRyZW4gb3B0aW9uc1xuICAgICAgLy8gcXVlcnkgRE9NIGVsZW1lbnRzXG4gICAgICBpZiAoIWRhdGFTb3VyY2UuaXRlbXMpIHtcbiAgICAgICAgZGF0YVNvdXJjZS5pdGVtcyA9IHRoaXMuX2dldEdhbGxlcnlET01FbGVtZW50cyhkYXRhU291cmNlLmdhbGxlcnkpO1xuICAgICAgfVxuXG4gICAgICBkYXRhU291cmNlSXRlbSA9IGRhdGFTb3VyY2UuaXRlbXNbaW5kZXhdO1xuICAgIH1cblxuICAgIGxldCBpdGVtRGF0YSA9IGRhdGFTb3VyY2VJdGVtO1xuXG4gICAgaWYgKGl0ZW1EYXRhIGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgaXRlbURhdGEgPSB0aGlzLl9kb21FbGVtZW50VG9JdGVtRGF0YShpdGVtRGF0YSk7XG4gICAgfSAvLyBEaXNwYXRjaGluZyB0aGUgaXRlbURhdGEgZXZlbnQsXG4gICAgLy8gaXQncyBhIGxlZ2FjeSB2ZXJpb24gYmVmb3JlIGZpbHRlcnMgd2VyZSBpbnRyb2R1Y2VkXG5cblxuICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5kaXNwYXRjaCgnaXRlbURhdGEnLCB7XG4gICAgICBpdGVtRGF0YTogaXRlbURhdGEgfHwge30sXG4gICAgICBpbmRleFxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLmFwcGx5RmlsdGVycygnaXRlbURhdGEnLCBldmVudC5pdGVtRGF0YSwgaW5kZXgpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYXJyYXkgb2YgZ2FsbGVyeSBET00gZWxlbWVudHMsXG4gICAqIGJhc2VkIG9uIGNoaWxkU2VsZWN0b3IgYW5kIGdhbGxlcnkgZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZ2FsbGVyeUVsZW1lbnRcbiAgICogQHJldHVybnMge0hUTUxFbGVtZW50W119XG4gICAqL1xuXG5cbiAgX2dldEdhbGxlcnlET01FbGVtZW50cyhnYWxsZXJ5RWxlbWVudCkge1xuICAgIHZhciBfdGhpcyRvcHRpb25zMywgX3RoaXMkb3B0aW9uczQ7XG5cbiAgICBpZiAoKF90aGlzJG9wdGlvbnMzID0gdGhpcy5vcHRpb25zKSAhPT0gbnVsbCAmJiBfdGhpcyRvcHRpb25zMyAhPT0gdm9pZCAwICYmIF90aGlzJG9wdGlvbnMzLmNoaWxkcmVuIHx8IChfdGhpcyRvcHRpb25zNCA9IHRoaXMub3B0aW9ucykgIT09IG51bGwgJiYgX3RoaXMkb3B0aW9uczQgIT09IHZvaWQgMCAmJiBfdGhpcyRvcHRpb25zNC5jaGlsZFNlbGVjdG9yKSB7XG4gICAgICByZXR1cm4gZ2V0RWxlbWVudHNGcm9tT3B0aW9uKHRoaXMub3B0aW9ucy5jaGlsZHJlbiwgdGhpcy5vcHRpb25zLmNoaWxkU2VsZWN0b3IsIGdhbGxlcnlFbGVtZW50KSB8fCBbXTtcbiAgICB9XG5cbiAgICByZXR1cm4gW2dhbGxlcnlFbGVtZW50XTtcbiAgfVxuICAvKipcbiAgICogQ29udmVydHMgRE9NIGVsZW1lbnQgdG8gaXRlbSBkYXRhIG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCBET00gZWxlbWVudFxuICAgKiBAcmV0dXJucyB7U2xpZGVEYXRhfVxuICAgKi9cblxuXG4gIF9kb21FbGVtZW50VG9JdGVtRGF0YShlbGVtZW50KSB7XG4gICAgLyoqIEB0eXBlIHtTbGlkZURhdGF9ICovXG4gICAgY29uc3QgaXRlbURhdGEgPSB7XG4gICAgICBlbGVtZW50XG4gICAgfTtcbiAgICBjb25zdCBsaW5rRWwgPVxuICAgIC8qKiBAdHlwZSB7SFRNTEFuY2hvckVsZW1lbnR9ICovXG4gICAgZWxlbWVudC50YWdOYW1lID09PSAnQScgPyBlbGVtZW50IDogZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdhJyk7XG5cbiAgICBpZiAobGlua0VsKSB7XG4gICAgICAvLyBzcmMgY29tZXMgZnJvbSBkYXRhLXBzd3Atc3JjIGF0dHJpYnV0ZSxcbiAgICAgIC8vIGlmIGl0J3MgZW1wdHkgbGluayBocmVmIGlzIHVzZWRcbiAgICAgIGl0ZW1EYXRhLnNyYyA9IGxpbmtFbC5kYXRhc2V0LnBzd3BTcmMgfHwgbGlua0VsLmhyZWY7XG5cbiAgICAgIGlmIChsaW5rRWwuZGF0YXNldC5wc3dwU3Jjc2V0KSB7XG4gICAgICAgIGl0ZW1EYXRhLnNyY3NldCA9IGxpbmtFbC5kYXRhc2V0LnBzd3BTcmNzZXQ7XG4gICAgICB9XG5cbiAgICAgIGl0ZW1EYXRhLndpZHRoID0gbGlua0VsLmRhdGFzZXQucHN3cFdpZHRoID8gcGFyc2VJbnQobGlua0VsLmRhdGFzZXQucHN3cFdpZHRoLCAxMCkgOiAwO1xuICAgICAgaXRlbURhdGEuaGVpZ2h0ID0gbGlua0VsLmRhdGFzZXQucHN3cEhlaWdodCA/IHBhcnNlSW50KGxpbmtFbC5kYXRhc2V0LnBzd3BIZWlnaHQsIDEwKSA6IDA7IC8vIHN1cHBvcnQgbGVnYWN5IHcgJiBoIHByb3BlcnRpZXNcblxuICAgICAgaXRlbURhdGEudyA9IGl0ZW1EYXRhLndpZHRoO1xuICAgICAgaXRlbURhdGEuaCA9IGl0ZW1EYXRhLmhlaWdodDtcblxuICAgICAgaWYgKGxpbmtFbC5kYXRhc2V0LnBzd3BUeXBlKSB7XG4gICAgICAgIGl0ZW1EYXRhLnR5cGUgPSBsaW5rRWwuZGF0YXNldC5wc3dwVHlwZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdGh1bWJuYWlsRWwgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2ltZycpO1xuXG4gICAgICBpZiAodGh1bWJuYWlsRWwpIHtcbiAgICAgICAgdmFyIF90aHVtYm5haWxFbCRnZXRBdHRyaTtcblxuICAgICAgICAvLyBtc3JjIGlzIFVSTCB0byBwbGFjZWhvbGRlciBpbWFnZSB0aGF0J3MgZGlzcGxheWVkIGJlZm9yZSBsYXJnZSBpbWFnZSBpcyBsb2FkZWRcbiAgICAgICAgLy8gYnkgZGVmYXVsdCBpdCdzIGRpc3BsYXllZCBvbmx5IGZvciB0aGUgZmlyc3Qgc2xpZGVcbiAgICAgICAgaXRlbURhdGEubXNyYyA9IHRodW1ibmFpbEVsLmN1cnJlbnRTcmMgfHwgdGh1bWJuYWlsRWwuc3JjO1xuICAgICAgICBpdGVtRGF0YS5hbHQgPSAoX3RodW1ibmFpbEVsJGdldEF0dHJpID0gdGh1bWJuYWlsRWwuZ2V0QXR0cmlidXRlKCdhbHQnKSkgIT09IG51bGwgJiYgX3RodW1ibmFpbEVsJGdldEF0dHJpICE9PSB2b2lkIDAgPyBfdGh1bWJuYWlsRWwkZ2V0QXR0cmkgOiAnJztcbiAgICAgIH1cblxuICAgICAgaWYgKGxpbmtFbC5kYXRhc2V0LnBzd3BDcm9wcGVkIHx8IGxpbmtFbC5kYXRhc2V0LmNyb3BwZWQpIHtcbiAgICAgICAgaXRlbURhdGEudGh1bWJDcm9wcGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5hcHBseUZpbHRlcnMoJ2RvbUl0ZW1EYXRhJywgaXRlbURhdGEsIGVsZW1lbnQsIGxpbmtFbCk7XG4gIH1cbiAgLyoqXG4gICAqIExhenktbG9hZCBieSBzbGlkZSBkYXRhXG4gICAqXG4gICAqIEBwYXJhbSB7U2xpZGVEYXRhfSBpdGVtRGF0YSBEYXRhIGFib3V0IHRoZSBzbGlkZVxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcbiAgICogQHJldHVybnMge0NvbnRlbnR9IEltYWdlIHRoYXQgaXMgYmVpbmcgZGVjb2RlZCBvciBmYWxzZS5cbiAgICovXG5cblxuICBsYXp5TG9hZERhdGEoaXRlbURhdGEsIGluZGV4KSB7XG4gICAgcmV0dXJuIGxhenlMb2FkRGF0YShpdGVtRGF0YSwgdGhpcywgaW5kZXgpO1xuICB9XG5cbn1cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4vcGhvdG9zd2lwZS5qcycpLmRlZmF1bHR9IFBob3RvU3dpcGUgKi9cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4vc2xpZGUvZ2V0LXRodW1iLWJvdW5kcy5qcycpLkJvdW5kc30gQm91bmRzICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuL3V0aWwvYW5pbWF0aW9ucy5qcycpLkFuaW1hdGlvblByb3BzfSBBbmltYXRpb25Qcm9wcyAqL1xuLy8gc29tZSBicm93c2VycyBkbyBub3QgcGFpbnRcbi8vIGVsZW1lbnRzIHdoaWNoIG9wYWNpdHkgaXMgc2V0IHRvIDAsXG4vLyBzaW5jZSB3ZSBuZWVkIHRvIHByZS1yZW5kZXIgZWxlbWVudHMgZm9yIHRoZSBhbmltYXRpb24gLVxuLy8gd2Ugc2V0IGl0IHRvIHRoZSBtaW5pbXVtIGFtb3VudFxuXG5jb25zdCBNSU5fT1BBQ0lUWSA9IDAuMDAzO1xuLyoqXG4gKiBNYW5hZ2VzIG9wZW5pbmcgYW5kIGNsb3NpbmcgdHJhbnNpdGlvbnMgb2YgdGhlIFBob3RvU3dpcGUuXG4gKlxuICogSXQgY2FuIHBlcmZvcm0gem9vbSwgZmFkZSBvciBubyB0cmFuc2l0aW9uLlxuICovXG5cbmNsYXNzIE9wZW5lciB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge1Bob3RvU3dpcGV9IHBzd3BcbiAgICovXG4gIGNvbnN0cnVjdG9yKHBzd3ApIHtcbiAgICB0aGlzLnBzd3AgPSBwc3dwO1xuICAgIHRoaXMuaXNDbG9zZWQgPSB0cnVlO1xuICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgdGhpcy5pc0Nsb3NpbmcgPSBmYWxzZTtcbiAgICB0aGlzLmlzT3BlbmluZyA9IGZhbHNlO1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlciB8IGZhbHNlIHwgdW5kZWZpbmVkfVxuICAgICAqL1xuXG4gICAgdGhpcy5fZHVyYXRpb24gPSB1bmRlZmluZWQ7XG4gICAgLyoqIEBwcml2YXRlICovXG5cbiAgICB0aGlzLl91c2VBbmltYXRpb24gPSBmYWxzZTtcbiAgICAvKiogQHByaXZhdGUgKi9cblxuICAgIHRoaXMuX2Nyb3BwZWRab29tID0gZmFsc2U7XG4gICAgLyoqIEBwcml2YXRlICovXG5cbiAgICB0aGlzLl9hbmltYXRlUm9vdE9wYWNpdHkgPSBmYWxzZTtcbiAgICAvKiogQHByaXZhdGUgKi9cblxuICAgIHRoaXMuX2FuaW1hdGVCZ09wYWNpdHkgPSBmYWxzZTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHsgSFRNTERpdkVsZW1lbnQgfCBIVE1MSW1hZ2VFbGVtZW50IHwgbnVsbCB8IHVuZGVmaW5lZCB9XG4gICAgICovXG5cbiAgICB0aGlzLl9wbGFjZWhvbGRlciA9IHVuZGVmaW5lZDtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHsgSFRNTERpdkVsZW1lbnQgfCB1bmRlZmluZWQgfVxuICAgICAqL1xuXG4gICAgdGhpcy5fb3BhY2l0eUVsZW1lbnQgPSB1bmRlZmluZWQ7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IEhUTUxEaXZFbGVtZW50IHwgdW5kZWZpbmVkIH1cbiAgICAgKi9cblxuICAgIHRoaXMuX2Nyb3BDb250YWluZXIxID0gdW5kZWZpbmVkO1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgeyBIVE1MRWxlbWVudCB8IG51bGwgfCB1bmRlZmluZWQgfVxuICAgICAqL1xuXG4gICAgdGhpcy5fY3JvcENvbnRhaW5lcjIgPSB1bmRlZmluZWQ7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Qm91bmRzIHwgdW5kZWZpbmVkfVxuICAgICAqL1xuXG4gICAgdGhpcy5fdGh1bWJCb3VuZHMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcHJlcGFyZU9wZW4gPSB0aGlzLl9wcmVwYXJlT3Blbi5iaW5kKHRoaXMpOyAvLyBPdmVycmlkZSBpbml0aWFsIHpvb20gYW5kIHBhbiBwb3NpdGlvblxuXG4gICAgcHN3cC5vbignZmlyc3Rab29tUGFuJywgdGhpcy5fcHJlcGFyZU9wZW4pO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wcmVwYXJlT3BlbigpO1xuXG4gICAgdGhpcy5fc3RhcnQoKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIGlmICh0aGlzLmlzQ2xvc2VkIHx8IHRoaXMuaXNDbG9zaW5nIHx8IHRoaXMuaXNPcGVuaW5nKSB7XG4gICAgICAvLyBpZiB3ZSBjbG9zZSBkdXJpbmcgb3BlbmluZyBhbmltYXRpb25cbiAgICAgIC8vIGZvciBub3cgZG8gbm90aGluZyxcbiAgICAgIC8vIGJyb3dzZXJzIGFyZW4ndCBnb29kIGF0IGNoYW5naW5nIHRoZSBkaXJlY3Rpb24gb2YgdGhlIENTUyB0cmFuc2l0aW9uXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgc2xpZGUgPSB0aGlzLnBzd3AuY3VyclNsaWRlO1xuICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgdGhpcy5pc09wZW5pbmcgPSBmYWxzZTtcbiAgICB0aGlzLmlzQ2xvc2luZyA9IHRydWU7XG4gICAgdGhpcy5fZHVyYXRpb24gPSB0aGlzLnBzd3Aub3B0aW9ucy5oaWRlQW5pbWF0aW9uRHVyYXRpb247XG5cbiAgICBpZiAoc2xpZGUgJiYgc2xpZGUuY3Vyclpvb21MZXZlbCAqIHNsaWRlLndpZHRoID49IHRoaXMucHN3cC5vcHRpb25zLm1heFdpZHRoVG9BbmltYXRlKSB7XG4gICAgICB0aGlzLl9kdXJhdGlvbiA9IDA7XG4gICAgfVxuXG4gICAgdGhpcy5fYXBwbHlTdGFydFByb3BzKCk7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuX3N0YXJ0KCk7XG4gICAgfSwgdGhpcy5fY3JvcHBlZFpvb20gPyAzMCA6IDApO1xuICB9XG4gIC8qKiBAcHJpdmF0ZSAqL1xuXG5cbiAgX3ByZXBhcmVPcGVuKCkge1xuICAgIHRoaXMucHN3cC5vZmYoJ2ZpcnN0Wm9vbVBhbicsIHRoaXMuX3ByZXBhcmVPcGVuKTtcblxuICAgIGlmICghdGhpcy5pc09wZW5pbmcpIHtcbiAgICAgIGNvbnN0IHNsaWRlID0gdGhpcy5wc3dwLmN1cnJTbGlkZTtcbiAgICAgIHRoaXMuaXNPcGVuaW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMuaXNDbG9zaW5nID0gZmFsc2U7XG4gICAgICB0aGlzLl9kdXJhdGlvbiA9IHRoaXMucHN3cC5vcHRpb25zLnNob3dBbmltYXRpb25EdXJhdGlvbjtcblxuICAgICAgaWYgKHNsaWRlICYmIHNsaWRlLnpvb21MZXZlbHMuaW5pdGlhbCAqIHNsaWRlLndpZHRoID49IHRoaXMucHN3cC5vcHRpb25zLm1heFdpZHRoVG9BbmltYXRlKSB7XG4gICAgICAgIHRoaXMuX2R1cmF0aW9uID0gMDtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fYXBwbHlTdGFydFByb3BzKCk7XG4gICAgfVxuICB9XG4gIC8qKiBAcHJpdmF0ZSAqL1xuXG5cbiAgX2FwcGx5U3RhcnRQcm9wcygpIHtcbiAgICBjb25zdCB7XG4gICAgICBwc3dwXG4gICAgfSA9IHRoaXM7XG4gICAgY29uc3Qgc2xpZGUgPSB0aGlzLnBzd3AuY3VyclNsaWRlO1xuICAgIGNvbnN0IHtcbiAgICAgIG9wdGlvbnNcbiAgICB9ID0gcHN3cDtcblxuICAgIGlmIChvcHRpb25zLnNob3dIaWRlQW5pbWF0aW9uVHlwZSA9PT0gJ2ZhZGUnKSB7XG4gICAgICBvcHRpb25zLnNob3dIaWRlT3BhY2l0eSA9IHRydWU7XG4gICAgICB0aGlzLl90aHVtYkJvdW5kcyA9IHVuZGVmaW5lZDtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuc2hvd0hpZGVBbmltYXRpb25UeXBlID09PSAnbm9uZScpIHtcbiAgICAgIG9wdGlvbnMuc2hvd0hpZGVPcGFjaXR5ID0gZmFsc2U7XG4gICAgICB0aGlzLl9kdXJhdGlvbiA9IDA7XG4gICAgICB0aGlzLl90aHVtYkJvdW5kcyA9IHVuZGVmaW5lZDtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNPcGVuaW5nICYmIHBzd3AuX2luaXRpYWxUaHVtYkJvdW5kcykge1xuICAgICAgLy8gVXNlIGluaXRpYWwgYm91bmRzIGlmIGRlZmluZWRcbiAgICAgIHRoaXMuX3RodW1iQm91bmRzID0gcHN3cC5faW5pdGlhbFRodW1iQm91bmRzO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl90aHVtYkJvdW5kcyA9IHRoaXMucHN3cC5nZXRUaHVtYkJvdW5kcygpO1xuICAgIH1cblxuICAgIHRoaXMuX3BsYWNlaG9sZGVyID0gc2xpZGUgPT09IG51bGwgfHwgc2xpZGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNsaWRlLmdldFBsYWNlaG9sZGVyRWxlbWVudCgpO1xuICAgIHBzd3AuYW5pbWF0aW9ucy5zdG9wQWxsKCk7IC8vIERpc2NhcmQgYW5pbWF0aW9ucyB3aGVuIGR1cmF0aW9uIGlzIGxlc3MgdGhhbiA1MG1zXG5cbiAgICB0aGlzLl91c2VBbmltYXRpb24gPSBCb29sZWFuKHRoaXMuX2R1cmF0aW9uICYmIHRoaXMuX2R1cmF0aW9uID4gNTApO1xuICAgIHRoaXMuX2FuaW1hdGVab29tID0gQm9vbGVhbih0aGlzLl90aHVtYkJvdW5kcykgJiYgKHNsaWRlID09PSBudWxsIHx8IHNsaWRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzbGlkZS5jb250ZW50LnVzZVBsYWNlaG9sZGVyKCkpICYmICghdGhpcy5pc0Nsb3NpbmcgfHwgIXBzd3AubWFpblNjcm9sbC5pc1NoaWZ0ZWQoKSk7XG5cbiAgICBpZiAoIXRoaXMuX2FuaW1hdGVab29tKSB7XG4gICAgICB0aGlzLl9hbmltYXRlUm9vdE9wYWNpdHkgPSB0cnVlO1xuXG4gICAgICBpZiAodGhpcy5pc09wZW5pbmcgJiYgc2xpZGUpIHtcbiAgICAgICAgc2xpZGUuem9vbUFuZFBhblRvSW5pdGlhbCgpO1xuICAgICAgICBzbGlkZS5hcHBseUN1cnJlbnRab29tUGFuKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBfb3B0aW9ucyRzaG93SGlkZU9wYWM7XG5cbiAgICAgIHRoaXMuX2FuaW1hdGVSb290T3BhY2l0eSA9IChfb3B0aW9ucyRzaG93SGlkZU9wYWMgPSBvcHRpb25zLnNob3dIaWRlT3BhY2l0eSkgIT09IG51bGwgJiYgX29wdGlvbnMkc2hvd0hpZGVPcGFjICE9PSB2b2lkIDAgPyBfb3B0aW9ucyRzaG93SGlkZU9wYWMgOiBmYWxzZTtcbiAgICB9XG5cbiAgICB0aGlzLl9hbmltYXRlQmdPcGFjaXR5ID0gIXRoaXMuX2FuaW1hdGVSb290T3BhY2l0eSAmJiB0aGlzLnBzd3Aub3B0aW9ucy5iZ09wYWNpdHkgPiBNSU5fT1BBQ0lUWTtcbiAgICB0aGlzLl9vcGFjaXR5RWxlbWVudCA9IHRoaXMuX2FuaW1hdGVSb290T3BhY2l0eSA/IHBzd3AuZWxlbWVudCA6IHBzd3AuYmc7XG5cbiAgICBpZiAoIXRoaXMuX3VzZUFuaW1hdGlvbikge1xuICAgICAgdGhpcy5fZHVyYXRpb24gPSAwO1xuICAgICAgdGhpcy5fYW5pbWF0ZVpvb20gPSBmYWxzZTtcbiAgICAgIHRoaXMuX2FuaW1hdGVCZ09wYWNpdHkgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2FuaW1hdGVSb290T3BhY2l0eSA9IHRydWU7XG5cbiAgICAgIGlmICh0aGlzLmlzT3BlbmluZykge1xuICAgICAgICBpZiAocHN3cC5lbGVtZW50KSB7XG4gICAgICAgICAgcHN3cC5lbGVtZW50LnN0eWxlLm9wYWNpdHkgPSBTdHJpbmcoTUlOX09QQUNJVFkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHN3cC5hcHBseUJnT3BhY2l0eSgxKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9hbmltYXRlWm9vbSAmJiB0aGlzLl90aHVtYkJvdW5kcyAmJiB0aGlzLl90aHVtYkJvdW5kcy5pbm5lclJlY3QpIHtcbiAgICAgIHZhciBfdGhpcyRwc3dwJGN1cnJTbGlkZTtcblxuICAgICAgLy8gUHJvcGVydGllcyBhcmUgdXNlZCB3aGVuIGFuaW1hdGlvbiBmcm9tIGNyb3BwZWQgdGh1bWJuYWlsXG4gICAgICB0aGlzLl9jcm9wcGVkWm9vbSA9IHRydWU7XG4gICAgICB0aGlzLl9jcm9wQ29udGFpbmVyMSA9IHRoaXMucHN3cC5jb250YWluZXI7XG4gICAgICB0aGlzLl9jcm9wQ29udGFpbmVyMiA9IChfdGhpcyRwc3dwJGN1cnJTbGlkZSA9IHRoaXMucHN3cC5jdXJyU2xpZGUpID09PSBudWxsIHx8IF90aGlzJHBzd3AkY3VyclNsaWRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRwc3dwJGN1cnJTbGlkZS5ob2xkZXJFbGVtZW50O1xuXG4gICAgICBpZiAocHN3cC5jb250YWluZXIpIHtcbiAgICAgICAgcHN3cC5jb250YWluZXIuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgICAgcHN3cC5jb250YWluZXIuc3R5bGUud2lkdGggPSBwc3dwLnZpZXdwb3J0U2l6ZS54ICsgJ3B4JztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY3JvcHBlZFpvb20gPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc09wZW5pbmcpIHtcbiAgICAgIC8vIEFwcGx5IHN0eWxlcyBiZWZvcmUgb3BlbmluZyB0cmFuc2l0aW9uXG4gICAgICBpZiAodGhpcy5fYW5pbWF0ZVJvb3RPcGFjaXR5KSB7XG4gICAgICAgIGlmIChwc3dwLmVsZW1lbnQpIHtcbiAgICAgICAgICBwc3dwLmVsZW1lbnQuc3R5bGUub3BhY2l0eSA9IFN0cmluZyhNSU5fT1BBQ0lUWSk7XG4gICAgICAgIH1cblxuICAgICAgICBwc3dwLmFwcGx5QmdPcGFjaXR5KDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMuX2FuaW1hdGVCZ09wYWNpdHkgJiYgcHN3cC5iZykge1xuICAgICAgICAgIHBzd3AuYmcuc3R5bGUub3BhY2l0eSA9IFN0cmluZyhNSU5fT1BBQ0lUWSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocHN3cC5lbGVtZW50KSB7XG4gICAgICAgICAgcHN3cC5lbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2FuaW1hdGVab29tKSB7XG4gICAgICAgIHRoaXMuX3NldENsb3NlZFN0YXRlWm9vbVBhbigpO1xuXG4gICAgICAgIGlmICh0aGlzLl9wbGFjZWhvbGRlcikge1xuICAgICAgICAgIC8vIHRlbGwgYnJvd3NlciB0aGF0IHdlIHBsYW4gdG8gYW5pbWF0ZSB0aGUgcGxhY2Vob2xkZXJcbiAgICAgICAgICB0aGlzLl9wbGFjZWhvbGRlci5zdHlsZS53aWxsQ2hhbmdlID0gJ3RyYW5zZm9ybSc7IC8vIGhpZGUgcGxhY2Vob2xkZXIgdG8gYWxsb3cgaGlkaW5nIG9mXG4gICAgICAgICAgLy8gZWxlbWVudHMgdGhhdCBvdmVybGFwIGl0IChzdWNoIGFzIGljb25zIG92ZXIgdGhlIHRodW1ibmFpbClcblxuICAgICAgICAgIHRoaXMuX3BsYWNlaG9sZGVyLnN0eWxlLm9wYWNpdHkgPSBTdHJpbmcoTUlOX09QQUNJVFkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzQ2xvc2luZykge1xuICAgICAgLy8gaGlkZSBuZWFyYnkgc2xpZGVzIHRvIG1ha2Ugc3VyZSB0aGF0XG4gICAgICAvLyB0aGV5IGFyZSBub3QgcGFpbnRlZCBkdXJpbmcgdGhlIHRyYW5zaXRpb25cbiAgICAgIGlmIChwc3dwLm1haW5TY3JvbGwuaXRlbUhvbGRlcnNbMF0pIHtcbiAgICAgICAgcHN3cC5tYWluU2Nyb2xsLml0ZW1Ib2xkZXJzWzBdLmVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB9XG5cbiAgICAgIGlmIChwc3dwLm1haW5TY3JvbGwuaXRlbUhvbGRlcnNbMl0pIHtcbiAgICAgICAgcHN3cC5tYWluU2Nyb2xsLml0ZW1Ib2xkZXJzWzJdLmVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9jcm9wcGVkWm9vbSkge1xuICAgICAgICBpZiAocHN3cC5tYWluU2Nyb2xsLnggIT09IDApIHtcbiAgICAgICAgICAvLyBzaGlmdCB0aGUgbWFpbiBzY3JvbGxlciB0byB6ZXJvIHBvc2l0aW9uXG4gICAgICAgICAgcHN3cC5tYWluU2Nyb2xsLnJlc2V0UG9zaXRpb24oKTtcbiAgICAgICAgICBwc3dwLm1haW5TY3JvbGwucmVzaXplKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqIEBwcml2YXRlICovXG5cblxuICBfc3RhcnQoKSB7XG4gICAgaWYgKHRoaXMuaXNPcGVuaW5nICYmIHRoaXMuX3VzZUFuaW1hdGlvbiAmJiB0aGlzLl9wbGFjZWhvbGRlciAmJiB0aGlzLl9wbGFjZWhvbGRlci50YWdOYW1lID09PSAnSU1HJykge1xuICAgICAgLy8gVG8gZW5zdXJlIHNtb290aCBhbmltYXRpb25cbiAgICAgIC8vIHdlIHdhaXQgdGlsbCB0aGUgY3VycmVudCBzbGlkZSBpbWFnZSBwbGFjZWhvbGRlciBpcyBkZWNvZGVkLFxuICAgICAgLy8gYnV0IG5vIGxvbmdlciB0aGFuIDI1MG1zLFxuICAgICAgLy8gYW5kIG5vIHNob3J0ZXIgdGhhbiA1MG1zXG4gICAgICAvLyAoanVzdCB1c2luZyByZXF1ZXN0YW5pbWF0aW9uZnJhbWUgaXMgbm90IGVub3VnaCBpbiBGaXJlZm94LFxuICAgICAgLy8gZm9yIHNvbWUgcmVhc29uKVxuICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGxldCBkZWNvZGVkID0gZmFsc2U7XG4gICAgICAgIGxldCBpc0RlbGF5aW5nID0gdHJ1ZTtcbiAgICAgICAgZGVjb2RlSW1hZ2UoXG4gICAgICAgIC8qKiBAdHlwZSB7SFRNTEltYWdlRWxlbWVudH0gKi9cbiAgICAgICAgdGhpcy5fcGxhY2Vob2xkZXIpLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgIGRlY29kZWQgPSB0cnVlO1xuXG4gICAgICAgICAgaWYgKCFpc0RlbGF5aW5nKSB7XG4gICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGlzRGVsYXlpbmcgPSBmYWxzZTtcblxuICAgICAgICAgIGlmIChkZWNvZGVkKSB7XG4gICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgNTApO1xuICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIDI1MCk7XG4gICAgICB9KS5maW5hbGx5KCgpID0+IHRoaXMuX2luaXRpYXRlKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9pbml0aWF0ZSgpO1xuICAgIH1cbiAgfVxuICAvKiogQHByaXZhdGUgKi9cblxuXG4gIF9pbml0aWF0ZSgpIHtcbiAgICB2YXIgX3RoaXMkcHN3cCRlbGVtZW50LCBfdGhpcyRwc3dwJGVsZW1lbnQyO1xuXG4gICAgKF90aGlzJHBzd3AkZWxlbWVudCA9IHRoaXMucHN3cC5lbGVtZW50KSA9PT0gbnVsbCB8fCBfdGhpcyRwc3dwJGVsZW1lbnQgPT09IHZvaWQgMCB8fCBfdGhpcyRwc3dwJGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tcHN3cC10cmFuc2l0aW9uLWR1cmF0aW9uJywgdGhpcy5fZHVyYXRpb24gKyAnbXMnKTtcbiAgICB0aGlzLnBzd3AuZGlzcGF0Y2godGhpcy5pc09wZW5pbmcgPyAnb3BlbmluZ0FuaW1hdGlvblN0YXJ0JyA6ICdjbG9zaW5nQW5pbWF0aW9uU3RhcnQnKTsgLy8gbGVnYWN5IGV2ZW50XG5cbiAgICB0aGlzLnBzd3AuZGlzcGF0Y2goXG4gICAgLyoqIEB0eXBlIHsnaW5pdGlhbFpvb21JbicgfCAnaW5pdGlhbFpvb21PdXQnfSAqL1xuICAgICdpbml0aWFsWm9vbScgKyAodGhpcy5pc09wZW5pbmcgPyAnSW4nIDogJ091dCcpKTtcbiAgICAoX3RoaXMkcHN3cCRlbGVtZW50MiA9IHRoaXMucHN3cC5lbGVtZW50KSA9PT0gbnVsbCB8fCBfdGhpcyRwc3dwJGVsZW1lbnQyID09PSB2b2lkIDAgfHwgX3RoaXMkcHN3cCRlbGVtZW50Mi5jbGFzc0xpc3QudG9nZ2xlKCdwc3dwLS11aS12aXNpYmxlJywgdGhpcy5pc09wZW5pbmcpO1xuXG4gICAgaWYgKHRoaXMuaXNPcGVuaW5nKSB7XG4gICAgICBpZiAodGhpcy5fcGxhY2Vob2xkZXIpIHtcbiAgICAgICAgLy8gdW5oaWRlIHRoZSBwbGFjZWhvbGRlclxuICAgICAgICB0aGlzLl9wbGFjZWhvbGRlci5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9hbmltYXRlVG9PcGVuU3RhdGUoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNDbG9zaW5nKSB7XG4gICAgICB0aGlzLl9hbmltYXRlVG9DbG9zZWRTdGF0ZSgpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fdXNlQW5pbWF0aW9uKSB7XG4gICAgICB0aGlzLl9vbkFuaW1hdGlvbkNvbXBsZXRlKCk7XG4gICAgfVxuICB9XG4gIC8qKiBAcHJpdmF0ZSAqL1xuXG5cbiAgX29uQW5pbWF0aW9uQ29tcGxldGUoKSB7XG4gICAgY29uc3Qge1xuICAgICAgcHN3cFxuICAgIH0gPSB0aGlzO1xuICAgIHRoaXMuaXNPcGVuID0gdGhpcy5pc09wZW5pbmc7XG4gICAgdGhpcy5pc0Nsb3NlZCA9IHRoaXMuaXNDbG9zaW5nO1xuICAgIHRoaXMuaXNPcGVuaW5nID0gZmFsc2U7XG4gICAgdGhpcy5pc0Nsb3NpbmcgPSBmYWxzZTtcbiAgICBwc3dwLmRpc3BhdGNoKHRoaXMuaXNPcGVuID8gJ29wZW5pbmdBbmltYXRpb25FbmQnIDogJ2Nsb3NpbmdBbmltYXRpb25FbmQnKTsgLy8gbGVnYWN5IGV2ZW50XG5cbiAgICBwc3dwLmRpc3BhdGNoKFxuICAgIC8qKiBAdHlwZSB7J2luaXRpYWxab29tSW5FbmQnIHwgJ2luaXRpYWxab29tT3V0RW5kJ30gKi9cbiAgICAnaW5pdGlhbFpvb20nICsgKHRoaXMuaXNPcGVuID8gJ0luRW5kJyA6ICdPdXRFbmQnKSk7XG5cbiAgICBpZiAodGhpcy5pc0Nsb3NlZCkge1xuICAgICAgcHN3cC5kZXN0cm95KCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgdmFyIF9wc3dwJGN1cnJTbGlkZTtcblxuICAgICAgaWYgKHRoaXMuX2FuaW1hdGVab29tICYmIHBzd3AuY29udGFpbmVyKSB7XG4gICAgICAgIHBzd3AuY29udGFpbmVyLnN0eWxlLm92ZXJmbG93ID0gJ3Zpc2libGUnO1xuICAgICAgICBwc3dwLmNvbnRhaW5lci5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgIH1cblxuICAgICAgKF9wc3dwJGN1cnJTbGlkZSA9IHBzd3AuY3VyclNsaWRlKSA9PT0gbnVsbCB8fCBfcHN3cCRjdXJyU2xpZGUgPT09IHZvaWQgMCB8fCBfcHN3cCRjdXJyU2xpZGUuYXBwbHlDdXJyZW50Wm9vbVBhbigpO1xuICAgIH1cbiAgfVxuICAvKiogQHByaXZhdGUgKi9cblxuXG4gIF9hbmltYXRlVG9PcGVuU3RhdGUoKSB7XG4gICAgY29uc3Qge1xuICAgICAgcHN3cFxuICAgIH0gPSB0aGlzO1xuXG4gICAgaWYgKHRoaXMuX2FuaW1hdGVab29tKSB7XG4gICAgICBpZiAodGhpcy5fY3JvcHBlZFpvb20gJiYgdGhpcy5fY3JvcENvbnRhaW5lcjEgJiYgdGhpcy5fY3JvcENvbnRhaW5lcjIpIHtcbiAgICAgICAgdGhpcy5fYW5pbWF0ZVRvKHRoaXMuX2Nyb3BDb250YWluZXIxLCAndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZTNkKDAsMCwwKScpO1xuXG4gICAgICAgIHRoaXMuX2FuaW1hdGVUbyh0aGlzLl9jcm9wQ29udGFpbmVyMiwgJ3RyYW5zZm9ybScsICdub25lJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChwc3dwLmN1cnJTbGlkZSkge1xuICAgICAgICBwc3dwLmN1cnJTbGlkZS56b29tQW5kUGFuVG9Jbml0aWFsKCk7XG5cbiAgICAgICAgdGhpcy5fYW5pbWF0ZVRvKHBzd3AuY3VyclNsaWRlLmNvbnRhaW5lciwgJ3RyYW5zZm9ybScsIHBzd3AuY3VyclNsaWRlLmdldEN1cnJlbnRUcmFuc2Zvcm0oKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2FuaW1hdGVCZ09wYWNpdHkgJiYgcHN3cC5iZykge1xuICAgICAgdGhpcy5fYW5pbWF0ZVRvKHBzd3AuYmcsICdvcGFjaXR5JywgU3RyaW5nKHBzd3Aub3B0aW9ucy5iZ09wYWNpdHkpKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fYW5pbWF0ZVJvb3RPcGFjaXR5ICYmIHBzd3AuZWxlbWVudCkge1xuICAgICAgdGhpcy5fYW5pbWF0ZVRvKHBzd3AuZWxlbWVudCwgJ29wYWNpdHknLCAnMScpO1xuICAgIH1cbiAgfVxuICAvKiogQHByaXZhdGUgKi9cblxuXG4gIF9hbmltYXRlVG9DbG9zZWRTdGF0ZSgpIHtcbiAgICBjb25zdCB7XG4gICAgICBwc3dwXG4gICAgfSA9IHRoaXM7XG5cbiAgICBpZiAodGhpcy5fYW5pbWF0ZVpvb20pIHtcbiAgICAgIHRoaXMuX3NldENsb3NlZFN0YXRlWm9vbVBhbih0cnVlKTtcbiAgICB9IC8vIGRvIG5vdCBhbmltYXRlIG9wYWNpdHkgaWYgaXQncyBhbHJlYWR5IGF0IDBcblxuXG4gICAgaWYgKHRoaXMuX2FuaW1hdGVCZ09wYWNpdHkgJiYgcHN3cC5iZ09wYWNpdHkgPiAwLjAxICYmIHBzd3AuYmcpIHtcbiAgICAgIHRoaXMuX2FuaW1hdGVUbyhwc3dwLmJnLCAnb3BhY2l0eScsICcwJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2FuaW1hdGVSb290T3BhY2l0eSAmJiBwc3dwLmVsZW1lbnQpIHtcbiAgICAgIHRoaXMuX2FuaW1hdGVUbyhwc3dwLmVsZW1lbnQsICdvcGFjaXR5JywgJzAnKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2FuaW1hdGVdXG4gICAqL1xuXG5cbiAgX3NldENsb3NlZFN0YXRlWm9vbVBhbihhbmltYXRlKSB7XG4gICAgaWYgKCF0aGlzLl90aHVtYkJvdW5kcykgcmV0dXJuO1xuICAgIGNvbnN0IHtcbiAgICAgIHBzd3BcbiAgICB9ID0gdGhpcztcbiAgICBjb25zdCB7XG4gICAgICBpbm5lclJlY3RcbiAgICB9ID0gdGhpcy5fdGh1bWJCb3VuZHM7XG4gICAgY29uc3Qge1xuICAgICAgY3VyclNsaWRlLFxuICAgICAgdmlld3BvcnRTaXplXG4gICAgfSA9IHBzd3A7XG5cbiAgICBpZiAodGhpcy5fY3JvcHBlZFpvb20gJiYgaW5uZXJSZWN0ICYmIHRoaXMuX2Nyb3BDb250YWluZXIxICYmIHRoaXMuX2Nyb3BDb250YWluZXIyKSB7XG4gICAgICBjb25zdCBjb250YWluZXJPbmVQYW5YID0gLXZpZXdwb3J0U2l6ZS54ICsgKHRoaXMuX3RodW1iQm91bmRzLnggLSBpbm5lclJlY3QueCkgKyBpbm5lclJlY3QudztcbiAgICAgIGNvbnN0IGNvbnRhaW5lck9uZVBhblkgPSAtdmlld3BvcnRTaXplLnkgKyAodGhpcy5fdGh1bWJCb3VuZHMueSAtIGlubmVyUmVjdC55KSArIGlubmVyUmVjdC5oO1xuICAgICAgY29uc3QgY29udGFpbmVyVHdvUGFuWCA9IHZpZXdwb3J0U2l6ZS54IC0gaW5uZXJSZWN0Lnc7XG4gICAgICBjb25zdCBjb250YWluZXJUd29QYW5ZID0gdmlld3BvcnRTaXplLnkgLSBpbm5lclJlY3QuaDtcblxuICAgICAgaWYgKGFuaW1hdGUpIHtcbiAgICAgICAgdGhpcy5fYW5pbWF0ZVRvKHRoaXMuX2Nyb3BDb250YWluZXIxLCAndHJhbnNmb3JtJywgdG9UcmFuc2Zvcm1TdHJpbmcoY29udGFpbmVyT25lUGFuWCwgY29udGFpbmVyT25lUGFuWSkpO1xuXG4gICAgICAgIHRoaXMuX2FuaW1hdGVUbyh0aGlzLl9jcm9wQ29udGFpbmVyMiwgJ3RyYW5zZm9ybScsIHRvVHJhbnNmb3JtU3RyaW5nKGNvbnRhaW5lclR3b1BhblgsIGNvbnRhaW5lclR3b1BhblkpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldFRyYW5zZm9ybSh0aGlzLl9jcm9wQ29udGFpbmVyMSwgY29udGFpbmVyT25lUGFuWCwgY29udGFpbmVyT25lUGFuWSk7XG4gICAgICAgIHNldFRyYW5zZm9ybSh0aGlzLl9jcm9wQ29udGFpbmVyMiwgY29udGFpbmVyVHdvUGFuWCwgY29udGFpbmVyVHdvUGFuWSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGN1cnJTbGlkZSkge1xuICAgICAgZXF1YWxpemVQb2ludHMoY3VyclNsaWRlLnBhbiwgaW5uZXJSZWN0IHx8IHRoaXMuX3RodW1iQm91bmRzKTtcbiAgICAgIGN1cnJTbGlkZS5jdXJyWm9vbUxldmVsID0gdGhpcy5fdGh1bWJCb3VuZHMudyAvIGN1cnJTbGlkZS53aWR0aDtcblxuICAgICAgaWYgKGFuaW1hdGUpIHtcbiAgICAgICAgdGhpcy5fYW5pbWF0ZVRvKGN1cnJTbGlkZS5jb250YWluZXIsICd0cmFuc2Zvcm0nLCBjdXJyU2xpZGUuZ2V0Q3VycmVudFRyYW5zZm9ybSgpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJTbGlkZS5hcHBseUN1cnJlbnRab29tUGFuKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXRcbiAgICogQHBhcmFtIHsndHJhbnNmb3JtJyB8ICdvcGFjaXR5J30gcHJvcFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcFZhbHVlXG4gICAqL1xuXG5cbiAgX2FuaW1hdGVUbyh0YXJnZXQsIHByb3AsIHByb3BWYWx1ZSkge1xuICAgIGlmICghdGhpcy5fZHVyYXRpb24pIHtcbiAgICAgIHRhcmdldC5zdHlsZVtwcm9wXSA9IHByb3BWYWx1ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB7XG4gICAgICBhbmltYXRpb25zXG4gICAgfSA9IHRoaXMucHN3cDtcbiAgICAvKiogQHR5cGUge0FuaW1hdGlvblByb3BzfSAqL1xuXG4gICAgY29uc3QgYW5pbVByb3BzID0ge1xuICAgICAgZHVyYXRpb246IHRoaXMuX2R1cmF0aW9uLFxuICAgICAgZWFzaW5nOiB0aGlzLnBzd3Aub3B0aW9ucy5lYXNpbmcsXG4gICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgIGlmICghYW5pbWF0aW9ucy5hY3RpdmVBbmltYXRpb25zLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuX29uQW5pbWF0aW9uQ29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHRhcmdldFxuICAgIH07XG4gICAgYW5pbVByb3BzW3Byb3BdID0gcHJvcFZhbHVlO1xuICAgIGFuaW1hdGlvbnMuc3RhcnRUcmFuc2l0aW9uKGFuaW1Qcm9wcyk7XG4gIH1cblxufVxuXG4vKipcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAdHlwZWRlZiB7aW1wb3J0KCcuL3R5cGVzLmpzJykuVHlwZTxUPn0gVHlwZTxUPlxuICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuL3NsaWRlL3NsaWRlLmpzJykuU2xpZGVEYXRhfSBTbGlkZURhdGEgKi9cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4vc2xpZGUvem9vbS1sZXZlbC5qcycpLlpvb21MZXZlbE9wdGlvbn0gWm9vbUxldmVsT3B0aW9uICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuL3VpL3VpLWVsZW1lbnQuanMnKS5VSUVsZW1lbnREYXRhfSBVSUVsZW1lbnREYXRhICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuL21haW4tc2Nyb2xsLmpzJykuSXRlbUhvbGRlcn0gSXRlbUhvbGRlciAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi9jb3JlL2V2ZW50YWJsZS5qcycpLlBob3RvU3dpcGVFdmVudHNNYXB9IFBob3RvU3dpcGVFdmVudHNNYXAgKi9cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4vY29yZS9ldmVudGFibGUuanMnKS5QaG90b1N3aXBlRmlsdGVyc01hcH0gUGhvdG9Td2lwZUZpbHRlcnNNYXAgKi9cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4vc2xpZGUvZ2V0LXRodW1iLWJvdW5kcycpLkJvdW5kc30gQm91bmRzICovXG5cbi8qKlxuICogQHRlbXBsYXRlIHtrZXlvZiBQaG90b1N3aXBlRXZlbnRzTWFwfSBUXG4gKiBAdHlwZWRlZiB7aW1wb3J0KCcuL2NvcmUvZXZlbnRhYmxlLmpzJykuRXZlbnRDYWxsYmFjazxUPn0gRXZlbnRDYWxsYmFjazxUPlxuICovXG5cbi8qKlxuICogQHRlbXBsYXRlIHtrZXlvZiBQaG90b1N3aXBlRXZlbnRzTWFwfSBUXG4gKiBAdHlwZWRlZiB7aW1wb3J0KCcuL2NvcmUvZXZlbnRhYmxlLmpzJykuQXVnbWVudGVkRXZlbnQ8VD59IEF1Z21lbnRlZEV2ZW50PFQ+XG4gKi9cblxuLyoqIEB0eXBlZGVmIHt7IHg6IG51bWJlcjsgeTogbnVtYmVyOyBpZD86IHN0cmluZyB8IG51bWJlciB9fSBQb2ludCAqL1xuXG4vKiogQHR5cGVkZWYge3sgdG9wOiBudW1iZXI7IGJvdHRvbTogbnVtYmVyOyBsZWZ0OiBudW1iZXI7IHJpZ2h0OiBudW1iZXIgfX0gUGFkZGluZyAqL1xuXG4vKiogQHR5cGVkZWYge1NsaWRlRGF0YVtdfSBEYXRhU291cmNlQXJyYXkgKi9cblxuLyoqIEB0eXBlZGVmIHt7IGdhbGxlcnk6IEhUTUxFbGVtZW50OyBpdGVtcz86IEhUTUxFbGVtZW50W10gfX0gRGF0YVNvdXJjZU9iamVjdCAqL1xuXG4vKiogQHR5cGVkZWYge0RhdGFTb3VyY2VBcnJheSB8IERhdGFTb3VyY2VPYmplY3R9IERhdGFTb3VyY2UgKi9cblxuLyoqIEB0eXBlZGVmIHsocG9pbnQ6IFBvaW50LCBvcmlnaW5hbEV2ZW50OiBQb2ludGVyRXZlbnQpID0+IHZvaWR9IEFjdGlvbkZuICovXG5cbi8qKiBAdHlwZWRlZiB7J2Nsb3NlJyB8ICduZXh0JyB8ICd6b29tJyB8ICd6b29tLW9yLWNsb3NlJyB8ICd0b2dnbGUtY29udHJvbHMnfSBBY3Rpb25UeXBlICovXG5cbi8qKiBAdHlwZWRlZiB7VHlwZTxQaG90b1N3aXBlPiB8IHsgZGVmYXVsdDogVHlwZTxQaG90b1N3aXBlPiB9fSBQaG90b1N3aXBlTW9kdWxlICovXG5cbi8qKiBAdHlwZWRlZiB7UGhvdG9Td2lwZU1vZHVsZSB8IFByb21pc2U8UGhvdG9Td2lwZU1vZHVsZT4gfCAoKCkgPT4gUHJvbWlzZTxQaG90b1N3aXBlTW9kdWxlPil9IFBob3RvU3dpcGVNb2R1bGVPcHRpb24gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7c3RyaW5nIHwgTm9kZUxpc3RPZjxIVE1MRWxlbWVudD4gfCBIVE1MRWxlbWVudFtdIHwgSFRNTEVsZW1lbnR9IEVsZW1lbnRQcm92aWRlclxuICovXG5cbi8qKiBAdHlwZWRlZiB7UGFydGlhbDxQcmVwYXJlZFBob3RvU3dpcGVPcHRpb25zPn0gUGhvdG9Td2lwZU9wdGlvbnMgaHR0cHM6Ly9waG90b3N3aXBlLmNvbS9vcHRpb25zLyAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFByZXBhcmVkUGhvdG9Td2lwZU9wdGlvbnNcbiAqXG4gKiBAcHJvcCB7RGF0YVNvdXJjZX0gW2RhdGFTb3VyY2VdXG4gKiBQYXNzIGFuIGFycmF5IG9mIGFueSBpdGVtcyB2aWEgZGF0YVNvdXJjZSBvcHRpb24uIEl0cyBsZW5ndGggd2lsbCBkZXRlcm1pbmUgYW1vdW50IG9mIHNsaWRlc1xuICogKHdoaWNoIG1heSBiZSBtb2RpZmllZCBmdXJ0aGVyIGZyb20gbnVtSXRlbXMgZXZlbnQpLlxuICpcbiAqIEVhY2ggaXRlbSBzaG91bGQgY29udGFpbiBkYXRhIHRoYXQgeW91IG5lZWQgdG8gZ2VuZXJhdGUgc2xpZGVcbiAqIChmb3IgaW1hZ2Ugc2xpZGUgaXQgd291bGQgYmUgc3JjIChpbWFnZSBVUkwpLCB3aWR0aCAoaW1hZ2Ugd2lkdGgpLCBoZWlnaHQsIHNyY3NldCwgYWx0KS5cbiAqXG4gKiBJZiB0aGVzZSBwcm9wZXJ0aWVzIGFyZSBub3QgcHJlc2VudCBpbiB5b3VyIGluaXRpYWwgYXJyYXksIHlvdSBtYXkgXCJwcmUtcGFyc2VcIiBlYWNoIGl0ZW0gZnJvbSBpdGVtRGF0YSBmaWx0ZXIuXG4gKlxuICogQHByb3Age251bWJlcn0gYmdPcGFjaXR5XG4gKiBCYWNrZ3JvdW5kIGJhY2tkcm9wIG9wYWNpdHksIGFsd2F5cyBkZWZpbmUgaXQgdmlhIHRoaXMgb3B0aW9uIGFuZCBub3QgdmlhIENTUyByZ2JhIGNvbG9yLlxuICpcbiAqIEBwcm9wIHtudW1iZXJ9IHNwYWNpbmdcbiAqIFNwYWNpbmcgYmV0d2VlbiBzbGlkZXMuIERlZmluZWQgYXMgcmF0aW8gcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0IHdpZHRoICgwLjEgPSAxMCUgb2Ygdmlld3BvcnQpLlxuICpcbiAqIEBwcm9wIHtib29sZWFufSBhbGxvd1BhblRvTmV4dFxuICogQWxsb3cgc3dpcGUgbmF2aWdhdGlvbiB0byB0aGUgbmV4dCBzbGlkZSB3aGVuIHRoZSBjdXJyZW50IHNsaWRlIGlzIHpvb21lZC4gRG9lcyBub3QgYXBwbHkgdG8gbW91c2UgZXZlbnRzLlxuICpcbiAqIEBwcm9wIHtib29sZWFufSBsb29wXG4gKiBJZiBzZXQgdG8gdHJ1ZSB5b3UnbGwgYmUgYWJsZSB0byBzd2lwZSBmcm9tIHRoZSBsYXN0IHRvIHRoZSBmaXJzdCBpbWFnZS5cbiAqIE9wdGlvbiBpcyBhbHdheXMgZmFsc2Ugd2hlbiB0aGVyZSBhcmUgbGVzcyB0aGFuIDMgc2xpZGVzLlxuICpcbiAqIEBwcm9wIHtib29sZWFufSBbd2hlZWxUb1pvb21dXG4gKiBCeSBkZWZhdWx0IFBob3RvU3dpcGUgem9vbXMgaW1hZ2Ugd2l0aCBjdHJsLXdoZWVsLCBpZiB5b3UgZW5hYmxlIHRoaXMgb3B0aW9uIC0gaW1hZ2Ugd2lsbCB6b29tIGp1c3QgdmlhIHdoZWVsLlxuICpcbiAqIEBwcm9wIHtib29sZWFufSBwaW5jaFRvQ2xvc2VcbiAqIFBpbmNoIHRvdWNoIGdlc3R1cmUgdG8gY2xvc2UgdGhlIGdhbGxlcnkuXG4gKlxuICogQHByb3Age2Jvb2xlYW59IGNsb3NlT25WZXJ0aWNhbERyYWdcbiAqIFZlcnRpY2FsIGRyYWcgZ2VzdHVyZSB0byBjbG9zZSB0aGUgUGhvdG9Td2lwZS5cbiAqXG4gKiBAcHJvcCB7UGFkZGluZ30gW3BhZGRpbmddXG4gKiBTbGlkZSBhcmVhIHBhZGRpbmcgKGluIHBpeGVscykuXG4gKlxuICogQHByb3Ageyh2aWV3cG9ydFNpemU6IFBvaW50LCBpdGVtRGF0YTogU2xpZGVEYXRhLCBpbmRleDogbnVtYmVyKSA9PiBQYWRkaW5nfSBbcGFkZGluZ0ZuXVxuICogVGhlIG9wdGlvbiBpcyBjaGVja2VkIGZyZXF1ZW50bHksIHNvIG1ha2Ugc3VyZSBpdCdzIHBlcmZvcm1hbnQuIE92ZXJyaWRlcyBwYWRkaW5nIG9wdGlvbiBpZiBkZWZpbmVkLiBGb3IgZXhhbXBsZTpcbiAqXG4gKiBAcHJvcCB7bnVtYmVyIHwgZmFsc2V9IGhpZGVBbmltYXRpb25EdXJhdGlvblxuICogVHJhbnNpdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMsIGNhbiBiZSAwLlxuICpcbiAqIEBwcm9wIHtudW1iZXIgfCBmYWxzZX0gc2hvd0FuaW1hdGlvbkR1cmF0aW9uXG4gKiBUcmFuc2l0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcywgY2FuIGJlIDAuXG4gKlxuICogQHByb3Age251bWJlciB8IGZhbHNlfSB6b29tQW5pbWF0aW9uRHVyYXRpb25cbiAqIFRyYW5zaXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLCBjYW4gYmUgMC5cbiAqXG4gKiBAcHJvcCB7c3RyaW5nfSBlYXNpbmdcbiAqIFN0cmluZywgJ2N1YmljLWJlemllciguNCwwLC4yMiwxKScuIENTUyBlYXNpbmcgZnVuY3Rpb24gZm9yIG9wZW4vY2xvc2Uvem9vbSB0cmFuc2l0aW9ucy5cbiAqXG4gKiBAcHJvcCB7Ym9vbGVhbn0gZXNjS2V5XG4gKiBFc2Mga2V5IHRvIGNsb3NlLlxuICpcbiAqIEBwcm9wIHtib29sZWFufSBhcnJvd0tleXNcbiAqIExlZnQvcmlnaHQgYXJyb3cga2V5cyBmb3IgbmF2aWdhdGlvbi5cbiAqXG4gKiBAcHJvcCB7Ym9vbGVhbn0gdHJhcEZvY3VzXG4gKiBUcmFwIGZvY3VzIHdpdGhpbiBQaG90b1N3aXBlIGVsZW1lbnQgd2hpbGUgaXQncyBvcGVuLlxuICpcbiAqIEBwcm9wIHtib29sZWFufSByZXR1cm5Gb2N1c1xuICogUmVzdG9yZSBmb2N1cyB0aGUgbGFzdCBhY3RpdmUgZWxlbWVudCBhZnRlciBQaG90b1N3aXBlIGlzIGNsb3NlZC5cbiAqXG4gKiBAcHJvcCB7Ym9vbGVhbn0gY2xpY2tUb0Nsb3NlTm9uWm9vbWFibGVcbiAqIElmIGltYWdlIGlzIG5vdCB6b29tYWJsZSAoZm9yIGV4YW1wbGUsIHNtYWxsZXIgdGhhbiB2aWV3cG9ydCkgaXQgY2FuIGJlIGNsb3NlZCBieSBjbGlja2luZyBvbiBpdC5cbiAqXG4gKiBAcHJvcCB7QWN0aW9uVHlwZSB8IEFjdGlvbkZuIHwgZmFsc2V9IGltYWdlQ2xpY2tBY3Rpb25cbiAqIFJlZmVyIHRvIGNsaWNrIGFuZCB0YXAgYWN0aW9ucyBwYWdlLlxuICpcbiAqIEBwcm9wIHtBY3Rpb25UeXBlIHwgQWN0aW9uRm4gfCBmYWxzZX0gYmdDbGlja0FjdGlvblxuICogUmVmZXIgdG8gY2xpY2sgYW5kIHRhcCBhY3Rpb25zIHBhZ2UuXG4gKlxuICogQHByb3Age0FjdGlvblR5cGUgfCBBY3Rpb25GbiB8IGZhbHNlfSB0YXBBY3Rpb25cbiAqIFJlZmVyIHRvIGNsaWNrIGFuZCB0YXAgYWN0aW9ucyBwYWdlLlxuICpcbiAqIEBwcm9wIHtBY3Rpb25UeXBlIHwgQWN0aW9uRm4gfCBmYWxzZX0gZG91YmxlVGFwQWN0aW9uXG4gKiBSZWZlciB0byBjbGljayBhbmQgdGFwIGFjdGlvbnMgcGFnZS5cbiAqXG4gKiBAcHJvcCB7bnVtYmVyfSBwcmVsb2FkZXJEZWxheVxuICogRGVsYXkgYmVmb3JlIHRoZSBsb2FkaW5nIGluZGljYXRvciB3aWxsIGJlIGRpc3BsYXllZCxcbiAqIGlmIGltYWdlIGlzIGxvYWRlZCBkdXJpbmcgaXQgLSB0aGUgaW5kaWNhdG9yIHdpbGwgbm90IGJlIGRpc3BsYXllZCBhdCBhbGwuIENhbiBiZSB6ZXJvLlxuICpcbiAqIEBwcm9wIHtzdHJpbmd9IGluZGV4SW5kaWNhdG9yU2VwXG4gKiBVc2VkIGZvciBzbGlkZSBjb3VudCBpbmRpY2F0b3IgKFwiMSBvZiAxMCBcIikuXG4gKlxuICogQHByb3AgeyhvcHRpb25zOiBQaG90b1N3aXBlT3B0aW9ucywgcHN3cDogUGhvdG9Td2lwZUJhc2UpID0+IFBvaW50fSBbZ2V0Vmlld3BvcnRTaXplRm5dXG4gKiBBIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIHJldHVybiBzbGlkZSB2aWV3cG9ydCB3aWR0aCBhbmQgaGVpZ2h0LCBpbiBmb3JtYXQge3g6IDEwMCwgeTogMTAwfS5cbiAqXG4gKiBAcHJvcCB7c3RyaW5nfSBlcnJvck1zZ1xuICogTWVzc2FnZSB0byBkaXNwbGF5IHdoZW4gdGhlIGltYWdlIHdhc24ndCBhYmxlIHRvIGxvYWQuIElmIHlvdSBuZWVkIHRvIGRpc3BsYXkgSFRNTCAtIHVzZSBjb250ZW50RXJyb3JFbGVtZW50IGZpbHRlci5cbiAqXG4gKiBAcHJvcCB7W251bWJlciwgbnVtYmVyXX0gcHJlbG9hZFxuICogTGF6eSBsb2FkaW5nIG9mIG5lYXJieSBzbGlkZXMgYmFzZWQgb24gZGlyZWN0aW9uIG9mIG1vdmVtZW50LiBTaG91bGQgYmUgYW4gYXJyYXkgd2l0aCB0d28gaW50ZWdlcnMsXG4gKiBmaXJzdCBvbmUgLSBudW1iZXIgb2YgaXRlbXMgdG8gcHJlbG9hZCBiZWZvcmUgdGhlIGN1cnJlbnQgaW1hZ2UsIHNlY29uZCBvbmUgLSBhZnRlciB0aGUgY3VycmVudCBpbWFnZS5cbiAqIFR3byBuZWFyYnkgaW1hZ2VzIGFyZSBhbHdheXMgbG9hZGVkLlxuICpcbiAqIEBwcm9wIHtzdHJpbmd9IFttYWluQ2xhc3NdXG4gKiBDbGFzcyB0aGF0IHdpbGwgYmUgYWRkZWQgdG8gdGhlIHJvb3QgZWxlbWVudCBvZiBQaG90b1N3aXBlLCBtYXkgY29udGFpbiBtdWx0aXBsZSBzZXBhcmF0ZWQgYnkgc3BhY2UuXG4gKiBFeGFtcGxlIG9uIFN0eWxpbmcgcGFnZS5cbiAqXG4gKiBAcHJvcCB7SFRNTEVsZW1lbnR9IFthcHBlbmRUb0VsXVxuICogRWxlbWVudCB0byB3aGljaCBQaG90b1N3aXBlIGRpYWxvZyB3aWxsIGJlIGFwcGVuZGVkIHdoZW4gaXQgb3BlbnMuXG4gKlxuICogQHByb3Age251bWJlcn0gbWF4V2lkdGhUb0FuaW1hdGVcbiAqIE1heGltdW0gd2lkdGggb2YgaW1hZ2UgdG8gYW5pbWF0ZSwgaWYgaW5pdGlhbCByZW5kZXJlZCBpbWFnZSB3aWR0aFxuICogaXMgbGFyZ2VyIHRoYW4gdGhpcyB2YWx1ZSAtIHRoZSBvcGVuaW5nL2Nsb3NpbmcgdHJhbnNpdGlvbiB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgZGlzYWJsZWQuXG4gKlxuICogQHByb3Age3N0cmluZ30gW2Nsb3NlVGl0bGVdXG4gKiBUcmFuc2xhdGluZ1xuICpcbiAqIEBwcm9wIHtzdHJpbmd9IFt6b29tVGl0bGVdXG4gKiBUcmFuc2xhdGluZ1xuICpcbiAqIEBwcm9wIHtzdHJpbmd9IFthcnJvd1ByZXZUaXRsZV1cbiAqIFRyYW5zbGF0aW5nXG4gKlxuICogQHByb3Age3N0cmluZ30gW2Fycm93TmV4dFRpdGxlXVxuICogVHJhbnNsYXRpbmdcbiAqXG4gKiBAcHJvcCB7J3pvb20nIHwgJ2ZhZGUnIHwgJ25vbmUnfSBbc2hvd0hpZGVBbmltYXRpb25UeXBlXVxuICogVG8gYWRqdXN0IG9wZW5pbmcgb3IgY2xvc2luZyB0cmFuc2l0aW9uIHR5cGUgdXNlIGxpZ2h0Ym94IG9wdGlvbiBgc2hvd0hpZGVBbmltYXRpb25UeXBlYCAoYFN0cmluZ2ApLlxuICogSXQgc3VwcG9ydHMgdGhyZWUgdmFsdWVzIC0gYHpvb21gIChkZWZhdWx0KSwgYGZhZGVgIChkZWZhdWx0IGlmIHRoZXJlIGlzIG5vIHRodW1ibmFpbCkgYW5kIGBub25lYC5cbiAqXG4gKiBBbmltYXRpb25zIGFyZSBhdXRvbWF0aWNhbGx5IGRpc2FibGVkIGlmIHVzZXIgYChwcmVmZXJzLXJlZHVjZWQtbW90aW9uOiByZWR1Y2UpYC5cbiAqXG4gKiBAcHJvcCB7bnVtYmVyfSBpbmRleFxuICogRGVmaW5lcyBzdGFydCBzbGlkZSBpbmRleC5cbiAqXG4gKiBAcHJvcCB7KGU6IE1vdXNlRXZlbnQpID0+IG51bWJlcn0gW2dldENsaWNrZWRJbmRleEZuXVxuICpcbiAqIEBwcm9wIHtib29sZWFufSBbYXJyb3dQcmV2XVxuICogQHByb3Age2Jvb2xlYW59IFthcnJvd05leHRdXG4gKiBAcHJvcCB7Ym9vbGVhbn0gW3pvb21dXG4gKiBAcHJvcCB7Ym9vbGVhbn0gW2Nsb3NlXVxuICogQHByb3Age2Jvb2xlYW59IFtjb3VudGVyXVxuICpcbiAqIEBwcm9wIHtzdHJpbmd9IFthcnJvd1ByZXZTVkddXG4gKiBAcHJvcCB7c3RyaW5nfSBbYXJyb3dOZXh0U1ZHXVxuICogQHByb3Age3N0cmluZ30gW3pvb21TVkddXG4gKiBAcHJvcCB7c3RyaW5nfSBbY2xvc2VTVkddXG4gKiBAcHJvcCB7c3RyaW5nfSBbY291bnRlclNWR11cbiAqXG4gKiBAcHJvcCB7c3RyaW5nfSBbYXJyb3dQcmV2VGl0bGVdXG4gKiBAcHJvcCB7c3RyaW5nfSBbYXJyb3dOZXh0VGl0bGVdXG4gKiBAcHJvcCB7c3RyaW5nfSBbem9vbVRpdGxlXVxuICogQHByb3Age3N0cmluZ30gW2Nsb3NlVGl0bGVdXG4gKiBAcHJvcCB7c3RyaW5nfSBbY291bnRlclRpdGxlXVxuICpcbiAqIEBwcm9wIHtab29tTGV2ZWxPcHRpb259IFtpbml0aWFsWm9vbUxldmVsXVxuICogQHByb3Age1pvb21MZXZlbE9wdGlvbn0gW3NlY29uZGFyeVpvb21MZXZlbF1cbiAqIEBwcm9wIHtab29tTGV2ZWxPcHRpb259IFttYXhab29tTGV2ZWxdXG4gKlxuICogQHByb3Age2Jvb2xlYW59IFttb3VzZU1vdmVQYW5dXG4gKiBAcHJvcCB7UG9pbnQgfCBudWxsfSBbaW5pdGlhbFBvaW50ZXJQb3NdXG4gKiBAcHJvcCB7Ym9vbGVhbn0gW3Nob3dIaWRlT3BhY2l0eV1cbiAqXG4gKiBAcHJvcCB7UGhvdG9Td2lwZU1vZHVsZU9wdGlvbn0gW3Bzd3BNb2R1bGVdXG4gKiBAcHJvcCB7KCkgPT4gUHJvbWlzZTxhbnk+fSBbb3BlblByb21pc2VdXG4gKiBAcHJvcCB7Ym9vbGVhbn0gW3ByZWxvYWRGaXJzdFNsaWRlXVxuICogQHByb3Age0VsZW1lbnRQcm92aWRlcn0gW2dhbGxlcnldXG4gKiBAcHJvcCB7c3RyaW5nfSBbZ2FsbGVyeVNlbGVjdG9yXVxuICogQHByb3Age0VsZW1lbnRQcm92aWRlcn0gW2NoaWxkcmVuXVxuICogQHByb3Age3N0cmluZ30gW2NoaWxkU2VsZWN0b3JdXG4gKiBAcHJvcCB7c3RyaW5nIHwgZmFsc2V9IFt0aHVtYlNlbGVjdG9yXVxuICovXG5cbi8qKiBAdHlwZSB7UHJlcGFyZWRQaG90b1N3aXBlT3B0aW9uc30gKi9cblxuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gIGFsbG93UGFuVG9OZXh0OiB0cnVlLFxuICBzcGFjaW5nOiAwLjEsXG4gIGxvb3A6IHRydWUsXG4gIHBpbmNoVG9DbG9zZTogdHJ1ZSxcbiAgY2xvc2VPblZlcnRpY2FsRHJhZzogdHJ1ZSxcbiAgaGlkZUFuaW1hdGlvbkR1cmF0aW9uOiAzMzMsXG4gIHNob3dBbmltYXRpb25EdXJhdGlvbjogMzMzLFxuICB6b29tQW5pbWF0aW9uRHVyYXRpb246IDMzMyxcbiAgZXNjS2V5OiB0cnVlLFxuICBhcnJvd0tleXM6IHRydWUsXG4gIHRyYXBGb2N1czogdHJ1ZSxcbiAgcmV0dXJuRm9jdXM6IHRydWUsXG4gIG1heFdpZHRoVG9BbmltYXRlOiA0MDAwLFxuICBjbGlja1RvQ2xvc2VOb25ab29tYWJsZTogdHJ1ZSxcbiAgaW1hZ2VDbGlja0FjdGlvbjogJ3pvb20tb3ItY2xvc2UnLFxuICBiZ0NsaWNrQWN0aW9uOiAnY2xvc2UnLFxuICB0YXBBY3Rpb246ICd0b2dnbGUtY29udHJvbHMnLFxuICBkb3VibGVUYXBBY3Rpb246ICd6b29tJyxcbiAgaW5kZXhJbmRpY2F0b3JTZXA6ICcgLyAnLFxuICBwcmVsb2FkZXJEZWxheTogMjAwMCxcbiAgYmdPcGFjaXR5OiAwLjgsXG4gIGluZGV4OiAwLFxuICBlcnJvck1zZzogJ1RoZSBpbWFnZSBjYW5ub3QgYmUgbG9hZGVkJyxcbiAgcHJlbG9hZDogWzEsIDJdLFxuICBlYXNpbmc6ICdjdWJpYy1iZXppZXIoLjQsMCwuMjIsMSknXG59O1xuLyoqXG4gKiBQaG90b1N3aXBlIENvcmVcbiAqL1xuXG5jbGFzcyBQaG90b1N3aXBlIGV4dGVuZHMgUGhvdG9Td2lwZUJhc2Uge1xuICAvKipcbiAgICogQHBhcmFtIHtQaG90b1N3aXBlT3B0aW9uc30gW29wdGlvbnNdXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLm9wdGlvbnMgPSB0aGlzLl9wcmVwYXJlT3B0aW9ucyhvcHRpb25zIHx8IHt9KTtcbiAgICAvKipcbiAgICAgKiBvZmZzZXQgb2Ygdmlld3BvcnQgcmVsYXRpdmUgdG8gZG9jdW1lbnRcbiAgICAgKlxuICAgICAqIEB0eXBlIHtQb2ludH1cbiAgICAgKi9cblxuICAgIHRoaXMub2Zmc2V0ID0ge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDBcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtQb2ludH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgdGhpcy5fcHJldlZpZXdwb3J0U2l6ZSA9IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwXG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTaXplIG9mIHNjcm9sbGFibGUgUGhvdG9Td2lwZSB2aWV3cG9ydFxuICAgICAqXG4gICAgICogQHR5cGUge1BvaW50fVxuICAgICAqL1xuXG4gICAgdGhpcy52aWV3cG9ydFNpemUgPSB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMFxuICAgIH07XG4gICAgLyoqXG4gICAgICogYmFja2dyb3VuZCAoYmFja2Ryb3ApIG9wYWNpdHlcbiAgICAgKi9cblxuICAgIHRoaXMuYmdPcGFjaXR5ID0gMTtcbiAgICB0aGlzLmN1cnJJbmRleCA9IDA7XG4gICAgdGhpcy5wb3RlbnRpYWxJbmRleCA9IDA7XG4gICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICB0aGlzLmlzRGVzdHJveWluZyA9IGZhbHNlO1xuICAgIHRoaXMuaGFzTW91c2UgPSBmYWxzZTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtTbGlkZURhdGF9XG4gICAgICovXG5cbiAgICB0aGlzLl9pbml0aWFsSXRlbURhdGEgPSB7fTtcbiAgICAvKiogQHR5cGUge0JvdW5kcyB8IHVuZGVmaW5lZH0gKi9cblxuICAgIHRoaXMuX2luaXRpYWxUaHVtYkJvdW5kcyA9IHVuZGVmaW5lZDtcbiAgICAvKiogQHR5cGUge0hUTUxEaXZFbGVtZW50IHwgdW5kZWZpbmVkfSAqL1xuXG4gICAgdGhpcy50b3BCYXIgPSB1bmRlZmluZWQ7XG4gICAgLyoqIEB0eXBlIHtIVE1MRGl2RWxlbWVudCB8IHVuZGVmaW5lZH0gKi9cblxuICAgIHRoaXMuZWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICAvKiogQHR5cGUge0hUTUxEaXZFbGVtZW50IHwgdW5kZWZpbmVkfSAqL1xuXG4gICAgdGhpcy50ZW1wbGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAvKiogQHR5cGUge0hUTUxEaXZFbGVtZW50IHwgdW5kZWZpbmVkfSAqL1xuXG4gICAgdGhpcy5jb250YWluZXIgPSB1bmRlZmluZWQ7XG4gICAgLyoqIEB0eXBlIHtIVE1MRWxlbWVudCB8IHVuZGVmaW5lZH0gKi9cblxuICAgIHRoaXMuc2Nyb2xsV3JhcCA9IHVuZGVmaW5lZDtcbiAgICAvKiogQHR5cGUge1NsaWRlIHwgdW5kZWZpbmVkfSAqL1xuXG4gICAgdGhpcy5jdXJyU2xpZGUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5ldmVudHMgPSBuZXcgRE9NRXZlbnRzKCk7XG4gICAgdGhpcy5hbmltYXRpb25zID0gbmV3IEFuaW1hdGlvbnMoKTtcbiAgICB0aGlzLm1haW5TY3JvbGwgPSBuZXcgTWFpblNjcm9sbCh0aGlzKTtcbiAgICB0aGlzLmdlc3R1cmVzID0gbmV3IEdlc3R1cmVzKHRoaXMpO1xuICAgIHRoaXMub3BlbmVyID0gbmV3IE9wZW5lcih0aGlzKTtcbiAgICB0aGlzLmtleWJvYXJkID0gbmV3IEtleWJvYXJkKHRoaXMpO1xuICAgIHRoaXMuY29udGVudExvYWRlciA9IG5ldyBDb250ZW50TG9hZGVyKHRoaXMpO1xuICB9XG4gIC8qKiBAcmV0dXJucyB7Ym9vbGVhbn0gKi9cblxuXG4gIGluaXQoKSB7XG4gICAgaWYgKHRoaXMuaXNPcGVuIHx8IHRoaXMuaXNEZXN0cm95aW5nKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy5pc09wZW4gPSB0cnVlO1xuICAgIHRoaXMuZGlzcGF0Y2goJ2luaXQnKTsgLy8gbGVnYWN5XG5cbiAgICB0aGlzLmRpc3BhdGNoKCdiZWZvcmVPcGVuJyk7XG5cbiAgICB0aGlzLl9jcmVhdGVNYWluU3RydWN0dXJlKCk7IC8vIGFkZCBjbGFzc2VzIHRvIHRoZSByb290IGVsZW1lbnQgb2YgUGhvdG9Td2lwZVxuXG5cbiAgICBsZXQgcm9vdENsYXNzZXMgPSAncHN3cC0tb3Blbic7XG5cbiAgICBpZiAodGhpcy5nZXN0dXJlcy5zdXBwb3J0c1RvdWNoKSB7XG4gICAgICByb290Q2xhc3NlcyArPSAnIHBzd3AtLXRvdWNoJztcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLm1haW5DbGFzcykge1xuICAgICAgcm9vdENsYXNzZXMgKz0gJyAnICsgdGhpcy5vcHRpb25zLm1haW5DbGFzcztcbiAgICB9XG5cbiAgICBpZiAodGhpcy5lbGVtZW50KSB7XG4gICAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lICs9ICcgJyArIHJvb3RDbGFzc2VzO1xuICAgIH1cblxuICAgIHRoaXMuY3VyckluZGV4ID0gdGhpcy5vcHRpb25zLmluZGV4IHx8IDA7XG4gICAgdGhpcy5wb3RlbnRpYWxJbmRleCA9IHRoaXMuY3VyckluZGV4O1xuICAgIHRoaXMuZGlzcGF0Y2goJ2ZpcnN0VXBkYXRlJyk7IC8vIHN0YXJ0aW5nIGluZGV4IGNhbiBiZSBtb2RpZmllZCBoZXJlXG4gICAgLy8gaW5pdGlhbGl6ZSBzY3JvbGwgd2hlZWwgaGFuZGxlciB0byBibG9jayB0aGUgc2Nyb2xsXG5cbiAgICB0aGlzLnNjcm9sbFdoZWVsID0gbmV3IFNjcm9sbFdoZWVsKHRoaXMpOyAvLyBzYW5pdGl6ZSBpbmRleFxuXG4gICAgaWYgKE51bWJlci5pc05hTih0aGlzLmN1cnJJbmRleCkgfHwgdGhpcy5jdXJySW5kZXggPCAwIHx8IHRoaXMuY3VyckluZGV4ID49IHRoaXMuZ2V0TnVtSXRlbXMoKSkge1xuICAgICAgdGhpcy5jdXJySW5kZXggPSAwO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5nZXN0dXJlcy5zdXBwb3J0c1RvdWNoKSB7XG4gICAgICAvLyBlbmFibGUgbW91c2UgZmVhdHVyZXMgaWYgbm8gdG91Y2ggc3VwcG9ydCBkZXRlY3RlZFxuICAgICAgdGhpcy5tb3VzZURldGVjdGVkKCk7XG4gICAgfSAvLyBjYXVzZXMgZm9yY2VkIHN5bmNocm9ub3VzIGxheW91dFxuXG5cbiAgICB0aGlzLnVwZGF0ZVNpemUoKTtcbiAgICB0aGlzLm9mZnNldC55ID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xuICAgIHRoaXMuX2luaXRpYWxJdGVtRGF0YSA9IHRoaXMuZ2V0SXRlbURhdGEodGhpcy5jdXJySW5kZXgpO1xuICAgIHRoaXMuZGlzcGF0Y2goJ2dldHRpbmdEYXRhJywge1xuICAgICAgaW5kZXg6IHRoaXMuY3VyckluZGV4LFxuICAgICAgZGF0YTogdGhpcy5faW5pdGlhbEl0ZW1EYXRhLFxuICAgICAgc2xpZGU6IHVuZGVmaW5lZFxuICAgIH0pOyAvLyAqTGF5b3V0KiAtIGNhbGN1bGF0ZSBzaXplIGFuZCBwb3NpdGlvbiBvZiBlbGVtZW50cyBoZXJlXG5cbiAgICB0aGlzLl9pbml0aWFsVGh1bWJCb3VuZHMgPSB0aGlzLmdldFRodW1iQm91bmRzKCk7XG4gICAgdGhpcy5kaXNwYXRjaCgnaW5pdGlhbExheW91dCcpO1xuICAgIHRoaXMub24oJ29wZW5pbmdBbmltYXRpb25FbmQnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGl0ZW1Ib2xkZXJzXG4gICAgICB9ID0gdGhpcy5tYWluU2Nyb2xsOyAvLyBBZGQgY29udGVudCB0byB0aGUgcHJldmlvdXMgYW5kIG5leHQgc2xpZGVcblxuICAgICAgaWYgKGl0ZW1Ib2xkZXJzWzBdKSB7XG4gICAgICAgIGl0ZW1Ib2xkZXJzWzBdLmVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB0aGlzLnNldENvbnRlbnQoaXRlbUhvbGRlcnNbMF0sIHRoaXMuY3VyckluZGV4IC0gMSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpdGVtSG9sZGVyc1syXSkge1xuICAgICAgICBpdGVtSG9sZGVyc1syXS5lbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgdGhpcy5zZXRDb250ZW50KGl0ZW1Ib2xkZXJzWzJdLCB0aGlzLmN1cnJJbmRleCArIDEpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmFwcGVuZEhlYXZ5KCk7XG4gICAgICB0aGlzLmNvbnRlbnRMb2FkZXIudXBkYXRlTGF6eSgpO1xuICAgICAgdGhpcy5ldmVudHMuYWRkKHdpbmRvdywgJ3Jlc2l6ZScsIHRoaXMuX2hhbmRsZVBhZ2VSZXNpemUuYmluZCh0aGlzKSk7XG4gICAgICB0aGlzLmV2ZW50cy5hZGQod2luZG93LCAnc2Nyb2xsJywgdGhpcy5fdXBkYXRlUGFnZVNjcm9sbE9mZnNldC5iaW5kKHRoaXMpKTtcbiAgICAgIHRoaXMuZGlzcGF0Y2goJ2JpbmRFdmVudHMnKTtcbiAgICB9KTsgLy8gc2V0IGNvbnRlbnQgZm9yIGNlbnRlciBzbGlkZSAoZmlyc3QgdGltZSlcblxuICAgIGlmICh0aGlzLm1haW5TY3JvbGwuaXRlbUhvbGRlcnNbMV0pIHtcbiAgICAgIHRoaXMuc2V0Q29udGVudCh0aGlzLm1haW5TY3JvbGwuaXRlbUhvbGRlcnNbMV0sIHRoaXMuY3VyckluZGV4KTtcbiAgICB9XG5cbiAgICB0aGlzLmRpc3BhdGNoKCdjaGFuZ2UnKTtcbiAgICB0aGlzLm9wZW5lci5vcGVuKCk7XG4gICAgdGhpcy5kaXNwYXRjaCgnYWZ0ZXJJbml0Jyk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBsb29wZWQgc2xpZGUgaW5kZXhcbiAgICogKGZvciBleGFtcGxlLCAtMSB3aWxsIHJldHVybiB0aGUgbGFzdCBzbGlkZSlcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4XG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuXG5cbiAgZ2V0TG9vcGVkSW5kZXgoaW5kZXgpIHtcbiAgICBjb25zdCBudW1TbGlkZXMgPSB0aGlzLmdldE51bUl0ZW1zKCk7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmxvb3ApIHtcbiAgICAgIGlmIChpbmRleCA+IG51bVNsaWRlcyAtIDEpIHtcbiAgICAgICAgaW5kZXggLT0gbnVtU2xpZGVzO1xuICAgICAgfVxuXG4gICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgIGluZGV4ICs9IG51bVNsaWRlcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY2xhbXAoaW5kZXgsIDAsIG51bVNsaWRlcyAtIDEpO1xuICB9XG5cbiAgYXBwZW5kSGVhdnkoKSB7XG4gICAgdGhpcy5tYWluU2Nyb2xsLml0ZW1Ib2xkZXJzLmZvckVhY2goaXRlbUhvbGRlciA9PiB7XG4gICAgICB2YXIgX2l0ZW1Ib2xkZXIkc2xpZGU7XG5cbiAgICAgIChfaXRlbUhvbGRlciRzbGlkZSA9IGl0ZW1Ib2xkZXIuc2xpZGUpID09PSBudWxsIHx8IF9pdGVtSG9sZGVyJHNsaWRlID09PSB2b2lkIDAgfHwgX2l0ZW1Ib2xkZXIkc2xpZGUuYXBwZW5kSGVhdnkoKTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQ2hhbmdlIHRoZSBzbGlkZVxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggTmV3IGluZGV4XG4gICAqL1xuXG5cbiAgZ29UbyhpbmRleCkge1xuICAgIHRoaXMubWFpblNjcm9sbC5tb3ZlSW5kZXhCeSh0aGlzLmdldExvb3BlZEluZGV4KGluZGV4KSAtIHRoaXMucG90ZW50aWFsSW5kZXgpO1xuICB9XG4gIC8qKlxuICAgKiBHbyB0byB0aGUgbmV4dCBzbGlkZS5cbiAgICovXG5cblxuICBuZXh0KCkge1xuICAgIHRoaXMuZ29Ubyh0aGlzLnBvdGVudGlhbEluZGV4ICsgMSk7XG4gIH1cbiAgLyoqXG4gICAqIEdvIHRvIHRoZSBwcmV2aW91cyBzbGlkZS5cbiAgICovXG5cblxuICBwcmV2KCkge1xuICAgIHRoaXMuZ29Ubyh0aGlzLnBvdGVudGlhbEluZGV4IC0gMSk7XG4gIH1cbiAgLyoqXG4gICAqIEBzZWUgc2xpZGUvc2xpZGUuanMgem9vbVRvXG4gICAqXG4gICAqIEBwYXJhbSB7UGFyYW1ldGVyczxTbGlkZVsnem9vbVRvJ10+fSBhcmdzXG4gICAqL1xuXG5cbiAgem9vbVRvKC4uLmFyZ3MpIHtcbiAgICB2YXIgX3RoaXMkY3VyclNsaWRlO1xuXG4gICAgKF90aGlzJGN1cnJTbGlkZSA9IHRoaXMuY3VyclNsaWRlKSA9PT0gbnVsbCB8fCBfdGhpcyRjdXJyU2xpZGUgPT09IHZvaWQgMCB8fCBfdGhpcyRjdXJyU2xpZGUuem9vbVRvKC4uLmFyZ3MpO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIHNsaWRlL3NsaWRlLmpzIHRvZ2dsZVpvb21cbiAgICovXG5cblxuICB0b2dnbGVab29tKCkge1xuICAgIHZhciBfdGhpcyRjdXJyU2xpZGUyO1xuXG4gICAgKF90aGlzJGN1cnJTbGlkZTIgPSB0aGlzLmN1cnJTbGlkZSkgPT09IG51bGwgfHwgX3RoaXMkY3VyclNsaWRlMiA9PT0gdm9pZCAwIHx8IF90aGlzJGN1cnJTbGlkZTIudG9nZ2xlWm9vbSgpO1xuICB9XG4gIC8qKlxuICAgKiBDbG9zZSB0aGUgZ2FsbGVyeS5cbiAgICogQWZ0ZXIgY2xvc2luZyB0cmFuc2l0aW9uIGVuZHMgLSBkZXN0cm95IGl0XG4gICAqL1xuXG5cbiAgY2xvc2UoKSB7XG4gICAgaWYgKCF0aGlzLm9wZW5lci5pc09wZW4gfHwgdGhpcy5pc0Rlc3Ryb3lpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmlzRGVzdHJveWluZyA9IHRydWU7XG4gICAgdGhpcy5kaXNwYXRjaCgnY2xvc2UnKTtcbiAgICB0aGlzLmV2ZW50cy5yZW1vdmVBbGwoKTtcbiAgICB0aGlzLm9wZW5lci5jbG9zZSgpO1xuICB9XG4gIC8qKlxuICAgKiBEZXN0cm95cyB0aGUgZ2FsbGVyeTpcbiAgICogLSBpbnN0YW50bHkgY2xvc2VzIHRoZSBnYWxsZXJ5XG4gICAqIC0gdW5iaW5kcyBldmVudHMsXG4gICAqIC0gY2xlYW5zIGludGVydmFscyBhbmQgdGltZW91dHNcbiAgICogLSByZW1vdmVzIGVsZW1lbnRzIGZyb20gRE9NXG4gICAqL1xuXG5cbiAgZGVzdHJveSgpIHtcbiAgICB2YXIgX3RoaXMkZWxlbWVudDtcblxuICAgIGlmICghdGhpcy5pc0Rlc3Ryb3lpbmcpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5zaG93SGlkZUFuaW1hdGlvblR5cGUgPSAnbm9uZSc7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5kaXNwYXRjaCgnZGVzdHJveScpO1xuICAgIHRoaXMuX2xpc3RlbmVycyA9IHt9O1xuXG4gICAgaWYgKHRoaXMuc2Nyb2xsV3JhcCkge1xuICAgICAgdGhpcy5zY3JvbGxXcmFwLm9udG91Y2htb3ZlID0gbnVsbDtcbiAgICAgIHRoaXMuc2Nyb2xsV3JhcC5vbnRvdWNoZW5kID0gbnVsbDtcbiAgICB9XG5cbiAgICAoX3RoaXMkZWxlbWVudCA9IHRoaXMuZWxlbWVudCkgPT09IG51bGwgfHwgX3RoaXMkZWxlbWVudCA9PT0gdm9pZCAwIHx8IF90aGlzJGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5tYWluU2Nyb2xsLml0ZW1Ib2xkZXJzLmZvckVhY2goaXRlbUhvbGRlciA9PiB7XG4gICAgICB2YXIgX2l0ZW1Ib2xkZXIkc2xpZGUyO1xuXG4gICAgICAoX2l0ZW1Ib2xkZXIkc2xpZGUyID0gaXRlbUhvbGRlci5zbGlkZSkgPT09IG51bGwgfHwgX2l0ZW1Ib2xkZXIkc2xpZGUyID09PSB2b2lkIDAgfHwgX2l0ZW1Ib2xkZXIkc2xpZGUyLmRlc3Ryb3koKTtcbiAgICB9KTtcbiAgICB0aGlzLmNvbnRlbnRMb2FkZXIuZGVzdHJveSgpO1xuICAgIHRoaXMuZXZlbnRzLnJlbW92ZUFsbCgpO1xuICB9XG4gIC8qKlxuICAgKiBSZWZyZXNoL3JlbG9hZCBjb250ZW50IG9mIGEgc2xpZGUgYnkgaXRzIGluZGV4XG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzbGlkZUluZGV4XG4gICAqL1xuXG5cbiAgcmVmcmVzaFNsaWRlQ29udGVudChzbGlkZUluZGV4KSB7XG4gICAgdGhpcy5jb250ZW50TG9hZGVyLnJlbW92ZUJ5SW5kZXgoc2xpZGVJbmRleCk7XG4gICAgdGhpcy5tYWluU2Nyb2xsLml0ZW1Ib2xkZXJzLmZvckVhY2goKGl0ZW1Ib2xkZXIsIGkpID0+IHtcbiAgICAgIHZhciBfdGhpcyRjdXJyU2xpZGUkaW5kZXgsIF90aGlzJGN1cnJTbGlkZTM7XG5cbiAgICAgIGxldCBwb3RlbnRpYWxIb2xkZXJJbmRleCA9ICgoX3RoaXMkY3VyclNsaWRlJGluZGV4ID0gKF90aGlzJGN1cnJTbGlkZTMgPSB0aGlzLmN1cnJTbGlkZSkgPT09IG51bGwgfHwgX3RoaXMkY3VyclNsaWRlMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkY3VyclNsaWRlMy5pbmRleCkgIT09IG51bGwgJiYgX3RoaXMkY3VyclNsaWRlJGluZGV4ICE9PSB2b2lkIDAgPyBfdGhpcyRjdXJyU2xpZGUkaW5kZXggOiAwKSAtIDEgKyBpO1xuXG4gICAgICBpZiAodGhpcy5jYW5Mb29wKCkpIHtcbiAgICAgICAgcG90ZW50aWFsSG9sZGVySW5kZXggPSB0aGlzLmdldExvb3BlZEluZGV4KHBvdGVudGlhbEhvbGRlckluZGV4KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBvdGVudGlhbEhvbGRlckluZGV4ID09PSBzbGlkZUluZGV4KSB7XG4gICAgICAgIC8vIHNldCB0aGUgbmV3IHNsaWRlIGNvbnRlbnRcbiAgICAgICAgdGhpcy5zZXRDb250ZW50KGl0ZW1Ib2xkZXIsIHNsaWRlSW5kZXgsIHRydWUpOyAvLyBhY3RpdmF0ZSB0aGUgbmV3IHNsaWRlIGlmIGl0J3MgY3VycmVudFxuXG4gICAgICAgIGlmIChpID09PSAxKSB7XG4gICAgICAgICAgdmFyIF9pdGVtSG9sZGVyJHNsaWRlMztcblxuICAgICAgICAgIHRoaXMuY3VyclNsaWRlID0gaXRlbUhvbGRlci5zbGlkZTtcbiAgICAgICAgICAoX2l0ZW1Ib2xkZXIkc2xpZGUzID0gaXRlbUhvbGRlci5zbGlkZSkgPT09IG51bGwgfHwgX2l0ZW1Ib2xkZXIkc2xpZGUzID09PSB2b2lkIDAgfHwgX2l0ZW1Ib2xkZXIkc2xpZGUzLnNldElzQWN0aXZlKHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5kaXNwYXRjaCgnY2hhbmdlJyk7XG4gIH1cbiAgLyoqXG4gICAqIFNldCBzbGlkZSBjb250ZW50XG4gICAqXG4gICAqIEBwYXJhbSB7SXRlbUhvbGRlcn0gaG9sZGVyIG1haW5TY3JvbGwuaXRlbUhvbGRlcnMgYXJyYXkgaXRlbVxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggU2xpZGUgaW5kZXhcbiAgICogQHBhcmFtIHtib29sZWFufSBbZm9yY2VdIElmIGNvbnRlbnQgc2hvdWxkIGJlIHNldCBldmVuIGlmIGluZGV4IHdhc24ndCBjaGFuZ2VkXG4gICAqL1xuXG5cbiAgc2V0Q29udGVudChob2xkZXIsIGluZGV4LCBmb3JjZSkge1xuICAgIGlmICh0aGlzLmNhbkxvb3AoKSkge1xuICAgICAgaW5kZXggPSB0aGlzLmdldExvb3BlZEluZGV4KGluZGV4KTtcbiAgICB9XG5cbiAgICBpZiAoaG9sZGVyLnNsaWRlKSB7XG4gICAgICBpZiAoaG9sZGVyLnNsaWRlLmluZGV4ID09PSBpbmRleCAmJiAhZm9yY2UpIHtcbiAgICAgICAgLy8gZXhpdCBpZiBob2xkZXIgYWxyZWFkeSBjb250YWlucyB0aGlzIHNsaWRlXG4gICAgICAgIC8vIHRoaXMgY291bGQgYmUgY29tbW9uIHdoZW4ganVzdCB0aHJlZSBzbGlkZXMgYXJlIHVzZWRcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBkZXN0cm95IHByZXZpb3VzIHNsaWRlXG5cblxuICAgICAgaG9sZGVyLnNsaWRlLmRlc3Ryb3koKTtcbiAgICAgIGhvbGRlci5zbGlkZSA9IHVuZGVmaW5lZDtcbiAgICB9IC8vIGV4aXQgaWYgbm8gbG9vcCBhbmQgaW5kZXggaXMgb3V0IG9mIGJvdW5kc1xuXG5cbiAgICBpZiAoIXRoaXMuY2FuTG9vcCgpICYmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gdGhpcy5nZXROdW1JdGVtcygpKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGl0ZW1EYXRhID0gdGhpcy5nZXRJdGVtRGF0YShpbmRleCk7XG4gICAgaG9sZGVyLnNsaWRlID0gbmV3IFNsaWRlKGl0ZW1EYXRhLCBpbmRleCwgdGhpcyk7IC8vIHNldCBjdXJyZW50IHNsaWRlXG5cbiAgICBpZiAoaW5kZXggPT09IHRoaXMuY3VyckluZGV4KSB7XG4gICAgICB0aGlzLmN1cnJTbGlkZSA9IGhvbGRlci5zbGlkZTtcbiAgICB9XG5cbiAgICBob2xkZXIuc2xpZGUuYXBwZW5kKGhvbGRlci5lbCk7XG4gIH1cbiAgLyoqIEByZXR1cm5zIHtQb2ludH0gKi9cblxuXG4gIGdldFZpZXdwb3J0Q2VudGVyUG9pbnQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IHRoaXMudmlld3BvcnRTaXplLnggLyAyLFxuICAgICAgeTogdGhpcy52aWV3cG9ydFNpemUueSAvIDJcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgc2l6ZSBvZiBhbGwgZWxlbWVudHMuXG4gICAqIEV4ZWN1dGVkIG9uIGluaXQgYW5kIG9uIHBhZ2UgcmVzaXplLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmb3JjZV0gVXBkYXRlIHNpemUgZXZlbiBpZiBzaXplIG9mIHZpZXdwb3J0IHdhcyBub3QgY2hhbmdlZC5cbiAgICovXG5cblxuICB1cGRhdGVTaXplKGZvcmNlKSB7XG4gICAgLy8gbGV0IGl0ZW07XG4gICAgLy8gbGV0IGl0ZW1JbmRleDtcbiAgICBpZiAodGhpcy5pc0Rlc3Ryb3lpbmcpIHtcbiAgICAgIC8vIGV4aXQgaWYgUGhvdG9Td2lwZSBpcyBjbG9zZWQgb3IgY2xvc2luZ1xuICAgICAgLy8gKHRvIGF2b2lkIGVycm9ycywgYXMgcmVzaXplIGV2ZW50IG1pZ2h0IGJlIGRlbGF5ZWQpXG4gICAgICByZXR1cm47XG4gICAgfSAvL2NvbnN0IG5ld1dpZHRoID0gdGhpcy5zY3JvbGxXcmFwLmNsaWVudFdpZHRoO1xuICAgIC8vY29uc3QgbmV3SGVpZ2h0ID0gdGhpcy5zY3JvbGxXcmFwLmNsaWVudEhlaWdodDtcblxuXG4gICAgY29uc3QgbmV3Vmlld3BvcnRTaXplID0gZ2V0Vmlld3BvcnRTaXplKHRoaXMub3B0aW9ucywgdGhpcyk7XG5cbiAgICBpZiAoIWZvcmNlICYmIHBvaW50c0VxdWFsKG5ld1ZpZXdwb3J0U2l6ZSwgdGhpcy5fcHJldlZpZXdwb3J0U2l6ZSkpIHtcbiAgICAgIC8vIEV4aXQgaWYgZGltZW5zaW9ucyB3ZXJlIG5vdCBjaGFuZ2VkXG4gICAgICByZXR1cm47XG4gICAgfSAvL3RoaXMuX3ByZXZWaWV3cG9ydFNpemUueCA9IG5ld1dpZHRoO1xuICAgIC8vdGhpcy5fcHJldlZpZXdwb3J0U2l6ZS55ID0gbmV3SGVpZ2h0O1xuXG5cbiAgICBlcXVhbGl6ZVBvaW50cyh0aGlzLl9wcmV2Vmlld3BvcnRTaXplLCBuZXdWaWV3cG9ydFNpemUpO1xuICAgIHRoaXMuZGlzcGF0Y2goJ2JlZm9yZVJlc2l6ZScpO1xuICAgIGVxdWFsaXplUG9pbnRzKHRoaXMudmlld3BvcnRTaXplLCB0aGlzLl9wcmV2Vmlld3BvcnRTaXplKTtcblxuICAgIHRoaXMuX3VwZGF0ZVBhZ2VTY3JvbGxPZmZzZXQoKTtcblxuICAgIHRoaXMuZGlzcGF0Y2goJ3ZpZXdwb3J0U2l6ZScpOyAvLyBSZXNpemUgc2xpZGVzIG9ubHkgYWZ0ZXIgb3BlbmVyIGFuaW1hdGlvbiBpcyBmaW5pc2hlZFxuICAgIC8vIGFuZCBkb24ndCByZS1jYWxjdWxhdGUgc2l6ZSBvbiBpbml0YWwgc2l6ZSB1cGRhdGVcblxuICAgIHRoaXMubWFpblNjcm9sbC5yZXNpemUodGhpcy5vcGVuZXIuaXNPcGVuKTtcblxuICAgIGlmICghdGhpcy5oYXNNb3VzZSAmJiB3aW5kb3cubWF0Y2hNZWRpYSgnKGFueS1ob3ZlcjogaG92ZXIpJykubWF0Y2hlcykge1xuICAgICAgdGhpcy5tb3VzZURldGVjdGVkKCk7XG4gICAgfVxuXG4gICAgdGhpcy5kaXNwYXRjaCgncmVzaXplJyk7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvcGFjaXR5XG4gICAqL1xuXG5cbiAgYXBwbHlCZ09wYWNpdHkob3BhY2l0eSkge1xuICAgIHRoaXMuYmdPcGFjaXR5ID0gTWF0aC5tYXgob3BhY2l0eSwgMCk7XG5cbiAgICBpZiAodGhpcy5iZykge1xuICAgICAgdGhpcy5iZy5zdHlsZS5vcGFjaXR5ID0gU3RyaW5nKHRoaXMuYmdPcGFjaXR5ICogdGhpcy5vcHRpb25zLmJnT3BhY2l0eSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBXaGV0aGVyIG1vdXNlIGlzIGRldGVjdGVkXG4gICAqL1xuXG5cbiAgbW91c2VEZXRlY3RlZCgpIHtcbiAgICBpZiAoIXRoaXMuaGFzTW91c2UpIHtcbiAgICAgIHZhciBfdGhpcyRlbGVtZW50MjtcblxuICAgICAgdGhpcy5oYXNNb3VzZSA9IHRydWU7XG4gICAgICAoX3RoaXMkZWxlbWVudDIgPSB0aGlzLmVsZW1lbnQpID09PSBudWxsIHx8IF90aGlzJGVsZW1lbnQyID09PSB2b2lkIDAgfHwgX3RoaXMkZWxlbWVudDIuY2xhc3NMaXN0LmFkZCgncHN3cC0taGFzX21vdXNlJyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBQYWdlIHJlc2l6ZSBldmVudCBoYW5kbGVyXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG5cbiAgX2hhbmRsZVBhZ2VSZXNpemUoKSB7XG4gICAgdGhpcy51cGRhdGVTaXplKCk7IC8vIEluIGlPUyB3ZWJ2aWV3LCBpZiBlbGVtZW50IHNpemUgZGVwZW5kcyBvbiBkb2N1bWVudCBzaXplLFxuICAgIC8vIGl0J2xsIGJlIG1lYXN1cmVkIGluY29ycmVjdGx5IGluIHJlc2l6ZSBldmVudFxuICAgIC8vXG4gICAgLy8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE3MDU5NVxuICAgIC8vIGh0dHBzOi8vaGFja2Vybm9vbi5jb20vb25yZXNpemUtZXZlbnQtYnJva2VuLWluLW1vYmlsZS1zYWZhcmktZDg0NjkwMjdiZjRkXG5cbiAgICBpZiAoL2lQaG9uZXxpUGFkfGlQb2QvaS50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KSkge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMudXBkYXRlU2l6ZSgpO1xuICAgICAgfSwgNTAwKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFBhZ2Ugc2Nyb2xsIG9mZnNldCBpcyB1c2VkXG4gICAqIHRvIGdldCBjb3JyZWN0IGNvb3JkaW5hdGVzXG4gICAqIHJlbGF0aXZlIHRvIFBob3RvU3dpcGUgdmlld3BvcnQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG5cbiAgX3VwZGF0ZVBhZ2VTY3JvbGxPZmZzZXQoKSB7XG4gICAgdGhpcy5zZXRTY3JvbGxPZmZzZXQoMCwgd2luZG93LnBhZ2VZT2Zmc2V0KTtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHhcbiAgICogQHBhcmFtIHtudW1iZXJ9IHlcbiAgICovXG5cblxuICBzZXRTY3JvbGxPZmZzZXQoeCwgeSkge1xuICAgIHRoaXMub2Zmc2V0LnggPSB4O1xuICAgIHRoaXMub2Zmc2V0LnkgPSB5O1xuICAgIHRoaXMuZGlzcGF0Y2goJ3VwZGF0ZVNjcm9sbE9mZnNldCcpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgbWFpbiBIVE1MIHN0cnVjdHVyZSBvZiBQaG90b1N3aXBlLFxuICAgKiBhbmQgYWRkIGl0IHRvIERPTVxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuXG4gIF9jcmVhdGVNYWluU3RydWN0dXJlKCkge1xuICAgIC8vIHJvb3QgRE9NIGVsZW1lbnQgb2YgUGhvdG9Td2lwZSAoLnBzd3ApXG4gICAgdGhpcy5lbGVtZW50ID0gY3JlYXRlRWxlbWVudCgncHN3cCcsICdkaXYnKTtcbiAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnZGlhbG9nJyk7IC8vIHRlbXBsYXRlIGlzIGxlZ2FjeSBwcm9wXG5cbiAgICB0aGlzLnRlbXBsYXRlID0gdGhpcy5lbGVtZW50OyAvLyBCYWNrZ3JvdW5kIGlzIGFkZGVkIGFzIGEgc2VwYXJhdGUgZWxlbWVudCxcbiAgICAvLyBhcyBhbmltYXRpbmcgb3BhY2l0eSBpcyBmYXN0ZXIgdGhhbiBhbmltYXRpbmcgcmdiYSgpXG5cbiAgICB0aGlzLmJnID0gY3JlYXRlRWxlbWVudCgncHN3cF9fYmcnLCAnZGl2JywgdGhpcy5lbGVtZW50KTtcbiAgICB0aGlzLnNjcm9sbFdyYXAgPSBjcmVhdGVFbGVtZW50KCdwc3dwX19zY3JvbGwtd3JhcCcsICdzZWN0aW9uJywgdGhpcy5lbGVtZW50KTtcbiAgICB0aGlzLmNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoJ3Bzd3BfX2NvbnRhaW5lcicsICdkaXYnLCB0aGlzLnNjcm9sbFdyYXApOyAvLyBhcmlhIHBhdHRlcm46IGNhcm91c2VsXG5cbiAgICB0aGlzLnNjcm9sbFdyYXAuc2V0QXR0cmlidXRlKCdhcmlhLXJvbGVkZXNjcmlwdGlvbicsICdjYXJvdXNlbCcpO1xuICAgIHRoaXMuY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnYXJpYS1saXZlJywgJ29mZicpO1xuICAgIHRoaXMuY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnaWQnLCAncHN3cF9faXRlbXMnKTtcbiAgICB0aGlzLm1haW5TY3JvbGwuYXBwZW5kSG9sZGVycygpO1xuICAgIHRoaXMudWkgPSBuZXcgVUkodGhpcyk7XG4gICAgdGhpcy51aS5pbml0KCk7IC8vIGFwcGVuZCB0byBET01cblxuICAgICh0aGlzLm9wdGlvbnMuYXBwZW5kVG9FbCB8fCBkb2N1bWVudC5ib2R5KS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgcG9zaXRpb24gYW5kIGRpbWVuc2lvbnMgb2Ygc21hbGwgdGh1bWJuYWlsXG4gICAqICAge3g6LHk6LHc6fVxuICAgKlxuICAgKiBIZWlnaHQgaXMgb3B0aW9uYWwgKGNhbGN1bGF0ZWQgYmFzZWQgb24gdGhlIGxhcmdlIGltYWdlKVxuICAgKlxuICAgKiBAcmV0dXJucyB7Qm91bmRzIHwgdW5kZWZpbmVkfVxuICAgKi9cblxuXG4gIGdldFRodW1iQm91bmRzKCkge1xuICAgIHJldHVybiBnZXRUaHVtYkJvdW5kcyh0aGlzLmN1cnJJbmRleCwgdGhpcy5jdXJyU2xpZGUgPyB0aGlzLmN1cnJTbGlkZS5kYXRhIDogdGhpcy5faW5pdGlhbEl0ZW1EYXRhLCB0aGlzKTtcbiAgfVxuICAvKipcbiAgICogSWYgdGhlIFBob3RvU3dpcGUgY2FuIGhhdmUgY29udGludW91cyBsb29wXG4gICAqIEByZXR1cm5zIEJvb2xlYW5cbiAgICovXG5cblxuICBjYW5Mb29wKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMubG9vcCAmJiB0aGlzLmdldE51bUl0ZW1zKCkgPiAyO1xuICB9XG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge1Bob3RvU3dpcGVPcHRpb25zfSBvcHRpb25zXG4gICAqIEByZXR1cm5zIHtQcmVwYXJlZFBob3RvU3dpcGVPcHRpb25zfVxuICAgKi9cblxuXG4gIF9wcmVwYXJlT3B0aW9ucyhvcHRpb25zKSB7XG4gICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKCcocHJlZmVycy1yZWR1Y2VkLW1vdGlvbiksICh1cGRhdGU6IHNsb3cpJykubWF0Y2hlcykge1xuICAgICAgb3B0aW9ucy5zaG93SGlkZUFuaW1hdGlvblR5cGUgPSAnbm9uZSc7XG4gICAgICBvcHRpb25zLnpvb21BbmltYXRpb25EdXJhdGlvbiA9IDA7XG4gICAgfVxuICAgIC8qKiBAdHlwZSB7UHJlcGFyZWRQaG90b1N3aXBlT3B0aW9uc30gKi9cblxuXG4gICAgcmV0dXJuIHsgLi4uZGVmYXVsdE9wdGlvbnMsXG4gICAgICAuLi5vcHRpb25zXG4gICAgfTtcbiAgfVxuXG59XG5cbmV4cG9ydCB7IFBob3RvU3dpcGUgYXMgZGVmYXVsdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGhvdG9zd2lwZS5lc20uanMubWFwXG4iXX0=
