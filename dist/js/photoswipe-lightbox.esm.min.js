"use strict";function _callSuper(t,e,i){return e=_getPrototypeOf(e),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(e,i||[],_getPrototypeOf(t).constructor):e.apply(t,i))}function _possibleConstructorReturn(t,e){if(e&&("object"==_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function(){return!!t})()}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===e?String:Number)(t);i=i.call(t,e||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}function createElement(t,e,i){e=document.createElement(e);return t&&(e.className=t),i&&i.appendChild(e),e}function toTransformString(t,e,i){t="translate3d(".concat(t,"px,").concat(e||0,"px,0)");return void 0!==i&&(t+=" scale3d(".concat(i,",").concat(i,",1)")),t}function setWidthHeight(t,e,i){t.style.width="number"==typeof e?"".concat(e,"px"):e,t.style.height="number"==typeof i?"".concat(i,"px"):i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var LOAD_STATE={IDLE:"idle",LOADING:"loading",LOADED:"loaded",ERROR:"error"};function specialKeyUsed(t){return"button"in t&&1===t.button||t.ctrlKey||t.metaKey||t.altKey||t.shiftKey}function getElementsFromOption(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document,n=[];return t instanceof Element?n=[t]:t instanceof NodeList||Array.isArray(t)?n=Array.from(t):(t="string"==typeof t?t:e)&&(n=Array.from(i.querySelectorAll(t))),n}function isPswpClass(t){return"function"==typeof t&&t.prototype&&t.prototype.goTo}function isSafari(){return!(!navigator.vendor||!navigator.vendor.match(/apple/i))}var PhotoSwipeEvent=function(){return _createClass(function t(e,i){_classCallCheck(this,t),this.type=e,this.defaultPrevented=!1,i&&Object.assign(this,i)},[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}])}(),Eventable=function(){return _createClass(function t(){_classCallCheck(this,t),this._listeners={},this._filters={},this.pswp=void 0,this.options=void 0},[{key:"addFilter",value:function(t,e){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:100;this._filters[t]||(this._filters[t]=[]),null!=(i=this._filters[t])&&i.push({fn:e,priority:n}),null!=(i=this._filters[t])&&i.sort(function(t,e){return t.priority-e.priority}),null!=(i=this.pswp)&&i.addFilter(t,e,n)}},{key:"removeFilter",value:function(t,e){this._filters[t]&&(this._filters[t]=this._filters[t].filter(function(t){return t.fn!==e})),this.pswp&&this.pswp.removeFilter(t,e)}},{key:"applyFilters",value:function(t){for(var e=this,i=arguments.length,n=new Array(1<i?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return null!=(t=this._filters[t])&&t.forEach(function(t){n[0]=t.fn.apply(e,n)}),n[0]}},{key:"on",value:function(t,e){var i;this._listeners[t]||(this._listeners[t]=[]),null!=(i=this._listeners[t])&&i.push(e),null!=(i=this.pswp)&&i.on(t,e)}},{key:"off",value:function(t,e){var i;this._listeners[t]&&(this._listeners[t]=this._listeners[t].filter(function(t){return e!==t})),null!=(i=this.pswp)&&i.off(t,e)}},{key:"dispatch",value:function(t,e){var i,n=this;return this.pswp?this.pswp.dispatch(t,e):(i=new PhotoSwipeEvent(t,e),null!=(e=this._listeners[t])&&e.forEach(function(t){t.call(n,i)}),i)}}])}(),Placeholder=function(){return _createClass(function t(e,i){_classCallCheck(this,t),this.element=createElement("pswp__img pswp__img--placeholder",e?"img":"div",i),e&&((i=this.element).decoding="async",i.alt="",i.src=e,i.setAttribute("role","presentation")),this.element.setAttribute("aria-hidden","true")},[{key:"setDisplayedSize",value:function(t,e){this.element&&("IMG"===this.element.tagName?(setWidthHeight(this.element,250,"auto"),this.element.style.transformOrigin="0 0",this.element.style.transform=toTransformString(0,0,t/250)):setWidthHeight(this.element,t,e))}},{key:"destroy",value:function(){var t;null!=(t=this.element)&&t.parentNode&&this.element.remove(),this.element=null}}])}(),Content=function(){return _createClass(function t(e,i,n){_classCallCheck(this,t),this.instance=i,this.data=e,this.index=n,this.element=void 0,this.placeholder=void 0,this.slide=void 0,this.displayedImageWidth=0,this.displayedImageHeight=0,this.width=Number(this.data.w)||Number(this.data.width)||0,this.height=Number(this.data.h)||Number(this.data.height)||0,this.isAttached=!1,this.hasSlide=!1,this.isDecoding=!1,this.state=LOAD_STATE.IDLE,this.data.type?this.type=this.data.type:this.data.src?this.type="image":this.type="html",this.instance.dispatch("contentInit",{content:this})},[{key:"removePlaceholder",value:function(){var t=this;this.placeholder&&!this.keepPlaceholder()&&setTimeout(function(){t.placeholder&&(t.placeholder.destroy(),t.placeholder=void 0)},1e3)}},{key:"load",value:function(t,e){var i;this.slide&&this.usePlaceholder()&&(this.placeholder?(i=this.placeholder.element)&&!i.parentElement&&this.slide.container.prepend(i):(i=this.instance.applyFilters("placeholderSrc",!(!this.data.msrc||!this.slide.isFirstSlide)&&this.data.msrc,this),this.placeholder=new Placeholder(i,this.slide.container))),this.element&&!e||this.instance.dispatch("contentLoad",{content:this,isLazy:t}).defaultPrevented||(this.isImageContent()?(this.element=createElement("pswp__img","img"),this.displayedImageWidth&&this.loadImage(t)):(this.element=createElement("pswp__content","div"),this.element.innerHTML=this.data.html||""),e&&this.slide&&this.slide.updateContentSize(!0))}},{key:"loadImage",value:function(t){var e,i=this;this.isImageContent()&&this.element&&!this.instance.dispatch("contentLoadImage",{content:this,isLazy:t}).defaultPrevented&&(t=this.element,this.updateSrcsetSizes(),this.data.srcset&&(t.srcset=this.data.srcset),t.src=null!=(e=this.data.src)?e:"",t.alt=null!=(e=this.data.alt)?e:"",this.state=LOAD_STATE.LOADING,t.complete?this.onLoaded():(t.onload=function(){i.onLoaded()},t.onerror=function(){i.onError()}))}},{key:"setSlide",value:function(t){this.slide=t,this.hasSlide=!0,this.instance=t.pswp}},{key:"onLoaded",value:function(){this.state=LOAD_STATE.LOADED,this.slide&&this.element&&(this.instance.dispatch("loadComplete",{slide:this.slide,content:this}),this.slide.isActive&&this.slide.heavyAppended&&!this.element.parentNode&&(this.append(),this.slide.updateContentSize(!0)),this.state!==LOAD_STATE.LOADED&&this.state!==LOAD_STATE.ERROR||this.removePlaceholder())}},{key:"onError",value:function(){this.state=LOAD_STATE.ERROR,this.slide&&(this.displayError(),this.instance.dispatch("loadComplete",{slide:this.slide,isError:!0,content:this}),this.instance.dispatch("loadError",{slide:this.slide,content:this}))}},{key:"isLoading",value:function(){return this.instance.applyFilters("isContentLoading",this.state===LOAD_STATE.LOADING,this)}},{key:"isError",value:function(){return this.state===LOAD_STATE.ERROR}},{key:"isImageContent",value:function(){return"image"===this.type}},{key:"setDisplayedSize",value:function(t,e){var i;this.element&&(this.placeholder&&this.placeholder.setDisplayedSize(t,e),this.instance.dispatch("contentResize",{content:this,width:t,height:e}).defaultPrevented||(setWidthHeight(this.element,t,e),this.isImageContent()&&!this.isError()&&(i=!this.displayedImageWidth&&t,this.displayedImageWidth=t,this.displayedImageHeight=e,i?this.loadImage(!1):this.updateSrcsetSizes(),this.slide)&&this.instance.dispatch("imageSizeChange",{slide:this.slide,width:t,height:e,content:this})))}},{key:"isZoomable",value:function(){return this.instance.applyFilters("isContentZoomable",this.isImageContent()&&this.state!==LOAD_STATE.ERROR,this)}},{key:"updateSrcsetSizes",value:function(){var t,e;this.isImageContent()&&this.element&&this.data.srcset&&(t=this.element,e=this.instance.applyFilters("srcsetSizesWidth",this.displayedImageWidth,this),!t.dataset.largestUsedSize||e>parseInt(t.dataset.largestUsedSize,10))&&(t.sizes=e+"px",t.dataset.largestUsedSize=String(e))}},{key:"usePlaceholder",value:function(){return this.instance.applyFilters("useContentPlaceholder",this.isImageContent(),this)}},{key:"lazyLoad",value:function(){this.instance.dispatch("contentLazyLoad",{content:this}).defaultPrevented||this.load(!0)}},{key:"keepPlaceholder",value:function(){return this.instance.applyFilters("isKeepingPlaceholder",this.isLoading(),this)}},{key:"destroy",value:function(){this.hasSlide=!1,this.slide=void 0,this.instance.dispatch("contentDestroy",{content:this}).defaultPrevented||(this.remove(),this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0),this.isImageContent()&&this.element&&(this.element.onload=null,this.element.onerror=null,this.element=void 0))}},{key:"displayError",value:function(){var t,e;this.slide&&((e=createElement("pswp__error-msg","div")).innerText=null!=(t=null==(t=this.instance.options)?void 0:t.errorMsg)?t:"",e=this.instance.applyFilters("contentErrorElement",e,this),this.element=createElement("pswp__content pswp__error-msg-container","div"),this.element.appendChild(e),this.slide.container.innerText="",this.slide.container.appendChild(this.element),this.slide.updateContentSize(!0),this.removePlaceholder())}},{key:"append",value:function(){var t,e=this;!this.isAttached&&this.element&&(this.isAttached=!0,this.state===LOAD_STATE.ERROR?this.displayError():this.instance.dispatch("contentAppend",{content:this}).defaultPrevented||(t="decode"in this.element,this.isImageContent()?t&&this.slide&&(!this.slide.isActive||isSafari())?(this.isDecoding=!0,this.element.decode().catch(function(){}).finally(function(){e.isDecoding=!1,e.appendImage()})):this.appendImage():this.slide&&!this.element.parentNode&&this.slide.container.appendChild(this.element)))}},{key:"activate",value:function(){!this.instance.dispatch("contentActivate",{content:this}).defaultPrevented&&this.slide&&(this.isImageContent()&&this.isDecoding&&!isSafari()?this.appendImage():this.isError()&&this.load(!1,!0),this.slide.holderElement)&&this.slide.holderElement.setAttribute("aria-hidden","false")}},{key:"deactivate",value:function(){this.instance.dispatch("contentDeactivate",{content:this}),this.slide&&this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","true")}},{key:"remove",value:function(){this.isAttached=!1,this.instance.dispatch("contentRemove",{content:this}).defaultPrevented||(this.element&&this.element.parentNode&&this.element.remove(),this.placeholder&&this.placeholder.element&&this.placeholder.element.remove())}},{key:"appendImage",value:function(){!this.isAttached||this.instance.dispatch("contentAppendImage",{content:this}).defaultPrevented||(this.slide&&this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element),this.state!==LOAD_STATE.LOADED&&this.state!==LOAD_STATE.ERROR)||this.removePlaceholder()}}])}();function getViewportSize(t,e){if(t.getViewportSizeFn){t=t.getViewportSizeFn(t,e);if(t)return t}return{x:document.documentElement.clientWidth,y:window.innerHeight}}function parsePaddingOption(t,e,i,n,s){var o=0;return e.paddingFn?o=e.paddingFn(i,n,s)[t]:e.padding?o=e.padding[t]:e[i="padding"+t[0].toUpperCase()+t.slice(1)]&&(o=e[i]),Number(o)||0}function getPanAreaSize(t,e,i,n){return{x:e.x-parsePaddingOption("left",t,e,i,n)-parsePaddingOption("right",t,e,i,n),y:e.y-parsePaddingOption("top",t,e,i,n)-parsePaddingOption("bottom",t,e,i,n)}}var MAX_IMAGE_WIDTH=4e3,ZoomLevel=function(){return _createClass(function t(e,i,n,s){_classCallCheck(this,t),this.pswp=s,this.options=e,this.itemData=i,this.index=n,this.panAreaSize=null,this.elementSize=null,this.fit=1,this.fill=1,this.vFill=1,this.initial=1,this.secondary=1,this.max=1,this.min=1},[{key:"update",value:function(t,e,i){t={x:t,y:e},this.elementSize=t,e=(this.panAreaSize=i).x/t.x,i=i.y/t.y;this.fit=Math.min(1,e<i?e:i),this.fill=Math.min(1,i<e?e:i),this.vFill=Math.min(1,i),this.initial=this._getInitial(),this.secondary=this._getSecondary(),this.max=Math.max(this.initial,this.secondary,this._getMax()),this.min=Math.min(this.fit,this.initial,this.secondary),this.pswp&&this.pswp.dispatch("zoomLevelsUpdate",{zoomLevels:this,slideData:this.itemData})}},{key:"_parseZoomLevelOption",value:function(t){t=this.options[t+"ZoomLevel"];if(t)return"function"==typeof t?t(this):"fill"===t?this.fill:"fit"===t?this.fit:Number(t)}},{key:"_getSecondary",value:function(){var t=this._parseZoomLevelOption("secondary");return t||(t=Math.min(1,3*this.fit),this.elementSize&&t*this.elementSize.x>MAX_IMAGE_WIDTH&&(t=MAX_IMAGE_WIDTH/this.elementSize.x)),t}},{key:"_getInitial",value:function(){return this._parseZoomLevelOption("initial")||this.fit}},{key:"_getMax",value:function(){return this._parseZoomLevelOption("max")||Math.max(1,4*this.fit)}}])}();function _lazyLoadData(t,e,i){var n,s=e.createContentFromData(t,i),o=e.options;return o&&(n=new ZoomLevel(o,t,-1),o=getPanAreaSize(o,e.pswp?e.pswp.viewportSize:getViewportSize(o,e),t,i),n.update(s.width,s.height,o)),s.lazyLoad(),n&&s.setDisplayedSize(Math.ceil(s.width*n.initial),Math.ceil(s.height*n.initial)),s}function lazyLoadSlide(t,e){var i=e.getItemData(t);if(!e.dispatch("lazyLoadSlide",{index:t,itemData:i}).defaultPrevented)return _lazyLoadData(i,e,t)}var PhotoSwipeBase=function(){function t(){return _classCallCheck(this,t),_callSuper(this,t,arguments)}return _inherits(t,Eventable),_createClass(t,[{key:"getNumItems",value:function(){var t=0,e=null==(e=this.options)?void 0:e.dataSource,t=(e&&"length"in e?t=e.length:e&&"gallery"in e&&(e.items||(e.items=this._getGalleryDOMElements(e.gallery)),e.items)&&(t=e.items.length),this.dispatch("numItems",{dataSource:e,numItems:t}));return this.applyFilters("numItems",t.numItems,e)}},{key:"createContentFromData",value:function(t,e){return new Content(t,this,e)}},{key:"getItemData",value:function(t){var e=null==(e=this.options)?void 0:e.dataSource,i={},e=(Array.isArray(e)?i=e[t]:e&&"gallery"in e&&(e.items||(e.items=this._getGalleryDOMElements(e.gallery)),i=e.items[t]),i),i=(e instanceof Element&&(e=this._domElementToItemData(e)),this.dispatch("itemData",{itemData:e||{},index:t}));return this.applyFilters("itemData",i.itemData,t)}},{key:"_getGalleryDOMElements",value:function(t){var e;return null!=(e=this.options)&&e.children||null!=(e=this.options)&&e.childSelector?getElementsFromOption(this.options.children,this.options.childSelector,t)||[]:[t]}},{key:"_domElementToItemData",value:function(t){var e,i={element:t},n="A"===t.tagName?t:t.querySelector("a");return n&&(i.src=n.dataset.pswpSrc||n.href,n.dataset.pswpSrcset&&(i.srcset=n.dataset.pswpSrcset),i.width=n.dataset.pswpWidth?parseInt(n.dataset.pswpWidth,10):0,i.height=n.dataset.pswpHeight?parseInt(n.dataset.pswpHeight,10):0,i.w=i.width,i.h=i.height,n.dataset.pswpType&&(i.type=n.dataset.pswpType),(e=t.querySelector("img"))&&(i.msrc=e.currentSrc||e.src,i.alt=null!=(e=e.getAttribute("alt"))?e:""),n.dataset.pswpCropped||n.dataset.cropped)&&(i.thumbCropped=!0),this.applyFilters("domItemData",i,t,n)}},{key:"lazyLoadData",value:function(t,e){return _lazyLoadData(t,this,e)}}])}(),PhotoSwipeLightbox=exports.default=function(){function i(t){var e;return _classCallCheck(this,i),(e=_callSuper(this,i)).options=t||{},e._uid=0,e.shouldOpen=!1,e._preloadedContent=void 0,e.onThumbnailsClick=e.onThumbnailsClick.bind(e),e}return _inherits(i,PhotoSwipeBase),_createClass(i,[{key:"init",value:function(){var e=this;getElementsFromOption(this.options.gallery,this.options.gallerySelector).forEach(function(t){t.addEventListener("click",e.onThumbnailsClick,!1)})}},{key:"onThumbnailsClick",value:function(t){var e,i,n;specialKeyUsed(t)||window.pswp||((e={x:t.clientX,y:t.clientY}).x||e.y||(e=null),i=this.getClickedIndex(t),i=this.applyFilters("clickedIndex",i,t,this),n={gallery:t.currentTarget},0<=i&&(t.preventDefault(),this.loadAndOpen(i,n,e)))}},{key:"getClickedIndex",value:function(t){var e;return this.options.getClickedIndexFn?this.options.getClickedIndexFn.call(this,t):(e=t.target,-1!==(t=getElementsFromOption(this.options.children,this.options.childSelector,t.currentTarget).findIndex(function(t){return t===e||t.contains(e)}))?t:this.options.children||this.options.childSelector?-1:0)}},{key:"loadAndOpen",value:function(t,e,i){var n;return!(window.pswp||!this.options||(!e&&this.options.gallery&&this.options.children&&(n=getElementsFromOption(this.options.gallery))[0]&&(e={gallery:n[0]}),this.options.index=t,this.options.initialPointerPos=i,this.shouldOpen=!0,this.preload(t,e),0))}},{key:"preload",value:function(t,e){var i=this,n=this.options,e=(e&&(n.dataSource=e),[]),s=_typeof(n.pswpModule);if(isPswpClass(n.pswpModule))e.push(Promise.resolve(n.pswpModule));else{if("string"===s)throw new Error("pswpModule as string is no longer supported");if("function"!==s)throw new Error("pswpModule is not valid");e.push(n.pswpModule())}"function"==typeof n.openPromise&&e.push(n.openPromise()),!1!==n.preloadFirstSlide&&0<=t&&(this._preloadedContent=lazyLoadSlide(t,this));var o=++this._uid;Promise.all(e).then(function(t){i.shouldOpen&&(t=t[0],i._openPhotoswipe(t,o))})}},{key:"_openPhotoswipe",value:function(t,e){var i,n=this;e!==this._uid&&this.shouldOpen||(this.shouldOpen=!1,window.pswp)||(i=new("object"===_typeof(t)?t.default:t)(this.options),this.pswp=i,window.pswp=i,Object.keys(this._listeners).forEach(function(e){var t;null!=(t=n._listeners[e])&&t.forEach(function(t){i.on(e,t)})}),Object.keys(this._filters).forEach(function(e){var t;null!=(t=n._filters[e])&&t.forEach(function(t){i.addFilter(e,t.fn,t.priority)})}),this._preloadedContent&&(i.contentLoader.addToCache(this._preloadedContent),this._preloadedContent=void 0),i.on("destroy",function(){n.pswp=void 0,delete window.pswp}),i.init())}},{key:"destroy",value:function(){var t,e=this;null!=(t=this.pswp)&&t.destroy(),this.shouldOpen=!1,this._listeners={},getElementsFromOption(this.options.gallery,this.options.gallerySelector).forEach(function(t){t.removeEventListener("click",e.onThumbnailsClick,!1)})}}])}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBob3Rvc3dpcGUtbGlnaHRib3guZXNtLmpzIl0sIm5hbWVzIjpbImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJ0YWdOYW1lIiwiYXBwZW5kVG9FbCIsImVsIiwiZG9jdW1lbnQiLCJhcHBlbmRDaGlsZCIsInkiLCJzY2FsZSIsInByb3BWYWx1ZSIsImNvbmNhdCIsIngiLCJ3IiwiaCIsInN0eWxlIiwid2lkdGgiLCJ1bmRlZmluZWQiLCJMT0FEX1NUQVRFIiwiSURMRSIsIkxPQURJTkciLCJMT0FERUQiLCJFUlJPUiIsImUiLCJidXR0b24iLCJjdHJsS2V5IiwibWV0YUtleSIsImFsdEtleSIsInNoaWZ0S2V5IiwiZ2V0RWxlbWVudHNGcm9tT3B0aW9uIiwib3B0aW9uIiwibGVnYWN5U2VsZWN0b3IiLCJwYXJlbnQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJlbGVtZW50cyIsInNwZWNpYWxLZXlVc2VkIiwiRWxlbWVudCIsIk5vZGVMaXN0IiwiQXJyYXkiLCJpc0FycmF5IiwiZnJvbSIsInNlbGVjdG9yIiwicXVlcnlTZWxlY3RvckFsbCIsImZuIiwicHJvdG90eXBlIiwiZ29UbyIsImlzU2FmYXJpIiwibmF2aWdhdG9yIiwidmVuZG9yIiwibWF0Y2giLCJQaG90b1N3aXBlRXZlbnQiLCJfY3JlYXRlQ2xhc3MiLCJ0eXBlIiwiZGV0YWlscyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJkZWZhdWx0UHJldmVudGVkIiwiT2JqZWN0IiwiYXNzaWduIiwia2V5IiwidmFsdWUiLCJFdmVudGFibGUiLCJfbGlzdGVuZXJzIiwiX2ZpbHRlcnMiLCJvcHRpb25zIiwibmFtZSIsIl90aGlzJHBzd3AiLCJwcmlvcml0eSIsIl90aGlzJF9maWx0ZXJzJG5hbWUiLCJwdXNoIiwiX3RoaXMkX2ZpbHRlcnMkbmFtZTIiLCJzb3J0IiwiZjEiLCJmMiIsImFkZEZpbHRlciIsImZpbHRlciIsInBzd3AiLCJyZW1vdmVGaWx0ZXIiLCJfdGhpcyIsIl9sZW4iLCJhcmdzIiwiX2tleSIsIl90aGlzJF9maWx0ZXJzJG5hbWUzIiwiZm9yRWFjaCIsImFwcGx5IiwiX3RoaXMkX2xpc3RlbmVycyRuYW1lIiwiX3RoaXMkcHN3cDIiLCJvbiIsIl90aGlzJHBzd3AzIiwibGlzdGVuZXIiLCJvZmYiLCJldmVudCIsIl90aGlzMiIsImRpc3BhdGNoIiwiX3RoaXMkX2xpc3RlbmVycyRuYW1lMiIsImNhbGwiLCJQbGFjZWhvbGRlciIsImVsZW1lbnQiLCJpbWFnZVNyYyIsImNvbnRhaW5lciIsImltZ0VsIiwiZGVjb2RpbmciLCJzZXRBdHRyaWJ1dGUiLCJoZWlnaHQiLCJzZXREaXNwbGF5ZWRTaXplIiwidHJhbnNmb3JtIiwidG9UcmFuc2Zvcm1TdHJpbmciLCJzZXRXaWR0aEhlaWdodCIsIl90aGlzJGVsZW1lbnQiLCJwYXJlbnROb2RlIiwicmVtb3ZlIiwiQ29udGVudCIsIml0ZW1EYXRhIiwiaW5zdGFuY2UiLCJpbmRleCIsImRhdGEiLCJwbGFjZWhvbGRlciIsInNsaWRlIiwiZGlzcGxheWVkSW1hZ2VIZWlnaHQiLCJOdW1iZXIiLCJkaXNwbGF5ZWRJbWFnZVdpZHRoIiwiaGFzU2xpZGUiLCJjb250ZW50IiwiX3RoaXMzIiwia2VlcFBsYWNlaG9sZGVyIiwiZGVzdHJveSIsImlzTGF6eSIsInJlbG9hZCIsInBsYWNlaG9sZGVyU3JjIiwidXNlUGxhY2Vob2xkZXIiLCJwbGFjZWhvbGRlckVsIiwiaXNGaXJzdFNsaWRlIiwicHJlcGVuZCIsImFwcGx5RmlsdGVycyIsIm1zcmMiLCJpc0ltYWdlQ29udGVudCIsImxvYWRJbWFnZSIsImlubmVySFRNTCIsImh0bWwiLCJ1cGRhdGVDb250ZW50U2l6ZSIsIl90aGlzNCIsIl90aGlzJGRhdGEkc3JjIiwiX3RoaXMkZGF0YSRhbHQiLCJpbWFnZUVsZW1lbnQiLCJ1cGRhdGVTcmNzZXRTaXplcyIsInNyY3NldCIsInNyYyIsImNvbXBsZXRlIiwib25Mb2FkZWQiLCJhbHQiLCJzdGF0ZSIsIm9uRXJyb3IiLCJvbmVycm9yIiwiaXNBY3RpdmUiLCJhcHBlbmQiLCJoZWF2eUFwcGVuZGVkIiwicmVtb3ZlUGxhY2Vob2xkZXIiLCJpc0Vycm9yIiwiaXNJbml0aWFsU2l6ZVVwZGF0ZSIsImlzWm9vbWFibGUiLCJpbWFnZSIsInNpemVzV2lkdGgiLCJkYXRhc2V0IiwibGFyZ2VzdFVzZWRTaXplIiwicGFyc2VJbnQiLCJzaXplcyIsImxhenlMb2FkIiwiU3RyaW5nIiwibG9hZCIsImlzTG9hZGluZyIsImVycm9yTXNnRWwiLCJfdGhpcyRpbnN0YW5jZSRvcHRpb24yIiwiZGlzcGxheUVycm9yIiwiX3RoaXMkaW5zdGFuY2Ukb3B0aW9uIiwiZXJyb3JNc2ciLCJpbm5lclRleHQiLCJzdXBwb3J0c0RlY29kZSIsIl90aGlzNSIsImlzQXR0YWNoZWQiLCJpc0RlY29kaW5nIiwiZGVjb2RlIiwiYXBwZW5kSW1hZ2UiLCJob2xkZXJFbGVtZW50Iiwid2luZG93IiwiZ2V0Vmlld3BvcnRTaXplIiwiZ2V0Vmlld3BvcnRTaXplRm4iLCJuZXdWaWV3cG9ydFNpemUiLCJwYXJzZVBhZGRpbmdPcHRpb24iLCJjbGllbnRXaWR0aCIsInBhZGRpbmdWYWx1ZSIsInByb3AiLCJ2aWV3cG9ydFNpemUiLCJab29tTGV2ZWwiLCJwYWRkaW5nRm4iLCJwYWRkaW5nIiwibGVnYWN5UHJvcE5hbWUiLCJzbGljZSIsInBhbkFyZWFTaXplIiwibWluIiwiTUFYX0lNQUdFX1dJRFRIIiwibWF4IiwiaW5pdGlhbCIsInNlY29uZGFyeSIsInpvb21MZXZlbHMiLCJlbGVtZW50U2l6ZSIsImZpdCIsImZpbGwiLCJ2RmlsbCIsIm1heFdpZHRoIiwibWF4SGVpZ2h0IiwiaFJhdGlvIiwidlJhdGlvIiwiTWF0aCIsIl9nZXRJbml0aWFsIiwiX2dldFNlY29uZGFyeSIsIl9nZXRNYXgiLCJjdXJyWm9vbUxldmVsIiwiX3BhcnNlWm9vbUxldmVsT3B0aW9uIiwib3B0aW9uUHJlZml4Iiwib3B0aW9uVmFsdWUiLCJsYXp5TG9hZERhdGEiLCJfaW5oZXJpdHMiLCJ6b29tTGV2ZWwiLCJQaG90b1N3aXBlQmFzZSIsImNyZWF0ZUNvbnRlbnRGcm9tRGF0YSIsIl90aGlzJG9wdGlvbnMiLCJkYXRhU291cmNlIiwiaXRlbXMiLCJfZ2V0R2FsbGVyeURPTUVsZW1lbnRzIiwiZ2FsbGVyeSIsInVwZGF0ZSIsImNlaWwiLCJsYXp5TG9hZFNsaWRlIiwiZ2V0SXRlbURhdGEiLCJfY2FsbFN1cGVyIiwibnVtSXRlbXMiLCJfZG9tRWxlbWVudFRvSXRlbURhdGEiLCJfdGhpcyRvcHRpb25zMyIsInNsaWRlRGF0YSIsImxpbmtFbCIsIl90aGlzJG9wdGlvbnMyIiwicHN3cFdpZHRoIiwicHN3cFR5cGUiLCJkYXRhU291cmNlSXRlbSIsInRodW1ibmFpbEVsIiwicXVlcnlTZWxlY3RvciIsInBzd3BDcm9wcGVkIiwiZ2FsbGVyeUVsZW1lbnQiLCJfdGhpcyRvcHRpb25zNCIsImNoaWxkcmVuIiwiY2hpbGRTZWxlY3RvciIsIl90aHVtYm5haWxFbCRnZXRBdHRyaSIsIlBob3RvU3dpcGVMaWdodGJveCIsImV4cG9ydHMiLCJwc3dwU3JjIiwiaHJlZiIsInBzd3BTcmNzZXQiLCJfdGhpczYiLCJzaG91bGRPcGVuIiwicHN3cEhlaWdodCIsIl9wcmVsb2FkZWRDb250ZW50IiwiY3VycmVudFNyYyIsImluaXQiLCJnZXRBdHRyaWJ1dGUiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xpY2tlZENoaWxkSW5kZXgiLCJfdWlkIiwib25UaHVtYm5haWxzQ2xpY2siLCJiaW5kIiwiY2hpbGRFbGVtZW50cyIsIl90aGlzNyIsImdhbGxlcnlTZWxlY3RvciIsImluaXRpYWxQb2ludCIsImNsaWNrZWRJbmRleCIsInBzd3BNb2R1bGVUeXBlIiwiX3R5cGVvZiIsInBzd3BNb2R1bGUiLCJpc1Bzd3BDbGFzcyIsInByb21pc2VBcnJheSIsInByZXZlbnREZWZhdWx0IiwibG9hZEFuZE9wZW4iLCJjbGlja2VkVGFyZ2V0IiwiX3RoaXM4IiwiX29wZW5QaG90b3N3aXBlIiwiZ2V0Q2xpY2tlZEluZGV4Rm4iLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiZmluZEluZGV4IiwiY2hpbGQiLCJjb250YWlucyIsImdhbGxlcnlFbGVtZW50cyIsInByZWxvYWQiLCJQcm9taXNlIiwicmVzb2x2ZSIsIkVycm9yIiwib3BlblByb21pc2UiLCJwcmVsb2FkRmlyc3RTbGlkZSIsInVpZCIsImFsbCIsInRoZW4iLCJpdGVyYWJsZU1vZHVsZXMiLCJtYWluTW9kdWxlIiwibW9kdWxlIiwiX3RoaXM5Iiwia2V5cyIsImNvbnRlbnRMb2FkZXIiLCJhZGRUb0NhY2hlIiwiX3RoaXMxMCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiXSwibWFwcGluZ3MiOiI2M0VBYUEsU0FBU0EsY0FBY0MsRUFBV0MsRUFBU0MsR0FDbkNDLEVBQUtDLFNBQVNMLGNBQWNFLENBQU8sRUFVekMsT0FSSUQsSUFDRkcsRUFBR0gsVUFBWUEsR0FoQm5CRSxHQUNBQSxFQUFBRyxZQUFBRixDQUFBLEVBc0JTQSxDQWxCVCxDQTZCQSxTQWxCT0gsa0JBQVlBLEVBQVNNLEVBQUFDLEdBQzFCQyxFQUFBLGVBQUFDLE9BQUFDLEVBQUEsS0FBQSxFQUFBRCxPQUFBSCxHQUFBLEVBQUEsT0FBQSxFQVFGLE9BTGVELEtBQUFBLElBQVhILElBQ0ZNLEdBQUEsWUFBQUMsT0FBQUYsRUFBQSxHQUFBLEVBQUFFLE9BQUFGLEVBQUEsS0FBQSxHQUlGQyxDQUNBLENBeUJBLFNBaEJNQSxlQUFTTCxFQUFBUSxFQUFBQyxHQUViVCxFQUFBVSxNQUFTQyxNQUFnQixVQUFYQyxPQUFTSixFQUFFLEdBQUFGLE9BQUFFLEVBQUEsSUFBQSxFQUFBQSxFQWdCekJSLEVBZkVLLE1BQUFBLE9BQVNDLFVBQUEsT0FBQUcsRUFBcUIsR0FBQUgsT0FBQUcsRUFBQUgsSUFBQUEsRUFBSUYsQ0FnQnRDLEMsOEVBVEEsSUFBQVMsV0FBQSxDQUNBQyxLQUFBLE9BQ0FDLFFBQUEsVUFDQUMsT0FBQSxTQUNBQyxNQUFBLE9BZUEsRUFMQSxTQUFNSixlQUFhSyxHQUNqQkosTUFBTSxXQUFNSSxHQUFBLElBQUFBLEVBQUFD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VzJELFFBQVEsRUFDakZ0RSxLQUFLMk0sV0FBYSxDQUFBLEVBQ2xCM00sS0FBS08sV0FBYSxHQUNsQmxDLHNCQUFzQjJCLEtBQUtTLFFBQVFxSyxRQUFTOUssS0FBS1MsUUFBUStNLGVBQWUsRUFBRTVMLFFBQVEsU0FBQW9LLEdBQ2hGQSxFQUFlNkQsb0JBQW9CLFFBQVNELEVBQUt4QyxrQkFBbUIsQ0FBQSxDQUFLLENBQzNFLENBQUMsQ0FDSCxDQUFDLEVBQUEsQ0FBQSxFQTNMeUNvQiIsImZpbGUiOiJwaG90b3N3aXBlLWxpZ2h0Ym94LmVzbS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAgKiBQaG90b1N3aXBlIExpZ2h0Ym94IDUuNC40IC0gaHR0cHM6Ly9waG90b3N3aXBlLmNvbVxuICAqIChjKSAyMDI0IERteXRybyBTZW1lbm92XG4gICovXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vcGhvdG9zd2lwZS5qcycpLlBvaW50fSBQb2ludCAqL1xuXG4vKipcbiAqIEB0ZW1wbGF0ZSB7a2V5b2YgSFRNTEVsZW1lbnRUYWdOYW1lTWFwfSBUXG4gKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NOYW1lXG4gKiBAcGFyYW0ge1R9IHRhZ05hbWVcbiAqIEBwYXJhbSB7Tm9kZX0gW2FwcGVuZFRvRWxdXG4gKiBAcmV0dXJucyB7SFRNTEVsZW1lbnRUYWdOYW1lTWFwW1RdfVxuICovXG5mdW5jdGlvbiBjcmVhdGVFbGVtZW50KGNsYXNzTmFtZSwgdGFnTmFtZSwgYXBwZW5kVG9FbCkge1xuICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XG5cbiAgaWYgKGNsYXNzTmFtZSkge1xuICAgIGVsLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgfVxuXG4gIGlmIChhcHBlbmRUb0VsKSB7XG4gICAgYXBwZW5kVG9FbC5hcHBlbmRDaGlsZChlbCk7XG4gIH1cblxuICByZXR1cm4gZWw7XG59XG4vKipcbiAqIEdldCB0cmFuc2Zvcm0gc3RyaW5nXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHhcbiAqIEBwYXJhbSB7bnVtYmVyfSBbeV1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbc2NhbGVdXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHRvVHJhbnNmb3JtU3RyaW5nKHgsIHksIHNjYWxlKSB7XG4gIGxldCBwcm9wVmFsdWUgPSBgdHJhbnNsYXRlM2QoJHt4fXB4LCR7eSB8fCAwfXB4LDApYDtcblxuICBpZiAoc2NhbGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHByb3BWYWx1ZSArPSBgIHNjYWxlM2QoJHtzY2FsZX0sJHtzY2FsZX0sMSlgO1xuICB9XG5cbiAgcmV0dXJuIHByb3BWYWx1ZTtcbn1cbi8qKlxuICogQXBwbHkgd2lkdGggYW5kIGhlaWdodCBDU1MgcHJvcGVydGllcyB0byBlbGVtZW50XG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7c3RyaW5nIHwgbnVtYmVyfSB3XG4gKiBAcGFyYW0ge3N0cmluZyB8IG51bWJlcn0gaFxuICovXG5cbmZ1bmN0aW9uIHNldFdpZHRoSGVpZ2h0KGVsLCB3LCBoKSB7XG4gIGVsLnN0eWxlLndpZHRoID0gdHlwZW9mIHcgPT09ICdudW1iZXInID8gYCR7d31weGAgOiB3O1xuICBlbC5zdHlsZS5oZWlnaHQgPSB0eXBlb2YgaCA9PT0gJ251bWJlcicgPyBgJHtofXB4YCA6IGg7XG59XG4vKiogQHR5cGVkZWYge0xPQURfU1RBVEVba2V5b2YgTE9BRF9TVEFURV19IExvYWRTdGF0ZSAqL1xuXG4vKiogQHR5cGUge3sgSURMRTogJ2lkbGUnOyBMT0FESU5HOiAnbG9hZGluZyc7IExPQURFRDogJ2xvYWRlZCc7IEVSUk9SOiAnZXJyb3InIH19ICovXG5cbmNvbnN0IExPQURfU1RBVEUgPSB7XG4gIElETEU6ICdpZGxlJyxcbiAgTE9BRElORzogJ2xvYWRpbmcnLFxuICBMT0FERUQ6ICdsb2FkZWQnLFxuICBFUlJPUjogJ2Vycm9yJ1xufTtcbi8qKlxuICogQ2hlY2sgaWYgY2xpY2sgb3Iga2V5ZG93biBldmVudCB3YXMgZGlzcGF0Y2hlZFxuICogd2l0aCBhIHNwZWNpYWwga2V5IG9yIHZpYSBtb3VzZSB3aGVlbC5cbiAqXG4gKiBAcGFyYW0ge01vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50fSBlXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBzcGVjaWFsS2V5VXNlZChlKSB7XG4gIHJldHVybiAnYnV0dG9uJyBpbiBlICYmIGUuYnV0dG9uID09PSAxIHx8IGUuY3RybEtleSB8fCBlLm1ldGFLZXkgfHwgZS5hbHRLZXkgfHwgZS5zaGlmdEtleTtcbn1cbi8qKlxuICogUGFyc2UgYGdhbGxlcnlgIG9yIGBjaGlsZHJlbmAgb3B0aW9ucy5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi4vcGhvdG9zd2lwZS5qcycpLkVsZW1lbnRQcm92aWRlcn0gW29wdGlvbl1cbiAqIEBwYXJhbSB7c3RyaW5nfSBbbGVnYWN5U2VsZWN0b3JdXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50IHwgRG9jdW1lbnR9IFtwYXJlbnRdXG4gKiBAcmV0dXJucyBIVE1MRWxlbWVudFtdXG4gKi9cblxuZnVuY3Rpb24gZ2V0RWxlbWVudHNGcm9tT3B0aW9uKG9wdGlvbiwgbGVnYWN5U2VsZWN0b3IsIHBhcmVudCA9IGRvY3VtZW50KSB7XG4gIC8qKiBAdHlwZSB7SFRNTEVsZW1lbnRbXX0gKi9cbiAgbGV0IGVsZW1lbnRzID0gW107XG5cbiAgaWYgKG9wdGlvbiBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICBlbGVtZW50cyA9IFtvcHRpb25dO1xuICB9IGVsc2UgaWYgKG9wdGlvbiBpbnN0YW5jZW9mIE5vZGVMaXN0IHx8IEFycmF5LmlzQXJyYXkob3B0aW9uKSkge1xuICAgIGVsZW1lbnRzID0gQXJyYXkuZnJvbShvcHRpb24pO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHNlbGVjdG9yID0gdHlwZW9mIG9wdGlvbiA9PT0gJ3N0cmluZycgPyBvcHRpb24gOiBsZWdhY3lTZWxlY3RvcjtcblxuICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgZWxlbWVudHMgPSBBcnJheS5mcm9tKHBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGVsZW1lbnRzO1xufVxuLyoqXG4gKiBDaGVjayBpZiB2YXJpYWJsZSBpcyBQaG90b1N3aXBlIGNsYXNzXG4gKlxuICogQHBhcmFtIHthbnl9IGZuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc1Bzd3BDbGFzcyhmbikge1xuICByZXR1cm4gdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nICYmIGZuLnByb3RvdHlwZSAmJiBmbi5wcm90b3R5cGUuZ29Ubztcbn1cbi8qKlxuICogQ2hlY2sgaWYgYnJvd3NlciBpcyBTYWZhcmlcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc1NhZmFyaSgpIHtcbiAgcmV0dXJuICEhKG5hdmlnYXRvci52ZW5kb3IgJiYgbmF2aWdhdG9yLnZlbmRvci5tYXRjaCgvYXBwbGUvaSkpO1xufVxuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vbGlnaHRib3gvbGlnaHRib3guanMnKS5kZWZhdWx0fSBQaG90b1N3aXBlTGlnaHRib3ggKi9cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4uL3Bob3Rvc3dpcGUuanMnKS5kZWZhdWx0fSBQaG90b1N3aXBlICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9waG90b3N3aXBlLmpzJykuUGhvdG9Td2lwZU9wdGlvbnN9IFBob3RvU3dpcGVPcHRpb25zICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9waG90b3N3aXBlLmpzJykuRGF0YVNvdXJjZX0gRGF0YVNvdXJjZSAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vdWkvdWktZWxlbWVudC5qcycpLlVJRWxlbWVudERhdGF9IFVJRWxlbWVudERhdGEgKi9cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4uL3NsaWRlL2NvbnRlbnQuanMnKS5kZWZhdWx0fSBDb250ZW50RGVmYXVsdCAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vc2xpZGUvc2xpZGUuanMnKS5kZWZhdWx0fSBTbGlkZSAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vc2xpZGUvc2xpZGUuanMnKS5TbGlkZURhdGF9IFNsaWRlRGF0YSAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vc2xpZGUvem9vbS1sZXZlbC5qcycpLmRlZmF1bHR9IFpvb21MZXZlbCAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vc2xpZGUvZ2V0LXRodW1iLWJvdW5kcy5qcycpLkJvdW5kc30gQm91bmRzICovXG5cbi8qKlxuICogQWxsb3cgYWRkaW5nIGFuIGFyYml0cmFyeSBwcm9wcyB0byB0aGUgQ29udGVudFxuICogaHR0cHM6Ly9waG90b3N3aXBlLmNvbS9jdXN0b20tY29udGVudC8jdXNpbmctd2VicC1pbWFnZS1mb3JtYXRcbiAqIEB0eXBlZGVmIHtDb250ZW50RGVmYXVsdCAmIFJlY29yZDxzdHJpbmcsIGFueT59IENvbnRlbnRcbiAqL1xuXG4vKiogQHR5cGVkZWYge3sgeD86IG51bWJlcjsgeT86IG51bWJlciB9fSBQb2ludCAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFBob3RvU3dpcGVFdmVudHNNYXAgaHR0cHM6Ly9waG90b3N3aXBlLmNvbS9ldmVudHMvXG4gKlxuICpcbiAqIGh0dHBzOi8vcGhvdG9zd2lwZS5jb20vYWRkaW5nLXVpLWVsZW1lbnRzL1xuICpcbiAqIEBwcm9wIHt1bmRlZmluZWR9IHVpUmVnaXN0ZXJcbiAqIEBwcm9wIHt7IGRhdGE6IFVJRWxlbWVudERhdGEgfX0gdWlFbGVtZW50Q3JlYXRlXG4gKlxuICpcbiAqIGh0dHBzOi8vcGhvdG9zd2lwZS5jb20vZXZlbnRzLyNpbml0aWFsaXphdGlvbi1ldmVudHNcbiAqXG4gKiBAcHJvcCB7dW5kZWZpbmVkfSBiZWZvcmVPcGVuXG4gKiBAcHJvcCB7dW5kZWZpbmVkfSBmaXJzdFVwZGF0ZVxuICogQHByb3Age3VuZGVmaW5lZH0gaW5pdGlhbExheW91dFxuICogQHByb3Age3VuZGVmaW5lZH0gY2hhbmdlXG4gKiBAcHJvcCB7dW5kZWZpbmVkfSBhZnRlckluaXRcbiAqIEBwcm9wIHt1bmRlZmluZWR9IGJpbmRFdmVudHNcbiAqXG4gKlxuICogaHR0cHM6Ly9waG90b3N3aXBlLmNvbS9ldmVudHMvI29wZW5pbmctb3ItY2xvc2luZy10cmFuc2l0aW9uLWV2ZW50c1xuICpcbiAqIEBwcm9wIHt1bmRlZmluZWR9IG9wZW5pbmdBbmltYXRpb25TdGFydFxuICogQHByb3Age3VuZGVmaW5lZH0gb3BlbmluZ0FuaW1hdGlvbkVuZFxuICogQHByb3Age3VuZGVmaW5lZH0gY2xvc2luZ0FuaW1hdGlvblN0YXJ0XG4gKiBAcHJvcCB7dW5kZWZpbmVkfSBjbG9zaW5nQW5pbWF0aW9uRW5kXG4gKlxuICpcbiAqIGh0dHBzOi8vcGhvdG9zd2lwZS5jb20vZXZlbnRzLyNjbG9zaW5nLWV2ZW50c1xuICpcbiAqIEBwcm9wIHt1bmRlZmluZWR9IGNsb3NlXG4gKiBAcHJvcCB7dW5kZWZpbmVkfSBkZXN0cm95XG4gKlxuICpcbiAqIGh0dHBzOi8vcGhvdG9zd2lwZS5jb20vZXZlbnRzLyNwb2ludGVyLWFuZC1nZXN0dXJlLWV2ZW50c1xuICpcbiAqIEBwcm9wIHt7IG9yaWdpbmFsRXZlbnQ6IFBvaW50ZXJFdmVudCB9fSBwb2ludGVyRG93blxuICogQHByb3Age3sgb3JpZ2luYWxFdmVudDogUG9pbnRlckV2ZW50IH19IHBvaW50ZXJNb3ZlXG4gKiBAcHJvcCB7eyBvcmlnaW5hbEV2ZW50OiBQb2ludGVyRXZlbnQgfX0gcG9pbnRlclVwXG4gKiBAcHJvcCB7eyBiZ09wYWNpdHk6IG51bWJlciB9fSBwaW5jaENsb3NlIGNhbiBiZSBkZWZhdWx0IHByZXZlbnRlZFxuICogQHByb3Age3sgcGFuWTogbnVtYmVyIH19IHZlcnRpY2FsRHJhZyBjYW4gYmUgZGVmYXVsdCBwcmV2ZW50ZWRcbiAqXG4gKlxuICogaHR0cHM6Ly9waG90b3N3aXBlLmNvbS9ldmVudHMvI3NsaWRlLWNvbnRlbnQtZXZlbnRzXG4gKlxuICogQHByb3Age3sgY29udGVudDogQ29udGVudCB9fSBjb250ZW50SW5pdFxuICogQHByb3Age3sgY29udGVudDogQ29udGVudDsgaXNMYXp5OiBib29sZWFuIH19IGNvbnRlbnRMb2FkIGNhbiBiZSBkZWZhdWx0IHByZXZlbnRlZFxuICogQHByb3Age3sgY29udGVudDogQ29udGVudDsgaXNMYXp5OiBib29sZWFuIH19IGNvbnRlbnRMb2FkSW1hZ2UgY2FuIGJlIGRlZmF1bHQgcHJldmVudGVkXG4gKiBAcHJvcCB7eyBjb250ZW50OiBDb250ZW50OyBzbGlkZTogU2xpZGU7IGlzRXJyb3I/OiBib29sZWFuIH19IGxvYWRDb21wbGV0ZVxuICogQHByb3Age3sgY29udGVudDogQ29udGVudDsgc2xpZGU6IFNsaWRlIH19IGxvYWRFcnJvclxuICogQHByb3Age3sgY29udGVudDogQ29udGVudDsgd2lkdGg6IG51bWJlcjsgaGVpZ2h0OiBudW1iZXIgfX0gY29udGVudFJlc2l6ZSBjYW4gYmUgZGVmYXVsdCBwcmV2ZW50ZWRcbiAqIEBwcm9wIHt7IGNvbnRlbnQ6IENvbnRlbnQ7IHdpZHRoOiBudW1iZXI7IGhlaWdodDogbnVtYmVyOyBzbGlkZTogU2xpZGUgfX0gaW1hZ2VTaXplQ2hhbmdlXG4gKiBAcHJvcCB7eyBjb250ZW50OiBDb250ZW50IH19IGNvbnRlbnRMYXp5TG9hZCBjYW4gYmUgZGVmYXVsdCBwcmV2ZW50ZWRcbiAqIEBwcm9wIHt7IGNvbnRlbnQ6IENvbnRlbnQgfX0gY29udGVudEFwcGVuZCBjYW4gYmUgZGVmYXVsdCBwcmV2ZW50ZWRcbiAqIEBwcm9wIHt7IGNvbnRlbnQ6IENvbnRlbnQgfX0gY29udGVudEFjdGl2YXRlIGNhbiBiZSBkZWZhdWx0IHByZXZlbnRlZFxuICogQHByb3Age3sgY29udGVudDogQ29udGVudCB9fSBjb250ZW50RGVhY3RpdmF0ZSBjYW4gYmUgZGVmYXVsdCBwcmV2ZW50ZWRcbiAqIEBwcm9wIHt7IGNvbnRlbnQ6IENvbnRlbnQgfX0gY29udGVudFJlbW92ZSBjYW4gYmUgZGVmYXVsdCBwcmV2ZW50ZWRcbiAqIEBwcm9wIHt7IGNvbnRlbnQ6IENvbnRlbnQgfX0gY29udGVudERlc3Ryb3kgY2FuIGJlIGRlZmF1bHQgcHJldmVudGVkXG4gKlxuICpcbiAqIHVuZG9jdW1lbnRlZFxuICpcbiAqIEBwcm9wIHt7IHBvaW50OiBQb2ludDsgb3JpZ2luYWxFdmVudDogUG9pbnRlckV2ZW50IH19IGltYWdlQ2xpY2tBY3Rpb24gY2FuIGJlIGRlZmF1bHQgcHJldmVudGVkXG4gKiBAcHJvcCB7eyBwb2ludDogUG9pbnQ7IG9yaWdpbmFsRXZlbnQ6IFBvaW50ZXJFdmVudCB9fSBiZ0NsaWNrQWN0aW9uIGNhbiBiZSBkZWZhdWx0IHByZXZlbnRlZFxuICogQHByb3Age3sgcG9pbnQ6IFBvaW50OyBvcmlnaW5hbEV2ZW50OiBQb2ludGVyRXZlbnQgfX0gdGFwQWN0aW9uIGNhbiBiZSBkZWZhdWx0IHByZXZlbnRlZFxuICogQHByb3Age3sgcG9pbnQ6IFBvaW50OyBvcmlnaW5hbEV2ZW50OiBQb2ludGVyRXZlbnQgfX0gZG91YmxlVGFwQWN0aW9uIGNhbiBiZSBkZWZhdWx0IHByZXZlbnRlZFxuICpcbiAqIEBwcm9wIHt7IG9yaWdpbmFsRXZlbnQ6IEtleWJvYXJkRXZlbnQgfX0ga2V5ZG93biBjYW4gYmUgZGVmYXVsdCBwcmV2ZW50ZWRcbiAqIEBwcm9wIHt7IHg6IG51bWJlcjsgZHJhZ2dpbmc6IGJvb2xlYW4gfX0gbW92ZU1haW5TY3JvbGxcbiAqIEBwcm9wIHt7IHNsaWRlOiBTbGlkZSB9fSBmaXJzdFpvb21QYW5cbiAqIEBwcm9wIHt7IHNsaWRlOiBTbGlkZSB8IHVuZGVmaW5lZCwgZGF0YTogU2xpZGVEYXRhLCBpbmRleDogbnVtYmVyIH19IGdldHRpbmdEYXRhXG4gKiBAcHJvcCB7dW5kZWZpbmVkfSBiZWZvcmVSZXNpemVcbiAqIEBwcm9wIHt1bmRlZmluZWR9IHJlc2l6ZVxuICogQHByb3Age3VuZGVmaW5lZH0gdmlld3BvcnRTaXplXG4gKiBAcHJvcCB7dW5kZWZpbmVkfSB1cGRhdGVTY3JvbGxPZmZzZXRcbiAqIEBwcm9wIHt7IHNsaWRlOiBTbGlkZSB9fSBzbGlkZUluaXRcbiAqIEBwcm9wIHt7IHNsaWRlOiBTbGlkZSB9fSBhZnRlclNldENvbnRlbnRcbiAqIEBwcm9wIHt7IHNsaWRlOiBTbGlkZSB9fSBzbGlkZUxvYWRcbiAqIEBwcm9wIHt7IHNsaWRlOiBTbGlkZSB9fSBhcHBlbmRIZWF2eSBjYW4gYmUgZGVmYXVsdCBwcmV2ZW50ZWRcbiAqIEBwcm9wIHt7IHNsaWRlOiBTbGlkZSB9fSBhcHBlbmRIZWF2eUNvbnRlbnRcbiAqIEBwcm9wIHt7IHNsaWRlOiBTbGlkZSB9fSBzbGlkZUFjdGl2YXRlXG4gKiBAcHJvcCB7eyBzbGlkZTogU2xpZGUgfX0gc2xpZGVEZWFjdGl2YXRlXG4gKiBAcHJvcCB7eyBzbGlkZTogU2xpZGUgfX0gc2xpZGVEZXN0cm95XG4gKiBAcHJvcCB7eyBkZXN0Wm9vbUxldmVsOiBudW1iZXIsIGNlbnRlclBvaW50OiBQb2ludCB8IHVuZGVmaW5lZCwgdHJhbnNpdGlvbkR1cmF0aW9uOiBudW1iZXIgfCBmYWxzZSB8IHVuZGVmaW5lZCB9fSBiZWZvcmVab29tVG9cbiAqIEBwcm9wIHt7IHNsaWRlOiBTbGlkZSB9fSB6b29tUGFuVXBkYXRlXG4gKiBAcHJvcCB7eyBzbGlkZTogU2xpZGUgfX0gaW5pdGlhbFpvb21QYW5cbiAqIEBwcm9wIHt7IHNsaWRlOiBTbGlkZSB9fSBjYWxjU2xpZGVTaXplXG4gKiBAcHJvcCB7dW5kZWZpbmVkfSByZXNvbHV0aW9uQ2hhbmdlZFxuICogQHByb3Age3sgb3JpZ2luYWxFdmVudDogV2hlZWxFdmVudCB9fSB3aGVlbCBjYW4gYmUgZGVmYXVsdCBwcmV2ZW50ZWRcbiAqIEBwcm9wIHt7IGNvbnRlbnQ6IENvbnRlbnQgfX0gY29udGVudEFwcGVuZEltYWdlIGNhbiBiZSBkZWZhdWx0IHByZXZlbnRlZFxuICogQHByb3Age3sgaW5kZXg6IG51bWJlcjsgaXRlbURhdGE6IFNsaWRlRGF0YSB9fSBsYXp5TG9hZFNsaWRlIGNhbiBiZSBkZWZhdWx0IHByZXZlbnRlZFxuICogQHByb3Age3VuZGVmaW5lZH0gbGF6eUxvYWRcbiAqIEBwcm9wIHt7IHNsaWRlOiBTbGlkZSB9fSBjYWxjQm91bmRzXG4gKiBAcHJvcCB7eyB6b29tTGV2ZWxzOiBab29tTGV2ZWwsIHNsaWRlRGF0YTogU2xpZGVEYXRhIH19IHpvb21MZXZlbHNVcGRhdGVcbiAqXG4gKlxuICogbGVnYWN5XG4gKlxuICogQHByb3Age3VuZGVmaW5lZH0gaW5pdFxuICogQHByb3Age3VuZGVmaW5lZH0gaW5pdGlhbFpvb21JblxuICogQHByb3Age3VuZGVmaW5lZH0gaW5pdGlhbFpvb21PdXRcbiAqIEBwcm9wIHt1bmRlZmluZWR9IGluaXRpYWxab29tSW5FbmRcbiAqIEBwcm9wIHt1bmRlZmluZWR9IGluaXRpYWxab29tT3V0RW5kXG4gKiBAcHJvcCB7eyBkYXRhU291cmNlOiBEYXRhU291cmNlIHwgdW5kZWZpbmVkLCBudW1JdGVtczogbnVtYmVyIH19IG51bUl0ZW1zXG4gKiBAcHJvcCB7eyBpdGVtRGF0YTogU2xpZGVEYXRhOyBpbmRleDogbnVtYmVyIH19IGl0ZW1EYXRhXG4gKiBAcHJvcCB7eyBpbmRleDogbnVtYmVyLCBpdGVtRGF0YTogU2xpZGVEYXRhLCBpbnN0YW5jZTogUGhvdG9Td2lwZSB9fSB0aHVtYkJvdW5kc1xuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gUGhvdG9Td2lwZUZpbHRlcnNNYXAgaHR0cHM6Ly9waG90b3N3aXBlLmNvbS9maWx0ZXJzL1xuICpcbiAqIEBwcm9wIHsobnVtSXRlbXM6IG51bWJlciwgZGF0YVNvdXJjZTogRGF0YVNvdXJjZSB8IHVuZGVmaW5lZCkgPT4gbnVtYmVyfSBudW1JdGVtc1xuICogTW9kaWZ5IHRoZSB0b3RhbCBhbW91bnQgb2Ygc2xpZGVzLiBFeGFtcGxlIG9uIERhdGEgc291cmNlcyBwYWdlLlxuICogaHR0cHM6Ly9waG90b3N3aXBlLmNvbS9maWx0ZXJzLyNudW1pdGVtc1xuICpcbiAqIEBwcm9wIHsoaXRlbURhdGE6IFNsaWRlRGF0YSwgaW5kZXg6IG51bWJlcikgPT4gU2xpZGVEYXRhfSBpdGVtRGF0YVxuICogTW9kaWZ5IHNsaWRlIGl0ZW0gZGF0YS4gRXhhbXBsZSBvbiBEYXRhIHNvdXJjZXMgcGFnZS5cbiAqIGh0dHBzOi8vcGhvdG9zd2lwZS5jb20vZmlsdGVycy8jaXRlbWRhdGFcbiAqXG4gKiBAcHJvcCB7KGl0ZW1EYXRhOiBTbGlkZURhdGEsIGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBsaW5rRWw6IEhUTUxBbmNob3JFbGVtZW50KSA9PiBTbGlkZURhdGF9IGRvbUl0ZW1EYXRhXG4gKiBNb2RpZnkgaXRlbSBkYXRhIHdoZW4gaXQncyBwYXJzZWQgZnJvbSBET00gZWxlbWVudC4gRXhhbXBsZSBvbiBEYXRhIHNvdXJjZXMgcGFnZS5cbiAqIGh0dHBzOi8vcGhvdG9zd2lwZS5jb20vZmlsdGVycy8jZG9taXRlbWRhdGFcbiAqXG4gKiBAcHJvcCB7KGNsaWNrZWRJbmRleDogbnVtYmVyLCBlOiBNb3VzZUV2ZW50LCBpbnN0YW5jZTogUGhvdG9Td2lwZUxpZ2h0Ym94KSA9PiBudW1iZXJ9IGNsaWNrZWRJbmRleFxuICogTW9kaWZ5IGNsaWNrZWQgZ2FsbGVyeSBpdGVtIGluZGV4LlxuICogaHR0cHM6Ly9waG90b3N3aXBlLmNvbS9maWx0ZXJzLyNjbGlja2VkaW5kZXhcbiAqXG4gKiBAcHJvcCB7KHBsYWNlaG9sZGVyU3JjOiBzdHJpbmcgfCBmYWxzZSwgY29udGVudDogQ29udGVudCkgPT4gc3RyaW5nIHwgZmFsc2V9IHBsYWNlaG9sZGVyU3JjXG4gKiBNb2RpZnkgcGxhY2Vob2xkZXIgaW1hZ2Ugc291cmNlLlxuICogaHR0cHM6Ly9waG90b3N3aXBlLmNvbS9maWx0ZXJzLyNwbGFjZWhvbGRlcnNyY1xuICpcbiAqIEBwcm9wIHsoaXNDb250ZW50TG9hZGluZzogYm9vbGVhbiwgY29udGVudDogQ29udGVudCkgPT4gYm9vbGVhbn0gaXNDb250ZW50TG9hZGluZ1xuICogTW9kaWZ5IGlmIHRoZSBjb250ZW50IGlzIGN1cnJlbnRseSBsb2FkaW5nLlxuICogaHR0cHM6Ly9waG90b3N3aXBlLmNvbS9maWx0ZXJzLyNpc2NvbnRlbnRsb2FkaW5nXG4gKlxuICogQHByb3Ageyhpc0NvbnRlbnRab29tYWJsZTogYm9vbGVhbiwgY29udGVudDogQ29udGVudCkgPT4gYm9vbGVhbn0gaXNDb250ZW50Wm9vbWFibGVcbiAqIE1vZGlmeSBpZiB0aGUgY29udGVudCBjYW4gYmUgem9vbWVkLlxuICogaHR0cHM6Ly9waG90b3N3aXBlLmNvbS9maWx0ZXJzLyNpc2NvbnRlbnR6b29tYWJsZVxuICpcbiAqIEBwcm9wIHsodXNlQ29udGVudFBsYWNlaG9sZGVyOiBib29sZWFuLCBjb250ZW50OiBDb250ZW50KSA9PiBib29sZWFufSB1c2VDb250ZW50UGxhY2Vob2xkZXJcbiAqIE1vZGlmeSBpZiB0aGUgcGxhY2Vob2xkZXIgc2hvdWxkIGJlIHVzZWQgZm9yIHRoZSBjb250ZW50LlxuICogaHR0cHM6Ly9waG90b3N3aXBlLmNvbS9maWx0ZXJzLyN1c2Vjb250ZW50cGxhY2Vob2xkZXJcbiAqXG4gKiBAcHJvcCB7KGlzS2VlcGluZ1BsYWNlaG9sZGVyOiBib29sZWFuLCBjb250ZW50OiBDb250ZW50KSA9PiBib29sZWFufSBpc0tlZXBpbmdQbGFjZWhvbGRlclxuICogTW9kaWZ5IGlmIHRoZSBwbGFjZWhvbGRlciBzaG91bGQgYmUga2VwdCBhZnRlciB0aGUgY29udGVudCBpcyBsb2FkZWQuXG4gKiBodHRwczovL3Bob3Rvc3dpcGUuY29tL2ZpbHRlcnMvI2lza2VlcGluZ3BsYWNlaG9sZGVyXG4gKlxuICpcbiAqIEBwcm9wIHsoY29udGVudEVycm9yRWxlbWVudDogSFRNTEVsZW1lbnQsIGNvbnRlbnQ6IENvbnRlbnQpID0+IEhUTUxFbGVtZW50fSBjb250ZW50RXJyb3JFbGVtZW50XG4gKiBNb2RpZnkgYW4gZWxlbWVudCB3aGVuIHRoZSBjb250ZW50IGhhcyBlcnJvciBzdGF0ZSAoZm9yIGV4YW1wbGUsIGlmIGltYWdlIGNhbm5vdCBiZSBsb2FkZWQpLlxuICogaHR0cHM6Ly9waG90b3N3aXBlLmNvbS9maWx0ZXJzLyNjb250ZW50ZXJyb3JlbGVtZW50XG4gKlxuICogQHByb3AgeyhlbGVtZW50OiBIVE1MRWxlbWVudCwgZGF0YTogVUlFbGVtZW50RGF0YSkgPT4gSFRNTEVsZW1lbnR9IHVpRWxlbWVudFxuICogTW9kaWZ5IGEgVUkgZWxlbWVudCB0aGF0J3MgYmVpbmcgY3JlYXRlZC5cbiAqIGh0dHBzOi8vcGhvdG9zd2lwZS5jb20vZmlsdGVycy8jdWllbGVtZW50XG4gKlxuICogQHByb3Ageyh0aHVtYm5haWw6IEhUTUxFbGVtZW50IHwgbnVsbCB8IHVuZGVmaW5lZCwgaXRlbURhdGE6IFNsaWRlRGF0YSwgaW5kZXg6IG51bWJlcikgPT4gSFRNTEVsZW1lbnR9IHRodW1iRWxcbiAqIE1vZGlmeSB0aGUgdGh1bWJuYWlsIGVsZW1lbnQgZnJvbSB3aGljaCBvcGVuaW5nIHpvb20gYW5pbWF0aW9uIHN0YXJ0cyBvciBlbmRzLlxuICogaHR0cHM6Ly9waG90b3N3aXBlLmNvbS9maWx0ZXJzLyN0aHVtYmVsXG4gKlxuICogQHByb3Ageyh0aHVtYkJvdW5kczogQm91bmRzIHwgdW5kZWZpbmVkLCBpdGVtRGF0YTogU2xpZGVEYXRhLCBpbmRleDogbnVtYmVyKSA9PiBCb3VuZHN9IHRodW1iQm91bmRzXG4gKiBNb2RpZnkgdGhlIHRodW1ibmFpbCBib3VuZHMgZnJvbSB3aGljaCBvcGVuaW5nIHpvb20gYW5pbWF0aW9uIHN0YXJ0cyBvciBlbmRzLlxuICogaHR0cHM6Ly9waG90b3N3aXBlLmNvbS9maWx0ZXJzLyN0aHVtYmJvdW5kc1xuICpcbiAqIEBwcm9wIHsoc3Jjc2V0U2l6ZXNXaWR0aDogbnVtYmVyLCBjb250ZW50OiBDb250ZW50KSA9PiBudW1iZXJ9IHNyY3NldFNpemVzV2lkdGhcbiAqXG4gKiBAcHJvcCB7KHByZXZlbnRQb2ludGVyRXZlbnQ6IGJvb2xlYW4sIGV2ZW50OiBQb2ludGVyRXZlbnQsIHBvaW50ZXJUeXBlOiBzdHJpbmcpID0+IGJvb2xlYW59IHByZXZlbnRQb2ludGVyRXZlbnRcbiAqXG4gKi9cblxuLyoqXG4gKiBAdGVtcGxhdGUge2tleW9mIFBob3RvU3dpcGVGaWx0ZXJzTWFwfSBUXG4gKiBAdHlwZWRlZiB7eyBmbjogUGhvdG9Td2lwZUZpbHRlcnNNYXBbVF0sIHByaW9yaXR5OiBudW1iZXIgfX0gRmlsdGVyXG4gKi9cblxuLyoqXG4gKiBAdGVtcGxhdGUge2tleW9mIFBob3RvU3dpcGVFdmVudHNNYXB9IFRcbiAqIEB0eXBlZGVmIHtQaG90b1N3aXBlRXZlbnRzTWFwW1RdIGV4dGVuZHMgdW5kZWZpbmVkID8gUGhvdG9Td2lwZUV2ZW50PFQ+IDogUGhvdG9Td2lwZUV2ZW50PFQ+ICYgUGhvdG9Td2lwZUV2ZW50c01hcFtUXX0gQXVnbWVudGVkRXZlbnRcbiAqL1xuXG4vKipcbiAqIEB0ZW1wbGF0ZSB7a2V5b2YgUGhvdG9Td2lwZUV2ZW50c01hcH0gVFxuICogQHR5cGVkZWYgeyhldmVudDogQXVnbWVudGVkRXZlbnQ8VD4pID0+IHZvaWR9IEV2ZW50Q2FsbGJhY2tcbiAqL1xuXG4vKipcbiAqIEJhc2UgUGhvdG9Td2lwZSBldmVudCBvYmplY3RcbiAqXG4gKiBAdGVtcGxhdGUge2tleW9mIFBob3RvU3dpcGVFdmVudHNNYXB9IFRcbiAqL1xuY2xhc3MgUGhvdG9Td2lwZUV2ZW50IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7VH0gdHlwZVxuICAgKiBAcGFyYW0ge1Bob3RvU3dpcGVFdmVudHNNYXBbVF19IFtkZXRhaWxzXVxuICAgKi9cbiAgY29uc3RydWN0b3IodHlwZSwgZGV0YWlscykge1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy5kZWZhdWx0UHJldmVudGVkID0gZmFsc2U7XG5cbiAgICBpZiAoZGV0YWlscykge1xuICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBkZXRhaWxzKTtcbiAgICB9XG4gIH1cblxuICBwcmV2ZW50RGVmYXVsdCgpIHtcbiAgICB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlO1xuICB9XG5cbn1cbi8qKlxuICogUGhvdG9Td2lwZSBiYXNlIGNsYXNzIHRoYXQgY2FuIGxpc3RlbiBhbmQgZGlzcGF0Y2ggZm9yIGV2ZW50cy5cbiAqIFNoYXJlZCBieSBQaG90b1N3aXBlIENvcmUgYW5kIFBob3RvU3dpcGUgTGlnaHRib3gsIGV4dGVuZGVkIGJ5IGJhc2UuanNcbiAqL1xuXG5cbmNsYXNzIEV2ZW50YWJsZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHt7IFtUIGluIGtleW9mIFBob3RvU3dpcGVFdmVudHNNYXBdPzogKChldmVudDogQXVnbWVudGVkRXZlbnQ8VD4pID0+IHZvaWQpW10gfX1cbiAgICAgKi9cbiAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7eyBbVCBpbiBrZXlvZiBQaG90b1N3aXBlRmlsdGVyc01hcF0/OiBGaWx0ZXI8VD5bXSB9fVxuICAgICAqL1xuXG4gICAgdGhpcy5fZmlsdGVycyA9IHt9O1xuICAgIC8qKiBAdHlwZSB7UGhvdG9Td2lwZSB8IHVuZGVmaW5lZH0gKi9cblxuICAgIHRoaXMucHN3cCA9IHVuZGVmaW5lZDtcbiAgICAvKiogQHR5cGUge1Bob3RvU3dpcGVPcHRpb25zIHwgdW5kZWZpbmVkfSAqL1xuXG4gICAgdGhpcy5vcHRpb25zID0gdW5kZWZpbmVkO1xuICB9XG4gIC8qKlxuICAgKiBAdGVtcGxhdGUge2tleW9mIFBob3RvU3dpcGVGaWx0ZXJzTWFwfSBUXG4gICAqIEBwYXJhbSB7VH0gbmFtZVxuICAgKiBAcGFyYW0ge1Bob3RvU3dpcGVGaWx0ZXJzTWFwW1RdfSBmblxuICAgKiBAcGFyYW0ge251bWJlcn0gcHJpb3JpdHlcbiAgICovXG5cblxuICBhZGRGaWx0ZXIobmFtZSwgZm4sIHByaW9yaXR5ID0gMTAwKSB7XG4gICAgdmFyIF90aGlzJF9maWx0ZXJzJG5hbWUsIF90aGlzJF9maWx0ZXJzJG5hbWUyLCBfdGhpcyRwc3dwO1xuXG4gICAgaWYgKCF0aGlzLl9maWx0ZXJzW25hbWVdKSB7XG4gICAgICB0aGlzLl9maWx0ZXJzW25hbWVdID0gW107XG4gICAgfVxuXG4gICAgKF90aGlzJF9maWx0ZXJzJG5hbWUgPSB0aGlzLl9maWx0ZXJzW25hbWVdKSA9PT0gbnVsbCB8fCBfdGhpcyRfZmlsdGVycyRuYW1lID09PSB2b2lkIDAgfHwgX3RoaXMkX2ZpbHRlcnMkbmFtZS5wdXNoKHtcbiAgICAgIGZuLFxuICAgICAgcHJpb3JpdHlcbiAgICB9KTtcbiAgICAoX3RoaXMkX2ZpbHRlcnMkbmFtZTIgPSB0aGlzLl9maWx0ZXJzW25hbWVdKSA9PT0gbnVsbCB8fCBfdGhpcyRfZmlsdGVycyRuYW1lMiA9PT0gdm9pZCAwIHx8IF90aGlzJF9maWx0ZXJzJG5hbWUyLnNvcnQoKGYxLCBmMikgPT4gZjEucHJpb3JpdHkgLSBmMi5wcmlvcml0eSk7XG4gICAgKF90aGlzJHBzd3AgPSB0aGlzLnBzd3ApID09PSBudWxsIHx8IF90aGlzJHBzd3AgPT09IHZvaWQgMCB8fCBfdGhpcyRwc3dwLmFkZEZpbHRlcihuYW1lLCBmbiwgcHJpb3JpdHkpO1xuICB9XG4gIC8qKlxuICAgKiBAdGVtcGxhdGUge2tleW9mIFBob3RvU3dpcGVGaWx0ZXJzTWFwfSBUXG4gICAqIEBwYXJhbSB7VH0gbmFtZVxuICAgKiBAcGFyYW0ge1Bob3RvU3dpcGVGaWx0ZXJzTWFwW1RdfSBmblxuICAgKi9cblxuXG4gIHJlbW92ZUZpbHRlcihuYW1lLCBmbikge1xuICAgIGlmICh0aGlzLl9maWx0ZXJzW25hbWVdKSB7XG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICB0aGlzLl9maWx0ZXJzW25hbWVdID0gdGhpcy5fZmlsdGVyc1tuYW1lXS5maWx0ZXIoZmlsdGVyID0+IGZpbHRlci5mbiAhPT0gZm4pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBzd3ApIHtcbiAgICAgIHRoaXMucHN3cC5yZW1vdmVGaWx0ZXIobmFtZSwgZm4pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQHRlbXBsYXRlIHtrZXlvZiBQaG90b1N3aXBlRmlsdGVyc01hcH0gVFxuICAgKiBAcGFyYW0ge1R9IG5hbWVcbiAgICogQHBhcmFtIHtQYXJhbWV0ZXJzPFBob3RvU3dpcGVGaWx0ZXJzTWFwW1RdPn0gYXJnc1xuICAgKiBAcmV0dXJucyB7UGFyYW1ldGVyczxQaG90b1N3aXBlRmlsdGVyc01hcFtUXT5bMF19XG4gICAqL1xuXG5cbiAgYXBwbHlGaWx0ZXJzKG5hbWUsIC4uLmFyZ3MpIHtcbiAgICB2YXIgX3RoaXMkX2ZpbHRlcnMkbmFtZTM7XG5cbiAgICAoX3RoaXMkX2ZpbHRlcnMkbmFtZTMgPSB0aGlzLl9maWx0ZXJzW25hbWVdKSA9PT0gbnVsbCB8fCBfdGhpcyRfZmlsdGVycyRuYW1lMyA9PT0gdm9pZCAwIHx8IF90aGlzJF9maWx0ZXJzJG5hbWUzLmZvckVhY2goZmlsdGVyID0+IHtcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgIGFyZ3NbMF0gPSBmaWx0ZXIuZm4uYXBwbHkodGhpcywgYXJncyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGFyZ3NbMF07XG4gIH1cbiAgLyoqXG4gICAqIEB0ZW1wbGF0ZSB7a2V5b2YgUGhvdG9Td2lwZUV2ZW50c01hcH0gVFxuICAgKiBAcGFyYW0ge1R9IG5hbWVcbiAgICogQHBhcmFtIHtFdmVudENhbGxiYWNrPFQ+fSBmblxuICAgKi9cblxuXG4gIG9uKG5hbWUsIGZuKSB7XG4gICAgdmFyIF90aGlzJF9saXN0ZW5lcnMkbmFtZSwgX3RoaXMkcHN3cDI7XG5cbiAgICBpZiAoIXRoaXMuX2xpc3RlbmVyc1tuYW1lXSkge1xuICAgICAgdGhpcy5fbGlzdGVuZXJzW25hbWVdID0gW107XG4gICAgfVxuXG4gICAgKF90aGlzJF9saXN0ZW5lcnMkbmFtZSA9IHRoaXMuX2xpc3RlbmVyc1tuYW1lXSkgPT09IG51bGwgfHwgX3RoaXMkX2xpc3RlbmVycyRuYW1lID09PSB2b2lkIDAgfHwgX3RoaXMkX2xpc3RlbmVycyRuYW1lLnB1c2goZm4pOyAvLyBXaGVuIGJpbmRpbmcgZXZlbnRzIHRvIGxpZ2h0Ym94LFxuICAgIC8vIGFsc28gYmluZCBldmVudHMgdG8gUGhvdG9Td2lwZSBDb3JlLFxuICAgIC8vIGlmIGl0J3Mgb3Blbi5cblxuICAgIChfdGhpcyRwc3dwMiA9IHRoaXMucHN3cCkgPT09IG51bGwgfHwgX3RoaXMkcHN3cDIgPT09IHZvaWQgMCB8fCBfdGhpcyRwc3dwMi5vbihuYW1lLCBmbik7XG4gIH1cbiAgLyoqXG4gICAqIEB0ZW1wbGF0ZSB7a2V5b2YgUGhvdG9Td2lwZUV2ZW50c01hcH0gVFxuICAgKiBAcGFyYW0ge1R9IG5hbWVcbiAgICogQHBhcmFtIHtFdmVudENhbGxiYWNrPFQ+fSBmblxuICAgKi9cblxuXG4gIG9mZihuYW1lLCBmbikge1xuICAgIHZhciBfdGhpcyRwc3dwMztcblxuICAgIGlmICh0aGlzLl9saXN0ZW5lcnNbbmFtZV0pIHtcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgIHRoaXMuX2xpc3RlbmVyc1tuYW1lXSA9IHRoaXMuX2xpc3RlbmVyc1tuYW1lXS5maWx0ZXIobGlzdGVuZXIgPT4gZm4gIT09IGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICAoX3RoaXMkcHN3cDMgPSB0aGlzLnBzd3ApID09PSBudWxsIHx8IF90aGlzJHBzd3AzID09PSB2b2lkIDAgfHwgX3RoaXMkcHN3cDMub2ZmKG5hbWUsIGZuKTtcbiAgfVxuICAvKipcbiAgICogQHRlbXBsYXRlIHtrZXlvZiBQaG90b1N3aXBlRXZlbnRzTWFwfSBUXG4gICAqIEBwYXJhbSB7VH0gbmFtZVxuICAgKiBAcGFyYW0ge1Bob3RvU3dpcGVFdmVudHNNYXBbVF19IFtkZXRhaWxzXVxuICAgKiBAcmV0dXJucyB7QXVnbWVudGVkRXZlbnQ8VD59XG4gICAqL1xuXG5cbiAgZGlzcGF0Y2gobmFtZSwgZGV0YWlscykge1xuICAgIHZhciBfdGhpcyRfbGlzdGVuZXJzJG5hbWUyO1xuXG4gICAgaWYgKHRoaXMucHN3cCkge1xuICAgICAgcmV0dXJuIHRoaXMucHN3cC5kaXNwYXRjaChuYW1lLCBkZXRhaWxzKTtcbiAgICB9XG5cbiAgICBjb25zdCBldmVudCA9XG4gICAgLyoqIEB0eXBlIHtBdWdtZW50ZWRFdmVudDxUPn0gKi9cbiAgICBuZXcgUGhvdG9Td2lwZUV2ZW50KG5hbWUsIGRldGFpbHMpO1xuICAgIChfdGhpcyRfbGlzdGVuZXJzJG5hbWUyID0gdGhpcy5fbGlzdGVuZXJzW25hbWVdKSA9PT0gbnVsbCB8fCBfdGhpcyRfbGlzdGVuZXJzJG5hbWUyID09PSB2b2lkIDAgfHwgX3RoaXMkX2xpc3RlbmVycyRuYW1lMi5mb3JFYWNoKGxpc3RlbmVyID0+IHtcbiAgICAgIGxpc3RlbmVyLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIH0pO1xuICAgIHJldHVybiBldmVudDtcbiAgfVxuXG59XG5cbmNsYXNzIFBsYWNlaG9sZGVyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgZmFsc2V9IGltYWdlU3JjXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lclxuICAgKi9cbiAgY29uc3RydWN0b3IoaW1hZ2VTcmMsIGNvbnRhaW5lcikge1xuICAgIC8vIENyZWF0ZSBwbGFjZWhvbGRlclxuICAgIC8vIChzdHJldGNoZWQgdGh1bWJuYWlsIG9yIHNpbXBsZSBkaXYgYmVoaW5kIHRoZSBtYWluIGltYWdlKVxuXG4gICAgLyoqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50IHwgSFRNTERpdkVsZW1lbnQgfCBudWxsfSAqL1xuICAgIHRoaXMuZWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoJ3Bzd3BfX2ltZyBwc3dwX19pbWctLXBsYWNlaG9sZGVyJywgaW1hZ2VTcmMgPyAnaW1nJyA6ICdkaXYnLCBjb250YWluZXIpO1xuXG4gICAgaWYgKGltYWdlU3JjKSB7XG4gICAgICBjb25zdCBpbWdFbCA9XG4gICAgICAvKiogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR9ICovXG4gICAgICB0aGlzLmVsZW1lbnQ7XG4gICAgICBpbWdFbC5kZWNvZGluZyA9ICdhc3luYyc7XG4gICAgICBpbWdFbC5hbHQgPSAnJztcbiAgICAgIGltZ0VsLnNyYyA9IGltYWdlU3JjO1xuICAgICAgaW1nRWwuc2V0QXR0cmlidXRlKCdyb2xlJywgJ3ByZXNlbnRhdGlvbicpO1xuICAgIH1cblxuICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHRcbiAgICovXG5cblxuICBzZXREaXNwbGF5ZWRTaXplKHdpZHRoLCBoZWlnaHQpIHtcbiAgICBpZiAoIXRoaXMuZWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmVsZW1lbnQudGFnTmFtZSA9PT0gJ0lNRycpIHtcbiAgICAgIC8vIFVzZSB0cmFuc2Zvcm0gc2NhbGUoKSB0byBtb2RpZnkgaW1nIHBsYWNlaG9sZGVyIHNpemVcbiAgICAgIC8vIChpbnN0ZWFkIG9mIGNoYW5naW5nIHdpZHRoL2hlaWdodCBkaXJlY3RseSkuXG4gICAgICAvLyBUaGlzIGhlbHBzIHdpdGggcGVyZm9ybWFuY2UsIHNwZWNpZmljYWxseSBpbiBpT1MxNSBTYWZhcmkuXG4gICAgICBzZXRXaWR0aEhlaWdodCh0aGlzLmVsZW1lbnQsIDI1MCwgJ2F1dG8nKTtcbiAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS50cmFuc2Zvcm1PcmlnaW4gPSAnMCAwJztcbiAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSB0b1RyYW5zZm9ybVN0cmluZygwLCAwLCB3aWR0aCAvIDI1MCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFdpZHRoSGVpZ2h0KHRoaXMuZWxlbWVudCwgd2lkdGgsIGhlaWdodCk7XG4gICAgfVxuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB2YXIgX3RoaXMkZWxlbWVudDtcblxuICAgIGlmICgoX3RoaXMkZWxlbWVudCA9IHRoaXMuZWxlbWVudCkgIT09IG51bGwgJiYgX3RoaXMkZWxlbWVudCAhPT0gdm9pZCAwICYmIF90aGlzJGVsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZSgpO1xuICAgIH1cblxuICAgIHRoaXMuZWxlbWVudCA9IG51bGw7XG4gIH1cblxufVxuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi9zbGlkZS5qcycpLmRlZmF1bHR9IFNsaWRlICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuL3NsaWRlLmpzJykuU2xpZGVEYXRhfSBTbGlkZURhdGEgKi9cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4uL2NvcmUvYmFzZS5qcycpLmRlZmF1bHR9IFBob3RvU3dpcGVCYXNlICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi91dGlsL3V0aWwuanMnKS5Mb2FkU3RhdGV9IExvYWRTdGF0ZSAqL1xuXG5jbGFzcyBDb250ZW50IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7U2xpZGVEYXRhfSBpdGVtRGF0YSBTbGlkZSBkYXRhXG4gICAqIEBwYXJhbSB7UGhvdG9Td2lwZUJhc2V9IGluc3RhbmNlIFBob3RvU3dpcGUgb3IgUGhvdG9Td2lwZUxpZ2h0Ym94IGluc3RhbmNlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleFxuICAgKi9cbiAgY29uc3RydWN0b3IoaXRlbURhdGEsIGluc3RhbmNlLCBpbmRleCkge1xuICAgIHRoaXMuaW5zdGFuY2UgPSBpbnN0YW5jZTtcbiAgICB0aGlzLmRhdGEgPSBpdGVtRGF0YTtcbiAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgLyoqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50IHwgSFRNTERpdkVsZW1lbnQgfCB1bmRlZmluZWR9ICovXG5cbiAgICB0aGlzLmVsZW1lbnQgPSB1bmRlZmluZWQ7XG4gICAgLyoqIEB0eXBlIHtQbGFjZWhvbGRlciB8IHVuZGVmaW5lZH0gKi9cblxuICAgIHRoaXMucGxhY2Vob2xkZXIgPSB1bmRlZmluZWQ7XG4gICAgLyoqIEB0eXBlIHtTbGlkZSB8IHVuZGVmaW5lZH0gKi9cblxuICAgIHRoaXMuc2xpZGUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5kaXNwbGF5ZWRJbWFnZVdpZHRoID0gMDtcbiAgICB0aGlzLmRpc3BsYXllZEltYWdlSGVpZ2h0ID0gMDtcbiAgICB0aGlzLndpZHRoID0gTnVtYmVyKHRoaXMuZGF0YS53KSB8fCBOdW1iZXIodGhpcy5kYXRhLndpZHRoKSB8fCAwO1xuICAgIHRoaXMuaGVpZ2h0ID0gTnVtYmVyKHRoaXMuZGF0YS5oKSB8fCBOdW1iZXIodGhpcy5kYXRhLmhlaWdodCkgfHwgMDtcbiAgICB0aGlzLmlzQXR0YWNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLmhhc1NsaWRlID0gZmFsc2U7XG4gICAgdGhpcy5pc0RlY29kaW5nID0gZmFsc2U7XG4gICAgLyoqIEB0eXBlIHtMb2FkU3RhdGV9ICovXG5cbiAgICB0aGlzLnN0YXRlID0gTE9BRF9TVEFURS5JRExFO1xuXG4gICAgaWYgKHRoaXMuZGF0YS50eXBlKSB7XG4gICAgICB0aGlzLnR5cGUgPSB0aGlzLmRhdGEudHlwZTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5zcmMpIHtcbiAgICAgIHRoaXMudHlwZSA9ICdpbWFnZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudHlwZSA9ICdodG1sJztcbiAgICB9XG5cbiAgICB0aGlzLmluc3RhbmNlLmRpc3BhdGNoKCdjb250ZW50SW5pdCcsIHtcbiAgICAgIGNvbnRlbnQ6IHRoaXNcbiAgICB9KTtcbiAgfVxuXG4gIHJlbW92ZVBsYWNlaG9sZGVyKCkge1xuICAgIGlmICh0aGlzLnBsYWNlaG9sZGVyICYmICF0aGlzLmtlZXBQbGFjZWhvbGRlcigpKSB7XG4gICAgICAvLyBXaXRoIGRlbGF5LCBhcyBpbWFnZSBtaWdodCBiZSBsb2FkZWQsIGJ1dCBub3QgcmVuZGVyZWRcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5wbGFjZWhvbGRlcikge1xuICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIuZGVzdHJveSgpO1xuICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH0sIDEwMDApO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogUHJlbG9hZCBjb250ZW50XG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNMYXp5XG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3JlbG9hZF1cbiAgICovXG5cblxuICBsb2FkKGlzTGF6eSwgcmVsb2FkKSB7XG4gICAgaWYgKHRoaXMuc2xpZGUgJiYgdGhpcy51c2VQbGFjZWhvbGRlcigpKSB7XG4gICAgICBpZiAoIXRoaXMucGxhY2Vob2xkZXIpIHtcbiAgICAgICAgY29uc3QgcGxhY2Vob2xkZXJTcmMgPSB0aGlzLmluc3RhbmNlLmFwcGx5RmlsdGVycygncGxhY2Vob2xkZXJTcmMnLCAvLyB1c2UgIGltYWdlLWJhc2VkIHBsYWNlaG9sZGVyIG9ubHkgZm9yIHRoZSBmaXJzdCBzbGlkZSxcbiAgICAgICAgLy8gYXMgcmVuZGVyaW5nIChldmVuIHNtYWxsIHN0cmV0Y2hlZCB0aHVtYm5haWwpIGlzIGFuIGV4cGVuc2l2ZSBvcGVyYXRpb25cbiAgICAgICAgdGhpcy5kYXRhLm1zcmMgJiYgdGhpcy5zbGlkZS5pc0ZpcnN0U2xpZGUgPyB0aGlzLmRhdGEubXNyYyA6IGZhbHNlLCB0aGlzKTtcbiAgICAgICAgdGhpcy5wbGFjZWhvbGRlciA9IG5ldyBQbGFjZWhvbGRlcihwbGFjZWhvbGRlclNyYywgdGhpcy5zbGlkZS5jb250YWluZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcGxhY2Vob2xkZXJFbCA9IHRoaXMucGxhY2Vob2xkZXIuZWxlbWVudDsgLy8gQWRkIHBsYWNlaG9sZGVyIHRvIERPTSBpZiBpdCB3YXMgYWxyZWFkeSBjcmVhdGVkXG5cbiAgICAgICAgaWYgKHBsYWNlaG9sZGVyRWwgJiYgIXBsYWNlaG9sZGVyRWwucGFyZW50RWxlbWVudCkge1xuICAgICAgICAgIHRoaXMuc2xpZGUuY29udGFpbmVyLnByZXBlbmQocGxhY2Vob2xkZXJFbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5lbGVtZW50ICYmICFyZWxvYWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pbnN0YW5jZS5kaXNwYXRjaCgnY29udGVudExvYWQnLCB7XG4gICAgICBjb250ZW50OiB0aGlzLFxuICAgICAgaXNMYXp5XG4gICAgfSkuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzSW1hZ2VDb250ZW50KCkpIHtcbiAgICAgIHRoaXMuZWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoJ3Bzd3BfX2ltZycsICdpbWcnKTsgLy8gU3RhcnQgbG9hZGluZyBvbmx5IGFmdGVyIHdpZHRoIGlzIGRlZmluZWQsIGFzIHNpemVzIG1pZ2h0IGRlcGVuZCBvbiBpdC5cbiAgICAgIC8vIER1ZSB0byBTYWZhcmkgZmVhdHVyZSwgd2UgbXVzdCBkZWZpbmUgc2l6ZXMgYmVmb3JlIHNyY3NldC5cblxuICAgICAgaWYgKHRoaXMuZGlzcGxheWVkSW1hZ2VXaWR0aCkge1xuICAgICAgICB0aGlzLmxvYWRJbWFnZShpc0xhenkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KCdwc3dwX19jb250ZW50JywgJ2RpdicpO1xuICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IHRoaXMuZGF0YS5odG1sIHx8ICcnO1xuICAgIH1cblxuICAgIGlmIChyZWxvYWQgJiYgdGhpcy5zbGlkZSkge1xuICAgICAgdGhpcy5zbGlkZS51cGRhdGVDb250ZW50U2l6ZSh0cnVlKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFByZWxvYWQgaW1hZ2VcbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBpc0xhenlcbiAgICovXG5cblxuICBsb2FkSW1hZ2UoaXNMYXp5KSB7XG4gICAgdmFyIF90aGlzJGRhdGEkc3JjLCBfdGhpcyRkYXRhJGFsdDtcblxuICAgIGlmICghdGhpcy5pc0ltYWdlQ29udGVudCgpIHx8ICF0aGlzLmVsZW1lbnQgfHwgdGhpcy5pbnN0YW5jZS5kaXNwYXRjaCgnY29udGVudExvYWRJbWFnZScsIHtcbiAgICAgIGNvbnRlbnQ6IHRoaXMsXG4gICAgICBpc0xhenlcbiAgICB9KS5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgaW1hZ2VFbGVtZW50ID1cbiAgICAvKiogQHR5cGUgSFRNTEltYWdlRWxlbWVudCAqL1xuICAgIHRoaXMuZWxlbWVudDtcbiAgICB0aGlzLnVwZGF0ZVNyY3NldFNpemVzKCk7XG5cbiAgICBpZiAodGhpcy5kYXRhLnNyY3NldCkge1xuICAgICAgaW1hZ2VFbGVtZW50LnNyY3NldCA9IHRoaXMuZGF0YS5zcmNzZXQ7XG4gICAgfVxuXG4gICAgaW1hZ2VFbGVtZW50LnNyYyA9IChfdGhpcyRkYXRhJHNyYyA9IHRoaXMuZGF0YS5zcmMpICE9PSBudWxsICYmIF90aGlzJGRhdGEkc3JjICE9PSB2b2lkIDAgPyBfdGhpcyRkYXRhJHNyYyA6ICcnO1xuICAgIGltYWdlRWxlbWVudC5hbHQgPSAoX3RoaXMkZGF0YSRhbHQgPSB0aGlzLmRhdGEuYWx0KSAhPT0gbnVsbCAmJiBfdGhpcyRkYXRhJGFsdCAhPT0gdm9pZCAwID8gX3RoaXMkZGF0YSRhbHQgOiAnJztcbiAgICB0aGlzLnN0YXRlID0gTE9BRF9TVEFURS5MT0FESU5HO1xuXG4gICAgaWYgKGltYWdlRWxlbWVudC5jb21wbGV0ZSkge1xuICAgICAgdGhpcy5vbkxvYWRlZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbWFnZUVsZW1lbnQub25sb2FkID0gKCkgPT4ge1xuICAgICAgICB0aGlzLm9uTG9hZGVkKCk7XG4gICAgICB9O1xuXG4gICAgICBpbWFnZUVsZW1lbnQub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5vbkVycm9yKCk7XG4gICAgICB9O1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQXNzaWduIHNsaWRlIHRvIGNvbnRlbnRcbiAgICpcbiAgICogQHBhcmFtIHtTbGlkZX0gc2xpZGVcbiAgICovXG5cblxuICBzZXRTbGlkZShzbGlkZSkge1xuICAgIHRoaXMuc2xpZGUgPSBzbGlkZTtcbiAgICB0aGlzLmhhc1NsaWRlID0gdHJ1ZTtcbiAgICB0aGlzLmluc3RhbmNlID0gc2xpZGUucHN3cDsgLy8gdG9kbzogZG8gd2UgbmVlZCB0byB1bnNldCBzbGlkZT9cbiAgfVxuICAvKipcbiAgICogQ29udGVudCBsb2FkIHN1Y2Nlc3MgaGFuZGxlclxuICAgKi9cblxuXG4gIG9uTG9hZGVkKCkge1xuICAgIHRoaXMuc3RhdGUgPSBMT0FEX1NUQVRFLkxPQURFRDtcblxuICAgIGlmICh0aGlzLnNsaWRlICYmIHRoaXMuZWxlbWVudCkge1xuICAgICAgdGhpcy5pbnN0YW5jZS5kaXNwYXRjaCgnbG9hZENvbXBsZXRlJywge1xuICAgICAgICBzbGlkZTogdGhpcy5zbGlkZSxcbiAgICAgICAgY29udGVudDogdGhpc1xuICAgICAgfSk7IC8vIGlmIGNvbnRlbnQgaXMgcmVsb2FkZWRcblxuICAgICAgaWYgKHRoaXMuc2xpZGUuaXNBY3RpdmUgJiYgdGhpcy5zbGlkZS5oZWF2eUFwcGVuZGVkICYmICF0aGlzLmVsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgICB0aGlzLmFwcGVuZCgpO1xuICAgICAgICB0aGlzLnNsaWRlLnVwZGF0ZUNvbnRlbnRTaXplKHRydWUpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gTE9BRF9TVEFURS5MT0FERUQgfHwgdGhpcy5zdGF0ZSA9PT0gTE9BRF9TVEFURS5FUlJPUikge1xuICAgICAgICB0aGlzLnJlbW92ZVBsYWNlaG9sZGVyKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDb250ZW50IGxvYWQgZXJyb3IgaGFuZGxlclxuICAgKi9cblxuXG4gIG9uRXJyb3IoKSB7XG4gICAgdGhpcy5zdGF0ZSA9IExPQURfU1RBVEUuRVJST1I7XG5cbiAgICBpZiAodGhpcy5zbGlkZSkge1xuICAgICAgdGhpcy5kaXNwbGF5RXJyb3IoKTtcbiAgICAgIHRoaXMuaW5zdGFuY2UuZGlzcGF0Y2goJ2xvYWRDb21wbGV0ZScsIHtcbiAgICAgICAgc2xpZGU6IHRoaXMuc2xpZGUsXG4gICAgICAgIGlzRXJyb3I6IHRydWUsXG4gICAgICAgIGNvbnRlbnQ6IHRoaXNcbiAgICAgIH0pO1xuICAgICAgdGhpcy5pbnN0YW5jZS5kaXNwYXRjaCgnbG9hZEVycm9yJywge1xuICAgICAgICBzbGlkZTogdGhpcy5zbGlkZSxcbiAgICAgICAgY29udGVudDogdGhpc1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gSWYgdGhlIGNvbnRlbnQgaXMgY3VycmVudGx5IGxvYWRpbmdcbiAgICovXG5cblxuICBpc0xvYWRpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2UuYXBwbHlGaWx0ZXJzKCdpc0NvbnRlbnRMb2FkaW5nJywgdGhpcy5zdGF0ZSA9PT0gTE9BRF9TVEFURS5MT0FESU5HLCB0aGlzKTtcbiAgfVxuICAvKipcbiAgICogQHJldHVybnMge0Jvb2xlYW59IElmIHRoZSBjb250ZW50IGlzIGluIGVycm9yIHN0YXRlXG4gICAqL1xuXG5cbiAgaXNFcnJvcigpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gTE9BRF9TVEFURS5FUlJPUjtcbiAgfVxuICAvKipcbiAgICogQHJldHVybnMge2Jvb2xlYW59IElmIHRoZSBjb250ZW50IGlzIGltYWdlXG4gICAqL1xuXG5cbiAgaXNJbWFnZUNvbnRlbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gJ2ltYWdlJztcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIGNvbnRlbnQgc2l6ZVxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gd2lkdGhcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGhlaWdodFxuICAgKi9cblxuXG4gIHNldERpc3BsYXllZFNpemUod2lkdGgsIGhlaWdodCkge1xuICAgIGlmICghdGhpcy5lbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGxhY2Vob2xkZXIpIHtcbiAgICAgIHRoaXMucGxhY2Vob2xkZXIuc2V0RGlzcGxheWVkU2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pbnN0YW5jZS5kaXNwYXRjaCgnY29udGVudFJlc2l6ZScsIHtcbiAgICAgIGNvbnRlbnQ6IHRoaXMsXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodFxuICAgIH0pLmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzZXRXaWR0aEhlaWdodCh0aGlzLmVsZW1lbnQsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgaWYgKHRoaXMuaXNJbWFnZUNvbnRlbnQoKSAmJiAhdGhpcy5pc0Vycm9yKCkpIHtcbiAgICAgIGNvbnN0IGlzSW5pdGlhbFNpemVVcGRhdGUgPSAhdGhpcy5kaXNwbGF5ZWRJbWFnZVdpZHRoICYmIHdpZHRoO1xuICAgICAgdGhpcy5kaXNwbGF5ZWRJbWFnZVdpZHRoID0gd2lkdGg7XG4gICAgICB0aGlzLmRpc3BsYXllZEltYWdlSGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgICBpZiAoaXNJbml0aWFsU2l6ZVVwZGF0ZSkge1xuICAgICAgICB0aGlzLmxvYWRJbWFnZShmYWxzZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnVwZGF0ZVNyY3NldFNpemVzKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnNsaWRlKSB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2UuZGlzcGF0Y2goJ2ltYWdlU2l6ZUNoYW5nZScsIHtcbiAgICAgICAgICBzbGlkZTogdGhpcy5zbGlkZSxcbiAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgY29udGVudDogdGhpc1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBJZiB0aGUgY29udGVudCBjYW4gYmUgem9vbWVkXG4gICAqL1xuXG5cbiAgaXNab29tYWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZS5hcHBseUZpbHRlcnMoJ2lzQ29udGVudFpvb21hYmxlJywgdGhpcy5pc0ltYWdlQ29udGVudCgpICYmIHRoaXMuc3RhdGUgIT09IExPQURfU1RBVEUuRVJST1IsIHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgaW1hZ2Ugc3Jjc2V0IHNpemVzIGF0dHJpYnV0ZSBiYXNlZCBvbiB3aWR0aCBhbmQgaGVpZ2h0XG4gICAqL1xuXG5cbiAgdXBkYXRlU3Jjc2V0U2l6ZXMoKSB7XG4gICAgLy8gSGFuZGxlIHNyY3NldCBzaXplcyBhdHRyaWJ1dGUuXG4gICAgLy9cbiAgICAvLyBOZXZlciBsb3dlciBxdWFsaXR5LCBpZiBpdCB3YXMgaW5jcmVhc2VkIHByZXZpb3VzbHkuXG4gICAgLy8gQ2hyb21lIGRvZXMgdGhpcyBhdXRvbWF0aWNhbGx5LCBGaXJlZm94IGFuZCBTYWZhcmkgZG8gbm90LFxuICAgIC8vIHNvIHdlIHN0b3JlIGxhcmdlc3QgdXNlZCBzaXplIGluIGRhdGFzZXQuXG4gICAgaWYgKCF0aGlzLmlzSW1hZ2VDb250ZW50KCkgfHwgIXRoaXMuZWxlbWVudCB8fCAhdGhpcy5kYXRhLnNyY3NldCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGltYWdlID1cbiAgICAvKiogQHR5cGUgSFRNTEltYWdlRWxlbWVudCAqL1xuICAgIHRoaXMuZWxlbWVudDtcbiAgICBjb25zdCBzaXplc1dpZHRoID0gdGhpcy5pbnN0YW5jZS5hcHBseUZpbHRlcnMoJ3NyY3NldFNpemVzV2lkdGgnLCB0aGlzLmRpc3BsYXllZEltYWdlV2lkdGgsIHRoaXMpO1xuXG4gICAgaWYgKCFpbWFnZS5kYXRhc2V0Lmxhcmdlc3RVc2VkU2l6ZSB8fCBzaXplc1dpZHRoID4gcGFyc2VJbnQoaW1hZ2UuZGF0YXNldC5sYXJnZXN0VXNlZFNpemUsIDEwKSkge1xuICAgICAgaW1hZ2Uuc2l6ZXMgPSBzaXplc1dpZHRoICsgJ3B4JztcbiAgICAgIGltYWdlLmRhdGFzZXQubGFyZ2VzdFVzZWRTaXplID0gU3RyaW5nKHNpemVzV2lkdGgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQHJldHVybnMge2Jvb2xlYW59IElmIGNvbnRlbnQgc2hvdWxkIHVzZSBhIHBsYWNlaG9sZGVyIChmcm9tIG1zcmMgYnkgZGVmYXVsdClcbiAgICovXG5cblxuICB1c2VQbGFjZWhvbGRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZS5hcHBseUZpbHRlcnMoJ3VzZUNvbnRlbnRQbGFjZWhvbGRlcicsIHRoaXMuaXNJbWFnZUNvbnRlbnQoKSwgdGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIFByZWxvYWQgY29udGVudCB3aXRoIGxhenktbG9hZGluZyBwYXJhbVxuICAgKi9cblxuXG4gIGxhenlMb2FkKCkge1xuICAgIGlmICh0aGlzLmluc3RhbmNlLmRpc3BhdGNoKCdjb250ZW50TGF6eUxvYWQnLCB7XG4gICAgICBjb250ZW50OiB0aGlzXG4gICAgfSkuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMubG9hZCh0cnVlKTtcbiAgfVxuICAvKipcbiAgICogQHJldHVybnMge2Jvb2xlYW59IElmIHBsYWNlaG9sZGVyIHNob3VsZCBiZSBrZXB0IGFmdGVyIGNvbnRlbnQgaXMgbG9hZGVkXG4gICAqL1xuXG5cbiAga2VlcFBsYWNlaG9sZGVyKCkge1xuICAgIHJldHVybiB0aGlzLmluc3RhbmNlLmFwcGx5RmlsdGVycygnaXNLZWVwaW5nUGxhY2Vob2xkZXInLCB0aGlzLmlzTG9hZGluZygpLCB0aGlzKTtcbiAgfVxuICAvKipcbiAgICogRGVzdHJveSB0aGUgY29udGVudFxuICAgKi9cblxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5oYXNTbGlkZSA9IGZhbHNlO1xuICAgIHRoaXMuc2xpZGUgPSB1bmRlZmluZWQ7XG5cbiAgICBpZiAodGhpcy5pbnN0YW5jZS5kaXNwYXRjaCgnY29udGVudERlc3Ryb3knLCB7XG4gICAgICBjb250ZW50OiB0aGlzXG4gICAgfSkuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucmVtb3ZlKCk7XG5cbiAgICBpZiAodGhpcy5wbGFjZWhvbGRlcikge1xuICAgICAgdGhpcy5wbGFjZWhvbGRlci5kZXN0cm95KCk7XG4gICAgICB0aGlzLnBsYWNlaG9sZGVyID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzSW1hZ2VDb250ZW50KCkgJiYgdGhpcy5lbGVtZW50KSB7XG4gICAgICB0aGlzLmVsZW1lbnQub25sb2FkID0gbnVsbDtcbiAgICAgIHRoaXMuZWxlbWVudC5vbmVycm9yID0gbnVsbDtcbiAgICAgIHRoaXMuZWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIERpc3BsYXkgZXJyb3IgbWVzc2FnZVxuICAgKi9cblxuXG4gIGRpc3BsYXlFcnJvcigpIHtcbiAgICBpZiAodGhpcy5zbGlkZSkge1xuICAgICAgdmFyIF90aGlzJGluc3RhbmNlJG9wdGlvbiwgX3RoaXMkaW5zdGFuY2Ukb3B0aW9uMjtcblxuICAgICAgbGV0IGVycm9yTXNnRWwgPSBjcmVhdGVFbGVtZW50KCdwc3dwX19lcnJvci1tc2cnLCAnZGl2Jyk7XG4gICAgICBlcnJvck1zZ0VsLmlubmVyVGV4dCA9IChfdGhpcyRpbnN0YW5jZSRvcHRpb24gPSAoX3RoaXMkaW5zdGFuY2Ukb3B0aW9uMiA9IHRoaXMuaW5zdGFuY2Uub3B0aW9ucykgPT09IG51bGwgfHwgX3RoaXMkaW5zdGFuY2Ukb3B0aW9uMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkaW5zdGFuY2Ukb3B0aW9uMi5lcnJvck1zZykgIT09IG51bGwgJiYgX3RoaXMkaW5zdGFuY2Ukb3B0aW9uICE9PSB2b2lkIDAgPyBfdGhpcyRpbnN0YW5jZSRvcHRpb24gOiAnJztcbiAgICAgIGVycm9yTXNnRWwgPVxuICAgICAgLyoqIEB0eXBlIHtIVE1MRGl2RWxlbWVudH0gKi9cbiAgICAgIHRoaXMuaW5zdGFuY2UuYXBwbHlGaWx0ZXJzKCdjb250ZW50RXJyb3JFbGVtZW50JywgZXJyb3JNc2dFbCwgdGhpcyk7XG4gICAgICB0aGlzLmVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KCdwc3dwX19jb250ZW50IHBzd3BfX2Vycm9yLW1zZy1jb250YWluZXInLCAnZGl2Jyk7XG4gICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZXJyb3JNc2dFbCk7XG4gICAgICB0aGlzLnNsaWRlLmNvbnRhaW5lci5pbm5lclRleHQgPSAnJztcbiAgICAgIHRoaXMuc2xpZGUuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICB0aGlzLnNsaWRlLnVwZGF0ZUNvbnRlbnRTaXplKHRydWUpO1xuICAgICAgdGhpcy5yZW1vdmVQbGFjZWhvbGRlcigpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQXBwZW5kIHRoZSBjb250ZW50XG4gICAqL1xuXG5cbiAgYXBwZW5kKCkge1xuICAgIGlmICh0aGlzLmlzQXR0YWNoZWQgfHwgIXRoaXMuZWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuaXNBdHRhY2hlZCA9IHRydWU7XG5cbiAgICBpZiAodGhpcy5zdGF0ZSA9PT0gTE9BRF9TVEFURS5FUlJPUikge1xuICAgICAgdGhpcy5kaXNwbGF5RXJyb3IoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pbnN0YW5jZS5kaXNwYXRjaCgnY29udGVudEFwcGVuZCcsIHtcbiAgICAgIGNvbnRlbnQ6IHRoaXNcbiAgICB9KS5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgc3VwcG9ydHNEZWNvZGUgPSAoJ2RlY29kZScgaW4gdGhpcy5lbGVtZW50KTtcblxuICAgIGlmICh0aGlzLmlzSW1hZ2VDb250ZW50KCkpIHtcbiAgICAgIC8vIFVzZSBkZWNvZGUoKSBvbiBuZWFyYnkgc2xpZGVzXG4gICAgICAvL1xuICAgICAgLy8gTmVhcmJ5IHNsaWRlIGltYWdlcyBhcmUgaW4gRE9NIGFuZCBub3QgaGlkZGVuIHZpYSBkaXNwbGF5Om5vbmUuXG4gICAgICAvLyBIb3dldmVyLCB0aGV5IGFyZSBwbGFjZWQgb2Zmc2NyZWVuICh0byB0aGUgbGVmdCBhbmQgcmlnaHQgc2lkZSkuXG4gICAgICAvL1xuICAgICAgLy8gU29tZSBicm93c2VycyBkbyBub3QgY29tcG9zaXRlIHRoZSBpbWFnZSB1bnRpbCBpdCdzIGFjdHVhbGx5IHZpc2libGUsXG4gICAgICAvLyB1c2luZyBkZWNvZGUoKSBoZWxwcy5cbiAgICAgIC8vXG4gICAgICAvLyBZb3UgbWlnaHQgYXNrIFwid2h5IGRvbnQgeW91IGp1c3QgZGVjb2RlKCkgYW5kIHRoZW4gYXBwZW5kIGFsbCBpbWFnZXNcIixcbiAgICAgIC8vIHRoYXQncyBiZWNhdXNlIEkgd2FudCB0byBzaG93IGltYWdlIGJlZm9yZSBpdCdzIGZ1bGx5IGxvYWRlZCxcbiAgICAgIC8vIGFzIGJyb3dzZXIgY2FuIHJlbmRlciBwYXJ0cyBvZiBpbWFnZSB3aGlsZSBpdCBpcyBsb2FkaW5nLlxuICAgICAgLy8gV2UgZG8gbm90IGRvIHRoaXMgaW4gU2FmYXJpIGR1ZSB0byBwYXJ0aWFsIGxvYWRpbmcgYnVnLlxuICAgICAgaWYgKHN1cHBvcnRzRGVjb2RlICYmIHRoaXMuc2xpZGUgJiYgKCF0aGlzLnNsaWRlLmlzQWN0aXZlIHx8IGlzU2FmYXJpKCkpKSB7XG4gICAgICAgIHRoaXMuaXNEZWNvZGluZyA9IHRydWU7IC8vIHB1cnBvc2VmdWxseSB1c2luZyBmaW5hbGx5IGluc3RlYWQgb2YgdGhlbixcbiAgICAgICAgLy8gYXMgaWYgc3Jjc2V0IHNpemVzIGNoYW5nZXMgZHluYW1pY2FsbHkgLSBpdCBtYXkgY2F1c2UgZGVjb2RlIGVycm9yXG5cbiAgICAgICAgLyoqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50fSAqL1xuXG4gICAgICAgIHRoaXMuZWxlbWVudC5kZWNvZGUoKS5jYXRjaCgoKSA9PiB7fSkuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5pc0RlY29kaW5nID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5hcHBlbmRJbWFnZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYXBwZW5kSW1hZ2UoKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuc2xpZGUgJiYgIXRoaXMuZWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLnNsaWRlLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQWN0aXZhdGUgdGhlIHNsaWRlLFxuICAgKiBhY3RpdmUgc2xpZGUgaXMgZ2VuZXJhbGx5IHRoZSBjdXJyZW50IG9uZSxcbiAgICogbWVhbmluZyB0aGUgdXNlciBjYW4gc2VlIGl0LlxuICAgKi9cblxuXG4gIGFjdGl2YXRlKCkge1xuICAgIGlmICh0aGlzLmluc3RhbmNlLmRpc3BhdGNoKCdjb250ZW50QWN0aXZhdGUnLCB7XG4gICAgICBjb250ZW50OiB0aGlzXG4gICAgfSkuZGVmYXVsdFByZXZlbnRlZCB8fCAhdGhpcy5zbGlkZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzSW1hZ2VDb250ZW50KCkgJiYgdGhpcy5pc0RlY29kaW5nICYmICFpc1NhZmFyaSgpKSB7XG4gICAgICAvLyBhZGQgaW1hZ2UgdG8gc2xpZGUgd2hlbiBpdCBiZWNvbWVzIGFjdGl2ZSxcbiAgICAgIC8vIGV2ZW4gaWYgaXQncyBub3QgZmluaXNoZWQgZGVjb2RpbmdcbiAgICAgIHRoaXMuYXBwZW5kSW1hZ2UoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNFcnJvcigpKSB7XG4gICAgICB0aGlzLmxvYWQoZmFsc2UsIHRydWUpOyAvLyB0cnkgdG8gcmVsb2FkXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2xpZGUuaG9sZGVyRWxlbWVudCkge1xuICAgICAgdGhpcy5zbGlkZS5ob2xkZXJFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAnZmFsc2UnKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIERlYWN0aXZhdGUgdGhlIGNvbnRlbnRcbiAgICovXG5cblxuICBkZWFjdGl2YXRlKCkge1xuICAgIHRoaXMuaW5zdGFuY2UuZGlzcGF0Y2goJ2NvbnRlbnREZWFjdGl2YXRlJywge1xuICAgICAgY29udGVudDogdGhpc1xuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuc2xpZGUgJiYgdGhpcy5zbGlkZS5ob2xkZXJFbGVtZW50KSB7XG4gICAgICB0aGlzLnNsaWRlLmhvbGRlckVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGNvbnRlbnQgZnJvbSBET01cbiAgICovXG5cblxuICByZW1vdmUoKSB7XG4gICAgdGhpcy5pc0F0dGFjaGVkID0gZmFsc2U7XG5cbiAgICBpZiAodGhpcy5pbnN0YW5jZS5kaXNwYXRjaCgnY29udGVudFJlbW92ZScsIHtcbiAgICAgIGNvbnRlbnQ6IHRoaXNcbiAgICB9KS5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZWxlbWVudCAmJiB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZSgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBsYWNlaG9sZGVyICYmIHRoaXMucGxhY2Vob2xkZXIuZWxlbWVudCkge1xuICAgICAgdGhpcy5wbGFjZWhvbGRlci5lbGVtZW50LnJlbW92ZSgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQXBwZW5kIHRoZSBpbWFnZSBjb250ZW50IHRvIHNsaWRlIGNvbnRhaW5lclxuICAgKi9cblxuXG4gIGFwcGVuZEltYWdlKCkge1xuICAgIGlmICghdGhpcy5pc0F0dGFjaGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaW5zdGFuY2UuZGlzcGF0Y2goJ2NvbnRlbnRBcHBlbmRJbWFnZScsIHtcbiAgICAgIGNvbnRlbnQ6IHRoaXNcbiAgICB9KS5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBlbnN1cmUgdGhhdCBlbGVtZW50IGV4aXN0cyBhbmQgaXMgbm90IGFscmVhZHkgYXBwZW5kZWRcblxuXG4gICAgaWYgKHRoaXMuc2xpZGUgJiYgdGhpcy5lbGVtZW50ICYmICF0aGlzLmVsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgdGhpcy5zbGlkZS5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0ZSA9PT0gTE9BRF9TVEFURS5MT0FERUQgfHwgdGhpcy5zdGF0ZSA9PT0gTE9BRF9TVEFURS5FUlJPUikge1xuICAgICAgdGhpcy5yZW1vdmVQbGFjZWhvbGRlcigpO1xuICAgIH1cbiAgfVxuXG59XG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9waG90b3N3aXBlLmpzJykuUGhvdG9Td2lwZU9wdGlvbnN9IFBob3RvU3dpcGVPcHRpb25zICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9jb3JlL2Jhc2UuanMnKS5kZWZhdWx0fSBQaG90b1N3aXBlQmFzZSAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vcGhvdG9zd2lwZS5qcycpLlBvaW50fSBQb2ludCAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vc2xpZGUvc2xpZGUuanMnKS5TbGlkZURhdGF9IFNsaWRlRGF0YSAqL1xuXG4vKipcbiAqIEBwYXJhbSB7UGhvdG9Td2lwZU9wdGlvbnN9IG9wdGlvbnNcbiAqIEBwYXJhbSB7UGhvdG9Td2lwZUJhc2V9IHBzd3BcbiAqIEByZXR1cm5zIHtQb2ludH1cbiAqL1xuZnVuY3Rpb24gZ2V0Vmlld3BvcnRTaXplKG9wdGlvbnMsIHBzd3ApIHtcbiAgaWYgKG9wdGlvbnMuZ2V0Vmlld3BvcnRTaXplRm4pIHtcbiAgICBjb25zdCBuZXdWaWV3cG9ydFNpemUgPSBvcHRpb25zLmdldFZpZXdwb3J0U2l6ZUZuKG9wdGlvbnMsIHBzd3ApO1xuXG4gICAgaWYgKG5ld1ZpZXdwb3J0U2l6ZSkge1xuICAgICAgcmV0dXJuIG5ld1ZpZXdwb3J0U2l6ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHg6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCxcbiAgICAvLyBUT0RPOiBoZWlnaHQgb24gbW9iaWxlIGlzIHZlcnkgaW5jb3Npc3RlbnQgZHVlIHRvIHRvb2xiYXJcbiAgICAvLyBmaW5kIGEgd2F5IHRvIGltcHJvdmUgdGhpc1xuICAgIC8vXG4gICAgLy8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCAtIGRvZXNuJ3Qgc2VlbSB0byB3b3JrIHdlbGxcbiAgICB5OiB3aW5kb3cuaW5uZXJIZWlnaHRcbiAgfTtcbn1cbi8qKlxuICogUGFyc2VzIHBhZGRpbmcgb3B0aW9uLlxuICogU3VwcG9ydGVkIGZvcm1hdHM6XG4gKlxuICogLy8gT2JqZWN0XG4gKiBwYWRkaW5nOiB7XG4gKiAgdG9wOiAwLFxuICogIGJvdHRvbTogMCxcbiAqICBsZWZ0OiAwLFxuICogIHJpZ2h0OiAwXG4gKiB9XG4gKlxuICogLy8gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIG9iamVjdFxuICogcGFkZGluZ0ZuOiAodmlld3BvcnRTaXplLCBpdGVtRGF0YSwgaW5kZXgpID0+IHtcbiAqICByZXR1cm4ge1xuICogICAgdG9wOiAwLFxuICogICAgYm90dG9tOiAwLFxuICogICAgbGVmdDogMCxcbiAqICAgIHJpZ2h0OiAwXG4gKiAgfTtcbiAqIH1cbiAqXG4gKiAvLyBMZWdhY3kgdmFyaWFudFxuICogcGFkZGluZ0xlZnQ6IDAsXG4gKiBwYWRkaW5nUmlnaHQ6IDAsXG4gKiBwYWRkaW5nVG9wOiAwLFxuICogcGFkZGluZ0JvdHRvbTogMCxcbiAqXG4gKiBAcGFyYW0geydsZWZ0JyB8ICd0b3AnIHwgJ2JvdHRvbScgfCAncmlnaHQnfSBwcm9wXG4gKiBAcGFyYW0ge1Bob3RvU3dpcGVPcHRpb25zfSBvcHRpb25zIFBob3RvU3dpcGUgb3B0aW9uc1xuICogQHBhcmFtIHtQb2ludH0gdmlld3BvcnRTaXplIFBob3RvU3dpcGUgdmlld3BvcnQgc2l6ZSwgZm9yIGV4YW1wbGU6IHsgeDo4MDAsIHk6NjAwIH1cbiAqIEBwYXJhbSB7U2xpZGVEYXRhfSBpdGVtRGF0YSBEYXRhIGFib3V0IHRoZSBzbGlkZVxuICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFNsaWRlIGluZGV4XG4gKiBAcmV0dXJucyB7bnVtYmVyfVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlUGFkZGluZ09wdGlvbihwcm9wLCBvcHRpb25zLCB2aWV3cG9ydFNpemUsIGl0ZW1EYXRhLCBpbmRleCkge1xuICBsZXQgcGFkZGluZ1ZhbHVlID0gMDtcblxuICBpZiAob3B0aW9ucy5wYWRkaW5nRm4pIHtcbiAgICBwYWRkaW5nVmFsdWUgPSBvcHRpb25zLnBhZGRpbmdGbih2aWV3cG9ydFNpemUsIGl0ZW1EYXRhLCBpbmRleClbcHJvcF07XG4gIH0gZWxzZSBpZiAob3B0aW9ucy5wYWRkaW5nKSB7XG4gICAgcGFkZGluZ1ZhbHVlID0gb3B0aW9ucy5wYWRkaW5nW3Byb3BdO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGxlZ2FjeVByb3BOYW1lID0gJ3BhZGRpbmcnICsgcHJvcFswXS50b1VwcGVyQ2FzZSgpICsgcHJvcC5zbGljZSgxKTsgLy8gQHRzLWV4cGVjdC1lcnJvclxuXG4gICAgaWYgKG9wdGlvbnNbbGVnYWN5UHJvcE5hbWVdKSB7XG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICBwYWRkaW5nVmFsdWUgPSBvcHRpb25zW2xlZ2FjeVByb3BOYW1lXTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gTnVtYmVyKHBhZGRpbmdWYWx1ZSkgfHwgMDtcbn1cbi8qKlxuICogQHBhcmFtIHtQaG90b1N3aXBlT3B0aW9uc30gb3B0aW9uc1xuICogQHBhcmFtIHtQb2ludH0gdmlld3BvcnRTaXplXG4gKiBAcGFyYW0ge1NsaWRlRGF0YX0gaXRlbURhdGFcbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleFxuICogQHJldHVybnMge1BvaW50fVxuICovXG5cbmZ1bmN0aW9uIGdldFBhbkFyZWFTaXplKG9wdGlvbnMsIHZpZXdwb3J0U2l6ZSwgaXRlbURhdGEsIGluZGV4KSB7XG4gIHJldHVybiB7XG4gICAgeDogdmlld3BvcnRTaXplLnggLSBwYXJzZVBhZGRpbmdPcHRpb24oJ2xlZnQnLCBvcHRpb25zLCB2aWV3cG9ydFNpemUsIGl0ZW1EYXRhLCBpbmRleCkgLSBwYXJzZVBhZGRpbmdPcHRpb24oJ3JpZ2h0Jywgb3B0aW9ucywgdmlld3BvcnRTaXplLCBpdGVtRGF0YSwgaW5kZXgpLFxuICAgIHk6IHZpZXdwb3J0U2l6ZS55IC0gcGFyc2VQYWRkaW5nT3B0aW9uKCd0b3AnLCBvcHRpb25zLCB2aWV3cG9ydFNpemUsIGl0ZW1EYXRhLCBpbmRleCkgLSBwYXJzZVBhZGRpbmdPcHRpb24oJ2JvdHRvbScsIG9wdGlvbnMsIHZpZXdwb3J0U2l6ZSwgaXRlbURhdGEsIGluZGV4KVxuICB9O1xufVxuXG5jb25zdCBNQVhfSU1BR0VfV0lEVEggPSA0MDAwO1xuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4uL3Bob3Rvc3dpcGUuanMnKS5kZWZhdWx0fSBQaG90b1N3aXBlICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9waG90b3N3aXBlLmpzJykuUGhvdG9Td2lwZU9wdGlvbnN9IFBob3RvU3dpcGVPcHRpb25zICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9waG90b3N3aXBlLmpzJykuUG9pbnR9IFBvaW50ICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9zbGlkZS9zbGlkZS5qcycpLlNsaWRlRGF0YX0gU2xpZGVEYXRhICovXG5cbi8qKiBAdHlwZWRlZiB7J2ZpdCcgfCAnZmlsbCcgfCBudW1iZXIgfCAoKHpvb21MZXZlbE9iamVjdDogWm9vbUxldmVsKSA9PiBudW1iZXIpfSBab29tTGV2ZWxPcHRpb24gKi9cblxuLyoqXG4gKiBDYWxjdWxhdGVzIHpvb20gbGV2ZWxzIGZvciBzcGVjaWZpYyBzbGlkZS5cbiAqIERlcGVuZHMgb24gdmlld3BvcnQgc2l6ZSBhbmQgaW1hZ2Ugc2l6ZS5cbiAqL1xuXG5jbGFzcyBab29tTGV2ZWwge1xuICAvKipcbiAgICogQHBhcmFtIHtQaG90b1N3aXBlT3B0aW9uc30gb3B0aW9ucyBQaG90b1N3aXBlIG9wdGlvbnNcbiAgICogQHBhcmFtIHtTbGlkZURhdGF9IGl0ZW1EYXRhIFNsaWRlIGRhdGFcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFNsaWRlIGluZGV4XG4gICAqIEBwYXJhbSB7UGhvdG9Td2lwZX0gW3Bzd3BdIFBob3RvU3dpcGUgaW5zdGFuY2UsIGNhbiBiZSB1bmRlZmluZWQgaWYgbm90IGluaXRpYWxpemVkIHlldFxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucywgaXRlbURhdGEsIGluZGV4LCBwc3dwKSB7XG4gICAgdGhpcy5wc3dwID0gcHN3cDtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMuaXRlbURhdGEgPSBpdGVtRGF0YTtcbiAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgLyoqIEB0eXBlIHsgUG9pbnQgfCBudWxsIH0gKi9cblxuICAgIHRoaXMucGFuQXJlYVNpemUgPSBudWxsO1xuICAgIC8qKiBAdHlwZSB7IFBvaW50IHwgbnVsbCB9ICovXG5cbiAgICB0aGlzLmVsZW1lbnRTaXplID0gbnVsbDtcbiAgICB0aGlzLmZpdCA9IDE7XG4gICAgdGhpcy5maWxsID0gMTtcbiAgICB0aGlzLnZGaWxsID0gMTtcbiAgICB0aGlzLmluaXRpYWwgPSAxO1xuICAgIHRoaXMuc2Vjb25kYXJ5ID0gMTtcbiAgICB0aGlzLm1heCA9IDE7XG4gICAgdGhpcy5taW4gPSAxO1xuICB9XG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgaW5pdGlhbCwgc2Vjb25kYXJ5IGFuZCBtYXhpbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSBzcGVjaWZpZWQgc2xpZGUuXG4gICAqXG4gICAqIEl0IHNob3VsZCBiZSBjYWxsZWQgd2hlbiBlaXRoZXIgaW1hZ2Ugb3Igdmlld3BvcnQgc2l6ZSBjaGFuZ2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gbWF4V2lkdGhcbiAgICogQHBhcmFtIHtudW1iZXJ9IG1heEhlaWdodFxuICAgKiBAcGFyYW0ge1BvaW50fSBwYW5BcmVhU2l6ZVxuICAgKi9cblxuXG4gIHVwZGF0ZShtYXhXaWR0aCwgbWF4SGVpZ2h0LCBwYW5BcmVhU2l6ZSkge1xuICAgIC8qKiBAdHlwZSB7UG9pbnR9ICovXG4gICAgY29uc3QgZWxlbWVudFNpemUgPSB7XG4gICAgICB4OiBtYXhXaWR0aCxcbiAgICAgIHk6IG1heEhlaWdodFxuICAgIH07XG4gICAgdGhpcy5lbGVtZW50U2l6ZSA9IGVsZW1lbnRTaXplO1xuICAgIHRoaXMucGFuQXJlYVNpemUgPSBwYW5BcmVhU2l6ZTtcbiAgICBjb25zdCBoUmF0aW8gPSBwYW5BcmVhU2l6ZS54IC8gZWxlbWVudFNpemUueDtcbiAgICBjb25zdCB2UmF0aW8gPSBwYW5BcmVhU2l6ZS55IC8gZWxlbWVudFNpemUueTtcbiAgICB0aGlzLmZpdCA9IE1hdGgubWluKDEsIGhSYXRpbyA8IHZSYXRpbyA/IGhSYXRpbyA6IHZSYXRpbyk7XG4gICAgdGhpcy5maWxsID0gTWF0aC5taW4oMSwgaFJhdGlvID4gdlJhdGlvID8gaFJhdGlvIDogdlJhdGlvKTsgLy8gem9vbS52RmlsbCBkZWZpbmVzIHpvb20gbGV2ZWwgb2YgdGhlIGltYWdlXG4gICAgLy8gd2hlbiBpdCBoYXMgMTAwJSBvZiB2aWV3cG9ydCB2ZXJ0aWNhbCBzcGFjZSAoaGVpZ2h0KVxuXG4gICAgdGhpcy52RmlsbCA9IE1hdGgubWluKDEsIHZSYXRpbyk7XG4gICAgdGhpcy5pbml0aWFsID0gdGhpcy5fZ2V0SW5pdGlhbCgpO1xuICAgIHRoaXMuc2Vjb25kYXJ5ID0gdGhpcy5fZ2V0U2Vjb25kYXJ5KCk7XG4gICAgdGhpcy5tYXggPSBNYXRoLm1heCh0aGlzLmluaXRpYWwsIHRoaXMuc2Vjb25kYXJ5LCB0aGlzLl9nZXRNYXgoKSk7XG4gICAgdGhpcy5taW4gPSBNYXRoLm1pbih0aGlzLmZpdCwgdGhpcy5pbml0aWFsLCB0aGlzLnNlY29uZGFyeSk7XG5cbiAgICBpZiAodGhpcy5wc3dwKSB7XG4gICAgICB0aGlzLnBzd3AuZGlzcGF0Y2goJ3pvb21MZXZlbHNVcGRhdGUnLCB7XG4gICAgICAgIHpvb21MZXZlbHM6IHRoaXMsXG4gICAgICAgIHNsaWRlRGF0YTogdGhpcy5pdGVtRGF0YVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBQYXJzZXMgdXNlci1kZWZpbmVkIHpvb20gb3B0aW9uLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0geydpbml0aWFsJyB8ICdzZWNvbmRhcnknIHwgJ21heCd9IG9wdGlvblByZWZpeCBab29tIGxldmVsIG9wdGlvbiBwcmVmaXggKGluaXRpYWwsIHNlY29uZGFyeSwgbWF4KVxuICAgKiBAcmV0dXJucyB7IG51bWJlciB8IHVuZGVmaW5lZCB9XG4gICAqL1xuXG5cbiAgX3BhcnNlWm9vbUxldmVsT3B0aW9uKG9wdGlvblByZWZpeCkge1xuICAgIGNvbnN0IG9wdGlvbk5hbWUgPVxuICAgIC8qKiBAdHlwZSB7J2luaXRpYWxab29tTGV2ZWwnIHwgJ3NlY29uZGFyeVpvb21MZXZlbCcgfCAnbWF4Wm9vbUxldmVsJ30gKi9cbiAgICBvcHRpb25QcmVmaXggKyAnWm9vbUxldmVsJztcbiAgICBjb25zdCBvcHRpb25WYWx1ZSA9IHRoaXMub3B0aW9uc1tvcHRpb25OYW1lXTtcblxuICAgIGlmICghb3B0aW9uVmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvblZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gb3B0aW9uVmFsdWUodGhpcyk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvblZhbHVlID09PSAnZmlsbCcpIHtcbiAgICAgIHJldHVybiB0aGlzLmZpbGw7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvblZhbHVlID09PSAnZml0Jykge1xuICAgICAgcmV0dXJuIHRoaXMuZml0O1xuICAgIH1cblxuICAgIHJldHVybiBOdW1iZXIob3B0aW9uVmFsdWUpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgem9vbSBsZXZlbCB0byB3aGljaCBpbWFnZSB3aWxsIGJlIHpvb21lZCBhZnRlciBkb3VibGUtdGFwIGdlc3R1cmUsXG4gICAqIG9yIHdoZW4gdXNlciBjbGlja3Mgb24gem9vbSBpY29uLFxuICAgKiBvciBtb3VzZS1jbGljayBvbiBpbWFnZSBpdHNlbGYuXG4gICAqIElmIHlvdSByZXR1cm4gMSBpbWFnZSB3aWxsIGJlIHpvb21lZCB0byBpdHMgb3JpZ2luYWwgc2l6ZS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cblxuXG4gIF9nZXRTZWNvbmRhcnkoKSB7XG4gICAgbGV0IGN1cnJab29tTGV2ZWwgPSB0aGlzLl9wYXJzZVpvb21MZXZlbE9wdGlvbignc2Vjb25kYXJ5Jyk7XG5cbiAgICBpZiAoY3Vyclpvb21MZXZlbCkge1xuICAgICAgcmV0dXJuIGN1cnJab29tTGV2ZWw7XG4gICAgfSAvLyAzeCBvZiBcImZpdFwiIHN0YXRlLCBidXQgbm90IGxhcmdlciB0aGFuIG9yaWdpbmFsXG5cblxuICAgIGN1cnJab29tTGV2ZWwgPSBNYXRoLm1pbigxLCB0aGlzLmZpdCAqIDMpO1xuXG4gICAgaWYgKHRoaXMuZWxlbWVudFNpemUgJiYgY3Vyclpvb21MZXZlbCAqIHRoaXMuZWxlbWVudFNpemUueCA+IE1BWF9JTUFHRV9XSURUSCkge1xuICAgICAgY3Vyclpvb21MZXZlbCA9IE1BWF9JTUFHRV9XSURUSCAvIHRoaXMuZWxlbWVudFNpemUueDtcbiAgICB9XG5cbiAgICByZXR1cm4gY3Vyclpvb21MZXZlbDtcbiAgfVxuICAvKipcbiAgICogR2V0IGluaXRpYWwgaW1hZ2Ugem9vbSBsZXZlbC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cblxuXG4gIF9nZXRJbml0aWFsKCkge1xuICAgIHJldHVybiB0aGlzLl9wYXJzZVpvb21MZXZlbE9wdGlvbignaW5pdGlhbCcpIHx8IHRoaXMuZml0O1xuICB9XG4gIC8qKlxuICAgKiBNYXhpbXVtIHpvb20gbGV2ZWwgd2hlbiB1c2VyIHpvb21zXG4gICAqIHZpYSB6b29tL3BpbmNoIGdlc3R1cmUsXG4gICAqIHZpYSBjbWQvY3RybC13aGVlbCBvciB2aWEgdHJhY2twYWQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG5cblxuICBfZ2V0TWF4KCkge1xuICAgIC8vIG1heCB6b29tIGxldmVsIGlzIHg0IGZyb20gXCJmaXQgc3RhdGVcIixcbiAgICAvLyB1c2VkIGZvciB6b29tIGdlc3R1cmUgYW5kIGN0cmwvdHJhY2twYWQgem9vbVxuICAgIHJldHVybiB0aGlzLl9wYXJzZVpvb21MZXZlbE9wdGlvbignbWF4JykgfHwgTWF0aC5tYXgoMSwgdGhpcy5maXQgKiA0KTtcbiAgfVxuXG59XG5cbi8qKlxuICogTGF6eS1sb2FkIGFuIGltYWdlXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgYm90aCBieSBMaWdodGJveCBhbmQgUGhvdG9Td2lwZSBjb3JlLFxuICogdGh1cyBpdCBjYW4gYmUgY2FsbGVkIGJlZm9yZSBkaWFsb2cgaXMgb3BlbmVkLlxuICpcbiAqIEBwYXJhbSB7U2xpZGVEYXRhfSBpdGVtRGF0YSBEYXRhIGFib3V0IHRoZSBzbGlkZVxuICogQHBhcmFtIHtQaG90b1N3aXBlQmFzZX0gaW5zdGFuY2UgUGhvdG9Td2lwZSBvciBQaG90b1N3aXBlTGlnaHRib3ggaW5zdGFuY2VcbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleFxuICogQHJldHVybnMge0NvbnRlbnR9IEltYWdlIHRoYXQgaXMgYmVpbmcgZGVjb2RlZCBvciBmYWxzZS5cbiAqL1xuXG5mdW5jdGlvbiBsYXp5TG9hZERhdGEoaXRlbURhdGEsIGluc3RhbmNlLCBpbmRleCkge1xuICBjb25zdCBjb250ZW50ID0gaW5zdGFuY2UuY3JlYXRlQ29udGVudEZyb21EYXRhKGl0ZW1EYXRhLCBpbmRleCk7XG4gIC8qKiBAdHlwZSB7Wm9vbUxldmVsIHwgdW5kZWZpbmVkfSAqL1xuXG4gIGxldCB6b29tTGV2ZWw7XG4gIGNvbnN0IHtcbiAgICBvcHRpb25zXG4gIH0gPSBpbnN0YW5jZTsgLy8gV2UgbmVlZCB0byBrbm93IGRpbWVuc2lvbnMgb2YgdGhlIGltYWdlIHRvIHByZWxvYWQgaXQsXG4gIC8vIGFzIGl0IG1pZ2h0IHVzZSBzcmNzZXQsIGFuZCB3ZSBuZWVkIHRvIGRlZmluZSBzaXplc1xuXG4gIGlmIChvcHRpb25zKSB7XG4gICAgem9vbUxldmVsID0gbmV3IFpvb21MZXZlbChvcHRpb25zLCBpdGVtRGF0YSwgLTEpO1xuICAgIGxldCB2aWV3cG9ydFNpemU7XG5cbiAgICBpZiAoaW5zdGFuY2UucHN3cCkge1xuICAgICAgdmlld3BvcnRTaXplID0gaW5zdGFuY2UucHN3cC52aWV3cG9ydFNpemU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZpZXdwb3J0U2l6ZSA9IGdldFZpZXdwb3J0U2l6ZShvcHRpb25zLCBpbnN0YW5jZSk7XG4gICAgfVxuXG4gICAgY29uc3QgcGFuQXJlYVNpemUgPSBnZXRQYW5BcmVhU2l6ZShvcHRpb25zLCB2aWV3cG9ydFNpemUsIGl0ZW1EYXRhLCBpbmRleCk7XG4gICAgem9vbUxldmVsLnVwZGF0ZShjb250ZW50LndpZHRoLCBjb250ZW50LmhlaWdodCwgcGFuQXJlYVNpemUpO1xuICB9XG5cbiAgY29udGVudC5sYXp5TG9hZCgpO1xuXG4gIGlmICh6b29tTGV2ZWwpIHtcbiAgICBjb250ZW50LnNldERpc3BsYXllZFNpemUoTWF0aC5jZWlsKGNvbnRlbnQud2lkdGggKiB6b29tTGV2ZWwuaW5pdGlhbCksIE1hdGguY2VpbChjb250ZW50LmhlaWdodCAqIHpvb21MZXZlbC5pbml0aWFsKSk7XG4gIH1cblxuICByZXR1cm4gY29udGVudDtcbn1cbi8qKlxuICogTGF6eS1sb2FkcyBzcGVjaWZpYyBzbGlkZS5cbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBib3RoIGJ5IExpZ2h0Ym94IGFuZCBQaG90b1N3aXBlIGNvcmUsXG4gKiB0aHVzIGl0IGNhbiBiZSBjYWxsZWQgYmVmb3JlIGRpYWxvZyBpcyBvcGVuZWQuXG4gKlxuICogQnkgZGVmYXVsdCwgaXQgbG9hZHMgaW1hZ2UgYmFzZWQgb24gdmlld3BvcnQgc2l6ZSBhbmQgaW5pdGlhbCB6b29tIGxldmVsLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBTbGlkZSBpbmRleFxuICogQHBhcmFtIHtQaG90b1N3aXBlQmFzZX0gaW5zdGFuY2UgUGhvdG9Td2lwZSBvciBQaG90b1N3aXBlTGlnaHRib3ggZXZlbnRhYmxlIGluc3RhbmNlXG4gKiBAcmV0dXJucyB7Q29udGVudCB8IHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBsYXp5TG9hZFNsaWRlKGluZGV4LCBpbnN0YW5jZSkge1xuICBjb25zdCBpdGVtRGF0YSA9IGluc3RhbmNlLmdldEl0ZW1EYXRhKGluZGV4KTtcblxuICBpZiAoaW5zdGFuY2UuZGlzcGF0Y2goJ2xhenlMb2FkU2xpZGUnLCB7XG4gICAgaW5kZXgsXG4gICAgaXRlbURhdGFcbiAgfSkuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHJldHVybiBsYXp5TG9hZERhdGEoaXRlbURhdGEsIGluc3RhbmNlLCBpbmRleCk7XG59XG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vcGhvdG9zd2lwZS5qc1wiKS5kZWZhdWx0fSBQaG90b1N3aXBlICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vc2xpZGUvc2xpZGUuanNcIikuU2xpZGVEYXRhfSBTbGlkZURhdGEgKi9cblxuLyoqXG4gKiBQaG90b1N3aXBlIGJhc2UgY2xhc3MgdGhhdCBjYW4gcmV0cmlldmUgZGF0YSBhYm91dCBldmVyeSBzbGlkZS5cbiAqIFNoYXJlZCBieSBQaG90b1N3aXBlIENvcmUgYW5kIFBob3RvU3dpcGUgTGlnaHRib3hcbiAqL1xuXG5jbGFzcyBQaG90b1N3aXBlQmFzZSBleHRlbmRzIEV2ZW50YWJsZSB7XG4gIC8qKlxuICAgKiBHZXQgdG90YWwgbnVtYmVyIG9mIHNsaWRlc1xuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0TnVtSXRlbXMoKSB7XG4gICAgdmFyIF90aGlzJG9wdGlvbnM7XG5cbiAgICBsZXQgbnVtSXRlbXMgPSAwO1xuICAgIGNvbnN0IGRhdGFTb3VyY2UgPSAoX3RoaXMkb3B0aW9ucyA9IHRoaXMub3B0aW9ucykgPT09IG51bGwgfHwgX3RoaXMkb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkb3B0aW9ucy5kYXRhU291cmNlO1xuXG4gICAgaWYgKGRhdGFTb3VyY2UgJiYgJ2xlbmd0aCcgaW4gZGF0YVNvdXJjZSkge1xuICAgICAgLy8gbWF5IGJlIGFuIGFycmF5IG9yIGp1c3Qgb2JqZWN0IHdpdGggbGVuZ3RoIHByb3BlcnR5XG4gICAgICBudW1JdGVtcyA9IGRhdGFTb3VyY2UubGVuZ3RoO1xuICAgIH0gZWxzZSBpZiAoZGF0YVNvdXJjZSAmJiAnZ2FsbGVyeScgaW4gZGF0YVNvdXJjZSkge1xuICAgICAgLy8gcXVlcnkgRE9NIGVsZW1lbnRzXG4gICAgICBpZiAoIWRhdGFTb3VyY2UuaXRlbXMpIHtcbiAgICAgICAgZGF0YVNvdXJjZS5pdGVtcyA9IHRoaXMuX2dldEdhbGxlcnlET01FbGVtZW50cyhkYXRhU291cmNlLmdhbGxlcnkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGF0YVNvdXJjZS5pdGVtcykge1xuICAgICAgICBudW1JdGVtcyA9IGRhdGFTb3VyY2UuaXRlbXMubGVuZ3RoO1xuICAgICAgfVxuICAgIH0gLy8gbGVnYWN5IGV2ZW50LCBiZWZvcmUgZmlsdGVycyB3ZXJlIGludHJvZHVjZWRcblxuXG4gICAgY29uc3QgZXZlbnQgPSB0aGlzLmRpc3BhdGNoKCdudW1JdGVtcycsIHtcbiAgICAgIGRhdGFTb3VyY2UsXG4gICAgICBudW1JdGVtc1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLmFwcGx5RmlsdGVycygnbnVtSXRlbXMnLCBldmVudC5udW1JdGVtcywgZGF0YVNvdXJjZSk7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7U2xpZGVEYXRhfSBzbGlkZURhdGFcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4XG4gICAqIEByZXR1cm5zIHtDb250ZW50fVxuICAgKi9cblxuXG4gIGNyZWF0ZUNvbnRlbnRGcm9tRGF0YShzbGlkZURhdGEsIGluZGV4KSB7XG4gICAgcmV0dXJuIG5ldyBDb250ZW50KHNsaWRlRGF0YSwgdGhpcywgaW5kZXgpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgaXRlbSBkYXRhIGJ5IGluZGV4LlxuICAgKlxuICAgKiBcIml0ZW0gZGF0YVwiIHNob3VsZCBjb250YWluIG5vcm1hbGl6ZWQgaW5mb3JtYXRpb24gdGhhdCBQaG90b1N3aXBlIG5lZWRzIHRvIGdlbmVyYXRlIGEgc2xpZGUuXG4gICAqIEZvciBleGFtcGxlLCBpdCBtYXkgY29udGFpbiBwcm9wZXJ0aWVzIGxpa2VcbiAgICogYHNyY2AsIGBzcmNzZXRgLCBgd2AsIGBoYCwgd2hpY2ggd2lsbCBiZSB1c2VkIHRvIGdlbmVyYXRlIGEgc2xpZGUgd2l0aCBpbWFnZS5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4XG4gICAqIEByZXR1cm5zIHtTbGlkZURhdGF9XG4gICAqL1xuXG5cbiAgZ2V0SXRlbURhdGEoaW5kZXgpIHtcbiAgICB2YXIgX3RoaXMkb3B0aW9uczI7XG5cbiAgICBjb25zdCBkYXRhU291cmNlID0gKF90aGlzJG9wdGlvbnMyID0gdGhpcy5vcHRpb25zKSA9PT0gbnVsbCB8fCBfdGhpcyRvcHRpb25zMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkb3B0aW9uczIuZGF0YVNvdXJjZTtcbiAgICAvKiogQHR5cGUge1NsaWRlRGF0YSB8IEhUTUxFbGVtZW50fSAqL1xuXG4gICAgbGV0IGRhdGFTb3VyY2VJdGVtID0ge307XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhU291cmNlKSkge1xuICAgICAgLy8gRGF0YXNvdXJjZSBpcyBhbiBhcnJheSBvZiBlbGVtZW50c1xuICAgICAgZGF0YVNvdXJjZUl0ZW0gPSBkYXRhU291cmNlW2luZGV4XTtcbiAgICB9IGVsc2UgaWYgKGRhdGFTb3VyY2UgJiYgJ2dhbGxlcnknIGluIGRhdGFTb3VyY2UpIHtcbiAgICAgIC8vIGRhdGFTb3VyY2UgaGFzIGdhbGxlcnkgcHJvcGVydHksXG4gICAgICAvLyB0aHVzIGl0IHdhcyBjcmVhdGVkIGJ5IExpZ2h0Ym94LCBiYXNlZCBvblxuICAgICAgLy8gZ2FsbGVyeSBhbmQgY2hpbGRyZW4gb3B0aW9uc1xuICAgICAgLy8gcXVlcnkgRE9NIGVsZW1lbnRzXG4gICAgICBpZiAoIWRhdGFTb3VyY2UuaXRlbXMpIHtcbiAgICAgICAgZGF0YVNvdXJjZS5pdGVtcyA9IHRoaXMuX2dldEdhbGxlcnlET01FbGVtZW50cyhkYXRhU291cmNlLmdhbGxlcnkpO1xuICAgICAgfVxuXG4gICAgICBkYXRhU291cmNlSXRlbSA9IGRhdGFTb3VyY2UuaXRlbXNbaW5kZXhdO1xuICAgIH1cblxuICAgIGxldCBpdGVtRGF0YSA9IGRhdGFTb3VyY2VJdGVtO1xuXG4gICAgaWYgKGl0ZW1EYXRhIGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgaXRlbURhdGEgPSB0aGlzLl9kb21FbGVtZW50VG9JdGVtRGF0YShpdGVtRGF0YSk7XG4gICAgfSAvLyBEaXNwYXRjaGluZyB0aGUgaXRlbURhdGEgZXZlbnQsXG4gICAgLy8gaXQncyBhIGxlZ2FjeSB2ZXJpb24gYmVmb3JlIGZpbHRlcnMgd2VyZSBpbnRyb2R1Y2VkXG5cblxuICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5kaXNwYXRjaCgnaXRlbURhdGEnLCB7XG4gICAgICBpdGVtRGF0YTogaXRlbURhdGEgfHwge30sXG4gICAgICBpbmRleFxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLmFwcGx5RmlsdGVycygnaXRlbURhdGEnLCBldmVudC5pdGVtRGF0YSwgaW5kZXgpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYXJyYXkgb2YgZ2FsbGVyeSBET00gZWxlbWVudHMsXG4gICAqIGJhc2VkIG9uIGNoaWxkU2VsZWN0b3IgYW5kIGdhbGxlcnkgZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZ2FsbGVyeUVsZW1lbnRcbiAgICogQHJldHVybnMge0hUTUxFbGVtZW50W119XG4gICAqL1xuXG5cbiAgX2dldEdhbGxlcnlET01FbGVtZW50cyhnYWxsZXJ5RWxlbWVudCkge1xuICAgIHZhciBfdGhpcyRvcHRpb25zMywgX3RoaXMkb3B0aW9uczQ7XG5cbiAgICBpZiAoKF90aGlzJG9wdGlvbnMzID0gdGhpcy5vcHRpb25zKSAhPT0gbnVsbCAmJiBfdGhpcyRvcHRpb25zMyAhPT0gdm9pZCAwICYmIF90aGlzJG9wdGlvbnMzLmNoaWxkcmVuIHx8IChfdGhpcyRvcHRpb25zNCA9IHRoaXMub3B0aW9ucykgIT09IG51bGwgJiYgX3RoaXMkb3B0aW9uczQgIT09IHZvaWQgMCAmJiBfdGhpcyRvcHRpb25zNC5jaGlsZFNlbGVjdG9yKSB7XG4gICAgICByZXR1cm4gZ2V0RWxlbWVudHNGcm9tT3B0aW9uKHRoaXMub3B0aW9ucy5jaGlsZHJlbiwgdGhpcy5vcHRpb25zLmNoaWxkU2VsZWN0b3IsIGdhbGxlcnlFbGVtZW50KSB8fCBbXTtcbiAgICB9XG5cbiAgICByZXR1cm4gW2dhbGxlcnlFbGVtZW50XTtcbiAgfVxuICAvKipcbiAgICogQ29udmVydHMgRE9NIGVsZW1lbnQgdG8gaXRlbSBkYXRhIG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCBET00gZWxlbWVudFxuICAgKiBAcmV0dXJucyB7U2xpZGVEYXRhfVxuICAgKi9cblxuXG4gIF9kb21FbGVtZW50VG9JdGVtRGF0YShlbGVtZW50KSB7XG4gICAgLyoqIEB0eXBlIHtTbGlkZURhdGF9ICovXG4gICAgY29uc3QgaXRlbURhdGEgPSB7XG4gICAgICBlbGVtZW50XG4gICAgfTtcbiAgICBjb25zdCBsaW5rRWwgPVxuICAgIC8qKiBAdHlwZSB7SFRNTEFuY2hvckVsZW1lbnR9ICovXG4gICAgZWxlbWVudC50YWdOYW1lID09PSAnQScgPyBlbGVtZW50IDogZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdhJyk7XG5cbiAgICBpZiAobGlua0VsKSB7XG4gICAgICAvLyBzcmMgY29tZXMgZnJvbSBkYXRhLXBzd3Atc3JjIGF0dHJpYnV0ZSxcbiAgICAgIC8vIGlmIGl0J3MgZW1wdHkgbGluayBocmVmIGlzIHVzZWRcbiAgICAgIGl0ZW1EYXRhLnNyYyA9IGxpbmtFbC5kYXRhc2V0LnBzd3BTcmMgfHwgbGlua0VsLmhyZWY7XG5cbiAgICAgIGlmIChsaW5rRWwuZGF0YXNldC5wc3dwU3Jjc2V0KSB7XG4gICAgICAgIGl0ZW1EYXRhLnNyY3NldCA9IGxpbmtFbC5kYXRhc2V0LnBzd3BTcmNzZXQ7XG4gICAgICB9XG5cbiAgICAgIGl0ZW1EYXRhLndpZHRoID0gbGlua0VsLmRhdGFzZXQucHN3cFdpZHRoID8gcGFyc2VJbnQobGlua0VsLmRhdGFzZXQucHN3cFdpZHRoLCAxMCkgOiAwO1xuICAgICAgaXRlbURhdGEuaGVpZ2h0ID0gbGlua0VsLmRhdGFzZXQucHN3cEhlaWdodCA/IHBhcnNlSW50KGxpbmtFbC5kYXRhc2V0LnBzd3BIZWlnaHQsIDEwKSA6IDA7IC8vIHN1cHBvcnQgbGVnYWN5IHcgJiBoIHByb3BlcnRpZXNcblxuICAgICAgaXRlbURhdGEudyA9IGl0ZW1EYXRhLndpZHRoO1xuICAgICAgaXRlbURhdGEuaCA9IGl0ZW1EYXRhLmhlaWdodDtcblxuICAgICAgaWYgKGxpbmtFbC5kYXRhc2V0LnBzd3BUeXBlKSB7XG4gICAgICAgIGl0ZW1EYXRhLnR5cGUgPSBsaW5rRWwuZGF0YXNldC5wc3dwVHlwZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdGh1bWJuYWlsRWwgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2ltZycpO1xuXG4gICAgICBpZiAodGh1bWJuYWlsRWwpIHtcbiAgICAgICAgdmFyIF90aHVtYm5haWxFbCRnZXRBdHRyaTtcblxuICAgICAgICAvLyBtc3JjIGlzIFVSTCB0byBwbGFjZWhvbGRlciBpbWFnZSB0aGF0J3MgZGlzcGxheWVkIGJlZm9yZSBsYXJnZSBpbWFnZSBpcyBsb2FkZWRcbiAgICAgICAgLy8gYnkgZGVmYXVsdCBpdCdzIGRpc3BsYXllZCBvbmx5IGZvciB0aGUgZmlyc3Qgc2xpZGVcbiAgICAgICAgaXRlbURhdGEubXNyYyA9IHRodW1ibmFpbEVsLmN1cnJlbnRTcmMgfHwgdGh1bWJuYWlsRWwuc3JjO1xuICAgICAgICBpdGVtRGF0YS5hbHQgPSAoX3RodW1ibmFpbEVsJGdldEF0dHJpID0gdGh1bWJuYWlsRWwuZ2V0QXR0cmlidXRlKCdhbHQnKSkgIT09IG51bGwgJiYgX3RodW1ibmFpbEVsJGdldEF0dHJpICE9PSB2b2lkIDAgPyBfdGh1bWJuYWlsRWwkZ2V0QXR0cmkgOiAnJztcbiAgICAgIH1cblxuICAgICAgaWYgKGxpbmtFbC5kYXRhc2V0LnBzd3BDcm9wcGVkIHx8IGxpbmtFbC5kYXRhc2V0LmNyb3BwZWQpIHtcbiAgICAgICAgaXRlbURhdGEudGh1bWJDcm9wcGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5hcHBseUZpbHRlcnMoJ2RvbUl0ZW1EYXRhJywgaXRlbURhdGEsIGVsZW1lbnQsIGxpbmtFbCk7XG4gIH1cbiAgLyoqXG4gICAqIExhenktbG9hZCBieSBzbGlkZSBkYXRhXG4gICAqXG4gICAqIEBwYXJhbSB7U2xpZGVEYXRhfSBpdGVtRGF0YSBEYXRhIGFib3V0IHRoZSBzbGlkZVxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcbiAgICogQHJldHVybnMge0NvbnRlbnR9IEltYWdlIHRoYXQgaXMgYmVpbmcgZGVjb2RlZCBvciBmYWxzZS5cbiAgICovXG5cblxuICBsYXp5TG9hZERhdGEoaXRlbURhdGEsIGluZGV4KSB7XG4gICAgcmV0dXJuIGxhenlMb2FkRGF0YShpdGVtRGF0YSwgdGhpcywgaW5kZXgpO1xuICB9XG5cbn1cblxuLyoqXG4gKiBAdGVtcGxhdGUgVFxuICogQHR5cGVkZWYge2ltcG9ydCgnLi4vdHlwZXMuanMnKS5UeXBlPFQ+fSBUeXBlPFQ+XG4gKi9cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4uL3Bob3Rvc3dpcGUuanMnKS5kZWZhdWx0fSBQaG90b1N3aXBlICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9waG90b3N3aXBlLmpzJykuUGhvdG9Td2lwZU9wdGlvbnN9IFBob3RvU3dpcGVPcHRpb25zICovXG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi9waG90b3N3aXBlLmpzJykuRGF0YVNvdXJjZX0gRGF0YVNvdXJjZSAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vcGhvdG9zd2lwZS5qcycpLlBvaW50fSBQb2ludCAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vc2xpZGUvY29udGVudC5qcycpLmRlZmF1bHR9IENvbnRlbnQgKi9cblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4uL2NvcmUvZXZlbnRhYmxlLmpzJykuUGhvdG9Td2lwZUV2ZW50c01hcH0gUGhvdG9Td2lwZUV2ZW50c01hcCAqL1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi4vY29yZS9ldmVudGFibGUuanMnKS5QaG90b1N3aXBlRmlsdGVyc01hcH0gUGhvdG9Td2lwZUZpbHRlcnNNYXAgKi9cblxuLyoqXG4gKiBAdGVtcGxhdGUge2tleW9mIFBob3RvU3dpcGVFdmVudHNNYXB9IFRcbiAqIEB0eXBlZGVmIHtpbXBvcnQoJy4uL2NvcmUvZXZlbnRhYmxlLmpzJykuRXZlbnRDYWxsYmFjazxUPn0gRXZlbnRDYWxsYmFjazxUPlxuICovXG5cbi8qKlxuICogUGhvdG9Td2lwZSBMaWdodGJveFxuICpcbiAqIC0gSWYgdXNlciBoYXMgdW5zdXBwb3J0ZWQgYnJvd3NlciBpdCBmYWxscyBiYWNrIHRvIGRlZmF1bHQgYnJvd3NlciBhY3Rpb24gKGp1c3Qgb3BlbnMgVVJMKVxuICogLSBCaW5kcyBjbGljayBldmVudCB0byBsaW5rcyB0aGF0IHNob3VsZCBvcGVuIFBob3RvU3dpcGVcbiAqIC0gcGFyc2VzIERPTSBzdHJjdHVyZSBmb3IgUGhvdG9Td2lwZSAocmV0cmlldmVzIGxhcmdlIGltYWdlIFVSTHMgYW5kIHNpemVzKVxuICogLSBJbml0aWFsaXplcyBQaG90b1N3aXBlXG4gKlxuICpcbiAqIExvYWRlciBvcHRpb25zIHVzZSB0aGUgc2FtZSBvYmplY3QgYXMgUGhvdG9Td2lwZSwgYW5kIHN1cHBvcnRzIHN1Y2ggb3B0aW9uczpcbiAqXG4gKiBnYWxsZXJ5IC0gRWxlbWVudCB8IEVsZW1lbnRbXSB8IE5vZGVMaXN0IHwgc3RyaW5nIHNlbGVjdG9yIGZvciB0aGUgZ2FsbGVyeSBlbGVtZW50XG4gKiBjaGlsZHJlbiAtIEVsZW1lbnQgfCBFbGVtZW50W10gfCBOb2RlTGlzdCB8IHN0cmluZyBzZWxlY3RvciBmb3IgdGhlIGdhbGxlcnkgY2hpbGRyZW5cbiAqXG4gKi9cblxuY2xhc3MgUGhvdG9Td2lwZUxpZ2h0Ym94IGV4dGVuZHMgUGhvdG9Td2lwZUJhc2Uge1xuICAvKipcbiAgICogQHBhcmFtIHtQaG90b1N3aXBlT3B0aW9uc30gW29wdGlvbnNdXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgc3VwZXIoKTtcbiAgICAvKiogQHR5cGUge1Bob3RvU3dpcGVPcHRpb25zfSAqL1xuXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB0aGlzLl91aWQgPSAwO1xuICAgIHRoaXMuc2hvdWxkT3BlbiA9IGZhbHNlO1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0NvbnRlbnQgfCB1bmRlZmluZWR9XG4gICAgICovXG5cbiAgICB0aGlzLl9wcmVsb2FkZWRDb250ZW50ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMub25UaHVtYm5haWxzQ2xpY2sgPSB0aGlzLm9uVGh1bWJuYWlsc0NsaWNrLmJpbmQodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgbGlnaHRib3gsIHNob3VsZCBiZSBjYWxsZWQgb25seSBvbmNlLlxuICAgKiBJdCdzIG5vdCBpbmNsdWRlZCBpbiB0aGUgbWFpbiBjb25zdHJ1Y3Rvciwgc28geW91IG1heSBiaW5kIGV2ZW50cyBiZWZvcmUgaXQuXG4gICAqL1xuXG5cbiAgaW5pdCgpIHtcbiAgICAvLyBCaW5kIGNsaWNrIGV2ZW50cyB0byBlYWNoIGdhbGxlcnlcbiAgICBnZXRFbGVtZW50c0Zyb21PcHRpb24odGhpcy5vcHRpb25zLmdhbGxlcnksIHRoaXMub3B0aW9ucy5nYWxsZXJ5U2VsZWN0b3IpLmZvckVhY2goZ2FsbGVyeUVsZW1lbnQgPT4ge1xuICAgICAgZ2FsbGVyeUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uVGh1bWJuYWlsc0NsaWNrLCBmYWxzZSk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZVxuICAgKi9cblxuXG4gIG9uVGh1bWJuYWlsc0NsaWNrKGUpIHtcbiAgICAvLyBFeGl0IGFuZCBhbGxvdyBkZWZhdWx0IGJyb3dzZXIgYWN0aW9uIGlmOlxuICAgIGlmIChzcGVjaWFsS2V5VXNlZChlKSAvLyAuLi4gaWYgY2xpY2tlZCB3aXRoIGEgc3BlY2lhbCBrZXkgKGN0cmwvY21kLi4uKVxuICAgIHx8IHdpbmRvdy5wc3dwKSB7XG4gICAgICAvLyAuLi4gaWYgUGhvdG9Td2lwZSBpcyBhbHJlYWR5IG9wZW5cbiAgICAgIHJldHVybjtcbiAgICB9IC8vIElmIGJvdGggY2xpZW50WCBhbmQgY2xpZW50WSBhcmUgMCBvciBub3QgZGVmaW5lZCxcbiAgICAvLyB0aGUgZXZlbnQgaXMgbGlrZWx5IHRyaWdnZXJlZCBieSBrZXlib2FyZCxcbiAgICAvLyBzbyB3ZSBkbyBub3QgcGFzcyB0aGUgaW5pdGlhbFBvaW50XG4gICAgLy9cbiAgICAvLyBOb3RlIHRoYXQgc29tZSBzY3JlZW4gcmVhZGVycyBlbXVsYXRlIHRoZSBtb3VzZSBwb3NpdGlvbixcbiAgICAvLyBzbyBpdCdzIG5vdCB0aGUgaWRlYWwgd2F5IHRvIGRldGVjdCB0aGVtLlxuICAgIC8vXG5cbiAgICAvKiogQHR5cGUge1BvaW50IHwgbnVsbH0gKi9cblxuXG4gICAgbGV0IGluaXRpYWxQb2ludCA9IHtcbiAgICAgIHg6IGUuY2xpZW50WCxcbiAgICAgIHk6IGUuY2xpZW50WVxuICAgIH07XG5cbiAgICBpZiAoIWluaXRpYWxQb2ludC54ICYmICFpbml0aWFsUG9pbnQueSkge1xuICAgICAgaW5pdGlhbFBvaW50ID0gbnVsbDtcbiAgICB9XG5cbiAgICBsZXQgY2xpY2tlZEluZGV4ID0gdGhpcy5nZXRDbGlja2VkSW5kZXgoZSk7XG4gICAgY2xpY2tlZEluZGV4ID0gdGhpcy5hcHBseUZpbHRlcnMoJ2NsaWNrZWRJbmRleCcsIGNsaWNrZWRJbmRleCwgZSwgdGhpcyk7XG4gICAgLyoqIEB0eXBlIHtEYXRhU291cmNlfSAqL1xuXG4gICAgY29uc3QgZGF0YVNvdXJjZSA9IHtcbiAgICAgIGdhbGxlcnk6XG4gICAgICAvKiogQHR5cGUge0hUTUxFbGVtZW50fSAqL1xuICAgICAgZS5jdXJyZW50VGFyZ2V0XG4gICAgfTtcblxuICAgIGlmIChjbGlja2VkSW5kZXggPj0gMCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5sb2FkQW5kT3BlbihjbGlja2VkSW5kZXgsIGRhdGFTb3VyY2UsIGluaXRpYWxQb2ludCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgaW5kZXggb2YgZ2FsbGVyeSBpdGVtIHRoYXQgd2FzIGNsaWNrZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZSBjbGljayBldmVudFxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cblxuXG4gIGdldENsaWNrZWRJbmRleChlKSB7XG4gICAgLy8gbGVnYWN5IG9wdGlvblxuICAgIGlmICh0aGlzLm9wdGlvbnMuZ2V0Q2xpY2tlZEluZGV4Rm4pIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuZ2V0Q2xpY2tlZEluZGV4Rm4uY2FsbCh0aGlzLCBlKTtcbiAgICB9XG5cbiAgICBjb25zdCBjbGlja2VkVGFyZ2V0ID1cbiAgICAvKiogQHR5cGUge0hUTUxFbGVtZW50fSAqL1xuICAgIGUudGFyZ2V0O1xuICAgIGNvbnN0IGNoaWxkRWxlbWVudHMgPSBnZXRFbGVtZW50c0Zyb21PcHRpb24odGhpcy5vcHRpb25zLmNoaWxkcmVuLCB0aGlzLm9wdGlvbnMuY2hpbGRTZWxlY3RvcixcbiAgICAvKiogQHR5cGUge0hUTUxFbGVtZW50fSAqL1xuICAgIGUuY3VycmVudFRhcmdldCk7XG4gICAgY29uc3QgY2xpY2tlZENoaWxkSW5kZXggPSBjaGlsZEVsZW1lbnRzLmZpbmRJbmRleChjaGlsZCA9PiBjaGlsZCA9PT0gY2xpY2tlZFRhcmdldCB8fCBjaGlsZC5jb250YWlucyhjbGlja2VkVGFyZ2V0KSk7XG5cbiAgICBpZiAoY2xpY2tlZENoaWxkSW5kZXggIT09IC0xKSB7XG4gICAgICByZXR1cm4gY2xpY2tlZENoaWxkSW5kZXg7XG4gICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMuY2hpbGRyZW4gfHwgdGhpcy5vcHRpb25zLmNoaWxkU2VsZWN0b3IpIHtcbiAgICAgIC8vIGNsaWNrIHdhc24ndCBvbiBhIGNoaWxkIGVsZW1lbnRcbiAgICAgIHJldHVybiAtMTtcbiAgICB9IC8vIFRoZXJlIGlzIG9ubHkgb25lIGl0ZW0gKHdoaWNoIGlzIHRoZSBnYWxsZXJ5KVxuXG5cbiAgICByZXR1cm4gMDtcbiAgfVxuICAvKipcbiAgICogTG9hZCBhbmQgb3BlbiBQaG90b1N3aXBlXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0ge0RhdGFTb3VyY2V9IFtkYXRhU291cmNlXVxuICAgKiBAcGFyYW0ge1BvaW50IHwgbnVsbH0gW2luaXRpYWxQb2ludF1cbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuXG5cbiAgbG9hZEFuZE9wZW4oaW5kZXgsIGRhdGFTb3VyY2UsIGluaXRpYWxQb2ludCkge1xuICAgIC8vIENoZWNrIGlmIHRoZSBnYWxsZXJ5IGlzIGFscmVhZHkgb3BlblxuICAgIGlmICh3aW5kb3cucHN3cCB8fCAhdGhpcy5vcHRpb25zKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSAvLyBVc2UgdGhlIGZpcnN0IGdhbGxlcnkgZWxlbWVudCBpZiBkYXRhU291cmNlIGlzIG5vdCBwcm92aWRlZFxuXG5cbiAgICBpZiAoIWRhdGFTb3VyY2UgJiYgdGhpcy5vcHRpb25zLmdhbGxlcnkgJiYgdGhpcy5vcHRpb25zLmNoaWxkcmVuKSB7XG4gICAgICBjb25zdCBnYWxsZXJ5RWxlbWVudHMgPSBnZXRFbGVtZW50c0Zyb21PcHRpb24odGhpcy5vcHRpb25zLmdhbGxlcnkpO1xuXG4gICAgICBpZiAoZ2FsbGVyeUVsZW1lbnRzWzBdKSB7XG4gICAgICAgIGRhdGFTb3VyY2UgPSB7XG4gICAgICAgICAgZ2FsbGVyeTogZ2FsbGVyeUVsZW1lbnRzWzBdXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSAvLyBzZXQgaW5pdGlhbCBpbmRleFxuXG5cbiAgICB0aGlzLm9wdGlvbnMuaW5kZXggPSBpbmRleDsgLy8gZGVmaW5lIG9wdGlvbnMgZm9yIFBob3RvU3dpcGUgY29uc3RydWN0b3JcblxuICAgIHRoaXMub3B0aW9ucy5pbml0aWFsUG9pbnRlclBvcyA9IGluaXRpYWxQb2ludDtcbiAgICB0aGlzLnNob3VsZE9wZW4gPSB0cnVlO1xuICAgIHRoaXMucHJlbG9hZChpbmRleCwgZGF0YVNvdXJjZSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIExvYWQgdGhlIG1haW4gbW9kdWxlIGFuZCB0aGUgc2xpZGUgY29udGVudCBieSBpbmRleFxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtEYXRhU291cmNlfSBbZGF0YVNvdXJjZV1cbiAgICovXG5cblxuICBwcmVsb2FkKGluZGV4LCBkYXRhU291cmNlKSB7XG4gICAgY29uc3Qge1xuICAgICAgb3B0aW9uc1xuICAgIH0gPSB0aGlzO1xuXG4gICAgaWYgKGRhdGFTb3VyY2UpIHtcbiAgICAgIG9wdGlvbnMuZGF0YVNvdXJjZSA9IGRhdGFTb3VyY2U7XG4gICAgfSAvLyBBZGQgdGhlIG1haW4gbW9kdWxlXG5cbiAgICAvKiogQHR5cGUge1Byb21pc2U8VHlwZTxQaG90b1N3aXBlPj5bXX0gKi9cblxuXG4gICAgY29uc3QgcHJvbWlzZUFycmF5ID0gW107XG4gICAgY29uc3QgcHN3cE1vZHVsZVR5cGUgPSB0eXBlb2Ygb3B0aW9ucy5wc3dwTW9kdWxlO1xuXG4gICAgaWYgKGlzUHN3cENsYXNzKG9wdGlvbnMucHN3cE1vZHVsZSkpIHtcbiAgICAgIHByb21pc2VBcnJheS5wdXNoKFByb21pc2UucmVzb2x2ZShcbiAgICAgIC8qKiBAdHlwZSB7VHlwZTxQaG90b1N3aXBlPn0gKi9cbiAgICAgIG9wdGlvbnMucHN3cE1vZHVsZSkpO1xuICAgIH0gZWxzZSBpZiAocHN3cE1vZHVsZVR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Bzd3BNb2R1bGUgYXMgc3RyaW5nIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQnKTtcbiAgICB9IGVsc2UgaWYgKHBzd3BNb2R1bGVUeXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBwcm9taXNlQXJyYXkucHVzaChcbiAgICAgIC8qKiBAdHlwZSB7KCkgPT4gUHJvbWlzZTxUeXBlPFBob3RvU3dpcGU+Pn0gKi9cbiAgICAgIG9wdGlvbnMucHN3cE1vZHVsZSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdwc3dwTW9kdWxlIGlzIG5vdCB2YWxpZCcpO1xuICAgIH0gLy8gQWRkIGN1c3RvbS1kZWZpbmVkIHByb21pc2UsIGlmIGFueVxuXG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMub3BlblByb21pc2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIC8vIGFsbG93IGRldmVsb3BlcnMgdG8gcGVyZm9ybSBzb21lIHRhc2sgYmVmb3JlIG9wZW5pbmdcbiAgICAgIHByb21pc2VBcnJheS5wdXNoKG9wdGlvbnMub3BlblByb21pc2UoKSk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMucHJlbG9hZEZpcnN0U2xpZGUgIT09IGZhbHNlICYmIGluZGV4ID49IDApIHtcbiAgICAgIHRoaXMuX3ByZWxvYWRlZENvbnRlbnQgPSBsYXp5TG9hZFNsaWRlKGluZGV4LCB0aGlzKTtcbiAgICB9IC8vIFdhaXQgdGlsbCBhbGwgcHJvbWlzZXMgcmVzb2x2ZSBhbmQgb3BlbiBQaG90b1N3aXBlXG5cblxuICAgIGNvbnN0IHVpZCA9ICsrdGhpcy5fdWlkO1xuICAgIFByb21pc2UuYWxsKHByb21pc2VBcnJheSkudGhlbihpdGVyYWJsZU1vZHVsZXMgPT4ge1xuICAgICAgaWYgKHRoaXMuc2hvdWxkT3Blbikge1xuICAgICAgICBjb25zdCBtYWluTW9kdWxlID0gaXRlcmFibGVNb2R1bGVzWzBdO1xuXG4gICAgICAgIHRoaXMuX29wZW5QaG90b3N3aXBlKG1haW5Nb2R1bGUsIHVpZCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7VHlwZTxQaG90b1N3aXBlPiB8IHsgZGVmYXVsdDogVHlwZTxQaG90b1N3aXBlPiB9fSBtb2R1bGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IHVpZFxuICAgKi9cblxuXG4gIF9vcGVuUGhvdG9zd2lwZShtb2R1bGUsIHVpZCkge1xuICAgIC8vIENhbmNlbCBvcGVuaW5nIGlmIFVJRCBkb2Vzbid0IG1hdGNoIHRoZSBjdXJyZW50IG9uZVxuICAgIC8vIChpZiB1c2VyIGNsaWNrZWQgb24gYW5vdGhlciBnYWxsZXJ5IGl0ZW0gYmVmb3JlIGN1cnJlbnQgd2FzIGxvYWRlZCkuXG4gICAgLy9cbiAgICAvLyBPciBpZiBzaG91bGRPcGVuIGZsYWcgaXMgc2V0IHRvIGZhbHNlXG4gICAgLy8gKGRldmVsb3BlciBtYXkgbW9kaWZ5IGl0IHZpYSBwdWJsaWMgQVBJKVxuICAgIGlmICh1aWQgIT09IHRoaXMuX3VpZCAmJiB0aGlzLnNob3VsZE9wZW4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnNob3VsZE9wZW4gPSBmYWxzZTsgLy8gUGhvdG9Td2lwZSBpcyBhbHJlYWR5IG9wZW5cblxuICAgIGlmICh3aW5kb3cucHN3cCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXNzIGRhdGEgdG8gUGhvdG9Td2lwZSBhbmQgb3BlbiBpbml0XG4gICAgICpcbiAgICAgKiBAdHlwZSB7UGhvdG9Td2lwZX1cbiAgICAgKi9cblxuXG4gICAgY29uc3QgcHN3cCA9IHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnID8gbmV3IG1vZHVsZS5kZWZhdWx0KHRoaXMub3B0aW9ucykgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgIDogbmV3IG1vZHVsZSh0aGlzLm9wdGlvbnMpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgICB0aGlzLnBzd3AgPSBwc3dwO1xuICAgIHdpbmRvdy5wc3dwID0gcHN3cDsgLy8gbWFwIGxpc3RlbmVycyBmcm9tIExpZ2h0Ym94IHRvIFBob3RvU3dpcGUgQ29yZVxuXG4gICAgLyoqIEB0eXBlIHsoa2V5b2YgUGhvdG9Td2lwZUV2ZW50c01hcClbXX0gKi9cblxuICAgIE9iamVjdC5rZXlzKHRoaXMuX2xpc3RlbmVycykuZm9yRWFjaChuYW1lID0+IHtcbiAgICAgIHZhciBfdGhpcyRfbGlzdGVuZXJzJG5hbWU7XG5cbiAgICAgIChfdGhpcyRfbGlzdGVuZXJzJG5hbWUgPSB0aGlzLl9saXN0ZW5lcnNbbmFtZV0pID09PSBudWxsIHx8IF90aGlzJF9saXN0ZW5lcnMkbmFtZSA9PT0gdm9pZCAwIHx8IF90aGlzJF9saXN0ZW5lcnMkbmFtZS5mb3JFYWNoKGZuID0+IHtcbiAgICAgICAgcHN3cC5vbihuYW1lLFxuICAgICAgICAvKiogQHR5cGUge0V2ZW50Q2FsbGJhY2s8dHlwZW9mIG5hbWU+fSAqL1xuICAgICAgICBmbik7XG4gICAgICB9KTtcbiAgICB9KTsgLy8gc2FtZSB3aXRoIGZpbHRlcnNcblxuICAgIC8qKiBAdHlwZSB7KGtleW9mIFBob3RvU3dpcGVGaWx0ZXJzTWFwKVtdfSAqL1xuXG4gICAgT2JqZWN0LmtleXModGhpcy5fZmlsdGVycykuZm9yRWFjaChuYW1lID0+IHtcbiAgICAgIHZhciBfdGhpcyRfZmlsdGVycyRuYW1lO1xuXG4gICAgICAoX3RoaXMkX2ZpbHRlcnMkbmFtZSA9IHRoaXMuX2ZpbHRlcnNbbmFtZV0pID09PSBudWxsIHx8IF90aGlzJF9maWx0ZXJzJG5hbWUgPT09IHZvaWQgMCB8fCBfdGhpcyRfZmlsdGVycyRuYW1lLmZvckVhY2goZmlsdGVyID0+IHtcbiAgICAgICAgcHN3cC5hZGRGaWx0ZXIobmFtZSwgZmlsdGVyLmZuLCBmaWx0ZXIucHJpb3JpdHkpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5fcHJlbG9hZGVkQ29udGVudCkge1xuICAgICAgcHN3cC5jb250ZW50TG9hZGVyLmFkZFRvQ2FjaGUodGhpcy5fcHJlbG9hZGVkQ29udGVudCk7XG4gICAgICB0aGlzLl9wcmVsb2FkZWRDb250ZW50ID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHBzd3Aub24oJ2Rlc3Ryb3knLCAoKSA9PiB7XG4gICAgICAvLyBjbGVhbiB1cCBwdWJsaWMgdmFyaWFibGVzXG4gICAgICB0aGlzLnBzd3AgPSB1bmRlZmluZWQ7XG4gICAgICBkZWxldGUgd2luZG93LnBzd3A7XG4gICAgfSk7XG4gICAgcHN3cC5pbml0KCk7XG4gIH1cbiAgLyoqXG4gICAqIFVuYmluZHMgYWxsIGV2ZW50cywgY2xvc2VzIFBob3RvU3dpcGUgaWYgaXQncyBvcGVuLlxuICAgKi9cblxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdmFyIF90aGlzJHBzd3A7XG5cbiAgICAoX3RoaXMkcHN3cCA9IHRoaXMucHN3cCkgPT09IG51bGwgfHwgX3RoaXMkcHN3cCA9PT0gdm9pZCAwIHx8IF90aGlzJHBzd3AuZGVzdHJveSgpO1xuICAgIHRoaXMuc2hvdWxkT3BlbiA9IGZhbHNlO1xuICAgIHRoaXMuX2xpc3RlbmVycyA9IHt9O1xuICAgIGdldEVsZW1lbnRzRnJvbU9wdGlvbih0aGlzLm9wdGlvbnMuZ2FsbGVyeSwgdGhpcy5vcHRpb25zLmdhbGxlcnlTZWxlY3RvcikuZm9yRWFjaChnYWxsZXJ5RWxlbWVudCA9PiB7XG4gICAgICBnYWxsZXJ5RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25UaHVtYm5haWxzQ2xpY2ssIGZhbHNlKTtcbiAgICB9KTtcbiAgfVxuXG59XG5cbmV4cG9ydCB7IFBob3RvU3dpcGVMaWdodGJveCBhcyBkZWZhdWx0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1waG90b3N3aXBlLWxpZ2h0Ym94LmVzbS5qcy5tYXBcbiJdfQ==
